var QV=Object.defineProperty;var XV=(t,e,n)=>e in t?QV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Oi=(t,e,n)=>XV(t,typeof e!="symbol"?e+"":e,n);function ZV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Xr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var j0={exports:{}},$d={},F0={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZA;function e$(){if(ZA)return ut;ZA=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function v(Y){return Y===null||typeof Y!="object"?null:(Y=p&&Y[p]||Y["@@iterator"],typeof Y=="function"?Y:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,S={};function _(Y,ie,fe){this.props=Y,this.context=ie,this.refs=S,this.updater=fe||w}_.prototype.isReactComponent={},_.prototype.setState=function(Y,ie){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,ie,"setState")},_.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function N(){}N.prototype=_.prototype;function j(Y,ie,fe){this.props=Y,this.context=ie,this.refs=S,this.updater=fe||w}var F=j.prototype=new N;F.constructor=j,E(F,_.prototype),F.isPureReactComponent=!0;var q=Array.isArray,V=Object.prototype.hasOwnProperty,$={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function D(Y,ie,fe){var _e,$e={},Ge=null,Ue=null;if(ie!=null)for(_e in ie.ref!==void 0&&(Ue=ie.ref),ie.key!==void 0&&(Ge=""+ie.key),ie)V.call(ie,_e)&&!k.hasOwnProperty(_e)&&($e[_e]=ie[_e]);var ze=arguments.length-2;if(ze===1)$e.children=fe;else if(1<ze){for(var H=Array(ze),oe=0;oe<ze;oe++)H[oe]=arguments[oe+2];$e.children=H}if(Y&&Y.defaultProps)for(_e in ze=Y.defaultProps,ze)$e[_e]===void 0&&($e[_e]=ze[_e]);return{$$typeof:t,type:Y,key:Ge,ref:Ue,props:$e,_owner:$.current}}function O(Y,ie){return{$$typeof:t,type:Y.type,key:ie,ref:Y.ref,props:Y.props,_owner:Y._owner}}function z(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function U(Y){var ie={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(fe){return ie[fe]})}var M=/\/+/g;function P(Y,ie){return typeof Y=="object"&&Y!==null&&Y.key!=null?U(""+Y.key):ie.toString(36)}function me(Y,ie,fe,_e,$e){var Ge=typeof Y;(Ge==="undefined"||Ge==="boolean")&&(Y=null);var Ue=!1;if(Y===null)Ue=!0;else switch(Ge){case"string":case"number":Ue=!0;break;case"object":switch(Y.$$typeof){case t:case e:Ue=!0}}if(Ue)return Ue=Y,$e=$e(Ue),Y=_e===""?"."+P(Ue,0):_e,q($e)?(fe="",Y!=null&&(fe=Y.replace(M,"$&/")+"/"),me($e,ie,fe,"",function(oe){return oe})):$e!=null&&(z($e)&&($e=O($e,fe+(!$e.key||Ue&&Ue.key===$e.key?"":(""+$e.key).replace(M,"$&/")+"/")+Y)),ie.push($e)),1;if(Ue=0,_e=_e===""?".":_e+":",q(Y))for(var ze=0;ze<Y.length;ze++){Ge=Y[ze];var H=_e+P(Ge,ze);Ue+=me(Ge,ie,fe,H,$e)}else if(H=v(Y),typeof H=="function")for(Y=H.call(Y),ze=0;!(Ge=Y.next()).done;)Ge=Ge.value,H=_e+P(Ge,ze++),Ue+=me(Ge,ie,fe,H,$e);else if(Ge==="object")throw ie=String(Y),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return Ue}function ce(Y,ie,fe){if(Y==null)return Y;var _e=[],$e=0;return me(Y,_e,"","",function(Ge){return ie.call(fe,Ge,$e++)}),_e}function ge(Y){if(Y._status===-1){var ie=Y._result;ie=ie(),ie.then(function(fe){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=fe)},function(fe){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=fe)}),Y._status===-1&&(Y._status=0,Y._result=ie)}if(Y._status===1)return Y._result.default;throw Y._result}var xe={current:null},le={transition:null},ne={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:le,ReactCurrentOwner:$};function de(){throw Error("act(...) is not supported in production builds of React.")}return ut.Children={map:ce,forEach:function(Y,ie,fe){ce(Y,function(){ie.apply(this,arguments)},fe)},count:function(Y){var ie=0;return ce(Y,function(){ie++}),ie},toArray:function(Y){return ce(Y,function(ie){return ie})||[]},only:function(Y){if(!z(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},ut.Component=_,ut.Fragment=n,ut.Profiler=i,ut.PureComponent=j,ut.StrictMode=r,ut.Suspense=c,ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,ut.act=de,ut.cloneElement=function(Y,ie,fe){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var _e=E({},Y.props),$e=Y.key,Ge=Y.ref,Ue=Y._owner;if(ie!=null){if(ie.ref!==void 0&&(Ge=ie.ref,Ue=$.current),ie.key!==void 0&&($e=""+ie.key),Y.type&&Y.type.defaultProps)var ze=Y.type.defaultProps;for(H in ie)V.call(ie,H)&&!k.hasOwnProperty(H)&&(_e[H]=ie[H]===void 0&&ze!==void 0?ze[H]:ie[H])}var H=arguments.length-2;if(H===1)_e.children=fe;else if(1<H){ze=Array(H);for(var oe=0;oe<H;oe++)ze[oe]=arguments[oe+2];_e.children=ze}return{$$typeof:t,type:Y.type,key:$e,ref:Ge,props:_e,_owner:Ue}},ut.createContext=function(Y){return Y={$$typeof:s,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:o,_context:Y},Y.Consumer=Y},ut.createElement=D,ut.createFactory=function(Y){var ie=D.bind(null,Y);return ie.type=Y,ie},ut.createRef=function(){return{current:null}},ut.forwardRef=function(Y){return{$$typeof:a,render:Y}},ut.isValidElement=z,ut.lazy=function(Y){return{$$typeof:f,_payload:{_status:-1,_result:Y},_init:ge}},ut.memo=function(Y,ie){return{$$typeof:u,type:Y,compare:ie===void 0?null:ie}},ut.startTransition=function(Y){var ie=le.transition;le.transition={};try{Y()}finally{le.transition=ie}},ut.unstable_act=de,ut.useCallback=function(Y,ie){return xe.current.useCallback(Y,ie)},ut.useContext=function(Y){return xe.current.useContext(Y)},ut.useDebugValue=function(){},ut.useDeferredValue=function(Y){return xe.current.useDeferredValue(Y)},ut.useEffect=function(Y,ie){return xe.current.useEffect(Y,ie)},ut.useId=function(){return xe.current.useId()},ut.useImperativeHandle=function(Y,ie,fe){return xe.current.useImperativeHandle(Y,ie,fe)},ut.useInsertionEffect=function(Y,ie){return xe.current.useInsertionEffect(Y,ie)},ut.useLayoutEffect=function(Y,ie){return xe.current.useLayoutEffect(Y,ie)},ut.useMemo=function(Y,ie){return xe.current.useMemo(Y,ie)},ut.useReducer=function(Y,ie,fe){return xe.current.useReducer(Y,ie,fe)},ut.useRef=function(Y){return xe.current.useRef(Y)},ut.useState=function(Y){return xe.current.useState(Y)},ut.useSyncExternalStore=function(Y,ie,fe){return xe.current.useSyncExternalStore(Y,ie,fe)},ut.useTransition=function(){return xe.current.useTransition()},ut.version="18.3.1",ut}var eC;function Lu(){return eC||(eC=1,F0.exports=e$()),F0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tC;function t$(){if(tC)return $d;tC=1;var t=Lu(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,c,u){var f,p={},v=null,w=null;u!==void 0&&(v=""+u),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(w=c.ref);for(f in c)r.call(c,f)&&!o.hasOwnProperty(f)&&(p[f]=c[f]);if(a&&a.defaultProps)for(f in c=a.defaultProps,c)p[f]===void 0&&(p[f]=c[f]);return{$$typeof:e,type:a,key:v,ref:w,props:p,_owner:i.current}}return $d.Fragment=n,$d.jsx=s,$d.jsxs=s,$d}var nC;function n$(){return nC||(nC=1,j0.exports=t$()),j0.exports}var h=n$(),I=Lu();const Vi=Xr(I),ID=ZV({__proto__:null,default:Vi},[I]);var Cp={},U0={exports:{}},Ar={},V0={exports:{}},$0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rC;function r$(){return rC||(rC=1,(function(t){function e(le,ne){var de=le.length;le.push(ne);e:for(;0<de;){var Y=de-1>>>1,ie=le[Y];if(0<i(ie,ne))le[Y]=ne,le[de]=ie,de=Y;else break e}}function n(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var ne=le[0],de=le.pop();if(de!==ne){le[0]=de;e:for(var Y=0,ie=le.length,fe=ie>>>1;Y<fe;){var _e=2*(Y+1)-1,$e=le[_e],Ge=_e+1,Ue=le[Ge];if(0>i($e,de))Ge<ie&&0>i(Ue,$e)?(le[Y]=Ue,le[Ge]=de,Y=Ge):(le[Y]=$e,le[_e]=de,Y=_e);else if(Ge<ie&&0>i(Ue,de))le[Y]=Ue,le[Ge]=de,Y=Ge;else break e}}return ne}function i(le,ne){var de=le.sortIndex-ne.sortIndex;return de!==0?de:le.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],u=[],f=1,p=null,v=3,w=!1,E=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(le){for(var ne=n(u);ne!==null;){if(ne.callback===null)r(u);else if(ne.startTime<=le)r(u),ne.sortIndex=ne.expirationTime,e(c,ne);else break;ne=n(u)}}function q(le){if(S=!1,F(le),!E)if(n(c)!==null)E=!0,ge(V);else{var ne=n(u);ne!==null&&xe(q,ne.startTime-le)}}function V(le,ne){E=!1,S&&(S=!1,N(D),D=-1),w=!0;var de=v;try{for(F(ne),p=n(c);p!==null&&(!(p.expirationTime>ne)||le&&!U());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,v=p.priorityLevel;var ie=Y(p.expirationTime<=ne);ne=t.unstable_now(),typeof ie=="function"?p.callback=ie:p===n(c)&&r(c),F(ne)}else r(c);p=n(c)}if(p!==null)var fe=!0;else{var _e=n(u);_e!==null&&xe(q,_e.startTime-ne),fe=!1}return fe}finally{p=null,v=de,w=!1}}var $=!1,k=null,D=-1,O=5,z=-1;function U(){return!(t.unstable_now()-z<O)}function M(){if(k!==null){var le=t.unstable_now();z=le;var ne=!0;try{ne=k(!0,le)}finally{ne?P():($=!1,k=null)}}else $=!1}var P;if(typeof j=="function")P=function(){j(M)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,ce=me.port2;me.port1.onmessage=M,P=function(){ce.postMessage(null)}}else P=function(){_(M,0)};function ge(le){k=le,$||($=!0,P())}function xe(le,ne){D=_(function(){le(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(le){le.callback=null},t.unstable_continueExecution=function(){E||w||(E=!0,ge(V))},t.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<le?Math.floor(1e3/le):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(le){switch(v){case 1:case 2:case 3:var ne=3;break;default:ne=v}var de=v;v=ne;try{return le()}finally{v=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(le,ne){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var de=v;v=le;try{return ne()}finally{v=de}},t.unstable_scheduleCallback=function(le,ne,de){var Y=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Y+de:Y):de=Y,le){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=de+ie,le={id:f++,callback:ne,priorityLevel:le,startTime:de,expirationTime:ie,sortIndex:-1},de>Y?(le.sortIndex=de,e(u,le),n(c)===null&&le===n(u)&&(S?(N(D),D=-1):S=!0,xe(q,de-Y))):(le.sortIndex=ie,e(c,le),E||w||(E=!0,ge(V))),le},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(le){var ne=v;return function(){var de=v;v=ne;try{return le.apply(this,arguments)}finally{v=de}}}})($0)),$0}var iC;function i$(){return iC||(iC=1,V0.exports=r$()),V0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oC;function o$(){if(oC)return Ar;oC=1;var t=Lu(),e=i$();function n(l){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+l,m=1;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(l,d){s(l,d),s(l+"Capture",d)}function s(l,d){for(i[l]=d,l=0;l<d.length;l++)r.add(d[l])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function v(l){return c.call(p,l)?!0:c.call(f,l)?!1:u.test(l)?p[l]=!0:(f[l]=!0,!1)}function w(l,d,m,b){if(m!==null&&m.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return b?!1:m!==null?!m.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function E(l,d,m,b){if(d===null||typeof d>"u"||w(l,d,m,b))return!0;if(b)return!1;if(m!==null)switch(m.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function S(l,d,m,b,T,A,L){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=b,this.attributeNamespace=T,this.mustUseProperty=m,this.propertyName=l,this.type=d,this.sanitizeURL=A,this.removeEmptyString=L}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){_[l]=new S(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var d=l[0];_[d]=new S(d,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){_[l]=new S(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){_[l]=new S(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){_[l]=new S(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){_[l]=new S(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){_[l]=new S(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){_[l]=new S(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){_[l]=new S(l,5,!1,l.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function j(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var d=l.replace(N,j);_[d]=new S(d,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var d=l.replace(N,j);_[d]=new S(d,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var d=l.replace(N,j);_[d]=new S(d,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){_[l]=new S(l,1,!1,l.toLowerCase(),null,!1,!1)}),_.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){_[l]=new S(l,1,!1,l.toLowerCase(),null,!0,!0)});function F(l,d,m,b){var T=_.hasOwnProperty(d)?_[d]:null;(T!==null?T.type!==0:b||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(E(d,m,T,b)&&(m=null),b||T===null?v(d)&&(m===null?l.removeAttribute(d):l.setAttribute(d,""+m)):T.mustUseProperty?l[T.propertyName]=m===null?T.type===3?!1:"":m:(d=T.attributeName,b=T.attributeNamespace,m===null?l.removeAttribute(d):(T=T.type,m=T===3||T===4&&m===!0?"":""+m,b?l.setAttributeNS(b,d,m):l.setAttribute(d,m))))}var q=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),$=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),U=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),le=Symbol.iterator;function ne(l){return l===null||typeof l!="object"?null:(l=le&&l[le]||l["@@iterator"],typeof l=="function"?l:null)}var de=Object.assign,Y;function ie(l){if(Y===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);Y=d&&d[1]||""}return`
`+Y+l}var fe=!1;function _e(l,d){if(!l||fe)return"";fe=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(te){var b=te}Reflect.construct(l,[],d)}else{try{d.call()}catch(te){b=te}l.call(d.prototype)}else{try{throw Error()}catch(te){b=te}l()}}catch(te){if(te&&b&&typeof te.stack=="string"){for(var T=te.stack.split(`
`),A=b.stack.split(`
`),L=T.length-1,W=A.length-1;1<=L&&0<=W&&T[L]!==A[W];)W--;for(;1<=L&&0<=W;L--,W--)if(T[L]!==A[W]){if(L!==1||W!==1)do if(L--,W--,0>W||T[L]!==A[W]){var J=`
`+T[L].replace(" at new "," at ");return l.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",l.displayName)),J}while(1<=L&&0<=W);break}}}finally{fe=!1,Error.prepareStackTrace=m}return(l=l?l.displayName||l.name:"")?ie(l):""}function $e(l){switch(l.tag){case 5:return ie(l.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return l=_e(l.type,!1),l;case 11:return l=_e(l.type.render,!1),l;case 1:return l=_e(l.type,!0),l;default:return""}}function Ge(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case k:return"Fragment";case $:return"Portal";case O:return"Profiler";case D:return"StrictMode";case P:return"Suspense";case me:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case U:return(l.displayName||"Context")+".Consumer";case z:return(l._context.displayName||"Context")+".Provider";case M:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case ce:return d=l.displayName||null,d!==null?d:Ge(l.type)||"Memo";case ge:d=l._payload,l=l._init;try{return Ge(l(d))}catch{}}return null}function Ue(l){var d=l.type;switch(l.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=d.render,l=l.displayName||l.name||"",d.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ge(d);case 8:return d===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function ze(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function H(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function oe(l){var d=H(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),b=""+l[d];if(!l.hasOwnProperty(d)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var T=m.get,A=m.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return T.call(this)},set:function(L){b=""+L,A.call(this,L)}}),Object.defineProperty(l,d,{enumerable:m.enumerable}),{getValue:function(){return b},setValue:function(L){b=""+L},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function ve(l){l._valueTracker||(l._valueTracker=oe(l))}function ae(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var m=d.getValue(),b="";return l&&(b=H(l)?l.checked?"true":"false":l.value),l=b,l!==m?(d.setValue(l),!0):!1}function Xe(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Be(l,d){var m=d.checked;return de({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??l._wrapperState.initialChecked})}function He(l,d){var m=d.defaultValue==null?"":d.defaultValue,b=d.checked!=null?d.checked:d.defaultChecked;m=ze(d.value!=null?d.value:m),l._wrapperState={initialChecked:b,initialValue:m,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function rt(l,d){d=d.checked,d!=null&&F(l,"checked",d,!1)}function Ye(l,d){rt(l,d);var m=ze(d.value),b=d.type;if(m!=null)b==="number"?(m===0&&l.value===""||l.value!=m)&&(l.value=""+m):l.value!==""+m&&(l.value=""+m);else if(b==="submit"||b==="reset"){l.removeAttribute("value");return}d.hasOwnProperty("value")?be(l,d.type,m):d.hasOwnProperty("defaultValue")&&be(l,d.type,ze(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(l.defaultChecked=!!d.defaultChecked)}function Ne(l,d,m){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var b=d.type;if(!(b!=="submit"&&b!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+l._wrapperState.initialValue,m||d===l.value||(l.value=d),l.defaultValue=d}m=l.name,m!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,m!==""&&(l.name=m)}function be(l,d,m){(d!=="number"||Xe(l.ownerDocument)!==l)&&(m==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+m&&(l.defaultValue=""+m))}var De=Array.isArray;function Je(l,d,m,b){if(l=l.options,d){d={};for(var T=0;T<m.length;T++)d["$"+m[T]]=!0;for(m=0;m<l.length;m++)T=d.hasOwnProperty("$"+l[m].value),l[m].selected!==T&&(l[m].selected=T),T&&b&&(l[m].defaultSelected=!0)}else{for(m=""+ze(m),d=null,T=0;T<l.length;T++){if(l[T].value===m){l[T].selected=!0,b&&(l[T].defaultSelected=!0);return}d!==null||l[T].disabled||(d=l[T])}d!==null&&(d.selected=!0)}}function dt(l,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return de({},d,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function G(l,d){var m=d.value;if(m==null){if(m=d.children,d=d.defaultValue,m!=null){if(d!=null)throw Error(n(92));if(De(m)){if(1<m.length)throw Error(n(93));m=m[0]}d=m}d==null&&(d=""),m=d}l._wrapperState={initialValue:ze(m)}}function je(l,d){var m=ze(d.value),b=ze(d.defaultValue);m!=null&&(m=""+m,m!==l.value&&(l.value=m),d.defaultValue==null&&l.defaultValue!==m&&(l.defaultValue=m)),b!=null&&(l.defaultValue=""+b)}function ct(l){var d=l.textContent;d===l._wrapperState.initialValue&&d!==""&&d!==null&&(l.value=d)}function ft(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function At(l,d){return l==null||l==="http://www.w3.org/1999/xhtml"?ft(d):l==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var yr,io=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,m,b,T){MSApp.execUnsafeLocalFunction(function(){return l(d,m,b,T)})}:l})(function(l,d){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=d;else{for(yr=yr||document.createElement("div"),yr.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=yr.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;d.firstChild;)l.appendChild(d.firstChild)}});function Ho(l,d){if(d){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=d;return}}l.textContent=d}var oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lc=["Webkit","ms","Moz","O"];Object.keys(oo).forEach(function(l){lc.forEach(function(d){d=d+l.charAt(0).toUpperCase()+l.substring(1),oo[d]=oo[l]})});function so(l,d,m){return d==null||typeof d=="boolean"||d===""?"":m||typeof d!="number"||d===0||oo.hasOwnProperty(l)&&oo[l]?(""+d).trim():d+"px"}function Mn(l,d){l=l.style;for(var m in d)if(d.hasOwnProperty(m)){var b=m.indexOf("--")===0,T=so(m,d[m],b);m==="float"&&(m="cssFloat"),b?l.setProperty(m,T):l[m]=T}}var qs=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xr(l,d){if(d){if(qs[l]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function Wo(l,d){if(l.indexOf("-")===-1)return typeof d.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ao=null;function Gs(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ti=null,Dr=null,Bt=null;function Hs(l){if(l=Ad(l)){if(typeof Ti!="function")throw Error(n(280));var d=l.stateNode;d&&(d=Bh(d),Ti(l.stateNode,l.type,d))}}function Ai(l){Dr?Bt?Bt.push(l):Bt=[l]:Dr=l}function Zr(){if(Dr){var l=Dr,d=Bt;if(Bt=Dr=null,Hs(l),d)for(l=0;l<d.length;l++)Hs(d[l])}}function cc(l,d){return l(d)}function uc(){}var br=!1;function dc(l,d,m){if(br)return l(d,m);br=!0;try{return cc(l,d,m)}finally{br=!1,(Dr!==null||Bt!==null)&&(uc(),Zr())}}function Ko(l,d){var m=l.stateNode;if(m===null)return null;var b=Bh(m);if(b===null)return null;m=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(n(231,d,typeof m));return m}var lo=!1;if(a)try{var Ci={};Object.defineProperty(Ci,"passive",{get:function(){lo=!0}}),window.addEventListener("test",Ci,Ci),window.removeEventListener("test",Ci,Ci)}catch{lo=!1}function Ka(l,d,m,b,T,A,L,W,J){var te=Array.prototype.slice.call(arguments,3);try{d.apply(m,te)}catch(we){this.onError(we)}}var ei=!1,Or=null,K=!1,pe=null,Ae={onError:function(l){ei=!0,Or=l}};function ke(l,d,m,b,T,A,L,W,J){ei=!1,Or=null,Ka.apply(Ae,arguments)}function Qt(l,d,m,b,T,A,L,W,J){if(ke.apply(this,arguments),ei){if(ei){var te=Or;ei=!1,Or=null}else throw Error(n(198));K||(K=!0,pe=te)}}function Dn(l){var d=l,m=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(m=d.return),l=d.return;while(l)}return d.tag===3?m:null}function ti(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function fc(l){if(Dn(l)!==l)throw Error(n(188))}function Eh(l){var d=l.alternate;if(!d){if(d=Dn(l),d===null)throw Error(n(188));return d!==l?null:l}for(var m=l,b=d;;){var T=m.return;if(T===null)break;var A=T.alternate;if(A===null){if(b=T.return,b!==null){m=b;continue}break}if(T.child===A.child){for(A=T.child;A;){if(A===m)return fc(T),l;if(A===b)return fc(T),d;A=A.sibling}throw Error(n(188))}if(m.return!==b.return)m=T,b=A;else{for(var L=!1,W=T.child;W;){if(W===m){L=!0,m=T,b=A;break}if(W===b){L=!0,b=T,m=A;break}W=W.sibling}if(!L){for(W=A.child;W;){if(W===m){L=!0,m=A,b=T;break}if(W===b){L=!0,b=A,m=T;break}W=W.sibling}if(!L)throw Error(n(189))}}if(m.alternate!==b)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?l:d}function Sh(l){return l=Eh(l),l!==null?Ya(l):null}function Ya(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var d=Ya(l);if(d!==null)return d;l=l.sibling}return null}var nd=e.unstable_scheduleCallback,hc=e.unstable_cancelCallback,Ja=e.unstable_shouldYield,Yo=e.unstable_requestPaint,Ot=e.unstable_now,py=e.unstable_getCurrentPriorityLevel,pc=e.unstable_ImmediatePriority,rd=e.unstable_UserBlockingPriority,Qa=e.unstable_NormalPriority,id=e.unstable_LowPriority,mc=e.unstable_IdlePriority,Xa=null,Lr=null;function Th(l){if(Lr&&typeof Lr.onCommitFiberRoot=="function")try{Lr.onCommitFiberRoot(Xa,l,void 0,(l.current.flags&128)===128)}catch{}}var jr=Math.clz32?Math.clz32:Za,co=Math.log,ni=Math.LN2;function Za(l){return l>>>=0,l===0?32:31-(co(l)/ni|0)|0}var uo=64,Ws=4194304;function Et(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function Jo(l,d){var m=l.pendingLanes;if(m===0)return 0;var b=0,T=l.suspendedLanes,A=l.pingedLanes,L=m&268435455;if(L!==0){var W=L&~T;W!==0?b=Et(W):(A&=L,A!==0&&(b=Et(A)))}else L=m&~T,L!==0?b=Et(L):A!==0&&(b=Et(A));if(b===0)return 0;if(d!==0&&d!==b&&(d&T)===0&&(T=b&-b,A=d&-d,T>=A||T===16&&(A&4194240)!==0))return d;if((b&4)!==0&&(b|=m&16),d=l.entangledLanes,d!==0)for(l=l.entanglements,d&=b;0<d;)m=31-jr(d),T=1<<m,b|=l[m],d&=~T;return b}function el(l,d){switch(l){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tl(l,d){for(var m=l.suspendedLanes,b=l.pingedLanes,T=l.expirationTimes,A=l.pendingLanes;0<A;){var L=31-jr(A),W=1<<L,J=T[L];J===-1?((W&m)===0||(W&b)!==0)&&(T[L]=el(W,d)):J<=d&&(l.expiredLanes|=W),A&=~W}}function od(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function sd(){var l=uo;return uo<<=1,(uo&4194240)===0&&(uo=64),l}function ad(l){for(var d=[],m=0;31>m;m++)d.push(l);return d}function nl(l,d,m){l.pendingLanes|=d,d!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,d=31-jr(d),l[d]=m}function my(l,d){var m=l.pendingLanes&~d;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=d,l.mutableReadLanes&=d,l.entangledLanes&=d,d=l.entanglements;var b=l.eventTimes;for(l=l.expirationTimes;0<m;){var T=31-jr(m),A=1<<T;d[T]=0,b[T]=-1,l[T]=-1,m&=~A}}function ld(l,d){var m=l.entangledLanes|=d;for(l=l.entanglements;m;){var b=31-jr(m),T=1<<b;T&d|l[b]&d&&(l[b]|=d),m&=~T}}var gt=0;function fo(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var cd,gc,ud,dd,fd,ho=!1,vc=[],po=null,mo=null,On=null,rl=new Map,Qo=new Map,Fr=[],Ah="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ks(l,d){switch(l){case"focusin":case"focusout":po=null;break;case"dragenter":case"dragleave":mo=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":rl.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(d.pointerId)}}function Ii(l,d,m,b,T,A){return l===null||l.nativeEvent!==A?(l={blockedOn:d,domEventName:m,eventSystemFlags:b,nativeEvent:A,targetContainers:[T]},d!==null&&(d=Ad(d),d!==null&&gc(d)),l):(l.eventSystemFlags|=b,d=l.targetContainers,T!==null&&d.indexOf(T)===-1&&d.push(T),l)}function Ch(l,d,m,b,T){switch(d){case"focusin":return po=Ii(po,l,d,m,b,T),!0;case"dragenter":return mo=Ii(mo,l,d,m,b,T),!0;case"mouseover":return On=Ii(On,l,d,m,b,T),!0;case"pointerover":var A=T.pointerId;return rl.set(A,Ii(rl.get(A)||null,l,d,m,b,T)),!0;case"gotpointercapture":return A=T.pointerId,Qo.set(A,Ii(Qo.get(A)||null,l,d,m,b,T)),!0}return!1}function yc(l){var d=al(l.target);if(d!==null){var m=Dn(d);if(m!==null){if(d=m.tag,d===13){if(d=ti(m),d!==null){l.blockedOn=d,fd(l.priority,function(){ud(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Nt(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var m=xc(l.domEventName,l.eventSystemFlags,d[0],l.nativeEvent);if(m===null){m=l.nativeEvent;var b=new m.constructor(m.type,m);ao=b,m.target.dispatchEvent(b),ao=null}else return d=Ad(m),d!==null&&gc(d),l.blockedOn=m,!1;d.shift()}return!0}function Ih(l,d,m){Nt(l)&&m.delete(d)}function gy(){ho=!1,po!==null&&Nt(po)&&(po=null),mo!==null&&Nt(mo)&&(mo=null),On!==null&&Nt(On)&&(On=null),rl.forEach(Ih),Qo.forEach(Ih)}function Ys(l,d){l.blockedOn===d&&(l.blockedOn=null,ho||(ho=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gy)))}function Js(l){function d(T){return Ys(T,l)}if(0<vc.length){Ys(vc[0],l);for(var m=1;m<vc.length;m++){var b=vc[m];b.blockedOn===l&&(b.blockedOn=null)}}for(po!==null&&Ys(po,l),mo!==null&&Ys(mo,l),On!==null&&Ys(On,l),rl.forEach(d),Qo.forEach(d),m=0;m<Fr.length;m++)b=Fr[m],b.blockedOn===l&&(b.blockedOn=null);for(;0<Fr.length&&(m=Fr[0],m.blockedOn===null);)yc(m),m.blockedOn===null&&Fr.shift()}var Xo=q.ReactCurrentBatchConfig,Zo=!0;function go(l,d,m,b){var T=gt,A=Xo.transition;Xo.transition=null;try{gt=1,hd(l,d,m,b)}finally{gt=T,Xo.transition=A}}function Ph(l,d,m,b){var T=gt,A=Xo.transition;Xo.transition=null;try{gt=4,hd(l,d,m,b)}finally{gt=T,Xo.transition=A}}function hd(l,d,m,b){if(Zo){var T=xc(l,d,m,b);if(T===null)Cy(l,d,b,vo,m),Ks(l,b);else if(Ch(T,l,d,m,b))b.stopPropagation();else if(Ks(l,b),d&4&&-1<Ah.indexOf(l)){for(;T!==null;){var A=Ad(T);if(A!==null&&cd(A),A=xc(l,d,m,b),A===null&&Cy(l,d,b,vo,m),A===T)break;T=A}T!==null&&b.stopPropagation()}else Cy(l,d,b,null,m)}}var vo=null;function xc(l,d,m,b){if(vo=null,l=Gs(b),l=al(l),l!==null)if(d=Dn(l),d===null)l=null;else if(m=d.tag,m===13){if(l=ti(d),l!==null)return l;l=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null);return vo=l,null}function bc(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(py()){case pc:return 1;case rd:return 4;case Qa:case id:return 16;case mc:return 536870912;default:return 16}default:return 16}}var Ur=null,wc=null,es=null;function Nh(){if(es)return es;var l,d=wc,m=d.length,b,T="value"in Ur?Ur.value:Ur.textContent,A=T.length;for(l=0;l<m&&d[l]===T[l];l++);var L=m-l;for(b=1;b<=L&&d[m-b]===T[A-b];b++);return es=T.slice(l,1<b?1-b:void 0)}function il(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function yo(){return!0}function pd(){return!1}function Kn(l){function d(m,b,T,A,L){this._reactName=m,this._targetInst=T,this.type=b,this.nativeEvent=A,this.target=L,this.currentTarget=null;for(var W in l)l.hasOwnProperty(W)&&(m=l[W],this[W]=m?m(A):A[W]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?yo:pd,this.isPropagationStopped=pd,this}return de(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=yo)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=yo)},persist:function(){},isPersistent:yo}),d}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ol=Kn(xo),Qs=de({},xo,{view:0,detail:0}),_c=Kn(Qs),Ec,Sc,Vr,sl=de({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:at,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Vr&&(Vr&&l.type==="mousemove"?(Ec=l.screenX-Vr.screenX,Sc=l.screenY-Vr.screenY):Sc=Ec=0,Vr=l),Ec)},movementY:function(l){return"movementY"in l?l.movementY:Sc}}),md=Kn(sl),kh=de({},sl,{dataTransfer:0}),Rh=Kn(kh),Tc=de({},Qs,{relatedTarget:0}),Ln=Kn(Tc),Mh=de({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),Dh=Kn(Mh),Xs=de({},xo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),x=Kn(Xs),C=de({},xo,{data:0}),R=Kn(C),B={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Z={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},re={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Te(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=re[l])?!!d[l]:!1}function at(){return Te}var Xt=de({},Qs,{key:function(l){if(l.key){var d=B[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=il(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Z[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:at,charCode:function(l){return l.type==="keypress"?il(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?il(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Ct=Kn(Xt),on=de({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$r=Kn(on),ts=de({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:at}),bo=Kn(ts),wo=de({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ac=Kn(wo),gd=de({},sl,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),GU=Kn(gd),HU=[9,13,27,32],vy=a&&"CompositionEvent"in window,vd=null;a&&"documentMode"in document&&(vd=document.documentMode);var WU=a&&"TextEvent"in window&&!vd,GT=a&&(!vy||vd&&8<vd&&11>=vd),HT=" ",WT=!1;function KT(l,d){switch(l){case"keyup":return HU.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YT(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Cc=!1;function KU(l,d){switch(l){case"compositionend":return YT(d);case"keypress":return d.which!==32?null:(WT=!0,HT);case"textInput":return l=d.data,l===HT&&WT?null:l;default:return null}}function YU(l,d){if(Cc)return l==="compositionend"||!vy&&KT(l,d)?(l=Nh(),es=wc=Ur=null,Cc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return GT&&d.locale!=="ko"?null:d.data;default:return null}}var JU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function JT(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!JU[l.type]:d==="textarea"}function QT(l,d,m,b){Ai(b),d=Uh(d,"onChange"),0<d.length&&(m=new ol("onChange","change",null,m,b),l.push({event:m,listeners:d}))}var yd=null,xd=null;function QU(l){m1(l,0)}function Oh(l){var d=Rc(l);if(ae(d))return l}function XU(l,d){if(l==="change")return d}var XT=!1;if(a){var yy;if(a){var xy="oninput"in document;if(!xy){var ZT=document.createElement("div");ZT.setAttribute("oninput","return;"),xy=typeof ZT.oninput=="function"}yy=xy}else yy=!1;XT=yy&&(!document.documentMode||9<document.documentMode)}function e1(){yd&&(yd.detachEvent("onpropertychange",t1),xd=yd=null)}function t1(l){if(l.propertyName==="value"&&Oh(xd)){var d=[];QT(d,xd,l,Gs(l)),dc(QU,d)}}function ZU(l,d,m){l==="focusin"?(e1(),yd=d,xd=m,yd.attachEvent("onpropertychange",t1)):l==="focusout"&&e1()}function eV(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Oh(xd)}function tV(l,d){if(l==="click")return Oh(d)}function nV(l,d){if(l==="input"||l==="change")return Oh(d)}function rV(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Pi=typeof Object.is=="function"?Object.is:rV;function bd(l,d){if(Pi(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var m=Object.keys(l),b=Object.keys(d);if(m.length!==b.length)return!1;for(b=0;b<m.length;b++){var T=m[b];if(!c.call(d,T)||!Pi(l[T],d[T]))return!1}return!0}function n1(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function r1(l,d){var m=n1(l);l=0;for(var b;m;){if(m.nodeType===3){if(b=l+m.textContent.length,l<=d&&b>=d)return{node:m,offset:d-l};l=b}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=n1(m)}}function i1(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?i1(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function o1(){for(var l=window,d=Xe();d instanceof l.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)l=d.contentWindow;else break;d=Xe(l.document)}return d}function by(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}function iV(l){var d=o1(),m=l.focusedElem,b=l.selectionRange;if(d!==m&&m&&m.ownerDocument&&i1(m.ownerDocument.documentElement,m)){if(b!==null&&by(m)){if(d=b.start,l=b.end,l===void 0&&(l=d),"selectionStart"in m)m.selectionStart=d,m.selectionEnd=Math.min(l,m.value.length);else if(l=(d=m.ownerDocument||document)&&d.defaultView||window,l.getSelection){l=l.getSelection();var T=m.textContent.length,A=Math.min(b.start,T);b=b.end===void 0?A:Math.min(b.end,T),!l.extend&&A>b&&(T=b,b=A,A=T),T=r1(m,A);var L=r1(m,b);T&&L&&(l.rangeCount!==1||l.anchorNode!==T.node||l.anchorOffset!==T.offset||l.focusNode!==L.node||l.focusOffset!==L.offset)&&(d=d.createRange(),d.setStart(T.node,T.offset),l.removeAllRanges(),A>b?(l.addRange(d),l.extend(L.node,L.offset)):(d.setEnd(L.node,L.offset),l.addRange(d)))}}for(d=[],l=m;l=l.parentNode;)l.nodeType===1&&d.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<d.length;m++)l=d[m],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var oV=a&&"documentMode"in document&&11>=document.documentMode,Ic=null,wy=null,wd=null,_y=!1;function s1(l,d,m){var b=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;_y||Ic==null||Ic!==Xe(b)||(b=Ic,"selectionStart"in b&&by(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),wd&&bd(wd,b)||(wd=b,b=Uh(wy,"onSelect"),0<b.length&&(d=new ol("onSelect","select",null,d,m),l.push({event:d,listeners:b}),d.target=Ic)))}function Lh(l,d){var m={};return m[l.toLowerCase()]=d.toLowerCase(),m["Webkit"+l]="webkit"+d,m["Moz"+l]="moz"+d,m}var Pc={animationend:Lh("Animation","AnimationEnd"),animationiteration:Lh("Animation","AnimationIteration"),animationstart:Lh("Animation","AnimationStart"),transitionend:Lh("Transition","TransitionEnd")},Ey={},a1={};a&&(a1=document.createElement("div").style,"AnimationEvent"in window||(delete Pc.animationend.animation,delete Pc.animationiteration.animation,delete Pc.animationstart.animation),"TransitionEvent"in window||delete Pc.transitionend.transition);function jh(l){if(Ey[l])return Ey[l];if(!Pc[l])return l;var d=Pc[l],m;for(m in d)if(d.hasOwnProperty(m)&&m in a1)return Ey[l]=d[m];return l}var l1=jh("animationend"),c1=jh("animationiteration"),u1=jh("animationstart"),d1=jh("transitionend"),f1=new Map,h1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zs(l,d){f1.set(l,d),o(d,[l])}for(var Sy=0;Sy<h1.length;Sy++){var Ty=h1[Sy],sV=Ty.toLowerCase(),aV=Ty[0].toUpperCase()+Ty.slice(1);Zs(sV,"on"+aV)}Zs(l1,"onAnimationEnd"),Zs(c1,"onAnimationIteration"),Zs(u1,"onAnimationStart"),Zs("dblclick","onDoubleClick"),Zs("focusin","onFocus"),Zs("focusout","onBlur"),Zs(d1,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lV=new Set("cancel close invalid load scroll toggle".split(" ").concat(_d));function p1(l,d,m){var b=l.type||"unknown-event";l.currentTarget=m,Qt(b,d,void 0,l),l.currentTarget=null}function m1(l,d){d=(d&4)!==0;for(var m=0;m<l.length;m++){var b=l[m],T=b.event;b=b.listeners;e:{var A=void 0;if(d)for(var L=b.length-1;0<=L;L--){var W=b[L],J=W.instance,te=W.currentTarget;if(W=W.listener,J!==A&&T.isPropagationStopped())break e;p1(T,W,te),A=J}else for(L=0;L<b.length;L++){if(W=b[L],J=W.instance,te=W.currentTarget,W=W.listener,J!==A&&T.isPropagationStopped())break e;p1(T,W,te),A=J}}}if(K)throw l=pe,K=!1,pe=null,l}function Lt(l,d){var m=d[My];m===void 0&&(m=d[My]=new Set);var b=l+"__bubble";m.has(b)||(g1(d,l,2,!1),m.add(b))}function Ay(l,d,m){var b=0;d&&(b|=4),g1(m,l,b,d)}var Fh="_reactListening"+Math.random().toString(36).slice(2);function Ed(l){if(!l[Fh]){l[Fh]=!0,r.forEach(function(m){m!=="selectionchange"&&(lV.has(m)||Ay(m,!1,l),Ay(m,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[Fh]||(d[Fh]=!0,Ay("selectionchange",!1,d))}}function g1(l,d,m,b){switch(bc(d)){case 1:var T=go;break;case 4:T=Ph;break;default:T=hd}m=T.bind(null,d,m,l),T=void 0,!lo||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(T=!0),b?T!==void 0?l.addEventListener(d,m,{capture:!0,passive:T}):l.addEventListener(d,m,!0):T!==void 0?l.addEventListener(d,m,{passive:T}):l.addEventListener(d,m,!1)}function Cy(l,d,m,b,T){var A=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var L=b.tag;if(L===3||L===4){var W=b.stateNode.containerInfo;if(W===T||W.nodeType===8&&W.parentNode===T)break;if(L===4)for(L=b.return;L!==null;){var J=L.tag;if((J===3||J===4)&&(J=L.stateNode.containerInfo,J===T||J.nodeType===8&&J.parentNode===T))return;L=L.return}for(;W!==null;){if(L=al(W),L===null)return;if(J=L.tag,J===5||J===6){b=A=L;continue e}W=W.parentNode}}b=b.return}dc(function(){var te=A,we=Gs(m),Ee=[];e:{var ye=f1.get(l);if(ye!==void 0){var Re=ol,Fe=l;switch(l){case"keypress":if(il(m)===0)break e;case"keydown":case"keyup":Re=Ct;break;case"focusin":Fe="focus",Re=Ln;break;case"focusout":Fe="blur",Re=Ln;break;case"beforeblur":case"afterblur":Re=Ln;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=Rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=bo;break;case l1:case c1:case u1:Re=Dh;break;case d1:Re=Ac;break;case"scroll":Re=_c;break;case"wheel":Re=GU;break;case"copy":case"cut":case"paste":Re=x;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=$r}var Ve=(d&4)!==0,Zt=!Ve&&l==="scroll",X=Ve?ye!==null?ye+"Capture":null:ye;Ve=[];for(var Q=te,ee;Q!==null;){ee=Q;var Se=ee.stateNode;if(ee.tag===5&&Se!==null&&(ee=Se,X!==null&&(Se=Ko(Q,X),Se!=null&&Ve.push(Sd(Q,Se,ee)))),Zt)break;Q=Q.return}0<Ve.length&&(ye=new Re(ye,Fe,null,m,we),Ee.push({event:ye,listeners:Ve}))}}if((d&7)===0){e:{if(ye=l==="mouseover"||l==="pointerover",Re=l==="mouseout"||l==="pointerout",ye&&m!==ao&&(Fe=m.relatedTarget||m.fromElement)&&(al(Fe)||Fe[ns]))break e;if((Re||ye)&&(ye=we.window===we?we:(ye=we.ownerDocument)?ye.defaultView||ye.parentWindow:window,Re?(Fe=m.relatedTarget||m.toElement,Re=te,Fe=Fe?al(Fe):null,Fe!==null&&(Zt=Dn(Fe),Fe!==Zt||Fe.tag!==5&&Fe.tag!==6)&&(Fe=null)):(Re=null,Fe=te),Re!==Fe)){if(Ve=md,Se="onMouseLeave",X="onMouseEnter",Q="mouse",(l==="pointerout"||l==="pointerover")&&(Ve=$r,Se="onPointerLeave",X="onPointerEnter",Q="pointer"),Zt=Re==null?ye:Rc(Re),ee=Fe==null?ye:Rc(Fe),ye=new Ve(Se,Q+"leave",Re,m,we),ye.target=Zt,ye.relatedTarget=ee,Se=null,al(we)===te&&(Ve=new Ve(X,Q+"enter",Fe,m,we),Ve.target=ee,Ve.relatedTarget=Zt,Se=Ve),Zt=Se,Re&&Fe)t:{for(Ve=Re,X=Fe,Q=0,ee=Ve;ee;ee=Nc(ee))Q++;for(ee=0,Se=X;Se;Se=Nc(Se))ee++;for(;0<Q-ee;)Ve=Nc(Ve),Q--;for(;0<ee-Q;)X=Nc(X),ee--;for(;Q--;){if(Ve===X||X!==null&&Ve===X.alternate)break t;Ve=Nc(Ve),X=Nc(X)}Ve=null}else Ve=null;Re!==null&&v1(Ee,ye,Re,Ve,!1),Fe!==null&&Zt!==null&&v1(Ee,Zt,Fe,Ve,!0)}}e:{if(ye=te?Rc(te):window,Re=ye.nodeName&&ye.nodeName.toLowerCase(),Re==="select"||Re==="input"&&ye.type==="file")var qe=XU;else if(JT(ye))if(XT)qe=nV;else{qe=eV;var Ze=ZU}else(Re=ye.nodeName)&&Re.toLowerCase()==="input"&&(ye.type==="checkbox"||ye.type==="radio")&&(qe=tV);if(qe&&(qe=qe(l,te))){QT(Ee,qe,m,we);break e}Ze&&Ze(l,ye,te),l==="focusout"&&(Ze=ye._wrapperState)&&Ze.controlled&&ye.type==="number"&&be(ye,"number",ye.value)}switch(Ze=te?Rc(te):window,l){case"focusin":(JT(Ze)||Ze.contentEditable==="true")&&(Ic=Ze,wy=te,wd=null);break;case"focusout":wd=wy=Ic=null;break;case"mousedown":_y=!0;break;case"contextmenu":case"mouseup":case"dragend":_y=!1,s1(Ee,m,we);break;case"selectionchange":if(oV)break;case"keydown":case"keyup":s1(Ee,m,we)}var et;if(vy)e:{switch(l){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else Cc?KT(l,m)&&(it="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(it="onCompositionStart");it&&(GT&&m.locale!=="ko"&&(Cc||it!=="onCompositionStart"?it==="onCompositionEnd"&&Cc&&(et=Nh()):(Ur=we,wc="value"in Ur?Ur.value:Ur.textContent,Cc=!0)),Ze=Uh(te,it),0<Ze.length&&(it=new R(it,l,null,m,we),Ee.push({event:it,listeners:Ze}),et?it.data=et:(et=YT(m),et!==null&&(it.data=et)))),(et=WU?KU(l,m):YU(l,m))&&(te=Uh(te,"onBeforeInput"),0<te.length&&(we=new R("onBeforeInput","beforeinput",null,m,we),Ee.push({event:we,listeners:te}),we.data=et))}m1(Ee,d)})}function Sd(l,d,m){return{instance:l,listener:d,currentTarget:m}}function Uh(l,d){for(var m=d+"Capture",b=[];l!==null;){var T=l,A=T.stateNode;T.tag===5&&A!==null&&(T=A,A=Ko(l,m),A!=null&&b.unshift(Sd(l,A,T)),A=Ko(l,d),A!=null&&b.push(Sd(l,A,T))),l=l.return}return b}function Nc(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function v1(l,d,m,b,T){for(var A=d._reactName,L=[];m!==null&&m!==b;){var W=m,J=W.alternate,te=W.stateNode;if(J!==null&&J===b)break;W.tag===5&&te!==null&&(W=te,T?(J=Ko(m,A),J!=null&&L.unshift(Sd(m,J,W))):T||(J=Ko(m,A),J!=null&&L.push(Sd(m,J,W)))),m=m.return}L.length!==0&&l.push({event:d,listeners:L})}var cV=/\r\n?/g,uV=/\u0000|\uFFFD/g;function y1(l){return(typeof l=="string"?l:""+l).replace(cV,`
`).replace(uV,"")}function Vh(l,d,m){if(d=y1(d),y1(l)!==d&&m)throw Error(n(425))}function $h(){}var Iy=null,Py=null;function Ny(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var ky=typeof setTimeout=="function"?setTimeout:void 0,dV=typeof clearTimeout=="function"?clearTimeout:void 0,x1=typeof Promise=="function"?Promise:void 0,fV=typeof queueMicrotask=="function"?queueMicrotask:typeof x1<"u"?function(l){return x1.resolve(null).then(l).catch(hV)}:ky;function hV(l){setTimeout(function(){throw l})}function Ry(l,d){var m=d,b=0;do{var T=m.nextSibling;if(l.removeChild(m),T&&T.nodeType===8)if(m=T.data,m==="/$"){if(b===0){l.removeChild(T),Js(d);return}b--}else m!=="$"&&m!=="$?"&&m!=="$!"||b++;m=T}while(m);Js(d)}function ea(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return l}function b1(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return l;d--}else m==="/$"&&d++}l=l.previousSibling}return null}var kc=Math.random().toString(36).slice(2),_o="__reactFiber$"+kc,Td="__reactProps$"+kc,ns="__reactContainer$"+kc,My="__reactEvents$"+kc,pV="__reactListeners$"+kc,mV="__reactHandles$"+kc;function al(l){var d=l[_o];if(d)return d;for(var m=l.parentNode;m;){if(d=m[ns]||m[_o]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(l=b1(l);l!==null;){if(m=l[_o])return m;l=b1(l)}return d}l=m,m=l.parentNode}return null}function Ad(l){return l=l[_o]||l[ns],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Rc(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function Bh(l){return l[Td]||null}var Dy=[],Mc=-1;function ta(l){return{current:l}}function jt(l){0>Mc||(l.current=Dy[Mc],Dy[Mc]=null,Mc--)}function Rt(l,d){Mc++,Dy[Mc]=l.current,l.current=d}var na={},Yn=ta(na),wr=ta(!1),ll=na;function Dc(l,d){var m=l.type.contextTypes;if(!m)return na;var b=l.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===d)return b.__reactInternalMemoizedMaskedChildContext;var T={},A;for(A in m)T[A]=d[A];return b&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=d,l.__reactInternalMemoizedMaskedChildContext=T),T}function _r(l){return l=l.childContextTypes,l!=null}function zh(){jt(wr),jt(Yn)}function w1(l,d,m){if(Yn.current!==na)throw Error(n(168));Rt(Yn,d),Rt(wr,m)}function _1(l,d,m){var b=l.stateNode;if(d=d.childContextTypes,typeof b.getChildContext!="function")return m;b=b.getChildContext();for(var T in b)if(!(T in d))throw Error(n(108,Ue(l)||"Unknown",T));return de({},m,b)}function qh(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||na,ll=Yn.current,Rt(Yn,l),Rt(wr,wr.current),!0}function E1(l,d,m){var b=l.stateNode;if(!b)throw Error(n(169));m?(l=_1(l,d,ll),b.__reactInternalMemoizedMergedChildContext=l,jt(wr),jt(Yn),Rt(Yn,l)):jt(wr),Rt(wr,m)}var rs=null,Gh=!1,Oy=!1;function S1(l){rs===null?rs=[l]:rs.push(l)}function gV(l){Gh=!0,S1(l)}function ra(){if(!Oy&&rs!==null){Oy=!0;var l=0,d=gt;try{var m=rs;for(gt=1;l<m.length;l++){var b=m[l];do b=b(!0);while(b!==null)}rs=null,Gh=!1}catch(T){throw rs!==null&&(rs=rs.slice(l+1)),nd(pc,ra),T}finally{gt=d,Oy=!1}}return null}var Oc=[],Lc=0,Hh=null,Wh=0,ri=[],ii=0,cl=null,is=1,os="";function ul(l,d){Oc[Lc++]=Wh,Oc[Lc++]=Hh,Hh=l,Wh=d}function T1(l,d,m){ri[ii++]=is,ri[ii++]=os,ri[ii++]=cl,cl=l;var b=is;l=os;var T=32-jr(b)-1;b&=~(1<<T),m+=1;var A=32-jr(d)+T;if(30<A){var L=T-T%5;A=(b&(1<<L)-1).toString(32),b>>=L,T-=L,is=1<<32-jr(d)+T|m<<T|b,os=A+l}else is=1<<A|m<<T|b,os=l}function Ly(l){l.return!==null&&(ul(l,1),T1(l,1,0))}function jy(l){for(;l===Hh;)Hh=Oc[--Lc],Oc[Lc]=null,Wh=Oc[--Lc],Oc[Lc]=null;for(;l===cl;)cl=ri[--ii],ri[ii]=null,os=ri[--ii],ri[ii]=null,is=ri[--ii],ri[ii]=null}var Br=null,zr=null,zt=!1,Ni=null;function A1(l,d){var m=li(5,null,null,0);m.elementType="DELETED",m.stateNode=d,m.return=l,d=l.deletions,d===null?(l.deletions=[m],l.flags|=16):d.push(m)}function C1(l,d){switch(l.tag){case 5:var m=l.type;return d=d.nodeType!==1||m.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(l.stateNode=d,Br=l,zr=ea(d.firstChild),!0):!1;case 6:return d=l.pendingProps===""||d.nodeType!==3?null:d,d!==null?(l.stateNode=d,Br=l,zr=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(m=cl!==null?{id:is,overflow:os}:null,l.memoizedState={dehydrated:d,treeContext:m,retryLane:1073741824},m=li(18,null,null,0),m.stateNode=d,m.return=l,l.child=m,Br=l,zr=null,!0):!1;default:return!1}}function Fy(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Uy(l){if(zt){var d=zr;if(d){var m=d;if(!C1(l,d)){if(Fy(l))throw Error(n(418));d=ea(m.nextSibling);var b=Br;d&&C1(l,d)?A1(b,m):(l.flags=l.flags&-4097|2,zt=!1,Br=l)}}else{if(Fy(l))throw Error(n(418));l.flags=l.flags&-4097|2,zt=!1,Br=l}}}function I1(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Br=l}function Kh(l){if(l!==Br)return!1;if(!zt)return I1(l),zt=!0,!1;var d;if((d=l.tag!==3)&&!(d=l.tag!==5)&&(d=l.type,d=d!=="head"&&d!=="body"&&!Ny(l.type,l.memoizedProps)),d&&(d=zr)){if(Fy(l))throw P1(),Error(n(418));for(;d;)A1(l,d),d=ea(d.nextSibling)}if(I1(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8){var m=l.data;if(m==="/$"){if(d===0){zr=ea(l.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++}l=l.nextSibling}zr=null}}else zr=Br?ea(l.stateNode.nextSibling):null;return!0}function P1(){for(var l=zr;l;)l=ea(l.nextSibling)}function jc(){zr=Br=null,zt=!1}function Vy(l){Ni===null?Ni=[l]:Ni.push(l)}var vV=q.ReactCurrentBatchConfig;function Cd(l,d,m){if(l=m.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var b=m.stateNode}if(!b)throw Error(n(147,l));var T=b,A=""+l;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===A?d.ref:(d=function(L){var W=T.refs;L===null?delete W[A]:W[A]=L},d._stringRef=A,d)}if(typeof l!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,l))}return l}function Yh(l,d){throw l=Object.prototype.toString.call(d),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l))}function N1(l){var d=l._init;return d(l._payload)}function k1(l){function d(X,Q){if(l){var ee=X.deletions;ee===null?(X.deletions=[Q],X.flags|=16):ee.push(Q)}}function m(X,Q){if(!l)return null;for(;Q!==null;)d(X,Q),Q=Q.sibling;return null}function b(X,Q){for(X=new Map;Q!==null;)Q.key!==null?X.set(Q.key,Q):X.set(Q.index,Q),Q=Q.sibling;return X}function T(X,Q){return X=da(X,Q),X.index=0,X.sibling=null,X}function A(X,Q,ee){return X.index=ee,l?(ee=X.alternate,ee!==null?(ee=ee.index,ee<Q?(X.flags|=2,Q):ee):(X.flags|=2,Q)):(X.flags|=1048576,Q)}function L(X){return l&&X.alternate===null&&(X.flags|=2),X}function W(X,Q,ee,Se){return Q===null||Q.tag!==6?(Q=k0(ee,X.mode,Se),Q.return=X,Q):(Q=T(Q,ee),Q.return=X,Q)}function J(X,Q,ee,Se){var qe=ee.type;return qe===k?we(X,Q,ee.props.children,Se,ee.key):Q!==null&&(Q.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===ge&&N1(qe)===Q.type)?(Se=T(Q,ee.props),Se.ref=Cd(X,Q,ee),Se.return=X,Se):(Se=xp(ee.type,ee.key,ee.props,null,X.mode,Se),Se.ref=Cd(X,Q,ee),Se.return=X,Se)}function te(X,Q,ee,Se){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ee.containerInfo||Q.stateNode.implementation!==ee.implementation?(Q=R0(ee,X.mode,Se),Q.return=X,Q):(Q=T(Q,ee.children||[]),Q.return=X,Q)}function we(X,Q,ee,Se,qe){return Q===null||Q.tag!==7?(Q=yl(ee,X.mode,Se,qe),Q.return=X,Q):(Q=T(Q,ee),Q.return=X,Q)}function Ee(X,Q,ee){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=k0(""+Q,X.mode,ee),Q.return=X,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case V:return ee=xp(Q.type,Q.key,Q.props,null,X.mode,ee),ee.ref=Cd(X,null,Q),ee.return=X,ee;case $:return Q=R0(Q,X.mode,ee),Q.return=X,Q;case ge:var Se=Q._init;return Ee(X,Se(Q._payload),ee)}if(De(Q)||ne(Q))return Q=yl(Q,X.mode,ee,null),Q.return=X,Q;Yh(X,Q)}return null}function ye(X,Q,ee,Se){var qe=Q!==null?Q.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return qe!==null?null:W(X,Q,""+ee,Se);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case V:return ee.key===qe?J(X,Q,ee,Se):null;case $:return ee.key===qe?te(X,Q,ee,Se):null;case ge:return qe=ee._init,ye(X,Q,qe(ee._payload),Se)}if(De(ee)||ne(ee))return qe!==null?null:we(X,Q,ee,Se,null);Yh(X,ee)}return null}function Re(X,Q,ee,Se,qe){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return X=X.get(ee)||null,W(Q,X,""+Se,qe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case V:return X=X.get(Se.key===null?ee:Se.key)||null,J(Q,X,Se,qe);case $:return X=X.get(Se.key===null?ee:Se.key)||null,te(Q,X,Se,qe);case ge:var Ze=Se._init;return Re(X,Q,ee,Ze(Se._payload),qe)}if(De(Se)||ne(Se))return X=X.get(ee)||null,we(Q,X,Se,qe,null);Yh(Q,Se)}return null}function Fe(X,Q,ee,Se){for(var qe=null,Ze=null,et=Q,it=Q=0,Sn=null;et!==null&&it<ee.length;it++){et.index>it?(Sn=et,et=null):Sn=et.sibling;var bt=ye(X,et,ee[it],Se);if(bt===null){et===null&&(et=Sn);break}l&&et&&bt.alternate===null&&d(X,et),Q=A(bt,Q,it),Ze===null?qe=bt:Ze.sibling=bt,Ze=bt,et=Sn}if(it===ee.length)return m(X,et),zt&&ul(X,it),qe;if(et===null){for(;it<ee.length;it++)et=Ee(X,ee[it],Se),et!==null&&(Q=A(et,Q,it),Ze===null?qe=et:Ze.sibling=et,Ze=et);return zt&&ul(X,it),qe}for(et=b(X,et);it<ee.length;it++)Sn=Re(et,X,it,ee[it],Se),Sn!==null&&(l&&Sn.alternate!==null&&et.delete(Sn.key===null?it:Sn.key),Q=A(Sn,Q,it),Ze===null?qe=Sn:Ze.sibling=Sn,Ze=Sn);return l&&et.forEach(function(fa){return d(X,fa)}),zt&&ul(X,it),qe}function Ve(X,Q,ee,Se){var qe=ne(ee);if(typeof qe!="function")throw Error(n(150));if(ee=qe.call(ee),ee==null)throw Error(n(151));for(var Ze=qe=null,et=Q,it=Q=0,Sn=null,bt=ee.next();et!==null&&!bt.done;it++,bt=ee.next()){et.index>it?(Sn=et,et=null):Sn=et.sibling;var fa=ye(X,et,bt.value,Se);if(fa===null){et===null&&(et=Sn);break}l&&et&&fa.alternate===null&&d(X,et),Q=A(fa,Q,it),Ze===null?qe=fa:Ze.sibling=fa,Ze=fa,et=Sn}if(bt.done)return m(X,et),zt&&ul(X,it),qe;if(et===null){for(;!bt.done;it++,bt=ee.next())bt=Ee(X,bt.value,Se),bt!==null&&(Q=A(bt,Q,it),Ze===null?qe=bt:Ze.sibling=bt,Ze=bt);return zt&&ul(X,it),qe}for(et=b(X,et);!bt.done;it++,bt=ee.next())bt=Re(et,X,it,bt.value,Se),bt!==null&&(l&&bt.alternate!==null&&et.delete(bt.key===null?it:bt.key),Q=A(bt,Q,it),Ze===null?qe=bt:Ze.sibling=bt,Ze=bt);return l&&et.forEach(function(JV){return d(X,JV)}),zt&&ul(X,it),qe}function Zt(X,Q,ee,Se){if(typeof ee=="object"&&ee!==null&&ee.type===k&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case V:e:{for(var qe=ee.key,Ze=Q;Ze!==null;){if(Ze.key===qe){if(qe=ee.type,qe===k){if(Ze.tag===7){m(X,Ze.sibling),Q=T(Ze,ee.props.children),Q.return=X,X=Q;break e}}else if(Ze.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===ge&&N1(qe)===Ze.type){m(X,Ze.sibling),Q=T(Ze,ee.props),Q.ref=Cd(X,Ze,ee),Q.return=X,X=Q;break e}m(X,Ze);break}else d(X,Ze);Ze=Ze.sibling}ee.type===k?(Q=yl(ee.props.children,X.mode,Se,ee.key),Q.return=X,X=Q):(Se=xp(ee.type,ee.key,ee.props,null,X.mode,Se),Se.ref=Cd(X,Q,ee),Se.return=X,X=Se)}return L(X);case $:e:{for(Ze=ee.key;Q!==null;){if(Q.key===Ze)if(Q.tag===4&&Q.stateNode.containerInfo===ee.containerInfo&&Q.stateNode.implementation===ee.implementation){m(X,Q.sibling),Q=T(Q,ee.children||[]),Q.return=X,X=Q;break e}else{m(X,Q);break}else d(X,Q);Q=Q.sibling}Q=R0(ee,X.mode,Se),Q.return=X,X=Q}return L(X);case ge:return Ze=ee._init,Zt(X,Q,Ze(ee._payload),Se)}if(De(ee))return Fe(X,Q,ee,Se);if(ne(ee))return Ve(X,Q,ee,Se);Yh(X,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,Q!==null&&Q.tag===6?(m(X,Q.sibling),Q=T(Q,ee),Q.return=X,X=Q):(m(X,Q),Q=k0(ee,X.mode,Se),Q.return=X,X=Q),L(X)):m(X,Q)}return Zt}var Fc=k1(!0),R1=k1(!1),Jh=ta(null),Qh=null,Uc=null,$y=null;function By(){$y=Uc=Qh=null}function zy(l){var d=Jh.current;jt(Jh),l._currentValue=d}function qy(l,d,m){for(;l!==null;){var b=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),l===m)break;l=l.return}}function Vc(l,d){Qh=l,$y=Uc=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&d)!==0&&(Er=!0),l.firstContext=null)}function oi(l){var d=l._currentValue;if($y!==l)if(l={context:l,memoizedValue:d,next:null},Uc===null){if(Qh===null)throw Error(n(308));Uc=l,Qh.dependencies={lanes:0,firstContext:l}}else Uc=Uc.next=l;return d}var dl=null;function Gy(l){dl===null?dl=[l]:dl.push(l)}function M1(l,d,m,b){var T=d.interleaved;return T===null?(m.next=m,Gy(d)):(m.next=T.next,T.next=m),d.interleaved=m,ss(l,b)}function ss(l,d){l.lanes|=d;var m=l.alternate;for(m!==null&&(m.lanes|=d),m=l,l=l.return;l!==null;)l.childLanes|=d,m=l.alternate,m!==null&&(m.childLanes|=d),m=l,l=l.return;return m.tag===3?m.stateNode:null}var ia=!1;function Hy(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D1(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function as(l,d){return{eventTime:l,lane:d,tag:0,payload:null,callback:null,next:null}}function oa(l,d,m){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(xt&2)!==0){var T=b.pending;return T===null?d.next=d:(d.next=T.next,T.next=d),b.pending=d,ss(l,m)}return T=b.interleaved,T===null?(d.next=d,Gy(b)):(d.next=T.next,T.next=d),b.interleaved=d,ss(l,m)}function Xh(l,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194240)!==0)){var b=d.lanes;b&=l.pendingLanes,m|=b,d.lanes=m,ld(l,m)}}function O1(l,d){var m=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,m===b)){var T=null,A=null;if(m=m.firstBaseUpdate,m!==null){do{var L={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};A===null?T=A=L:A=A.next=L,m=m.next}while(m!==null);A===null?T=A=d:A=A.next=d}else T=A=d;m={baseState:b.baseState,firstBaseUpdate:T,lastBaseUpdate:A,shared:b.shared,effects:b.effects},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=d}function Zh(l,d,m,b){var T=l.updateQueue;ia=!1;var A=T.firstBaseUpdate,L=T.lastBaseUpdate,W=T.shared.pending;if(W!==null){T.shared.pending=null;var J=W,te=J.next;J.next=null,L===null?A=te:L.next=te,L=J;var we=l.alternate;we!==null&&(we=we.updateQueue,W=we.lastBaseUpdate,W!==L&&(W===null?we.firstBaseUpdate=te:W.next=te,we.lastBaseUpdate=J))}if(A!==null){var Ee=T.baseState;L=0,we=te=J=null,W=A;do{var ye=W.lane,Re=W.eventTime;if((b&ye)===ye){we!==null&&(we=we.next={eventTime:Re,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var Fe=l,Ve=W;switch(ye=d,Re=m,Ve.tag){case 1:if(Fe=Ve.payload,typeof Fe=="function"){Ee=Fe.call(Re,Ee,ye);break e}Ee=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Ve.payload,ye=typeof Fe=="function"?Fe.call(Re,Ee,ye):Fe,ye==null)break e;Ee=de({},Ee,ye);break e;case 2:ia=!0}}W.callback!==null&&W.lane!==0&&(l.flags|=64,ye=T.effects,ye===null?T.effects=[W]:ye.push(W))}else Re={eventTime:Re,lane:ye,tag:W.tag,payload:W.payload,callback:W.callback,next:null},we===null?(te=we=Re,J=Ee):we=we.next=Re,L|=ye;if(W=W.next,W===null){if(W=T.shared.pending,W===null)break;ye=W,W=ye.next,ye.next=null,T.lastBaseUpdate=ye,T.shared.pending=null}}while(!0);if(we===null&&(J=Ee),T.baseState=J,T.firstBaseUpdate=te,T.lastBaseUpdate=we,d=T.shared.interleaved,d!==null){T=d;do L|=T.lane,T=T.next;while(T!==d)}else A===null&&(T.shared.lanes=0);pl|=L,l.lanes=L,l.memoizedState=Ee}}function L1(l,d,m){if(l=d.effects,d.effects=null,l!==null)for(d=0;d<l.length;d++){var b=l[d],T=b.callback;if(T!==null){if(b.callback=null,b=m,typeof T!="function")throw Error(n(191,T));T.call(b)}}}var Id={},Eo=ta(Id),Pd=ta(Id),Nd=ta(Id);function fl(l){if(l===Id)throw Error(n(174));return l}function Wy(l,d){switch(Rt(Nd,d),Rt(Pd,l),Rt(Eo,Id),l=d.nodeType,l){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:At(null,"");break;default:l=l===8?d.parentNode:d,d=l.namespaceURI||null,l=l.tagName,d=At(d,l)}jt(Eo),Rt(Eo,d)}function $c(){jt(Eo),jt(Pd),jt(Nd)}function j1(l){fl(Nd.current);var d=fl(Eo.current),m=At(d,l.type);d!==m&&(Rt(Pd,l),Rt(Eo,m))}function Ky(l){Pd.current===l&&(jt(Eo),jt(Pd))}var Ht=ta(0);function ep(l){for(var d=l;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Yy=[];function Jy(){for(var l=0;l<Yy.length;l++)Yy[l]._workInProgressVersionPrimary=null;Yy.length=0}var tp=q.ReactCurrentDispatcher,Qy=q.ReactCurrentBatchConfig,hl=0,Wt=null,pn=null,_n=null,np=!1,kd=!1,Rd=0,yV=0;function Jn(){throw Error(n(321))}function Xy(l,d){if(d===null)return!1;for(var m=0;m<d.length&&m<l.length;m++)if(!Pi(l[m],d[m]))return!1;return!0}function Zy(l,d,m,b,T,A){if(hl=A,Wt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,tp.current=l===null||l.memoizedState===null?_V:EV,l=m(b,T),kd){A=0;do{if(kd=!1,Rd=0,25<=A)throw Error(n(301));A+=1,_n=pn=null,d.updateQueue=null,tp.current=SV,l=m(b,T)}while(kd)}if(tp.current=op,d=pn!==null&&pn.next!==null,hl=0,_n=pn=Wt=null,np=!1,d)throw Error(n(300));return l}function e0(){var l=Rd!==0;return Rd=0,l}function So(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Wt.memoizedState=_n=l:_n=_n.next=l,_n}function si(){if(pn===null){var l=Wt.alternate;l=l!==null?l.memoizedState:null}else l=pn.next;var d=_n===null?Wt.memoizedState:_n.next;if(d!==null)_n=d,pn=l;else{if(l===null)throw Error(n(310));pn=l,l={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},_n===null?Wt.memoizedState=_n=l:_n=_n.next=l}return _n}function Md(l,d){return typeof d=="function"?d(l):d}function t0(l){var d=si(),m=d.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=l;var b=pn,T=b.baseQueue,A=m.pending;if(A!==null){if(T!==null){var L=T.next;T.next=A.next,A.next=L}b.baseQueue=T=A,m.pending=null}if(T!==null){A=T.next,b=b.baseState;var W=L=null,J=null,te=A;do{var we=te.lane;if((hl&we)===we)J!==null&&(J=J.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),b=te.hasEagerState?te.eagerState:l(b,te.action);else{var Ee={lane:we,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};J===null?(W=J=Ee,L=b):J=J.next=Ee,Wt.lanes|=we,pl|=we}te=te.next}while(te!==null&&te!==A);J===null?L=b:J.next=W,Pi(b,d.memoizedState)||(Er=!0),d.memoizedState=b,d.baseState=L,d.baseQueue=J,m.lastRenderedState=b}if(l=m.interleaved,l!==null){T=l;do A=T.lane,Wt.lanes|=A,pl|=A,T=T.next;while(T!==l)}else T===null&&(m.lanes=0);return[d.memoizedState,m.dispatch]}function n0(l){var d=si(),m=d.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=l;var b=m.dispatch,T=m.pending,A=d.memoizedState;if(T!==null){m.pending=null;var L=T=T.next;do A=l(A,L.action),L=L.next;while(L!==T);Pi(A,d.memoizedState)||(Er=!0),d.memoizedState=A,d.baseQueue===null&&(d.baseState=A),m.lastRenderedState=A}return[A,b]}function F1(){}function U1(l,d){var m=Wt,b=si(),T=d(),A=!Pi(b.memoizedState,T);if(A&&(b.memoizedState=T,Er=!0),b=b.queue,r0(B1.bind(null,m,b,l),[l]),b.getSnapshot!==d||A||_n!==null&&_n.memoizedState.tag&1){if(m.flags|=2048,Dd(9,$1.bind(null,m,b,T,d),void 0,null),En===null)throw Error(n(349));(hl&30)!==0||V1(m,d,T)}return T}function V1(l,d,m){l.flags|=16384,l={getSnapshot:d,value:m},d=Wt.updateQueue,d===null?(d={lastEffect:null,stores:null},Wt.updateQueue=d,d.stores=[l]):(m=d.stores,m===null?d.stores=[l]:m.push(l))}function $1(l,d,m,b){d.value=m,d.getSnapshot=b,z1(d)&&q1(l)}function B1(l,d,m){return m(function(){z1(d)&&q1(l)})}function z1(l){var d=l.getSnapshot;l=l.value;try{var m=d();return!Pi(l,m)}catch{return!0}}function q1(l){var d=ss(l,1);d!==null&&Di(d,l,1,-1)}function G1(l){var d=So();return typeof l=="function"&&(l=l()),d.memoizedState=d.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Md,lastRenderedState:l},d.queue=l,l=l.dispatch=wV.bind(null,Wt,l),[d.memoizedState,l]}function Dd(l,d,m,b){return l={tag:l,create:d,destroy:m,deps:b,next:null},d=Wt.updateQueue,d===null?(d={lastEffect:null,stores:null},Wt.updateQueue=d,d.lastEffect=l.next=l):(m=d.lastEffect,m===null?d.lastEffect=l.next=l:(b=m.next,m.next=l,l.next=b,d.lastEffect=l)),l}function H1(){return si().memoizedState}function rp(l,d,m,b){var T=So();Wt.flags|=l,T.memoizedState=Dd(1|d,m,void 0,b===void 0?null:b)}function ip(l,d,m,b){var T=si();b=b===void 0?null:b;var A=void 0;if(pn!==null){var L=pn.memoizedState;if(A=L.destroy,b!==null&&Xy(b,L.deps)){T.memoizedState=Dd(d,m,A,b);return}}Wt.flags|=l,T.memoizedState=Dd(1|d,m,A,b)}function W1(l,d){return rp(8390656,8,l,d)}function r0(l,d){return ip(2048,8,l,d)}function K1(l,d){return ip(4,2,l,d)}function Y1(l,d){return ip(4,4,l,d)}function J1(l,d){if(typeof d=="function")return l=l(),d(l),function(){d(null)};if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function Q1(l,d,m){return m=m!=null?m.concat([l]):null,ip(4,4,J1.bind(null,d,l),m)}function i0(){}function X1(l,d){var m=si();d=d===void 0?null:d;var b=m.memoizedState;return b!==null&&d!==null&&Xy(d,b[1])?b[0]:(m.memoizedState=[l,d],l)}function Z1(l,d){var m=si();d=d===void 0?null:d;var b=m.memoizedState;return b!==null&&d!==null&&Xy(d,b[1])?b[0]:(l=l(),m.memoizedState=[l,d],l)}function eA(l,d,m){return(hl&21)===0?(l.baseState&&(l.baseState=!1,Er=!0),l.memoizedState=m):(Pi(m,d)||(m=sd(),Wt.lanes|=m,pl|=m,l.baseState=!0),d)}function xV(l,d){var m=gt;gt=m!==0&&4>m?m:4,l(!0);var b=Qy.transition;Qy.transition={};try{l(!1),d()}finally{gt=m,Qy.transition=b}}function tA(){return si().memoizedState}function bV(l,d,m){var b=ca(l);if(m={lane:b,action:m,hasEagerState:!1,eagerState:null,next:null},nA(l))rA(d,m);else if(m=M1(l,d,m,b),m!==null){var T=lr();Di(m,l,b,T),iA(m,d,b)}}function wV(l,d,m){var b=ca(l),T={lane:b,action:m,hasEagerState:!1,eagerState:null,next:null};if(nA(l))rA(d,T);else{var A=l.alternate;if(l.lanes===0&&(A===null||A.lanes===0)&&(A=d.lastRenderedReducer,A!==null))try{var L=d.lastRenderedState,W=A(L,m);if(T.hasEagerState=!0,T.eagerState=W,Pi(W,L)){var J=d.interleaved;J===null?(T.next=T,Gy(d)):(T.next=J.next,J.next=T),d.interleaved=T;return}}catch{}finally{}m=M1(l,d,T,b),m!==null&&(T=lr(),Di(m,l,b,T),iA(m,d,b))}}function nA(l){var d=l.alternate;return l===Wt||d!==null&&d===Wt}function rA(l,d){kd=np=!0;var m=l.pending;m===null?d.next=d:(d.next=m.next,m.next=d),l.pending=d}function iA(l,d,m){if((m&4194240)!==0){var b=d.lanes;b&=l.pendingLanes,m|=b,d.lanes=m,ld(l,m)}}var op={readContext:oi,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useInsertionEffect:Jn,useLayoutEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useMutableSource:Jn,useSyncExternalStore:Jn,useId:Jn,unstable_isNewReconciler:!1},_V={readContext:oi,useCallback:function(l,d){return So().memoizedState=[l,d===void 0?null:d],l},useContext:oi,useEffect:W1,useImperativeHandle:function(l,d,m){return m=m!=null?m.concat([l]):null,rp(4194308,4,J1.bind(null,d,l),m)},useLayoutEffect:function(l,d){return rp(4194308,4,l,d)},useInsertionEffect:function(l,d){return rp(4,2,l,d)},useMemo:function(l,d){var m=So();return d=d===void 0?null:d,l=l(),m.memoizedState=[l,d],l},useReducer:function(l,d,m){var b=So();return d=m!==void 0?m(d):d,b.memoizedState=b.baseState=d,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:d},b.queue=l,l=l.dispatch=bV.bind(null,Wt,l),[b.memoizedState,l]},useRef:function(l){var d=So();return l={current:l},d.memoizedState=l},useState:G1,useDebugValue:i0,useDeferredValue:function(l){return So().memoizedState=l},useTransition:function(){var l=G1(!1),d=l[0];return l=xV.bind(null,l[1]),So().memoizedState=l,[d,l]},useMutableSource:function(){},useSyncExternalStore:function(l,d,m){var b=Wt,T=So();if(zt){if(m===void 0)throw Error(n(407));m=m()}else{if(m=d(),En===null)throw Error(n(349));(hl&30)!==0||V1(b,d,m)}T.memoizedState=m;var A={value:m,getSnapshot:d};return T.queue=A,W1(B1.bind(null,b,A,l),[l]),b.flags|=2048,Dd(9,$1.bind(null,b,A,m,d),void 0,null),m},useId:function(){var l=So(),d=En.identifierPrefix;if(zt){var m=os,b=is;m=(b&~(1<<32-jr(b)-1)).toString(32)+m,d=":"+d+"R"+m,m=Rd++,0<m&&(d+="H"+m.toString(32)),d+=":"}else m=yV++,d=":"+d+"r"+m.toString(32)+":";return l.memoizedState=d},unstable_isNewReconciler:!1},EV={readContext:oi,useCallback:X1,useContext:oi,useEffect:r0,useImperativeHandle:Q1,useInsertionEffect:K1,useLayoutEffect:Y1,useMemo:Z1,useReducer:t0,useRef:H1,useState:function(){return t0(Md)},useDebugValue:i0,useDeferredValue:function(l){var d=si();return eA(d,pn.memoizedState,l)},useTransition:function(){var l=t0(Md)[0],d=si().memoizedState;return[l,d]},useMutableSource:F1,useSyncExternalStore:U1,useId:tA,unstable_isNewReconciler:!1},SV={readContext:oi,useCallback:X1,useContext:oi,useEffect:r0,useImperativeHandle:Q1,useInsertionEffect:K1,useLayoutEffect:Y1,useMemo:Z1,useReducer:n0,useRef:H1,useState:function(){return n0(Md)},useDebugValue:i0,useDeferredValue:function(l){var d=si();return pn===null?d.memoizedState=l:eA(d,pn.memoizedState,l)},useTransition:function(){var l=n0(Md)[0],d=si().memoizedState;return[l,d]},useMutableSource:F1,useSyncExternalStore:U1,useId:tA,unstable_isNewReconciler:!1};function ki(l,d){if(l&&l.defaultProps){d=de({},d),l=l.defaultProps;for(var m in l)d[m]===void 0&&(d[m]=l[m]);return d}return d}function o0(l,d,m,b){d=l.memoizedState,m=m(b,d),m=m==null?d:de({},d,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var sp={isMounted:function(l){return(l=l._reactInternals)?Dn(l)===l:!1},enqueueSetState:function(l,d,m){l=l._reactInternals;var b=lr(),T=ca(l),A=as(b,T);A.payload=d,m!=null&&(A.callback=m),d=oa(l,A,T),d!==null&&(Di(d,l,T,b),Xh(d,l,T))},enqueueReplaceState:function(l,d,m){l=l._reactInternals;var b=lr(),T=ca(l),A=as(b,T);A.tag=1,A.payload=d,m!=null&&(A.callback=m),d=oa(l,A,T),d!==null&&(Di(d,l,T,b),Xh(d,l,T))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var m=lr(),b=ca(l),T=as(m,b);T.tag=2,d!=null&&(T.callback=d),d=oa(l,T,b),d!==null&&(Di(d,l,b,m),Xh(d,l,b))}};function oA(l,d,m,b,T,A,L){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,A,L):d.prototype&&d.prototype.isPureReactComponent?!bd(m,b)||!bd(T,A):!0}function sA(l,d,m){var b=!1,T=na,A=d.contextType;return typeof A=="object"&&A!==null?A=oi(A):(T=_r(d)?ll:Yn.current,b=d.contextTypes,A=(b=b!=null)?Dc(l,T):na),d=new d(m,A),l.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=sp,l.stateNode=d,d._reactInternals=l,b&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=T,l.__reactInternalMemoizedMaskedChildContext=A),d}function aA(l,d,m,b){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,b),d.state!==l&&sp.enqueueReplaceState(d,d.state,null)}function s0(l,d,m,b){var T=l.stateNode;T.props=m,T.state=l.memoizedState,T.refs={},Hy(l);var A=d.contextType;typeof A=="object"&&A!==null?T.context=oi(A):(A=_r(d)?ll:Yn.current,T.context=Dc(l,A)),T.state=l.memoizedState,A=d.getDerivedStateFromProps,typeof A=="function"&&(o0(l,d,A,m),T.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(d=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),d!==T.state&&sp.enqueueReplaceState(T,T.state,null),Zh(l,m,T,b),T.state=l.memoizedState),typeof T.componentDidMount=="function"&&(l.flags|=4194308)}function Bc(l,d){try{var m="",b=d;do m+=$e(b),b=b.return;while(b);var T=m}catch(A){T=`
Error generating stack: `+A.message+`
`+A.stack}return{value:l,source:d,stack:T,digest:null}}function a0(l,d,m){return{value:l,source:null,stack:m??null,digest:d??null}}function l0(l,d){try{console.error(d.value)}catch(m){setTimeout(function(){throw m})}}var TV=typeof WeakMap=="function"?WeakMap:Map;function lA(l,d,m){m=as(-1,m),m.tag=3,m.payload={element:null};var b=d.value;return m.callback=function(){hp||(hp=!0,E0=b),l0(l,d)},m}function cA(l,d,m){m=as(-1,m),m.tag=3;var b=l.type.getDerivedStateFromError;if(typeof b=="function"){var T=d.value;m.payload=function(){return b(T)},m.callback=function(){l0(l,d)}}var A=l.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(m.callback=function(){l0(l,d),typeof b!="function"&&(aa===null?aa=new Set([this]):aa.add(this));var L=d.stack;this.componentDidCatch(d.value,{componentStack:L!==null?L:""})}),m}function uA(l,d,m){var b=l.pingCache;if(b===null){b=l.pingCache=new TV;var T=new Set;b.set(d,T)}else T=b.get(d),T===void 0&&(T=new Set,b.set(d,T));T.has(m)||(T.add(m),l=UV.bind(null,l,d,m),d.then(l,l))}function dA(l){do{var d;if((d=l.tag===13)&&(d=l.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return l;l=l.return}while(l!==null);return null}function fA(l,d,m,b,T){return(l.mode&1)===0?(l===d?l.flags|=65536:(l.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(d=as(-1,1),d.tag=2,oa(m,d,1))),m.lanes|=1),l):(l.flags|=65536,l.lanes=T,l)}var AV=q.ReactCurrentOwner,Er=!1;function ar(l,d,m,b){d.child=l===null?R1(d,null,m,b):Fc(d,l.child,m,b)}function hA(l,d,m,b,T){m=m.render;var A=d.ref;return Vc(d,T),b=Zy(l,d,m,b,A,T),m=e0(),l!==null&&!Er?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~T,ls(l,d,T)):(zt&&m&&Ly(d),d.flags|=1,ar(l,d,b,T),d.child)}function pA(l,d,m,b,T){if(l===null){var A=m.type;return typeof A=="function"&&!N0(A)&&A.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(d.tag=15,d.type=A,mA(l,d,A,b,T)):(l=xp(m.type,null,b,d,d.mode,T),l.ref=d.ref,l.return=d,d.child=l)}if(A=l.child,(l.lanes&T)===0){var L=A.memoizedProps;if(m=m.compare,m=m!==null?m:bd,m(L,b)&&l.ref===d.ref)return ls(l,d,T)}return d.flags|=1,l=da(A,b),l.ref=d.ref,l.return=d,d.child=l}function mA(l,d,m,b,T){if(l!==null){var A=l.memoizedProps;if(bd(A,b)&&l.ref===d.ref)if(Er=!1,d.pendingProps=b=A,(l.lanes&T)!==0)(l.flags&131072)!==0&&(Er=!0);else return d.lanes=l.lanes,ls(l,d,T)}return c0(l,d,m,b,T)}function gA(l,d,m){var b=d.pendingProps,T=b.children,A=l!==null?l.memoizedState:null;if(b.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(qc,qr),qr|=m;else{if((m&1073741824)===0)return l=A!==null?A.baseLanes|m:m,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:l,cachePool:null,transitions:null},d.updateQueue=null,Rt(qc,qr),qr|=l,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=A!==null?A.baseLanes:m,Rt(qc,qr),qr|=b}else A!==null?(b=A.baseLanes|m,d.memoizedState=null):b=m,Rt(qc,qr),qr|=b;return ar(l,d,T,m),d.child}function vA(l,d){var m=d.ref;(l===null&&m!==null||l!==null&&l.ref!==m)&&(d.flags|=512,d.flags|=2097152)}function c0(l,d,m,b,T){var A=_r(m)?ll:Yn.current;return A=Dc(d,A),Vc(d,T),m=Zy(l,d,m,b,A,T),b=e0(),l!==null&&!Er?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~T,ls(l,d,T)):(zt&&b&&Ly(d),d.flags|=1,ar(l,d,m,T),d.child)}function yA(l,d,m,b,T){if(_r(m)){var A=!0;qh(d)}else A=!1;if(Vc(d,T),d.stateNode===null)lp(l,d),sA(d,m,b),s0(d,m,b,T),b=!0;else if(l===null){var L=d.stateNode,W=d.memoizedProps;L.props=W;var J=L.context,te=m.contextType;typeof te=="object"&&te!==null?te=oi(te):(te=_r(m)?ll:Yn.current,te=Dc(d,te));var we=m.getDerivedStateFromProps,Ee=typeof we=="function"||typeof L.getSnapshotBeforeUpdate=="function";Ee||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(W!==b||J!==te)&&aA(d,L,b,te),ia=!1;var ye=d.memoizedState;L.state=ye,Zh(d,b,L,T),J=d.memoizedState,W!==b||ye!==J||wr.current||ia?(typeof we=="function"&&(o0(d,m,we,b),J=d.memoizedState),(W=ia||oA(d,m,W,b,ye,J,te))?(Ee||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(d.flags|=4194308)):(typeof L.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=J),L.props=b,L.state=J,L.context=te,b=W):(typeof L.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{L=d.stateNode,D1(l,d),W=d.memoizedProps,te=d.type===d.elementType?W:ki(d.type,W),L.props=te,Ee=d.pendingProps,ye=L.context,J=m.contextType,typeof J=="object"&&J!==null?J=oi(J):(J=_r(m)?ll:Yn.current,J=Dc(d,J));var Re=m.getDerivedStateFromProps;(we=typeof Re=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(W!==Ee||ye!==J)&&aA(d,L,b,J),ia=!1,ye=d.memoizedState,L.state=ye,Zh(d,b,L,T);var Fe=d.memoizedState;W!==Ee||ye!==Fe||wr.current||ia?(typeof Re=="function"&&(o0(d,m,Re,b),Fe=d.memoizedState),(te=ia||oA(d,m,te,b,ye,Fe,J)||!1)?(we||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(b,Fe,J),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(b,Fe,J)),typeof L.componentDidUpdate=="function"&&(d.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof L.componentDidUpdate!="function"||W===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||W===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=Fe),L.props=b,L.state=Fe,L.context=J,b=te):(typeof L.componentDidUpdate!="function"||W===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||W===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),b=!1)}return u0(l,d,m,b,A,T)}function u0(l,d,m,b,T,A){vA(l,d);var L=(d.flags&128)!==0;if(!b&&!L)return T&&E1(d,m,!1),ls(l,d,A);b=d.stateNode,AV.current=d;var W=L&&typeof m.getDerivedStateFromError!="function"?null:b.render();return d.flags|=1,l!==null&&L?(d.child=Fc(d,l.child,null,A),d.child=Fc(d,null,W,A)):ar(l,d,W,A),d.memoizedState=b.state,T&&E1(d,m,!0),d.child}function xA(l){var d=l.stateNode;d.pendingContext?w1(l,d.pendingContext,d.pendingContext!==d.context):d.context&&w1(l,d.context,!1),Wy(l,d.containerInfo)}function bA(l,d,m,b,T){return jc(),Vy(T),d.flags|=256,ar(l,d,m,b),d.child}var d0={dehydrated:null,treeContext:null,retryLane:0};function f0(l){return{baseLanes:l,cachePool:null,transitions:null}}function wA(l,d,m){var b=d.pendingProps,T=Ht.current,A=!1,L=(d.flags&128)!==0,W;if((W=L)||(W=l!==null&&l.memoizedState===null?!1:(T&2)!==0),W?(A=!0,d.flags&=-129):(l===null||l.memoizedState!==null)&&(T|=1),Rt(Ht,T&1),l===null)return Uy(d),l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((d.mode&1)===0?d.lanes=1:l.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(L=b.children,l=b.fallback,A?(b=d.mode,A=d.child,L={mode:"hidden",children:L},(b&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=L):A=bp(L,b,0,null),l=yl(l,b,m,null),A.return=d,l.return=d,A.sibling=l,d.child=A,d.child.memoizedState=f0(m),d.memoizedState=d0,l):h0(d,L));if(T=l.memoizedState,T!==null&&(W=T.dehydrated,W!==null))return CV(l,d,L,b,W,T,m);if(A){A=b.fallback,L=d.mode,T=l.child,W=T.sibling;var J={mode:"hidden",children:b.children};return(L&1)===0&&d.child!==T?(b=d.child,b.childLanes=0,b.pendingProps=J,d.deletions=null):(b=da(T,J),b.subtreeFlags=T.subtreeFlags&14680064),W!==null?A=da(W,A):(A=yl(A,L,m,null),A.flags|=2),A.return=d,b.return=d,b.sibling=A,d.child=b,b=A,A=d.child,L=l.child.memoizedState,L=L===null?f0(m):{baseLanes:L.baseLanes|m,cachePool:null,transitions:L.transitions},A.memoizedState=L,A.childLanes=l.childLanes&~m,d.memoizedState=d0,b}return A=l.child,l=A.sibling,b=da(A,{mode:"visible",children:b.children}),(d.mode&1)===0&&(b.lanes=m),b.return=d,b.sibling=null,l!==null&&(m=d.deletions,m===null?(d.deletions=[l],d.flags|=16):m.push(l)),d.child=b,d.memoizedState=null,b}function h0(l,d){return d=bp({mode:"visible",children:d},l.mode,0,null),d.return=l,l.child=d}function ap(l,d,m,b){return b!==null&&Vy(b),Fc(d,l.child,null,m),l=h0(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function CV(l,d,m,b,T,A,L){if(m)return d.flags&256?(d.flags&=-257,b=a0(Error(n(422))),ap(l,d,L,b)):d.memoizedState!==null?(d.child=l.child,d.flags|=128,null):(A=b.fallback,T=d.mode,b=bp({mode:"visible",children:b.children},T,0,null),A=yl(A,T,L,null),A.flags|=2,b.return=d,A.return=d,b.sibling=A,d.child=b,(d.mode&1)!==0&&Fc(d,l.child,null,L),d.child.memoizedState=f0(L),d.memoizedState=d0,A);if((d.mode&1)===0)return ap(l,d,L,null);if(T.data==="$!"){if(b=T.nextSibling&&T.nextSibling.dataset,b)var W=b.dgst;return b=W,A=Error(n(419)),b=a0(A,b,void 0),ap(l,d,L,b)}if(W=(L&l.childLanes)!==0,Er||W){if(b=En,b!==null){switch(L&-L){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(b.suspendedLanes|L))!==0?0:T,T!==0&&T!==A.retryLane&&(A.retryLane=T,ss(l,T),Di(b,l,T,-1))}return P0(),b=a0(Error(n(421))),ap(l,d,L,b)}return T.data==="$?"?(d.flags|=128,d.child=l.child,d=VV.bind(null,l),T._reactRetry=d,null):(l=A.treeContext,zr=ea(T.nextSibling),Br=d,zt=!0,Ni=null,l!==null&&(ri[ii++]=is,ri[ii++]=os,ri[ii++]=cl,is=l.id,os=l.overflow,cl=d),d=h0(d,b.children),d.flags|=4096,d)}function _A(l,d,m){l.lanes|=d;var b=l.alternate;b!==null&&(b.lanes|=d),qy(l.return,d,m)}function p0(l,d,m,b,T){var A=l.memoizedState;A===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:m,tailMode:T}:(A.isBackwards=d,A.rendering=null,A.renderingStartTime=0,A.last=b,A.tail=m,A.tailMode=T)}function EA(l,d,m){var b=d.pendingProps,T=b.revealOrder,A=b.tail;if(ar(l,d,b.children,m),b=Ht.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&_A(l,m,d);else if(l.tag===19)_A(l,m,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}if(Rt(Ht,b),(d.mode&1)===0)d.memoizedState=null;else switch(T){case"forwards":for(m=d.child,T=null;m!==null;)l=m.alternate,l!==null&&ep(l)===null&&(T=m),m=m.sibling;m=T,m===null?(T=d.child,d.child=null):(T=m.sibling,m.sibling=null),p0(d,!1,T,m,A);break;case"backwards":for(m=null,T=d.child,d.child=null;T!==null;){if(l=T.alternate,l!==null&&ep(l)===null){d.child=T;break}l=T.sibling,T.sibling=m,m=T,T=l}p0(d,!0,m,null,A);break;case"together":p0(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function lp(l,d){(d.mode&1)===0&&l!==null&&(l.alternate=null,d.alternate=null,d.flags|=2)}function ls(l,d,m){if(l!==null&&(d.dependencies=l.dependencies),pl|=d.lanes,(m&d.childLanes)===0)return null;if(l!==null&&d.child!==l.child)throw Error(n(153));if(d.child!==null){for(l=d.child,m=da(l,l.pendingProps),d.child=m,m.return=d;l.sibling!==null;)l=l.sibling,m=m.sibling=da(l,l.pendingProps),m.return=d;m.sibling=null}return d.child}function IV(l,d,m){switch(d.tag){case 3:xA(d),jc();break;case 5:j1(d);break;case 1:_r(d.type)&&qh(d);break;case 4:Wy(d,d.stateNode.containerInfo);break;case 10:var b=d.type._context,T=d.memoizedProps.value;Rt(Jh,b._currentValue),b._currentValue=T;break;case 13:if(b=d.memoizedState,b!==null)return b.dehydrated!==null?(Rt(Ht,Ht.current&1),d.flags|=128,null):(m&d.child.childLanes)!==0?wA(l,d,m):(Rt(Ht,Ht.current&1),l=ls(l,d,m),l!==null?l.sibling:null);Rt(Ht,Ht.current&1);break;case 19:if(b=(m&d.childLanes)!==0,(l.flags&128)!==0){if(b)return EA(l,d,m);d.flags|=128}if(T=d.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Rt(Ht,Ht.current),b)break;return null;case 22:case 23:return d.lanes=0,gA(l,d,m)}return ls(l,d,m)}var SA,m0,TA,AA;SA=function(l,d){for(var m=d.child;m!==null;){if(m.tag===5||m.tag===6)l.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},m0=function(){},TA=function(l,d,m,b){var T=l.memoizedProps;if(T!==b){l=d.stateNode,fl(Eo.current);var A=null;switch(m){case"input":T=Be(l,T),b=Be(l,b),A=[];break;case"select":T=de({},T,{value:void 0}),b=de({},b,{value:void 0}),A=[];break;case"textarea":T=dt(l,T),b=dt(l,b),A=[];break;default:typeof T.onClick!="function"&&typeof b.onClick=="function"&&(l.onclick=$h)}xr(m,b);var L;m=null;for(te in T)if(!b.hasOwnProperty(te)&&T.hasOwnProperty(te)&&T[te]!=null)if(te==="style"){var W=T[te];for(L in W)W.hasOwnProperty(L)&&(m||(m={}),m[L]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(i.hasOwnProperty(te)?A||(A=[]):(A=A||[]).push(te,null));for(te in b){var J=b[te];if(W=T!=null?T[te]:void 0,b.hasOwnProperty(te)&&J!==W&&(J!=null||W!=null))if(te==="style")if(W){for(L in W)!W.hasOwnProperty(L)||J&&J.hasOwnProperty(L)||(m||(m={}),m[L]="");for(L in J)J.hasOwnProperty(L)&&W[L]!==J[L]&&(m||(m={}),m[L]=J[L])}else m||(A||(A=[]),A.push(te,m)),m=J;else te==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,W=W?W.__html:void 0,J!=null&&W!==J&&(A=A||[]).push(te,J)):te==="children"?typeof J!="string"&&typeof J!="number"||(A=A||[]).push(te,""+J):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(i.hasOwnProperty(te)?(J!=null&&te==="onScroll"&&Lt("scroll",l),A||W===J||(A=[])):(A=A||[]).push(te,J))}m&&(A=A||[]).push("style",m);var te=A;(d.updateQueue=te)&&(d.flags|=4)}},AA=function(l,d,m,b){m!==b&&(d.flags|=4)};function Od(l,d){if(!zt)switch(l.tailMode){case"hidden":d=l.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function Qn(l){var d=l.alternate!==null&&l.alternate.child===l.child,m=0,b=0;if(d)for(var T=l.child;T!==null;)m|=T.lanes|T.childLanes,b|=T.subtreeFlags&14680064,b|=T.flags&14680064,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)m|=T.lanes|T.childLanes,b|=T.subtreeFlags,b|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=b,l.childLanes=m,d}function PV(l,d,m){var b=d.pendingProps;switch(jy(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(d),null;case 1:return _r(d.type)&&zh(),Qn(d),null;case 3:return b=d.stateNode,$c(),jt(wr),jt(Yn),Jy(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(l===null||l.child===null)&&(Kh(d)?d.flags|=4:l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Ni!==null&&(A0(Ni),Ni=null))),m0(l,d),Qn(d),null;case 5:Ky(d);var T=fl(Nd.current);if(m=d.type,l!==null&&d.stateNode!=null)TA(l,d,m,b,T),l.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!b){if(d.stateNode===null)throw Error(n(166));return Qn(d),null}if(l=fl(Eo.current),Kh(d)){b=d.stateNode,m=d.type;var A=d.memoizedProps;switch(b[_o]=d,b[Td]=A,l=(d.mode&1)!==0,m){case"dialog":Lt("cancel",b),Lt("close",b);break;case"iframe":case"object":case"embed":Lt("load",b);break;case"video":case"audio":for(T=0;T<_d.length;T++)Lt(_d[T],b);break;case"source":Lt("error",b);break;case"img":case"image":case"link":Lt("error",b),Lt("load",b);break;case"details":Lt("toggle",b);break;case"input":He(b,A),Lt("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!A.multiple},Lt("invalid",b);break;case"textarea":G(b,A),Lt("invalid",b)}xr(m,A),T=null;for(var L in A)if(A.hasOwnProperty(L)){var W=A[L];L==="children"?typeof W=="string"?b.textContent!==W&&(A.suppressHydrationWarning!==!0&&Vh(b.textContent,W,l),T=["children",W]):typeof W=="number"&&b.textContent!==""+W&&(A.suppressHydrationWarning!==!0&&Vh(b.textContent,W,l),T=["children",""+W]):i.hasOwnProperty(L)&&W!=null&&L==="onScroll"&&Lt("scroll",b)}switch(m){case"input":ve(b),Ne(b,A,!0);break;case"textarea":ve(b),ct(b);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(b.onclick=$h)}b=T,d.updateQueue=b,b!==null&&(d.flags|=4)}else{L=T.nodeType===9?T:T.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=ft(m)),l==="http://www.w3.org/1999/xhtml"?m==="script"?(l=L.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof b.is=="string"?l=L.createElement(m,{is:b.is}):(l=L.createElement(m),m==="select"&&(L=l,b.multiple?L.multiple=!0:b.size&&(L.size=b.size))):l=L.createElementNS(l,m),l[_o]=d,l[Td]=b,SA(l,d,!1,!1),d.stateNode=l;e:{switch(L=Wo(m,b),m){case"dialog":Lt("cancel",l),Lt("close",l),T=b;break;case"iframe":case"object":case"embed":Lt("load",l),T=b;break;case"video":case"audio":for(T=0;T<_d.length;T++)Lt(_d[T],l);T=b;break;case"source":Lt("error",l),T=b;break;case"img":case"image":case"link":Lt("error",l),Lt("load",l),T=b;break;case"details":Lt("toggle",l),T=b;break;case"input":He(l,b),T=Be(l,b),Lt("invalid",l);break;case"option":T=b;break;case"select":l._wrapperState={wasMultiple:!!b.multiple},T=de({},b,{value:void 0}),Lt("invalid",l);break;case"textarea":G(l,b),T=dt(l,b),Lt("invalid",l);break;default:T=b}xr(m,T),W=T;for(A in W)if(W.hasOwnProperty(A)){var J=W[A];A==="style"?Mn(l,J):A==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&io(l,J)):A==="children"?typeof J=="string"?(m!=="textarea"||J!=="")&&Ho(l,J):typeof J=="number"&&Ho(l,""+J):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(i.hasOwnProperty(A)?J!=null&&A==="onScroll"&&Lt("scroll",l):J!=null&&F(l,A,J,L))}switch(m){case"input":ve(l),Ne(l,b,!1);break;case"textarea":ve(l),ct(l);break;case"option":b.value!=null&&l.setAttribute("value",""+ze(b.value));break;case"select":l.multiple=!!b.multiple,A=b.value,A!=null?Je(l,!!b.multiple,A,!1):b.defaultValue!=null&&Je(l,!!b.multiple,b.defaultValue,!0);break;default:typeof T.onClick=="function"&&(l.onclick=$h)}switch(m){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Qn(d),null;case 6:if(l&&d.stateNode!=null)AA(l,d,l.memoizedProps,b);else{if(typeof b!="string"&&d.stateNode===null)throw Error(n(166));if(m=fl(Nd.current),fl(Eo.current),Kh(d)){if(b=d.stateNode,m=d.memoizedProps,b[_o]=d,(A=b.nodeValue!==m)&&(l=Br,l!==null))switch(l.tag){case 3:Vh(b.nodeValue,m,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Vh(b.nodeValue,m,(l.mode&1)!==0)}A&&(d.flags|=4)}else b=(m.nodeType===9?m:m.ownerDocument).createTextNode(b),b[_o]=d,d.stateNode=b}return Qn(d),null;case 13:if(jt(Ht),b=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(zt&&zr!==null&&(d.mode&1)!==0&&(d.flags&128)===0)P1(),jc(),d.flags|=98560,A=!1;else if(A=Kh(d),b!==null&&b.dehydrated!==null){if(l===null){if(!A)throw Error(n(318));if(A=d.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[_o]=d}else jc(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Qn(d),A=!1}else Ni!==null&&(A0(Ni),Ni=null),A=!0;if(!A)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=m,d):(b=b!==null,b!==(l!==null&&l.memoizedState!==null)&&b&&(d.child.flags|=8192,(d.mode&1)!==0&&(l===null||(Ht.current&1)!==0?mn===0&&(mn=3):P0())),d.updateQueue!==null&&(d.flags|=4),Qn(d),null);case 4:return $c(),m0(l,d),l===null&&Ed(d.stateNode.containerInfo),Qn(d),null;case 10:return zy(d.type._context),Qn(d),null;case 17:return _r(d.type)&&zh(),Qn(d),null;case 19:if(jt(Ht),A=d.memoizedState,A===null)return Qn(d),null;if(b=(d.flags&128)!==0,L=A.rendering,L===null)if(b)Od(A,!1);else{if(mn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(L=ep(l),L!==null){for(d.flags|=128,Od(A,!1),b=L.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),d.subtreeFlags=0,b=m,m=d.child;m!==null;)A=m,l=b,A.flags&=14680066,L=A.alternate,L===null?(A.childLanes=0,A.lanes=l,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=L.childLanes,A.lanes=L.lanes,A.child=L.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=L.memoizedProps,A.memoizedState=L.memoizedState,A.updateQueue=L.updateQueue,A.type=L.type,l=L.dependencies,A.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),m=m.sibling;return Rt(Ht,Ht.current&1|2),d.child}l=l.sibling}A.tail!==null&&Ot()>Gc&&(d.flags|=128,b=!0,Od(A,!1),d.lanes=4194304)}else{if(!b)if(l=ep(L),l!==null){if(d.flags|=128,b=!0,m=l.updateQueue,m!==null&&(d.updateQueue=m,d.flags|=4),Od(A,!0),A.tail===null&&A.tailMode==="hidden"&&!L.alternate&&!zt)return Qn(d),null}else 2*Ot()-A.renderingStartTime>Gc&&m!==1073741824&&(d.flags|=128,b=!0,Od(A,!1),d.lanes=4194304);A.isBackwards?(L.sibling=d.child,d.child=L):(m=A.last,m!==null?m.sibling=L:d.child=L,A.last=L)}return A.tail!==null?(d=A.tail,A.rendering=d,A.tail=d.sibling,A.renderingStartTime=Ot(),d.sibling=null,m=Ht.current,Rt(Ht,b?m&1|2:m&1),d):(Qn(d),null);case 22:case 23:return I0(),b=d.memoizedState!==null,l!==null&&l.memoizedState!==null!==b&&(d.flags|=8192),b&&(d.mode&1)!==0?(qr&1073741824)!==0&&(Qn(d),d.subtreeFlags&6&&(d.flags|=8192)):Qn(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function NV(l,d){switch(jy(d),d.tag){case 1:return _r(d.type)&&zh(),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return $c(),jt(wr),jt(Yn),Jy(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 5:return Ky(d),null;case 13:if(jt(Ht),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(n(340));jc()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return jt(Ht),null;case 4:return $c(),null;case 10:return zy(d.type._context),null;case 22:case 23:return I0(),null;case 24:return null;default:return null}}var cp=!1,Xn=!1,kV=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function zc(l,d){var m=l.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(b){Yt(l,d,b)}else m.current=null}function g0(l,d,m){try{m()}catch(b){Yt(l,d,b)}}var CA=!1;function RV(l,d){if(Iy=Zo,l=o1(),by(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var b=m.getSelection&&m.getSelection();if(b&&b.rangeCount!==0){m=b.anchorNode;var T=b.anchorOffset,A=b.focusNode;b=b.focusOffset;try{m.nodeType,A.nodeType}catch{m=null;break e}var L=0,W=-1,J=-1,te=0,we=0,Ee=l,ye=null;t:for(;;){for(var Re;Ee!==m||T!==0&&Ee.nodeType!==3||(W=L+T),Ee!==A||b!==0&&Ee.nodeType!==3||(J=L+b),Ee.nodeType===3&&(L+=Ee.nodeValue.length),(Re=Ee.firstChild)!==null;)ye=Ee,Ee=Re;for(;;){if(Ee===l)break t;if(ye===m&&++te===T&&(W=L),ye===A&&++we===b&&(J=L),(Re=Ee.nextSibling)!==null)break;Ee=ye,ye=Ee.parentNode}Ee=Re}m=W===-1||J===-1?null:{start:W,end:J}}else m=null}m=m||{start:0,end:0}}else m=null;for(Py={focusedElem:l,selectionRange:m},Zo=!1,Oe=d;Oe!==null;)if(d=Oe,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,Oe=l;else for(;Oe!==null;){d=Oe;try{var Fe=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(Fe!==null){var Ve=Fe.memoizedProps,Zt=Fe.memoizedState,X=d.stateNode,Q=X.getSnapshotBeforeUpdate(d.elementType===d.type?Ve:ki(d.type,Ve),Zt);X.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var ee=d.stateNode.containerInfo;ee.nodeType===1?ee.textContent="":ee.nodeType===9&&ee.documentElement&&ee.removeChild(ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Se){Yt(d,d.return,Se)}if(l=d.sibling,l!==null){l.return=d.return,Oe=l;break}Oe=d.return}return Fe=CA,CA=!1,Fe}function Ld(l,d,m){var b=d.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var T=b=b.next;do{if((T.tag&l)===l){var A=T.destroy;T.destroy=void 0,A!==void 0&&g0(d,m,A)}T=T.next}while(T!==b)}}function up(l,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&l)===l){var b=m.create;m.destroy=b()}m=m.next}while(m!==d)}}function v0(l){var d=l.ref;if(d!==null){var m=l.stateNode;switch(l.tag){case 5:l=m;break;default:l=m}typeof d=="function"?d(l):d.current=l}}function IA(l){var d=l.alternate;d!==null&&(l.alternate=null,IA(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&(delete d[_o],delete d[Td],delete d[My],delete d[pV],delete d[mV])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function PA(l){return l.tag===5||l.tag===3||l.tag===4}function NA(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||PA(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function y0(l,d,m){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?m.nodeType===8?m.parentNode.insertBefore(l,d):m.insertBefore(l,d):(m.nodeType===8?(d=m.parentNode,d.insertBefore(l,m)):(d=m,d.appendChild(l)),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=$h));else if(b!==4&&(l=l.child,l!==null))for(y0(l,d,m),l=l.sibling;l!==null;)y0(l,d,m),l=l.sibling}function x0(l,d,m){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?m.insertBefore(l,d):m.appendChild(l);else if(b!==4&&(l=l.child,l!==null))for(x0(l,d,m),l=l.sibling;l!==null;)x0(l,d,m),l=l.sibling}var jn=null,Ri=!1;function sa(l,d,m){for(m=m.child;m!==null;)kA(l,d,m),m=m.sibling}function kA(l,d,m){if(Lr&&typeof Lr.onCommitFiberUnmount=="function")try{Lr.onCommitFiberUnmount(Xa,m)}catch{}switch(m.tag){case 5:Xn||zc(m,d);case 6:var b=jn,T=Ri;jn=null,sa(l,d,m),jn=b,Ri=T,jn!==null&&(Ri?(l=jn,m=m.stateNode,l.nodeType===8?l.parentNode.removeChild(m):l.removeChild(m)):jn.removeChild(m.stateNode));break;case 18:jn!==null&&(Ri?(l=jn,m=m.stateNode,l.nodeType===8?Ry(l.parentNode,m):l.nodeType===1&&Ry(l,m),Js(l)):Ry(jn,m.stateNode));break;case 4:b=jn,T=Ri,jn=m.stateNode.containerInfo,Ri=!0,sa(l,d,m),jn=b,Ri=T;break;case 0:case 11:case 14:case 15:if(!Xn&&(b=m.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){T=b=b.next;do{var A=T,L=A.destroy;A=A.tag,L!==void 0&&((A&2)!==0||(A&4)!==0)&&g0(m,d,L),T=T.next}while(T!==b)}sa(l,d,m);break;case 1:if(!Xn&&(zc(m,d),b=m.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=m.memoizedProps,b.state=m.memoizedState,b.componentWillUnmount()}catch(W){Yt(m,d,W)}sa(l,d,m);break;case 21:sa(l,d,m);break;case 22:m.mode&1?(Xn=(b=Xn)||m.memoizedState!==null,sa(l,d,m),Xn=b):sa(l,d,m);break;default:sa(l,d,m)}}function RA(l){var d=l.updateQueue;if(d!==null){l.updateQueue=null;var m=l.stateNode;m===null&&(m=l.stateNode=new kV),d.forEach(function(b){var T=$V.bind(null,l,b);m.has(b)||(m.add(b),b.then(T,T))})}}function Mi(l,d){var m=d.deletions;if(m!==null)for(var b=0;b<m.length;b++){var T=m[b];try{var A=l,L=d,W=L;e:for(;W!==null;){switch(W.tag){case 5:jn=W.stateNode,Ri=!1;break e;case 3:jn=W.stateNode.containerInfo,Ri=!0;break e;case 4:jn=W.stateNode.containerInfo,Ri=!0;break e}W=W.return}if(jn===null)throw Error(n(160));kA(A,L,T),jn=null,Ri=!1;var J=T.alternate;J!==null&&(J.return=null),T.return=null}catch(te){Yt(T,d,te)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)MA(d,l),d=d.sibling}function MA(l,d){var m=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Mi(d,l),To(l),b&4){try{Ld(3,l,l.return),up(3,l)}catch(Ve){Yt(l,l.return,Ve)}try{Ld(5,l,l.return)}catch(Ve){Yt(l,l.return,Ve)}}break;case 1:Mi(d,l),To(l),b&512&&m!==null&&zc(m,m.return);break;case 5:if(Mi(d,l),To(l),b&512&&m!==null&&zc(m,m.return),l.flags&32){var T=l.stateNode;try{Ho(T,"")}catch(Ve){Yt(l,l.return,Ve)}}if(b&4&&(T=l.stateNode,T!=null)){var A=l.memoizedProps,L=m!==null?m.memoizedProps:A,W=l.type,J=l.updateQueue;if(l.updateQueue=null,J!==null)try{W==="input"&&A.type==="radio"&&A.name!=null&&rt(T,A),Wo(W,L);var te=Wo(W,A);for(L=0;L<J.length;L+=2){var we=J[L],Ee=J[L+1];we==="style"?Mn(T,Ee):we==="dangerouslySetInnerHTML"?io(T,Ee):we==="children"?Ho(T,Ee):F(T,we,Ee,te)}switch(W){case"input":Ye(T,A);break;case"textarea":je(T,A);break;case"select":var ye=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!A.multiple;var Re=A.value;Re!=null?Je(T,!!A.multiple,Re,!1):ye!==!!A.multiple&&(A.defaultValue!=null?Je(T,!!A.multiple,A.defaultValue,!0):Je(T,!!A.multiple,A.multiple?[]:"",!1))}T[Td]=A}catch(Ve){Yt(l,l.return,Ve)}}break;case 6:if(Mi(d,l),To(l),b&4){if(l.stateNode===null)throw Error(n(162));T=l.stateNode,A=l.memoizedProps;try{T.nodeValue=A}catch(Ve){Yt(l,l.return,Ve)}}break;case 3:if(Mi(d,l),To(l),b&4&&m!==null&&m.memoizedState.isDehydrated)try{Js(d.containerInfo)}catch(Ve){Yt(l,l.return,Ve)}break;case 4:Mi(d,l),To(l);break;case 13:Mi(d,l),To(l),T=l.child,T.flags&8192&&(A=T.memoizedState!==null,T.stateNode.isHidden=A,!A||T.alternate!==null&&T.alternate.memoizedState!==null||(_0=Ot())),b&4&&RA(l);break;case 22:if(we=m!==null&&m.memoizedState!==null,l.mode&1?(Xn=(te=Xn)||we,Mi(d,l),Xn=te):Mi(d,l),To(l),b&8192){if(te=l.memoizedState!==null,(l.stateNode.isHidden=te)&&!we&&(l.mode&1)!==0)for(Oe=l,we=l.child;we!==null;){for(Ee=Oe=we;Oe!==null;){switch(ye=Oe,Re=ye.child,ye.tag){case 0:case 11:case 14:case 15:Ld(4,ye,ye.return);break;case 1:zc(ye,ye.return);var Fe=ye.stateNode;if(typeof Fe.componentWillUnmount=="function"){b=ye,m=ye.return;try{d=b,Fe.props=d.memoizedProps,Fe.state=d.memoizedState,Fe.componentWillUnmount()}catch(Ve){Yt(b,m,Ve)}}break;case 5:zc(ye,ye.return);break;case 22:if(ye.memoizedState!==null){LA(Ee);continue}}Re!==null?(Re.return=ye,Oe=Re):LA(Ee)}we=we.sibling}e:for(we=null,Ee=l;;){if(Ee.tag===5){if(we===null){we=Ee;try{T=Ee.stateNode,te?(A=T.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(W=Ee.stateNode,J=Ee.memoizedProps.style,L=J!=null&&J.hasOwnProperty("display")?J.display:null,W.style.display=so("display",L))}catch(Ve){Yt(l,l.return,Ve)}}}else if(Ee.tag===6){if(we===null)try{Ee.stateNode.nodeValue=te?"":Ee.memoizedProps}catch(Ve){Yt(l,l.return,Ve)}}else if((Ee.tag!==22&&Ee.tag!==23||Ee.memoizedState===null||Ee===l)&&Ee.child!==null){Ee.child.return=Ee,Ee=Ee.child;continue}if(Ee===l)break e;for(;Ee.sibling===null;){if(Ee.return===null||Ee.return===l)break e;we===Ee&&(we=null),Ee=Ee.return}we===Ee&&(we=null),Ee.sibling.return=Ee.return,Ee=Ee.sibling}}break;case 19:Mi(d,l),To(l),b&4&&RA(l);break;case 21:break;default:Mi(d,l),To(l)}}function To(l){var d=l.flags;if(d&2){try{e:{for(var m=l.return;m!==null;){if(PA(m)){var b=m;break e}m=m.return}throw Error(n(160))}switch(b.tag){case 5:var T=b.stateNode;b.flags&32&&(Ho(T,""),b.flags&=-33);var A=NA(l);x0(l,A,T);break;case 3:case 4:var L=b.stateNode.containerInfo,W=NA(l);y0(l,W,L);break;default:throw Error(n(161))}}catch(J){Yt(l,l.return,J)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function MV(l,d,m){Oe=l,DA(l)}function DA(l,d,m){for(var b=(l.mode&1)!==0;Oe!==null;){var T=Oe,A=T.child;if(T.tag===22&&b){var L=T.memoizedState!==null||cp;if(!L){var W=T.alternate,J=W!==null&&W.memoizedState!==null||Xn;W=cp;var te=Xn;if(cp=L,(Xn=J)&&!te)for(Oe=T;Oe!==null;)L=Oe,J=L.child,L.tag===22&&L.memoizedState!==null?jA(T):J!==null?(J.return=L,Oe=J):jA(T);for(;A!==null;)Oe=A,DA(A),A=A.sibling;Oe=T,cp=W,Xn=te}OA(l)}else(T.subtreeFlags&8772)!==0&&A!==null?(A.return=T,Oe=A):OA(l)}}function OA(l){for(;Oe!==null;){var d=Oe;if((d.flags&8772)!==0){var m=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Xn||up(5,d);break;case 1:var b=d.stateNode;if(d.flags&4&&!Xn)if(m===null)b.componentDidMount();else{var T=d.elementType===d.type?m.memoizedProps:ki(d.type,m.memoizedProps);b.componentDidUpdate(T,m.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var A=d.updateQueue;A!==null&&L1(d,A,b);break;case 3:var L=d.updateQueue;if(L!==null){if(m=null,d.child!==null)switch(d.child.tag){case 5:m=d.child.stateNode;break;case 1:m=d.child.stateNode}L1(d,L,m)}break;case 5:var W=d.stateNode;if(m===null&&d.flags&4){m=W;var J=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&m.focus();break;case"img":J.src&&(m.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var te=d.alternate;if(te!==null){var we=te.memoizedState;if(we!==null){var Ee=we.dehydrated;Ee!==null&&Js(Ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Xn||d.flags&512&&v0(d)}catch(ye){Yt(d,d.return,ye)}}if(d===l){Oe=null;break}if(m=d.sibling,m!==null){m.return=d.return,Oe=m;break}Oe=d.return}}function LA(l){for(;Oe!==null;){var d=Oe;if(d===l){Oe=null;break}var m=d.sibling;if(m!==null){m.return=d.return,Oe=m;break}Oe=d.return}}function jA(l){for(;Oe!==null;){var d=Oe;try{switch(d.tag){case 0:case 11:case 15:var m=d.return;try{up(4,d)}catch(J){Yt(d,m,J)}break;case 1:var b=d.stateNode;if(typeof b.componentDidMount=="function"){var T=d.return;try{b.componentDidMount()}catch(J){Yt(d,T,J)}}var A=d.return;try{v0(d)}catch(J){Yt(d,A,J)}break;case 5:var L=d.return;try{v0(d)}catch(J){Yt(d,L,J)}}}catch(J){Yt(d,d.return,J)}if(d===l){Oe=null;break}var W=d.sibling;if(W!==null){W.return=d.return,Oe=W;break}Oe=d.return}}var DV=Math.ceil,dp=q.ReactCurrentDispatcher,b0=q.ReactCurrentOwner,ai=q.ReactCurrentBatchConfig,xt=0,En=null,sn=null,Fn=0,qr=0,qc=ta(0),mn=0,jd=null,pl=0,fp=0,w0=0,Fd=null,Sr=null,_0=0,Gc=1/0,cs=null,hp=!1,E0=null,aa=null,pp=!1,la=null,mp=0,Ud=0,S0=null,gp=-1,vp=0;function lr(){return(xt&6)!==0?Ot():gp!==-1?gp:gp=Ot()}function ca(l){return(l.mode&1)===0?1:(xt&2)!==0&&Fn!==0?Fn&-Fn:vV.transition!==null?(vp===0&&(vp=sd()),vp):(l=gt,l!==0||(l=window.event,l=l===void 0?16:bc(l.type)),l)}function Di(l,d,m,b){if(50<Ud)throw Ud=0,S0=null,Error(n(185));nl(l,m,b),((xt&2)===0||l!==En)&&(l===En&&((xt&2)===0&&(fp|=m),mn===4&&ua(l,Fn)),Tr(l,b),m===1&&xt===0&&(d.mode&1)===0&&(Gc=Ot()+500,Gh&&ra()))}function Tr(l,d){var m=l.callbackNode;tl(l,d);var b=Jo(l,l===En?Fn:0);if(b===0)m!==null&&hc(m),l.callbackNode=null,l.callbackPriority=0;else if(d=b&-b,l.callbackPriority!==d){if(m!=null&&hc(m),d===1)l.tag===0?gV(UA.bind(null,l)):S1(UA.bind(null,l)),fV(function(){(xt&6)===0&&ra()}),m=null;else{switch(fo(b)){case 1:m=pc;break;case 4:m=rd;break;case 16:m=Qa;break;case 536870912:m=mc;break;default:m=Qa}m=WA(m,FA.bind(null,l))}l.callbackPriority=d,l.callbackNode=m}}function FA(l,d){if(gp=-1,vp=0,(xt&6)!==0)throw Error(n(327));var m=l.callbackNode;if(Hc()&&l.callbackNode!==m)return null;var b=Jo(l,l===En?Fn:0);if(b===0)return null;if((b&30)!==0||(b&l.expiredLanes)!==0||d)d=yp(l,b);else{d=b;var T=xt;xt|=2;var A=$A();(En!==l||Fn!==d)&&(cs=null,Gc=Ot()+500,gl(l,d));do try{jV();break}catch(W){VA(l,W)}while(!0);By(),dp.current=A,xt=T,sn!==null?d=0:(En=null,Fn=0,d=mn)}if(d!==0){if(d===2&&(T=od(l),T!==0&&(b=T,d=T0(l,T))),d===1)throw m=jd,gl(l,0),ua(l,b),Tr(l,Ot()),m;if(d===6)ua(l,b);else{if(T=l.current.alternate,(b&30)===0&&!OV(T)&&(d=yp(l,b),d===2&&(A=od(l),A!==0&&(b=A,d=T0(l,A))),d===1))throw m=jd,gl(l,0),ua(l,b),Tr(l,Ot()),m;switch(l.finishedWork=T,l.finishedLanes=b,d){case 0:case 1:throw Error(n(345));case 2:vl(l,Sr,cs);break;case 3:if(ua(l,b),(b&130023424)===b&&(d=_0+500-Ot(),10<d)){if(Jo(l,0)!==0)break;if(T=l.suspendedLanes,(T&b)!==b){lr(),l.pingedLanes|=l.suspendedLanes&T;break}l.timeoutHandle=ky(vl.bind(null,l,Sr,cs),d);break}vl(l,Sr,cs);break;case 4:if(ua(l,b),(b&4194240)===b)break;for(d=l.eventTimes,T=-1;0<b;){var L=31-jr(b);A=1<<L,L=d[L],L>T&&(T=L),b&=~A}if(b=T,b=Ot()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*DV(b/1960))-b,10<b){l.timeoutHandle=ky(vl.bind(null,l,Sr,cs),b);break}vl(l,Sr,cs);break;case 5:vl(l,Sr,cs);break;default:throw Error(n(329))}}}return Tr(l,Ot()),l.callbackNode===m?FA.bind(null,l):null}function T0(l,d){var m=Fd;return l.current.memoizedState.isDehydrated&&(gl(l,d).flags|=256),l=yp(l,d),l!==2&&(d=Sr,Sr=m,d!==null&&A0(d)),l}function A0(l){Sr===null?Sr=l:Sr.push.apply(Sr,l)}function OV(l){for(var d=l;;){if(d.flags&16384){var m=d.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var b=0;b<m.length;b++){var T=m[b],A=T.getSnapshot;T=T.value;try{if(!Pi(A(),T))return!1}catch{return!1}}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ua(l,d){for(d&=~w0,d&=~fp,l.suspendedLanes|=d,l.pingedLanes&=~d,l=l.expirationTimes;0<d;){var m=31-jr(d),b=1<<m;l[m]=-1,d&=~b}}function UA(l){if((xt&6)!==0)throw Error(n(327));Hc();var d=Jo(l,0);if((d&1)===0)return Tr(l,Ot()),null;var m=yp(l,d);if(l.tag!==0&&m===2){var b=od(l);b!==0&&(d=b,m=T0(l,b))}if(m===1)throw m=jd,gl(l,0),ua(l,d),Tr(l,Ot()),m;if(m===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=d,vl(l,Sr,cs),Tr(l,Ot()),null}function C0(l,d){var m=xt;xt|=1;try{return l(d)}finally{xt=m,xt===0&&(Gc=Ot()+500,Gh&&ra())}}function ml(l){la!==null&&la.tag===0&&(xt&6)===0&&Hc();var d=xt;xt|=1;var m=ai.transition,b=gt;try{if(ai.transition=null,gt=1,l)return l()}finally{gt=b,ai.transition=m,xt=d,(xt&6)===0&&ra()}}function I0(){qr=qc.current,jt(qc)}function gl(l,d){l.finishedWork=null,l.finishedLanes=0;var m=l.timeoutHandle;if(m!==-1&&(l.timeoutHandle=-1,dV(m)),sn!==null)for(m=sn.return;m!==null;){var b=m;switch(jy(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&zh();break;case 3:$c(),jt(wr),jt(Yn),Jy();break;case 5:Ky(b);break;case 4:$c();break;case 13:jt(Ht);break;case 19:jt(Ht);break;case 10:zy(b.type._context);break;case 22:case 23:I0()}m=m.return}if(En=l,sn=l=da(l.current,null),Fn=qr=d,mn=0,jd=null,w0=fp=pl=0,Sr=Fd=null,dl!==null){for(d=0;d<dl.length;d++)if(m=dl[d],b=m.interleaved,b!==null){m.interleaved=null;var T=b.next,A=m.pending;if(A!==null){var L=A.next;A.next=T,b.next=L}m.pending=b}dl=null}return l}function VA(l,d){do{var m=sn;try{if(By(),tp.current=op,np){for(var b=Wt.memoizedState;b!==null;){var T=b.queue;T!==null&&(T.pending=null),b=b.next}np=!1}if(hl=0,_n=pn=Wt=null,kd=!1,Rd=0,b0.current=null,m===null||m.return===null){mn=1,jd=d,sn=null;break}e:{var A=l,L=m.return,W=m,J=d;if(d=Fn,W.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var te=J,we=W,Ee=we.tag;if((we.mode&1)===0&&(Ee===0||Ee===11||Ee===15)){var ye=we.alternate;ye?(we.updateQueue=ye.updateQueue,we.memoizedState=ye.memoizedState,we.lanes=ye.lanes):(we.updateQueue=null,we.memoizedState=null)}var Re=dA(L);if(Re!==null){Re.flags&=-257,fA(Re,L,W,A,d),Re.mode&1&&uA(A,te,d),d=Re,J=te;var Fe=d.updateQueue;if(Fe===null){var Ve=new Set;Ve.add(J),d.updateQueue=Ve}else Fe.add(J);break e}else{if((d&1)===0){uA(A,te,d),P0();break e}J=Error(n(426))}}else if(zt&&W.mode&1){var Zt=dA(L);if(Zt!==null){(Zt.flags&65536)===0&&(Zt.flags|=256),fA(Zt,L,W,A,d),Vy(Bc(J,W));break e}}A=J=Bc(J,W),mn!==4&&(mn=2),Fd===null?Fd=[A]:Fd.push(A),A=L;do{switch(A.tag){case 3:A.flags|=65536,d&=-d,A.lanes|=d;var X=lA(A,J,d);O1(A,X);break e;case 1:W=J;var Q=A.type,ee=A.stateNode;if((A.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(aa===null||!aa.has(ee)))){A.flags|=65536,d&=-d,A.lanes|=d;var Se=cA(A,W,d);O1(A,Se);break e}}A=A.return}while(A!==null)}zA(m)}catch(qe){d=qe,sn===m&&m!==null&&(sn=m=m.return);continue}break}while(!0)}function $A(){var l=dp.current;return dp.current=op,l===null?op:l}function P0(){(mn===0||mn===3||mn===2)&&(mn=4),En===null||(pl&268435455)===0&&(fp&268435455)===0||ua(En,Fn)}function yp(l,d){var m=xt;xt|=2;var b=$A();(En!==l||Fn!==d)&&(cs=null,gl(l,d));do try{LV();break}catch(T){VA(l,T)}while(!0);if(By(),xt=m,dp.current=b,sn!==null)throw Error(n(261));return En=null,Fn=0,mn}function LV(){for(;sn!==null;)BA(sn)}function jV(){for(;sn!==null&&!Ja();)BA(sn)}function BA(l){var d=HA(l.alternate,l,qr);l.memoizedProps=l.pendingProps,d===null?zA(l):sn=d,b0.current=null}function zA(l){var d=l;do{var m=d.alternate;if(l=d.return,(d.flags&32768)===0){if(m=PV(m,d,qr),m!==null){sn=m;return}}else{if(m=NV(m,d),m!==null){m.flags&=32767,sn=m;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{mn=6,sn=null;return}}if(d=d.sibling,d!==null){sn=d;return}sn=d=l}while(d!==null);mn===0&&(mn=5)}function vl(l,d,m){var b=gt,T=ai.transition;try{ai.transition=null,gt=1,FV(l,d,m,b)}finally{ai.transition=T,gt=b}return null}function FV(l,d,m,b){do Hc();while(la!==null);if((xt&6)!==0)throw Error(n(327));m=l.finishedWork;var T=l.finishedLanes;if(m===null)return null;if(l.finishedWork=null,l.finishedLanes=0,m===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var A=m.lanes|m.childLanes;if(my(l,A),l===En&&(sn=En=null,Fn=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||pp||(pp=!0,WA(Qa,function(){return Hc(),null})),A=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||A){A=ai.transition,ai.transition=null;var L=gt;gt=1;var W=xt;xt|=4,b0.current=null,RV(l,m),MA(m,l),iV(Py),Zo=!!Iy,Py=Iy=null,l.current=m,MV(m),Yo(),xt=W,gt=L,ai.transition=A}else l.current=m;if(pp&&(pp=!1,la=l,mp=T),A=l.pendingLanes,A===0&&(aa=null),Th(m.stateNode),Tr(l,Ot()),d!==null)for(b=l.onRecoverableError,m=0;m<d.length;m++)T=d[m],b(T.value,{componentStack:T.stack,digest:T.digest});if(hp)throw hp=!1,l=E0,E0=null,l;return(mp&1)!==0&&l.tag!==0&&Hc(),A=l.pendingLanes,(A&1)!==0?l===S0?Ud++:(Ud=0,S0=l):Ud=0,ra(),null}function Hc(){if(la!==null){var l=fo(mp),d=ai.transition,m=gt;try{if(ai.transition=null,gt=16>l?16:l,la===null)var b=!1;else{if(l=la,la=null,mp=0,(xt&6)!==0)throw Error(n(331));var T=xt;for(xt|=4,Oe=l.current;Oe!==null;){var A=Oe,L=A.child;if((Oe.flags&16)!==0){var W=A.deletions;if(W!==null){for(var J=0;J<W.length;J++){var te=W[J];for(Oe=te;Oe!==null;){var we=Oe;switch(we.tag){case 0:case 11:case 15:Ld(8,we,A)}var Ee=we.child;if(Ee!==null)Ee.return=we,Oe=Ee;else for(;Oe!==null;){we=Oe;var ye=we.sibling,Re=we.return;if(IA(we),we===te){Oe=null;break}if(ye!==null){ye.return=Re,Oe=ye;break}Oe=Re}}}var Fe=A.alternate;if(Fe!==null){var Ve=Fe.child;if(Ve!==null){Fe.child=null;do{var Zt=Ve.sibling;Ve.sibling=null,Ve=Zt}while(Ve!==null)}}Oe=A}}if((A.subtreeFlags&2064)!==0&&L!==null)L.return=A,Oe=L;else e:for(;Oe!==null;){if(A=Oe,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:Ld(9,A,A.return)}var X=A.sibling;if(X!==null){X.return=A.return,Oe=X;break e}Oe=A.return}}var Q=l.current;for(Oe=Q;Oe!==null;){L=Oe;var ee=L.child;if((L.subtreeFlags&2064)!==0&&ee!==null)ee.return=L,Oe=ee;else e:for(L=Q;Oe!==null;){if(W=Oe,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:up(9,W)}}catch(qe){Yt(W,W.return,qe)}if(W===L){Oe=null;break e}var Se=W.sibling;if(Se!==null){Se.return=W.return,Oe=Se;break e}Oe=W.return}}if(xt=T,ra(),Lr&&typeof Lr.onPostCommitFiberRoot=="function")try{Lr.onPostCommitFiberRoot(Xa,l)}catch{}b=!0}return b}finally{gt=m,ai.transition=d}}return!1}function qA(l,d,m){d=Bc(m,d),d=lA(l,d,1),l=oa(l,d,1),d=lr(),l!==null&&(nl(l,1,d),Tr(l,d))}function Yt(l,d,m){if(l.tag===3)qA(l,l,m);else for(;d!==null;){if(d.tag===3){qA(d,l,m);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(aa===null||!aa.has(b))){l=Bc(m,l),l=cA(d,l,1),d=oa(d,l,1),l=lr(),d!==null&&(nl(d,1,l),Tr(d,l));break}}d=d.return}}function UV(l,d,m){var b=l.pingCache;b!==null&&b.delete(d),d=lr(),l.pingedLanes|=l.suspendedLanes&m,En===l&&(Fn&m)===m&&(mn===4||mn===3&&(Fn&130023424)===Fn&&500>Ot()-_0?gl(l,0):w0|=m),Tr(l,d)}function GA(l,d){d===0&&((l.mode&1)===0?d=1:(d=Ws,Ws<<=1,(Ws&130023424)===0&&(Ws=4194304)));var m=lr();l=ss(l,d),l!==null&&(nl(l,d,m),Tr(l,m))}function VV(l){var d=l.memoizedState,m=0;d!==null&&(m=d.retryLane),GA(l,m)}function $V(l,d){var m=0;switch(l.tag){case 13:var b=l.stateNode,T=l.memoizedState;T!==null&&(m=T.retryLane);break;case 19:b=l.stateNode;break;default:throw Error(n(314))}b!==null&&b.delete(d),GA(l,m)}var HA;HA=function(l,d,m){if(l!==null)if(l.memoizedProps!==d.pendingProps||wr.current)Er=!0;else{if((l.lanes&m)===0&&(d.flags&128)===0)return Er=!1,IV(l,d,m);Er=(l.flags&131072)!==0}else Er=!1,zt&&(d.flags&1048576)!==0&&T1(d,Wh,d.index);switch(d.lanes=0,d.tag){case 2:var b=d.type;lp(l,d),l=d.pendingProps;var T=Dc(d,Yn.current);Vc(d,m),T=Zy(null,d,b,l,T,m);var A=e0();return d.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,_r(b)?(A=!0,qh(d)):A=!1,d.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Hy(d),T.updater=sp,d.stateNode=T,T._reactInternals=d,s0(d,b,l,m),d=u0(null,d,b,!0,A,m)):(d.tag=0,zt&&A&&Ly(d),ar(null,d,T,m),d=d.child),d;case 16:b=d.elementType;e:{switch(lp(l,d),l=d.pendingProps,T=b._init,b=T(b._payload),d.type=b,T=d.tag=zV(b),l=ki(b,l),T){case 0:d=c0(null,d,b,l,m);break e;case 1:d=yA(null,d,b,l,m);break e;case 11:d=hA(null,d,b,l,m);break e;case 14:d=pA(null,d,b,ki(b.type,l),m);break e}throw Error(n(306,b,""))}return d;case 0:return b=d.type,T=d.pendingProps,T=d.elementType===b?T:ki(b,T),c0(l,d,b,T,m);case 1:return b=d.type,T=d.pendingProps,T=d.elementType===b?T:ki(b,T),yA(l,d,b,T,m);case 3:e:{if(xA(d),l===null)throw Error(n(387));b=d.pendingProps,A=d.memoizedState,T=A.element,D1(l,d),Zh(d,b,null,m);var L=d.memoizedState;if(b=L.element,A.isDehydrated)if(A={element:b,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},d.updateQueue.baseState=A,d.memoizedState=A,d.flags&256){T=Bc(Error(n(423)),d),d=bA(l,d,b,m,T);break e}else if(b!==T){T=Bc(Error(n(424)),d),d=bA(l,d,b,m,T);break e}else for(zr=ea(d.stateNode.containerInfo.firstChild),Br=d,zt=!0,Ni=null,m=R1(d,null,b,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(jc(),b===T){d=ls(l,d,m);break e}ar(l,d,b,m)}d=d.child}return d;case 5:return j1(d),l===null&&Uy(d),b=d.type,T=d.pendingProps,A=l!==null?l.memoizedProps:null,L=T.children,Ny(b,T)?L=null:A!==null&&Ny(b,A)&&(d.flags|=32),vA(l,d),ar(l,d,L,m),d.child;case 6:return l===null&&Uy(d),null;case 13:return wA(l,d,m);case 4:return Wy(d,d.stateNode.containerInfo),b=d.pendingProps,l===null?d.child=Fc(d,null,b,m):ar(l,d,b,m),d.child;case 11:return b=d.type,T=d.pendingProps,T=d.elementType===b?T:ki(b,T),hA(l,d,b,T,m);case 7:return ar(l,d,d.pendingProps,m),d.child;case 8:return ar(l,d,d.pendingProps.children,m),d.child;case 12:return ar(l,d,d.pendingProps.children,m),d.child;case 10:e:{if(b=d.type._context,T=d.pendingProps,A=d.memoizedProps,L=T.value,Rt(Jh,b._currentValue),b._currentValue=L,A!==null)if(Pi(A.value,L)){if(A.children===T.children&&!wr.current){d=ls(l,d,m);break e}}else for(A=d.child,A!==null&&(A.return=d);A!==null;){var W=A.dependencies;if(W!==null){L=A.child;for(var J=W.firstContext;J!==null;){if(J.context===b){if(A.tag===1){J=as(-1,m&-m),J.tag=2;var te=A.updateQueue;if(te!==null){te=te.shared;var we=te.pending;we===null?J.next=J:(J.next=we.next,we.next=J),te.pending=J}}A.lanes|=m,J=A.alternate,J!==null&&(J.lanes|=m),qy(A.return,m,d),W.lanes|=m;break}J=J.next}}else if(A.tag===10)L=A.type===d.type?null:A.child;else if(A.tag===18){if(L=A.return,L===null)throw Error(n(341));L.lanes|=m,W=L.alternate,W!==null&&(W.lanes|=m),qy(L,m,d),L=A.sibling}else L=A.child;if(L!==null)L.return=A;else for(L=A;L!==null;){if(L===d){L=null;break}if(A=L.sibling,A!==null){A.return=L.return,L=A;break}L=L.return}A=L}ar(l,d,T.children,m),d=d.child}return d;case 9:return T=d.type,b=d.pendingProps.children,Vc(d,m),T=oi(T),b=b(T),d.flags|=1,ar(l,d,b,m),d.child;case 14:return b=d.type,T=ki(b,d.pendingProps),T=ki(b.type,T),pA(l,d,b,T,m);case 15:return mA(l,d,d.type,d.pendingProps,m);case 17:return b=d.type,T=d.pendingProps,T=d.elementType===b?T:ki(b,T),lp(l,d),d.tag=1,_r(b)?(l=!0,qh(d)):l=!1,Vc(d,m),sA(d,b,T),s0(d,b,T,m),u0(null,d,b,!0,l,m);case 19:return EA(l,d,m);case 22:return gA(l,d,m)}throw Error(n(156,d.tag))};function WA(l,d){return nd(l,d)}function BV(l,d,m,b){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(l,d,m,b){return new BV(l,d,m,b)}function N0(l){return l=l.prototype,!(!l||!l.isReactComponent)}function zV(l){if(typeof l=="function")return N0(l)?1:0;if(l!=null){if(l=l.$$typeof,l===M)return 11;if(l===ce)return 14}return 2}function da(l,d){var m=l.alternate;return m===null?(m=li(l.tag,d,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=d,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&14680064,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,d=l.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m}function xp(l,d,m,b,T,A){var L=2;if(b=l,typeof l=="function")N0(l)&&(L=1);else if(typeof l=="string")L=5;else e:switch(l){case k:return yl(m.children,T,A,d);case D:L=8,T|=8;break;case O:return l=li(12,m,d,T|2),l.elementType=O,l.lanes=A,l;case P:return l=li(13,m,d,T),l.elementType=P,l.lanes=A,l;case me:return l=li(19,m,d,T),l.elementType=me,l.lanes=A,l;case xe:return bp(m,T,A,d);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case z:L=10;break e;case U:L=9;break e;case M:L=11;break e;case ce:L=14;break e;case ge:L=16,b=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return d=li(L,m,d,T),d.elementType=l,d.type=b,d.lanes=A,d}function yl(l,d,m,b){return l=li(7,l,b,d),l.lanes=m,l}function bp(l,d,m,b){return l=li(22,l,b,d),l.elementType=xe,l.lanes=m,l.stateNode={isHidden:!1},l}function k0(l,d,m){return l=li(6,l,null,d),l.lanes=m,l}function R0(l,d,m){return d=li(4,l.children!==null?l.children:[],l.key,d),d.lanes=m,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}function qV(l,d,m,b,T){this.tag=d,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ad(0),this.expirationTimes=ad(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ad(0),this.identifierPrefix=b,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function M0(l,d,m,b,T,A,L,W,J){return l=new qV(l,d,m,W,J),d===1?(d=1,A===!0&&(d|=8)):d=0,A=li(3,null,null,d),l.current=A,A.stateNode=l,A.memoizedState={element:b,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hy(A),l}function GV(l,d,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:b==null?null:""+b,children:l,containerInfo:d,implementation:m}}function KA(l){if(!l)return na;l=l._reactInternals;e:{if(Dn(l)!==l||l.tag!==1)throw Error(n(170));var d=l;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(_r(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(l.tag===1){var m=l.type;if(_r(m))return _1(l,m,d)}return d}function YA(l,d,m,b,T,A,L,W,J){return l=M0(m,b,!0,l,T,A,L,W,J),l.context=KA(null),m=l.current,b=lr(),T=ca(m),A=as(b,T),A.callback=d??null,oa(m,A,T),l.current.lanes=T,nl(l,T,b),Tr(l,b),l}function wp(l,d,m,b){var T=d.current,A=lr(),L=ca(T);return m=KA(m),d.context===null?d.context=m:d.pendingContext=m,d=as(A,L),d.payload={element:l},b=b===void 0?null:b,b!==null&&(d.callback=b),l=oa(T,d,L),l!==null&&(Di(l,T,L,A),Xh(l,T,L)),L}function _p(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function JA(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<d?m:d}}function D0(l,d){JA(l,d),(l=l.alternate)&&JA(l,d)}function HV(){return null}var QA=typeof reportError=="function"?reportError:function(l){console.error(l)};function O0(l){this._internalRoot=l}Ep.prototype.render=O0.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(n(409));wp(l,d,null,null)},Ep.prototype.unmount=O0.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;ml(function(){wp(null,l,null,null)}),d[ns]=null}};function Ep(l){this._internalRoot=l}Ep.prototype.unstable_scheduleHydration=function(l){if(l){var d=dd();l={blockedOn:null,target:l,priority:d};for(var m=0;m<Fr.length&&d!==0&&d<Fr[m].priority;m++);Fr.splice(m,0,l),m===0&&yc(l)}};function L0(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function Sp(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function XA(){}function WV(l,d,m,b,T){if(T){if(typeof b=="function"){var A=b;b=function(){var te=_p(L);A.call(te)}}var L=YA(d,b,l,0,null,!1,!1,"",XA);return l._reactRootContainer=L,l[ns]=L.current,Ed(l.nodeType===8?l.parentNode:l),ml(),L}for(;T=l.lastChild;)l.removeChild(T);if(typeof b=="function"){var W=b;b=function(){var te=_p(J);W.call(te)}}var J=M0(l,0,!1,null,null,!1,!1,"",XA);return l._reactRootContainer=J,l[ns]=J.current,Ed(l.nodeType===8?l.parentNode:l),ml(function(){wp(d,J,m,b)}),J}function Tp(l,d,m,b,T){var A=m._reactRootContainer;if(A){var L=A;if(typeof T=="function"){var W=T;T=function(){var J=_p(L);W.call(J)}}wp(d,L,l,T)}else L=WV(m,d,l,T,b);return _p(L)}cd=function(l){switch(l.tag){case 3:var d=l.stateNode;if(d.current.memoizedState.isDehydrated){var m=Et(d.pendingLanes);m!==0&&(ld(d,m|1),Tr(d,Ot()),(xt&6)===0&&(Gc=Ot()+500,ra()))}break;case 13:ml(function(){var b=ss(l,1);if(b!==null){var T=lr();Di(b,l,1,T)}}),D0(l,1)}},gc=function(l){if(l.tag===13){var d=ss(l,134217728);if(d!==null){var m=lr();Di(d,l,134217728,m)}D0(l,134217728)}},ud=function(l){if(l.tag===13){var d=ca(l),m=ss(l,d);if(m!==null){var b=lr();Di(m,l,d,b)}D0(l,d)}},dd=function(){return gt},fd=function(l,d){var m=gt;try{return gt=l,d()}finally{gt=m}},Ti=function(l,d,m){switch(d){case"input":if(Ye(l,m),d=m.name,m.type==="radio"&&d!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<m.length;d++){var b=m[d];if(b!==l&&b.form===l.form){var T=Bh(b);if(!T)throw Error(n(90));ae(b),Ye(b,T)}}}break;case"textarea":je(l,m);break;case"select":d=m.value,d!=null&&Je(l,!!m.multiple,d,!1)}},cc=C0,uc=ml;var KV={usingClientEntryPoint:!1,Events:[Ad,Rc,Bh,Ai,Zr,C0]},Vd={findFiberByHostInstance:al,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YV={bundleType:Vd.bundleType,version:Vd.version,rendererPackageName:Vd.rendererPackageName,rendererConfig:Vd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Sh(l),l===null?null:l.stateNode},findFiberByHostInstance:Vd.findFiberByHostInstance||HV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ap=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ap.isDisabled&&Ap.supportsFiber)try{Xa=Ap.inject(YV),Lr=Ap}catch{}}return Ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KV,Ar.createPortal=function(l,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!L0(d))throw Error(n(200));return GV(l,d,null,m)},Ar.createRoot=function(l,d){if(!L0(l))throw Error(n(299));var m=!1,b="",T=QA;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(T=d.onRecoverableError)),d=M0(l,1,!1,null,null,m,!1,b,T),l[ns]=d.current,Ed(l.nodeType===8?l.parentNode:l),new O0(d)},Ar.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=Sh(d),l=l===null?null:l.stateNode,l},Ar.flushSync=function(l){return ml(l)},Ar.hydrate=function(l,d,m){if(!Sp(d))throw Error(n(200));return Tp(null,l,d,!0,m)},Ar.hydrateRoot=function(l,d,m){if(!L0(l))throw Error(n(405));var b=m!=null&&m.hydratedSources||null,T=!1,A="",L=QA;if(m!=null&&(m.unstable_strictMode===!0&&(T=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onRecoverableError!==void 0&&(L=m.onRecoverableError)),d=YA(d,null,l,1,m??null,T,!1,A,L),l[ns]=d.current,Ed(l),b)for(l=0;l<b.length;l++)m=b[l],T=m._getVersion,T=T(m._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[m,T]:d.mutableSourceEagerHydrationData.push(m,T);return new Ep(d)},Ar.render=function(l,d,m){if(!Sp(d))throw Error(n(200));return Tp(null,l,d,!1,m)},Ar.unmountComponentAtNode=function(l){if(!Sp(l))throw Error(n(40));return l._reactRootContainer?(ml(function(){Tp(null,null,l,!1,function(){l._reactRootContainer=null,l[ns]=null})}),!0):!1},Ar.unstable_batchedUpdates=C0,Ar.unstable_renderSubtreeIntoContainer=function(l,d,m,b){if(!Sp(m))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return Tp(l,d,m,!1,b)},Ar.version="18.3.1-next-f1338f8080-20240426",Ar}var sC;function PD(){if(sC)return U0.exports;sC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),U0.exports=o$(),U0.exports}var aC;function s$(){if(aC)return Cp;aC=1;var t=PD();return Cp.createRoot=t.createRoot,Cp.hydrateRoot=t.hydrateRoot,Cp}var a$=s$();const l$=Xr(a$);var z_=PD();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xf(){return xf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xf.apply(this,arguments)}var Sl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Sl||(Sl={}));const lC="popstate";function c$(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return Jb("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ND(i)}return f$(e,n,null,t)}function ko(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function u$(t,e){{typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function d$(){return Math.random().toString(36).substr(2,8)}function cC(t,e){return{usr:t.state,key:t.key,idx:e}}function Jb(t,e,n,r){return n===void 0&&(n=null),xf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?zg(e):e,{state:n,key:e&&e.key||r||d$()})}function ND(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function zg(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function f$(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=Sl.Pop,c=null,u=f();u==null&&(u=0,s.replaceState(xf({},s.state,{idx:u}),""));function f(){return(s.state||{idx:null}).idx}function p(){a=Sl.Pop;let _=f(),N=_==null?null:_-u;u=_,c&&c({action:a,location:S.location,delta:N})}function v(_,N){a=Sl.Push;let j=Jb(S.location,_,N);u=f()+1;let F=cC(j,u),q=S.createHref(j);try{s.pushState(F,"",q)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(q)}o&&c&&c({action:a,location:S.location,delta:1})}function w(_,N){a=Sl.Replace;let j=Jb(S.location,_,N);u=f();let F=cC(j,u),q=S.createHref(j);s.replaceState(F,"",q),o&&c&&c({action:a,location:S.location,delta:0})}function E(_){let N=i.location.origin!=="null"?i.location.origin:i.location.href,j=typeof _=="string"?_:ND(_);return j=j.replace(/ $/,"%20"),ko(N,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,N)}let S={get action(){return a},get location(){return t(i,s)},listen(_){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(lC,p),c=_,()=>{i.removeEventListener(lC,p),c=null}},createHref(_){return e(i,_)},createURL:E,encodeLocation(_){let N=E(_);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:v,replace:w,go(_){return s.go(_)}};return S}var uC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(uC||(uC={}));function h$(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const p$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,m$=t=>p$.test(t);function g$(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?zg(t):t,o;if(n)if(m$(n))o=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),u$(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+n))}n.startsWith("/")?o=dC(n.substring(1),"/"):o=dC(n,e)}else o=e;return{pathname:o,search:w$(r),hash:_$(i)}}function dC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function B0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function v$(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function y$(t,e){let n=v$(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function x$(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=zg(t):(i=xf({},t),ko(!i.pathname||!i.pathname.includes("?"),B0("?","pathname","search",i)),ko(!i.pathname||!i.pathname.includes("#"),B0("#","pathname","hash",i)),ko(!i.search||!i.search.includes("#"),B0("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let p=e.length-1;if(!r&&s.startsWith("..")){let v=s.split("/");for(;v[0]==="..";)v.shift(),p-=1;i.pathname=v.join("/")}a=p>=0?e[p]:"/"}let c=g$(i,a),u=s&&s!=="/"&&s.endsWith("/"),f=(o||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const b$=t=>t.join("/").replace(/\/\/+/g,"/"),w$=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_$=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,kD=["post","put","patch","delete"];new Set(kD);const E$=["get",...kD];new Set(E$);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Em.apply(this,arguments)}const RD=I.createContext(null),q_=I.createContext(null),G_=I.createContext(null),H_=I.createContext({outlet:null,matches:[],isDataRoute:!1});function W_(){return I.useContext(G_)!=null}function MD(){return W_()||ko(!1),I.useContext(G_).location}function DD(t){I.useContext(q_).static||I.useLayoutEffect(t)}function S$(){let{isDataRoute:t}=I.useContext(H_);return t?P$():T$()}function T$(){W_()||ko(!1);let t=I.useContext(RD),{basename:e,future:n,navigator:r}=I.useContext(q_),{matches:i}=I.useContext(H_),{pathname:o}=MD(),s=JSON.stringify(y$(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return DD(()=>{a.current=!0}),I.useCallback(function(u,f){if(f===void 0&&(f={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let p=x$(u,JSON.parse(s),o,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:b$([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,s,o,t])}var OD=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(OD||{}),LD=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(LD||{});function A$(t){let e=I.useContext(RD);return e||ko(!1),e}function C$(t){let e=I.useContext(H_);return e||ko(!1),e}function I$(t){let e=C$(),n=e.matches[e.matches.length-1];return n.route.id||ko(!1),n.route.id}function P$(){let{router:t}=A$(OD.UseNavigateStable),e=I$(LD.UseNavigateStable),n=I.useRef(!1);return DD(()=>{n.current=!0}),I.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Em({fromRouteId:e},o)))},[t,e])}function N$(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function k$(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Sl.Pop,navigator:o,static:s=!1,future:a}=t;W_()&&ko(!1);let c=e.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:c,navigator:o,static:s,future:Em({v7_relativeSplatPath:!1},a)}),[c,a,o,s]);typeof r=="string"&&(r=zg(r));let{pathname:f="/",search:p="",hash:v="",state:w=null,key:E="default"}=r,S=I.useMemo(()=>{let _=h$(f,c);return _==null?null:{location:{pathname:_,search:p,hash:v,state:w,key:E},navigationType:i}},[c,f,p,v,w,E,i]);return S==null?null:I.createElement(q_.Provider,{value:u},I.createElement(G_.Provider,{children:n,value:S}))}new Promise(()=>{});/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const R$="6";try{window.__reactRouterVersion=R$}catch{}const M$="startTransition",fC=ID[M$];function D$(t){let{basename:e,children:n,future:r,window:i}=t,o=I.useRef();o.current==null&&(o.current=c$({window:i,v5Compat:!0}));let s=o.current,[a,c]=I.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},f=I.useCallback(p=>{u&&fC?fC(()=>c(p)):c(p)},[c,u]);return I.useLayoutEffect(()=>s.listen(f),[s,f]),I.useEffect(()=>N$(r),[r]),I.createElement(k$,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:s,future:r})}var hC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hC||(hC={}));var pC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(pC||(pC={}));var z0,mC;function O$(){if(mC)return z0;mC=1;var t=typeof Element<"u",e=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(o,s){if(o===s)return!0;if(o&&s&&typeof o=="object"&&typeof s=="object"){if(o.constructor!==s.constructor)return!1;var a,c,u;if(Array.isArray(o)){if(a=o.length,a!=s.length)return!1;for(c=a;c--!==0;)if(!i(o[c],s[c]))return!1;return!0}var f;if(e&&o instanceof Map&&s instanceof Map){if(o.size!==s.size)return!1;for(f=o.entries();!(c=f.next()).done;)if(!s.has(c.value[0]))return!1;for(f=o.entries();!(c=f.next()).done;)if(!i(c.value[1],s.get(c.value[0])))return!1;return!0}if(n&&o instanceof Set&&s instanceof Set){if(o.size!==s.size)return!1;for(f=o.entries();!(c=f.next()).done;)if(!s.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(s)){if(a=o.length,a!=s.length)return!1;for(c=a;c--!==0;)if(o[c]!==s[c])return!1;return!0}if(o.constructor===RegExp)return o.source===s.source&&o.flags===s.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof s.valueOf=="function")return o.valueOf()===s.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof s.toString=="function")return o.toString()===s.toString();if(u=Object.keys(o),a=u.length,a!==Object.keys(s).length)return!1;for(c=a;c--!==0;)if(!Object.prototype.hasOwnProperty.call(s,u[c]))return!1;if(t&&o instanceof Element)return!1;for(c=a;c--!==0;)if(!((u[c]==="_owner"||u[c]==="__v"||u[c]==="__o")&&o.$$typeof)&&!i(o[u[c]],s[u[c]]))return!1;return!0}return o!==o&&s!==s}return z0=function(s,a){try{return i(s,a)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},z0}var L$=O$();const j$=Xr(L$);var q0,gC;function F$(){if(gC)return q0;gC=1;var t=function(e,n,r,i,o,s,a,c){if(!e){var u;if(n===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[r,i,o,s,a,c],p=0;u=new Error(n.replace(/%s/g,function(){return f[p++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};return q0=t,q0}var U$=F$();const vC=Xr(U$);var G0,yC;function V$(){return yC||(yC=1,G0=function(e,n,r,i){var o=r?r.call(i,e,n):void 0;if(o!==void 0)return!!o;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var s=Object.keys(e),a=Object.keys(n);if(s.length!==a.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(n),u=0;u<s.length;u++){var f=s[u];if(!c(f))return!1;var p=e[f],v=n[f];if(o=r?r.call(i,p,v,f):void 0,o===!1||o===void 0&&p!==v)return!1}return!0}),G0}var $$=V$();const B$=Xr($$);var jD=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(jD||{}),H0={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},xC=Object.values(jD),K_={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},z$=Object.entries(K_).reduce((t,[e,n])=>(t[n]=e,t),{}),$i="data-rh",lu={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},cu=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},q$=t=>{let e=cu(t,"title");const n=cu(t,lu.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=cu(t,lu.DEFAULT_TITLE);return e||r||void 0},G$=t=>cu(t,lu.ON_CHANGE_CLIENT_STATE)||(()=>{}),W0=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),H$=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const i=Object.keys(r);for(let o=0;o<i.length;o+=1){const a=i[o].toLowerCase();if(t.indexOf(a)!==-1&&r[a])return n.concat(r)}}return n},[]),W$=t=>console&&typeof console.warn=="function"&&console.warn(t),Bd=(t,e,n)=>{const r={};return n.filter(i=>Array.isArray(i[t])?!0:(typeof i[t]<"u"&&W$(`Helmet: ${t} should be of type "Array". Instead found type "${typeof i[t]}"`),!1)).map(i=>i[t]).reverse().reduce((i,o)=>{const s={};o.filter(c=>{let u;const f=Object.keys(c);for(let v=0;v<f.length;v+=1){const w=f[v],E=w.toLowerCase();e.indexOf(E)!==-1&&!(u==="rel"&&c[u].toLowerCase()==="canonical")&&!(E==="rel"&&c[E].toLowerCase()==="stylesheet")&&(u=E),e.indexOf(w)!==-1&&(w==="innerHTML"||w==="cssText"||w==="itemprop")&&(u=w)}if(!u||!c[u])return!1;const p=c[u].toLowerCase();return r[u]||(r[u]={}),s[u]||(s[u]={}),r[u][p]?!1:(s[u][p]=!0,!0)}).reverse().forEach(c=>i.push(c));const a=Object.keys(s);for(let c=0;c<a.length;c+=1){const u=a[c],f={...r[u],...s[u]};r[u]=f}return i},[]).reverse()},K$=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},Y$=t=>({baseTag:H$(["href"],t),bodyAttributes:W0("bodyAttributes",t),defer:cu(t,lu.DEFER),encode:cu(t,lu.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:W0("htmlAttributes",t),linkTags:Bd("link",["rel","href"],t),metaTags:Bd("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Bd("noscript",["innerHTML"],t),onChangeClientState:G$(t),scriptTags:Bd("script",["src","innerHTML"],t),styleTags:Bd("style",["cssText"],t),title:q$(t),titleAttributes:W0("titleAttributes",t),prioritizeSeoTags:K$(t,lu.PRIORITIZE_SEO_TAGS)}),FD=t=>Array.isArray(t)?t.join(""):t,J$=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},K0=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(J$(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},bC=(t,e)=>({...t,[e]:void 0}),Q$=["noscript","script","style"],Qb=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),UD=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),X$=(t,e,n,r)=>{const i=UD(n),o=FD(e);return i?`<${t} ${$i}="true" ${i}>${Qb(o,r)}</${t}>`:`<${t} ${$i}="true">${Qb(o,r)}</${t}>`},Z$=(t,e,n=!0)=>e.reduce((r,i)=>{const o=i,s=Object.keys(o).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,f)=>{const p=typeof o[f]>"u"?f:`${f}="${Qb(o[f],n)}"`;return u?`${u} ${p}`:p},""),a=o.innerHTML||o.cssText||"",c=Q$.indexOf(t)===-1;return`${r}<${t} ${$i}="true" ${s}${c?"/>":`>${a}</${t}>`}`},""),VD=(t,e={})=>Object.keys(t).reduce((n,r)=>{const i=K_[r];return n[i||r]=t[r],n},e),eB=(t,e,n)=>{const r={key:e,[$i]:!0},i=VD(n,r);return[Vi.createElement("title",i,e)]},im=(t,e)=>e.map((n,r)=>{const i={key:r,[$i]:!0};return Object.keys(n).forEach(o=>{const a=K_[o]||o;if(a==="innerHTML"||a==="cssText"){const c=n.innerHTML||n.cssText;i.dangerouslySetInnerHTML={__html:c}}else i[a]=n[o]}),Vi.createElement(t,i)}),hi=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>eB(t,e.title,e.titleAttributes),toString:()=>X$(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>VD(e),toString:()=>UD(e)};default:return{toComponent:()=>im(t,e),toString:()=>Z$(t,e,n)}}},tB=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const i=K0(t,H0.meta),o=K0(e,H0.link),s=K0(n,H0.script);return{priorityMethods:{toComponent:()=>[...im("meta",i.priority),...im("link",o.priority),...im("script",s.priority)],toString:()=>`${hi("meta",i.priority,r)} ${hi("link",o.priority,r)} ${hi("script",s.priority,r)}`},metaTags:i.default,linkTags:o.default,scriptTags:s.default}},nB=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:i,noscriptTags:o,styleTags:s,title:a="",titleAttributes:c,prioritizeSeoTags:u}=t;let{linkTags:f,metaTags:p,scriptTags:v}=t,w={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:w,linkTags:f,metaTags:p,scriptTags:v}=tB(t)),{priority:w,base:hi("base",e,r),bodyAttributes:hi("bodyAttributes",n,r),htmlAttributes:hi("htmlAttributes",i,r),link:hi("link",f,r),meta:hi("meta",p,r),noscript:hi("noscript",o,r),script:hi("script",v,r),style:hi("style",s,r),title:hi("title",{title:a,titleAttributes:c},r)}},Xb=nB,Ip=[],$D=!!(typeof window<"u"&&window.document&&window.document.createElement),Zb=class{constructor(t,e){Oi(this,"instances",[]);Oi(this,"canUseDOM",$D);Oi(this,"context");Oi(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Ip:this.instances,add:t=>{(this.canUseDOM?Ip:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Ip:this.instances).indexOf(t);(this.canUseDOM?Ip:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=Xb({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},rB={},BD=Vi.createContext(rB),Rl,zD=(Rl=class extends I.Component{constructor(n){super(n);Oi(this,"helmetData");this.helmetData=new Zb(this.props.context||{},Rl.canUseDOM)}render(){return Vi.createElement(BD.Provider,{value:this.helmetData.value},this.props.children)}},Oi(Rl,"canUseDOM",$D),Rl),Wc=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${$i}]`),i=[].slice.call(r),o=[];let s;return e&&e.length&&e.forEach(a=>{const c=document.createElement(t);for(const u in a)if(Object.prototype.hasOwnProperty.call(a,u))if(u==="innerHTML")c.innerHTML=a.innerHTML;else if(u==="cssText")c.styleSheet?c.styleSheet.cssText=a.cssText:c.appendChild(document.createTextNode(a.cssText));else{const f=u,p=typeof a[f]>"u"?"":a[f];c.setAttribute(u,p)}c.setAttribute($i,"true"),i.some((u,f)=>(s=f,c.isEqualNode(u)))?i.splice(s,1):o.push(c)}),i.forEach(a=>{var c;return(c=a.parentNode)==null?void 0:c.removeChild(a)}),o.forEach(a=>n.appendChild(a)),{oldTags:i,newTags:o}},ew=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute($i),i=r?r.split(","):[],o=[...i],s=Object.keys(e);for(const a of s){const c=e[a]||"";n.getAttribute(a)!==c&&n.setAttribute(a,c),i.indexOf(a)===-1&&i.push(a);const u=o.indexOf(a);u!==-1&&o.splice(u,1)}for(let a=o.length-1;a>=0;a-=1)n.removeAttribute(o[a]);i.length===o.length?n.removeAttribute($i):n.getAttribute($i)!==s.join(",")&&n.setAttribute($i,s.join(","))},iB=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=FD(t)),ew("title",e)},wC=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:i,linkTags:o,metaTags:s,noscriptTags:a,onChangeClientState:c,scriptTags:u,styleTags:f,title:p,titleAttributes:v}=t;ew("body",r),ew("html",i),iB(p,v);const w={baseTag:Wc("base",n),linkTags:Wc("link",o),metaTags:Wc("meta",s),noscriptTags:Wc("noscript",a),scriptTags:Wc("script",u),styleTags:Wc("style",f)},E={},S={};Object.keys(w).forEach(_=>{const{newTags:N,oldTags:j}=w[_];N.length&&(E[_]=N),j.length&&(S[_]=w[_].oldTags)}),e&&e(),c(t,E,S)},zd=null,oB=t=>{zd&&cancelAnimationFrame(zd),t.defer?zd=requestAnimationFrame(()=>{wC(t,()=>{zd=null})}):(wC(t),zd=null)},sB=oB,_C=class extends I.Component{constructor(){super(...arguments);Oi(this,"rendered",!1)}shouldComponentUpdate(e){return!B$(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:n}=this.props.context;let r=null;const i=Y$(e.get().map(o=>{const s={...o.props};return delete s.context,s}));zD.canUseDOM?sB(i):Xb&&(r=Xb(i)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Yb,aB=(Yb=class extends I.Component{shouldComponentUpdate(t){return!j$(bC(this.props,"helmetData"),bC(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return vC(xC.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${xC.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),vC(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return Vi.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:i,...o}=r.props,s=Object.keys(o).reduce((c,u)=>(c[z$[u]||u]=o[u],c),{});let{type:a}=r;switch(typeof a=="symbol"?a=a.toString():this.warnOnInvalidChildren(r,i),a){case"Symbol(react.fragment)":e=this.mapChildrenToProps(i,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,s,i);break;default:e=this.mapObjectTypeChildren(r,e,s,i);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof Zb)){const i=r;r=new Zb(i.context,!0),delete n.helmetData}return r?Vi.createElement(_C,{...n,context:r.value}):Vi.createElement(BD.Consumer,null,i=>Vi.createElement(_C,{...n,context:i}))}},Oi(Yb,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Yb);const lB=()=>{};var EC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cB=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},GD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,f=o>>2,p=(o&3)<<4|a>>4;let v=(a&15)<<2|u>>6,w=u&63;c||(w=64,s||(v=64)),r.push(n[f],n[p],n[v],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||u==null||p==null)throw new uB;const v=o<<2|a>>4;if(r.push(v),u!==64){const w=a<<4&240|u>>2;if(r.push(w),p!==64){const E=u<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dB=function(t){const e=qD(t);return GD.encodeByteArray(e,!0)},Sm=function(t){return dB(t).replace(/\./g,"")},HD=function(t){try{return GD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB=()=>fB().__FIREBASE_DEFAULTS__,pB=()=>{if(typeof process>"u"||typeof EC>"u")return;const t=EC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&HD(t[1]);return e&&JSON.parse(e)},qg=()=>{try{return lB()||hB()||pB()||mB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WD=t=>{var e,n;return(n=(e=qg())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},gB=t=>{const e=WD(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},KD=()=>{var t;return(t=qg())==null?void 0:t.config},YD=t=>{var e;return(e=qg())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function JD(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yB(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Sm(JSON.stringify(n)),Sm(JSON.stringify(s)),""].join(".")}const ff={};function xB(){const t={prod:[],emulator:[]};for(const e of Object.keys(ff))ff[e]?t.emulator.push(e):t.prod.push(e);return t}function bB(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let SC=!1;function QD(t,e){if(typeof window>"u"||typeof document>"u"||!ju(window.location.host)||ff[t]===e||ff[t]||SC)return;ff[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=xB().prod.length>0;function s(){const v=document.getElementById(r);v&&v.remove()}function a(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function u(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{SC=!0,s()},v}function f(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function p(){const v=bB(r),w=n("text"),E=document.getElementById(w)||document.createElement("span"),S=n("learnmore"),_=document.getElementById(S)||document.createElement("a"),N=n("preprendIcon"),j=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const F=v.element;a(F),f(_,S);const q=u();c(j,N),F.append(j,E,_,q),document.body.appendChild(F)}o?(E.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wB(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(or())}function _B(){var e;const t=(e=qg())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EB(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Y_(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SB(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TB(){const t=or();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AB(){return!_B()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J_(){try{return typeof indexedDB=="object"}catch{return!1}}function Q_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}function XD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB="FirebaseError";class to extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=CB,Object.setPrototypeOf(this,to.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xl.prototype.create)}}class Xl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?IB(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new to(i,a,r)}}function IB(t,e){return t.replace(PB,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const PB=/\{\$([^}]+)}/g;function NB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(TC(o)&&TC(s)){if(!Pa(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function TC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function tf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function nf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function kB(t,e){const n=new RB(t,e);return n.subscribe.bind(n)}class RB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");MB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Y0),i.error===void 0&&(i.error=Y0),i.complete===void 0&&(i.complete=Y0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Y0(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB=1e3,OB=2,LB=14400*1e3,jB=.5;function AC(t,e=DB,n=OB){const r=e*Math.pow(n,t),i=Math.round(jB*r*(Math.random()-.5)*2);return Math.min(LB,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class Ji{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FB=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vB;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VB(e))try{this.getOrInitializeService({instanceIdentifier:xl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=xl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xl){return this.instances.has(e)}getOptions(e=xl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xl){return this.component?this.component.multipleInstances?e:xl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function UB(t){return t===xl?void 0:t}function VB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FB(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ht||(ht={}));const BB={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},zB=ht.INFO,qB={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},GB=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=qB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gg{constructor(e){this.name=e,this._logLevel=zB,this._logHandler=GB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}}const HB=(t,e)=>e.some(n=>t instanceof n);let CC,IC;function WB(){return CC||(CC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KB(){return IC||(IC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ZD=new WeakMap,tw=new WeakMap,eO=new WeakMap,J0=new WeakMap,X_=new WeakMap;function YB(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Ea(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&ZD.set(n,t)}).catch(()=>{}),X_.set(e,t),e}function JB(t){if(tw.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});tw.set(t,e)}let nw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||eO.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ea(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QB(t){nw=t(nw)}function XB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Q0(this),e,...n);return eO.set(r,e.sort?e.sort():[e]),Ea(r)}:KB().includes(t)?function(...e){return t.apply(Q0(this),e),Ea(ZD.get(this))}:function(...e){return Ea(t.apply(Q0(this),e))}}function ZB(t){return typeof t=="function"?XB(t):(t instanceof IDBTransaction&&JB(t),HB(t,WB())?new Proxy(t,nw):t)}function Ea(t){if(t instanceof IDBRequest)return YB(t);if(J0.has(t))return J0.get(t);const e=ZB(t);return e!==t&&(J0.set(t,e),X_.set(e,t)),e}const Q0=t=>X_.get(t);function tO(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Ea(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Ea(s.result),c.oldVersion,c.newVersion,Ea(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const e9=["get","getKey","getAll","getAllKeys","count"],t9=["put","add","delete","clear"],X0=new Map;function PC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(X0.get(e))return X0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=t9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||e9.includes(n)))return;const o=async function(s,...a){const c=this.transaction(s,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&c.done]))[0]};return X0.set(e,o),o}QB(t=>({...t,get:(e,n,r)=>PC(e,n)||t.get(e,n,r),has:(e,n)=>!!PC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(r9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function r9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rw="@firebase/app",NC="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Gg("@firebase/app"),i9="@firebase/app-compat",o9="@firebase/analytics-compat",s9="@firebase/analytics",a9="@firebase/app-check-compat",l9="@firebase/app-check",c9="@firebase/auth",u9="@firebase/auth-compat",d9="@firebase/database",f9="@firebase/data-connect",h9="@firebase/database-compat",p9="@firebase/functions",m9="@firebase/functions-compat",g9="@firebase/installations",v9="@firebase/installations-compat",y9="@firebase/messaging",x9="@firebase/messaging-compat",b9="@firebase/performance",w9="@firebase/performance-compat",_9="@firebase/remote-config",E9="@firebase/remote-config-compat",S9="@firebase/storage",T9="@firebase/storage-compat",A9="@firebase/firestore",C9="@firebase/ai",I9="@firebase/firestore-compat",P9="firebase",N9="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="[DEFAULT]",k9={[rw]:"fire-core",[i9]:"fire-core-compat",[s9]:"fire-analytics",[o9]:"fire-analytics-compat",[l9]:"fire-app-check",[a9]:"fire-app-check-compat",[c9]:"fire-auth",[u9]:"fire-auth-compat",[d9]:"fire-rtdb",[f9]:"fire-data-connect",[h9]:"fire-rtdb-compat",[p9]:"fire-fn",[m9]:"fire-fn-compat",[g9]:"fire-iid",[v9]:"fire-iid-compat",[y9]:"fire-fcm",[x9]:"fire-fcm-compat",[b9]:"fire-perf",[w9]:"fire-perf-compat",[_9]:"fire-rc",[E9]:"fire-rc-compat",[S9]:"fire-gcs",[T9]:"fire-gcs-compat",[A9]:"fire-fst",[I9]:"fire-fst-compat",[C9]:"fire-vertex","fire-js":"fire-js",[P9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=new Map,R9=new Map,ow=new Map;function kC(t,e){try{t.container.addComponent(e)}catch(n){Es.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fo(t){const e=t.name;if(ow.has(e))return Es.debug(`There were multiple attempts to register component ${e}.`),!1;ow.set(e,t);for(const n of Tm.values())kC(n,t);for(const n of R9.values())kC(n,t);return!0}function Zl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ir(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sa=new Xl("app","Firebase",M9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=N9;function nO(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:iw,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Sa.create("bad-app-name",{appName:String(i)});if(n||(n=KD()),!n)throw Sa.create("no-options");const o=Tm.get(i);if(o){if(Pa(n,o.options)&&Pa(r,o.config))return o;throw Sa.create("duplicate-app",{appName:i})}const s=new $B(i);for(const c of ow.values())s.addComponent(c);const a=new D9(n,r,s);return Tm.set(i,a),a}function Z_(t=iw){const e=Tm.get(t);if(!e&&t===iw&&KD())return nO();if(!e)throw Sa.create("no-app",{appName:t});return e}function vi(t,e,n){let r=k9[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Es.warn(s.join(" "));return}Fo(new Ji(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9="firebase-heartbeat-database",L9=1,bf="firebase-heartbeat-store";let Z0=null;function rO(){return Z0||(Z0=tO(O9,L9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Sa.create("idb-open",{originalErrorMessage:t.message})})),Z0}async function j9(t){try{const n=(await rO()).transaction(bf),r=await n.objectStore(bf).get(iO(t));return await n.done,r}catch(e){if(e instanceof to)Es.warn(e.message);else{const n=Sa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Es.warn(n.message)}}}async function RC(t,e){try{const r=(await rO()).transaction(bf,"readwrite");await r.objectStore(bf).put(e,iO(t)),await r.done}catch(n){if(n instanceof to)Es.warn(n.message);else{const r=Sa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Es.warn(r.message)}}}function iO(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9=1024,U9=30;class V9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new B9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=MC();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>U9){const s=z9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Es.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=MC(),{heartbeatsToSend:r,unsentEntries:i}=$9(this._heartbeatsCache.heartbeats),o=Sm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Es.warn(n),""}}}function MC(){return new Date().toISOString().substring(0,10)}function $9(t,e=F9){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),DC(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),DC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class B9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J_()?Q_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await j9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return RC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return RC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function DC(t){return Sm(JSON.stringify({version:2,heartbeats:t})).length}function z9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(t){Fo(new Ji("platform-logger",e=>new n9(e),"PRIVATE")),Fo(new Ji("heartbeat",e=>new V9(e),"PRIVATE")),vi(rw,NC,t),vi(rw,NC,"esm2020"),vi("fire-js","")}q9("");function oO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const G9=oO,sO=new Xl("auth","Firebase",oO());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=new Gg("@firebase/auth");function H9(t,...e){Am.logLevel<=ht.WARN&&Am.warn(`Auth (${Fu}): ${t}`,...e)}function om(t,...e){Am.logLevel<=ht.ERROR&&Am.error(`Auth (${Fu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t,...e){throw tE(t,...e)}function qi(t,...e){return tE(t,...e)}function eE(t,e,n){const r={...G9(),[e]:n};return new Xl("auth","Firebase",r).create(e,{appName:t.name})}function Ro(t){return eE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W9(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&bi(t,"argument-error"),eE(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sO.create(t,...e)}function tt(t,e,...n){if(!t)throw tE(e,...n)}function gs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw om(e),new Error(e)}function Ss(t,e){t||gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function K9(){return OC()==="http:"||OC()==="https:"}function OC(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K9()||Y_()||"connection"in navigator)?navigator.onLine:!0}function J9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ss(n>e,"Short delay should be less than long delay!"),this.isMobile=wB()||SB()}get(){return Y9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t,e){Ss(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Z9=new Kf(3e4,6e4);function Ua(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ds(t,e,n,r,i={}){return lO(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=Wf({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...o};return EB()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ju(t.emulatorConfig.host)&&(u.credentials="include"),aO.fetch()(await cO(t,t.config.apiHost,n,a),u)})}async function lO(t,e,n){t._canInitEmulator=!1;const r={...Q9,...e};try{const i=new tz(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Pp(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pp(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Pp(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Pp(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw eE(t,f,u);bi(t,f)}}catch(i){if(i instanceof to)throw i;bi(t,"network-request-failed",{message:String(i)})}}async function Yf(t,e,n,r,i={}){const o=await Ds(t,e,n,r,i);return"mfaPendingCredential"in o&&bi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function cO(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?nE(t.config,i):`${t.config.apiScheme}://${i}`;return X9.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function ez(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qi(this.auth,"network-request-failed")),Z9.get())})}}function Pp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=qi(t,e,r);return i.customData._tokenResponse=n,i}function LC(t){return t!==void 0&&t.enterprise!==void 0}class nz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ez(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rz(t,e){return Ds(t,"GET","/v2/recaptchaConfig",Ua(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iz(t,e){return Ds(t,"POST","/v1/accounts:delete",e)}async function Cm(t,e){return Ds(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oz(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),i=rE(r);tt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:hf(ex(i.auth_time)),issuedAtTime:hf(ex(i.iat)),expirationTime:hf(ex(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ex(t){return Number(t)*1e3}function rE(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return om("JWT malformed, contained fewer than 3 sections"),null;try{const i=HD(n);return i?JSON.parse(i):(om("Failed to decode base64 JWT payload"),null)}catch(i){return om("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function jC(t){const e=rE(t);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof to&&sz(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function sz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hf(this.lastLoginAt),this.creationTime=hf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Im(t){var p;const e=t.auth,n=await t.getIdToken(),r=await _u(t,Cm(e,{idToken:n}));tt(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=(p=i.providerUserInfo)!=null&&p.length?uO(i.providerUserInfo):[],s=cz(t.providerData,o),a=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),u=a?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new aw(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function lz(t){const e=Vt(t);await Im(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cz(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uO(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uz(t,e){const n=await lO(t,{},async()=>{const r=Wf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await cO(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&ju(t.emulatorConfig.host)&&(c.credentials="include"),aO.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dz(t,e){return Ds(t,"POST","/v2/accounts:revokeToken",Ua(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const n=jC(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await uz(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new uu;return r&&(tt(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(tt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(tt(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uu,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(t,e){tt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bi{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new az(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new aw(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await _u(this,this.stsTokenManager.getToken(this.auth,e));return tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oz(this,e)}reload(){return lz(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Im(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ir(this.auth.app))return Promise.reject(Ro(this.auth));const e=await this.getIdToken();return await _u(this,iz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:v,isAnonymous:w,providerData:E,stsTokenManager:S}=n;tt(p&&S,e,"internal-error");const _=uu.fromJSON(this.name,S);tt(typeof p=="string",e,"internal-error"),ha(r,e.name),ha(i,e.name),tt(typeof v=="boolean",e,"internal-error"),tt(typeof w=="boolean",e,"internal-error"),ha(o,e.name),ha(s,e.name),ha(a,e.name),ha(c,e.name),ha(u,e.name),ha(f,e.name);const N=new Bi({uid:p,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:w,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:_,createdAt:u,lastLoginAt:f});return E&&Array.isArray(E)&&(N.providerData=E.map(j=>({...j}))),c&&(N._redirectEventId=c),N}static async _fromIdTokenResponse(e,n,r=!1){const i=new uu;i.updateFromServerResponse(n);const o=new Bi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Im(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];tt(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?uO(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new uu;a.updateFromIdToken(r);const c=new Bi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new aw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new Map;function vs(t){Ss(t instanceof Function,"Expected a class definition");let e=FC.get(t);return e?(Ss(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,FC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dO.type="NONE";const UC=dO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t,e,n){return`firebase:${t}:${e}:${n}`}class du{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=sm(this.userKey,i.apiKey,o),this.fullPersistenceKey=sm("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Cm(this.auth,{idToken:e}).catch(()=>{});return n?Bi._fromGetAccountInfoResponse(this.auth,n,e):null}return Bi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new du(vs(UC),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=i[0]||vs(UC);const s=sm(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const f=await u._get(s);if(f){let p;if(typeof f=="string"){const v=await Cm(e,{idToken:f}).catch(()=>{});if(!v)break;p=await Bi._fromGetAccountInfoResponse(e,v,f)}else p=Bi._fromJSON(e,f);u!==o&&(a=p),o=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new du(o,e,r):(o=c[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new du(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vO(e))return"Blackberry";if(yO(e))return"Webos";if(hO(e))return"Safari";if((e.includes("chrome/")||pO(e))&&!e.includes("edge/"))return"Chrome";if(gO(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function fO(t=or()){return/firefox\//i.test(t)}function hO(t=or()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pO(t=or()){return/crios\//i.test(t)}function mO(t=or()){return/iemobile/i.test(t)}function gO(t=or()){return/android/i.test(t)}function vO(t=or()){return/blackberry/i.test(t)}function yO(t=or()){return/webos/i.test(t)}function iE(t=or()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fz(t=or()){var e;return iE(t)&&!!((e=window.navigator)!=null&&e.standalone)}function hz(){return TB()&&document.documentMode===10}function xO(t=or()){return iE(t)||gO(t)||yO(t)||vO(t)||/windows phone/i.test(t)||mO(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(t,e=[]){let n;switch(t){case"Browser":n=VC(or());break;case"Worker":n=`${VC(or())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mz(t,e={}){return Ds(t,"GET","/v2/passwordPolicy",Ua(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gz=6;class vz{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??gz,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $C(this),this.idTokenSubscription=new $C(this),this.beforeStateQueue=new pz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vs(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await du.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cm(this,{idToken:e}),r=await Bi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Ir(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(o=this.redirectUser)==null?void 0:o._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Im(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=J9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ir(this.app))return Promise.reject(Ro(this));const n=e?Vt(e):null;return n&&tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ir(this.app)?Promise.reject(Ro(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ir(this.app)?Promise.reject(Ro(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mz(this),n=new vz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await dz(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vs(e)||this._popupRedirectResolver;tt(n,this,"argument-error"),this.redirectPersistenceManager=await du.create(this,[vs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&H9(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Va(t){return Vt(t)}class $C{constructor(e){this.auth=e,this.observer=null,this.addObserver=kB(n=>this.observer=n)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xz(t){Hg=t}function wO(t){return Hg.loadJS(t)}function bz(){return Hg.recaptchaEnterpriseScript}function wz(){return Hg.gapiScript}function _z(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Ez{constructor(){this.enterprise=new Sz}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Sz{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Tz="recaptcha-enterprise",_O="NO_RECAPTCHA";class Az{constructor(e){this.type=Tz,this.auth=Va(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{rz(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new nz(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})})}function i(o,s,a){const c=window.grecaptcha;LC(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(_O)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ez().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&LC(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=bz();c.length!==0&&(c+=a),wO(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})}}async function BC(t,e,n,r=!1,i=!1){const o=new Az(t);let s;if(i)s=_O;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function lw(t,e,n,r,i){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await BC(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await BC(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cz(t,e){const n=Zl(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Pa(o,e??{}))return i;bi(i,"already-initialized")}return n.initialize({options:e})}function Iz(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Pz(t,e,n){const r=Va(t);tt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=EO(e),{host:s,port:a}=Nz(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},f=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){tt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),tt(Pa(u,r.config.emulator)&&Pa(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,ju(s)?(JD(`${o}//${s}${c}`),QD("Auth",!0)):kz()}function EO(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Nz(t){const e=EO(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:zC(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:zC(s)}}}function zC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kz(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,n){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}async function Rz(t,e){return Ds(t,"POST","/v1/accounts:update",e)}async function Mz(t,e){return Ds(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dz(t,e){return Yf(t,"POST","/v1/accounts:signInWithPassword",Ua(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oz(t,e){return Yf(t,"POST","/v1/accounts:signInWithEmailLink",Ua(t,e))}async function Lz(t,e){return Yf(t,"POST","/v1/accounts:signInWithEmailLink",Ua(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends oE{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new wf(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new wf(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lw(e,n,"signInWithPassword",Dz);case"emailLink":return Oz(e,{email:this._email,oobCode:this._password});default:bi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lw(e,r,"signUpPassword",Mz);case"emailLink":return Lz(e,{idToken:n,email:this._email,oobCode:this._password});default:bi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fu(t,e){return Yf(t,"POST","/v1/accounts:signInWithIdp",Ua(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jz="http://localhost";class jl extends oE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new jl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const s=new jl(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return fu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fu(e,n)}buildRequest(){const e={requestUri:jz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Uz(t){const e=tf(nf(t)).link,n=e?tf(nf(e)).deep_link_id:null,r=tf(nf(t)).deep_link_id;return(r?tf(nf(r)).link:null)||r||n||e||t}class sE{constructor(e){const n=tf(nf(e)),r=n.apiKey??null,i=n.oobCode??null,o=Fz(n.mode??null);tt(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Uz(e);try{return new sE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(){this.providerId=ec.PROVIDER_ID}static credential(e,n){return wf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=sE.parseLink(n);return tt(r,"argument-error"),wf._fromEmailAndCode(e,r.code,r.tenantId)}}ec.PROVIDER_ID="password";ec.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ec.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf extends aE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends Jf{constructor(){super("facebook.com")}static credential(e){return jl._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return va.credential(e.oauthAccessToken)}catch{return null}}}va.FACEBOOK_SIGN_IN_METHOD="facebook.com";va.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Jf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return jl._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return hs.credential(n,r)}catch{return null}}}hs.GOOGLE_SIGN_IN_METHOD="google.com";hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends Jf{constructor(){super("github.com")}static credential(e){return jl._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ya.credential(e.oauthAccessToken)}catch{return null}}}ya.GITHUB_SIGN_IN_METHOD="github.com";ya.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends Jf{constructor(){super("twitter.com")}static credential(e,n){return jl._fromParams({providerId:xa.PROVIDER_ID,signInMethod:xa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xa.credentialFromTaggedObject(e)}static credentialFromError(e){return xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xa.credential(n,r)}catch{return null}}}xa.TWITTER_SIGN_IN_METHOD="twitter.com";xa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vz(t,e){return Yf(t,"POST","/v1/accounts:signUp",Ua(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Bi._fromIdTokenResponse(e,r,i),s=qC(r);return new Fl({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=qC(r);return new Fl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function qC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm extends to{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Pm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Pm(e,n,r,i)}}function SO(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Pm._fromErrorAndOperation(t,o,e,r):o})}async function $z(t,e,n=!1){const r=await _u(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(t,e,n=!1){const{auth:r}=t;if(Ir(r.app))return Promise.reject(Ro(r));const i="reauthenticate";try{const o=await _u(t,SO(r,i,e,t),n);tt(o.idToken,r,"internal-error");const s=rE(o.idToken);tt(s,r,"internal-error");const{sub:a}=s;return tt(t.uid===a,r,"user-mismatch"),Fl._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&bi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(t,e,n=!1){if(Ir(t.app))return Promise.reject(Ro(t));const r="signIn",i=await SO(t,r,e),o=await Fl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function Bz(t,e){return AO(Va(t),e)}async function zz(t,e){return TO(Vt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CO(t){const e=Va(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function qz(t,e,n){if(Ir(t.app))return Promise.reject(Ro(t));const r=Va(t),s=await lw(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vz).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&CO(t),c}),a=await Fl._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function Gz(t,e,n){return Ir(t.app)?Promise.reject(Ro(t)):Bz(Vt(t),ec.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&CO(t),r})}function Hz(t,e){const n=Vt(t);return Ir(n.auth.app)?Promise.reject(Ro(n.auth)):IO(n,e,null)}function Wz(t,e){return IO(Vt(t),null,e)}async function IO(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const s=await _u(t,Rz(r,o));await t._updateTokensIfNecessary(s,!0)}function Kz(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function Yz(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function Jz(t,e,n,r){return Vt(t).onAuthStateChanged(e,n,r)}function GC(t){return Vt(t).signOut()}async function Qz(t){return Vt(t).delete()}const Nm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nm,"1"),this.storage.removeItem(Nm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz=1e3,Zz=10;class NO extends PO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);hz()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Zz):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Xz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NO.type="LOCAL";const e7=NO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO extends PO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kO.type="SESSION";const RO=kO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Wg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async u=>u(n.origin,o)),c=await t7(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{const u=lE("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const v=p;if(v.data.eventId===u)switch(v.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(v.data.response);break;default:clearTimeout(f),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(){return window}function r7(t){Mo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(){return typeof Mo().WorkerGlobalScope<"u"&&typeof Mo().importScripts=="function"}async function i7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function o7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function s7(){return MO()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO="firebaseLocalStorageDb",a7=1,km="firebaseLocalStorage",OO="fbase_key";class Qf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Kg(t,e){return t.transaction([km],e?"readwrite":"readonly").objectStore(km)}function l7(){const t=indexedDB.deleteDatabase(DO);return new Qf(t).toPromise()}function cw(){const t=indexedDB.open(DO,a7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(km,{keyPath:OO})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(km)?e(r):(r.close(),await l7(),e(await cw()))})})}async function HC(t,e,n){const r=Kg(t,!0).put({[OO]:e,value:n});return new Qf(r).toPromise()}async function c7(t,e){const n=Kg(t,!1).get(e),r=await new Qf(n).toPromise();return r===void 0?null:r.value}function WC(t,e){const n=Kg(t,!0).delete(e);return new Qf(n).toPromise()}const u7=800,d7=3;class LO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>d7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wg._getInstance(s7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await i7(),!this.activeServiceWorker)return;this.sender=new n7(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||o7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cw();return await HC(e,Nm,"1"),await WC(e,Nm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>HC(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>c7(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>WC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Kg(i,!1).getAll();return new Qf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),u7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LO.type="LOCAL";const f7=LO;new Kf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t,e){return e?vs(e):(tt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE extends oE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function h7(t){return AO(t.auth,new cE(t),t.bypassAuthState)}function p7(t){const{auth:e,user:n}=t;return tt(n,e,"internal-error"),TO(n,new cE(t),t.bypassAuthState)}async function m7(t){const{auth:e,user:n}=t;return tt(n,e,"internal-error"),$z(n,new cE(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return h7;case"linkViaPopup":case"linkViaRedirect":return m7;case"reauthViaPopup":case"reauthViaRedirect":return p7;default:bi(this.auth,"internal-error")}}resolve(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7=new Kf(2e3,1e4);async function v7(t,e,n){if(Ir(t.app))return Promise.reject(qi(t,"operation-not-supported-in-this-environment"));const r=Va(t);W9(t,e,aE);const i=jO(r,n);return new Tl(r,"signInViaPopup",e,i).executeNotNull()}class Tl extends FO{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Tl.currentPopupAction&&Tl.currentPopupAction.cancel(),Tl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){Ss(this.filter.length===1,"Popup operations only handle one event");const e=lE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,g7.get())};e()}}Tl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7="pendingRedirect",am=new Map;class x7 extends FO{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=am.get(this.auth._key());if(!e){try{const r=await b7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}am.set(this.auth._key(),e)}return this.bypassAuthState||am.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function b7(t,e){const n=E7(e),r=_7(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function w7(t,e){am.set(t._key(),e)}function _7(t){return vs(t._redirectPersistence)}function E7(t){return sm(y7,t.config.apiKey,t.name)}async function S7(t,e,n=!1){if(Ir(t.app))return Promise.reject(Ro(t));const r=Va(t),i=jO(r,e),s=await new x7(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7=600*1e3;class A7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C7(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!UO(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(qi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T7&&this.cachedEventUids.clear(),this.cachedEventUids.has(KC(e))}saveEventToCache(e){this.cachedEventUids.add(KC(e)),this.lastProcessedEventTime=Date.now()}}function KC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function UO({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function C7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UO(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I7(t,e={}){return Ds(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,N7=/^https?/;async function k7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await I7(t);for(const n of e)try{if(R7(n))return}catch{}bi(t,"unauthorized-domain")}function R7(t){const e=sw(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!N7.test(n))return!1;if(P7.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=new Kf(3e4,6e4);function YC(){const t=Mo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function D7(t){return new Promise((e,n)=>{var i,o,s;function r(){YC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{YC(),n(qi(t,"network-request-failed"))},timeout:M7.get()})}if((o=(i=Mo().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((s=Mo().gapi)!=null&&s.load)r();else{const a=_z("iframefcb");return Mo()[a]=()=>{gapi.load?r():n(qi(t,"network-request-failed"))},wO(`${wz()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw lm=null,e})}let lm=null;function O7(t){return lm=lm||D7(t),lm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=new Kf(5e3,15e3),j7="__/auth/iframe",F7="emulator/auth/iframe",U7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},V7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $7(t){const e=t.config;tt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?nE(e,F7):`https://${t.config.authDomain}/${j7}`,r={apiKey:e.apiKey,appName:t.name,v:Fu},i=V7.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Wf(r).slice(1)}`}async function B7(t){const e=await O7(t),n=Mo().gapi;return tt(n,t,"internal-error"),e.open({where:document.body,url:$7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U7,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=qi(t,"network-request-failed"),a=Mo().setTimeout(()=>{o(s)},L7.get());function c(){Mo().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q7=500,G7=600,H7="_blank",W7="http://localhost";class JC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function K7(t,e,n,r=q7,i=G7){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...z7,width:r.toString(),height:i.toString(),top:o,left:s},u=or().toLowerCase();n&&(a=pO(u)?H7:n),fO(u)&&(e=e||W7,c.scrollbars="yes");const f=Object.entries(c).reduce((v,[w,E])=>`${v}${w}=${E},`,"");if(fz(u)&&a!=="_self")return Y7(e||"",a),new JC(null);const p=window.open(e||"",a,f);tt(p,t,"popup-blocked");try{p.focus()}catch{}return new JC(p)}function Y7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7="__/auth/handler",Q7="emulator/auth/handler",X7=encodeURIComponent("fac");async function QC(t,e,n,r,i,o){tt(t.config.authDomain,t,"auth-domain-config-required"),tt(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fu,eventId:i};if(e instanceof aE){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",NB(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))s[f]=p}if(e instanceof Jf){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const c=await t._getAppCheckToken(),u=c?`#${X7}=${encodeURIComponent(c)}`:"";return`${Z7(t)}?${Wf(a).slice(1)}${u}`}function Z7({config:t}){return t.emulator?nE(t,Q7):`https://${t.authDomain}/${J7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="webStorageSupport";class e8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RO,this._completeRedirectFn=S7,this._overrideRedirectResult=w7}async _openPopup(e,n,r,i){var s;Ss((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await QC(e,n,r,sw(),i);return K7(e,o,lE())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await QC(e,n,r,sw(),i);return r7(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Ss(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await B7(e),r=new A7(e);return n.register("authEvent",i=>(tt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tx,{type:tx},i=>{var s;const o=(s=i==null?void 0:i[0])==null?void 0:s[tx];o!==void 0&&n(!!o),bi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=k7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xO()||hO()||iE()}}const t8=e8;var XC="@firebase/auth",ZC="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function i8(t){Fo(new Ji("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;tt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bO(t)},u=new yz(r,i,o,c);return Iz(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fo(new Ji("auth-internal",e=>{const n=Va(e.getProvider("auth").getImmediate());return(r=>new n8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vi(XC,ZC,r8(t)),vi(XC,ZC,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8=300,s8=YD("authIdTokenMaxAge")||o8;let eI=null;const a8=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>s8)return;const i=n==null?void 0:n.token;eI!==i&&(eI=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function l8(t=Z_()){const e=Zl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Cz(t,{popupRedirectResolver:t8,persistence:[f7,e7,RO]}),r=YD("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=a8(o.toString());Yz(n,s,()=>s(n.currentUser)),Kz(n,a=>s(a))}}const i=WD("auth");return i&&Pz(n,`http://${i}`),n}function c8(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}xz({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=qi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",c8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});i8("Browser");var u8="firebase",d8="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi(u8,d8,"app");var tI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ta,VO;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,D){function O(){}O.prototype=D.prototype,k.F=D.prototype,k.prototype=new O,k.prototype.constructor=k,k.D=function(z,U,M){for(var P=Array(arguments.length-2),me=2;me<arguments.length;me++)P[me-2]=arguments[me];return D.prototype[U].apply(z,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,D,O){O||(O=0);const z=Array(16);if(typeof D=="string")for(var U=0;U<16;++U)z[U]=D.charCodeAt(O++)|D.charCodeAt(O++)<<8|D.charCodeAt(O++)<<16|D.charCodeAt(O++)<<24;else for(U=0;U<16;++U)z[U]=D[O++]|D[O++]<<8|D[O++]<<16|D[O++]<<24;D=k.g[0],O=k.g[1],U=k.g[2];let M=k.g[3],P;P=D+(M^O&(U^M))+z[0]+3614090360&4294967295,D=O+(P<<7&4294967295|P>>>25),P=M+(U^D&(O^U))+z[1]+3905402710&4294967295,M=D+(P<<12&4294967295|P>>>20),P=U+(O^M&(D^O))+z[2]+606105819&4294967295,U=M+(P<<17&4294967295|P>>>15),P=O+(D^U&(M^D))+z[3]+3250441966&4294967295,O=U+(P<<22&4294967295|P>>>10),P=D+(M^O&(U^M))+z[4]+4118548399&4294967295,D=O+(P<<7&4294967295|P>>>25),P=M+(U^D&(O^U))+z[5]+1200080426&4294967295,M=D+(P<<12&4294967295|P>>>20),P=U+(O^M&(D^O))+z[6]+2821735955&4294967295,U=M+(P<<17&4294967295|P>>>15),P=O+(D^U&(M^D))+z[7]+4249261313&4294967295,O=U+(P<<22&4294967295|P>>>10),P=D+(M^O&(U^M))+z[8]+1770035416&4294967295,D=O+(P<<7&4294967295|P>>>25),P=M+(U^D&(O^U))+z[9]+2336552879&4294967295,M=D+(P<<12&4294967295|P>>>20),P=U+(O^M&(D^O))+z[10]+4294925233&4294967295,U=M+(P<<17&4294967295|P>>>15),P=O+(D^U&(M^D))+z[11]+2304563134&4294967295,O=U+(P<<22&4294967295|P>>>10),P=D+(M^O&(U^M))+z[12]+1804603682&4294967295,D=O+(P<<7&4294967295|P>>>25),P=M+(U^D&(O^U))+z[13]+4254626195&4294967295,M=D+(P<<12&4294967295|P>>>20),P=U+(O^M&(D^O))+z[14]+2792965006&4294967295,U=M+(P<<17&4294967295|P>>>15),P=O+(D^U&(M^D))+z[15]+1236535329&4294967295,O=U+(P<<22&4294967295|P>>>10),P=D+(U^M&(O^U))+z[1]+4129170786&4294967295,D=O+(P<<5&4294967295|P>>>27),P=M+(O^U&(D^O))+z[6]+3225465664&4294967295,M=D+(P<<9&4294967295|P>>>23),P=U+(D^O&(M^D))+z[11]+643717713&4294967295,U=M+(P<<14&4294967295|P>>>18),P=O+(M^D&(U^M))+z[0]+3921069994&4294967295,O=U+(P<<20&4294967295|P>>>12),P=D+(U^M&(O^U))+z[5]+3593408605&4294967295,D=O+(P<<5&4294967295|P>>>27),P=M+(O^U&(D^O))+z[10]+38016083&4294967295,M=D+(P<<9&4294967295|P>>>23),P=U+(D^O&(M^D))+z[15]+3634488961&4294967295,U=M+(P<<14&4294967295|P>>>18),P=O+(M^D&(U^M))+z[4]+3889429448&4294967295,O=U+(P<<20&4294967295|P>>>12),P=D+(U^M&(O^U))+z[9]+568446438&4294967295,D=O+(P<<5&4294967295|P>>>27),P=M+(O^U&(D^O))+z[14]+3275163606&4294967295,M=D+(P<<9&4294967295|P>>>23),P=U+(D^O&(M^D))+z[3]+4107603335&4294967295,U=M+(P<<14&4294967295|P>>>18),P=O+(M^D&(U^M))+z[8]+1163531501&4294967295,O=U+(P<<20&4294967295|P>>>12),P=D+(U^M&(O^U))+z[13]+2850285829&4294967295,D=O+(P<<5&4294967295|P>>>27),P=M+(O^U&(D^O))+z[2]+4243563512&4294967295,M=D+(P<<9&4294967295|P>>>23),P=U+(D^O&(M^D))+z[7]+1735328473&4294967295,U=M+(P<<14&4294967295|P>>>18),P=O+(M^D&(U^M))+z[12]+2368359562&4294967295,O=U+(P<<20&4294967295|P>>>12),P=D+(O^U^M)+z[5]+4294588738&4294967295,D=O+(P<<4&4294967295|P>>>28),P=M+(D^O^U)+z[8]+2272392833&4294967295,M=D+(P<<11&4294967295|P>>>21),P=U+(M^D^O)+z[11]+1839030562&4294967295,U=M+(P<<16&4294967295|P>>>16),P=O+(U^M^D)+z[14]+4259657740&4294967295,O=U+(P<<23&4294967295|P>>>9),P=D+(O^U^M)+z[1]+2763975236&4294967295,D=O+(P<<4&4294967295|P>>>28),P=M+(D^O^U)+z[4]+1272893353&4294967295,M=D+(P<<11&4294967295|P>>>21),P=U+(M^D^O)+z[7]+4139469664&4294967295,U=M+(P<<16&4294967295|P>>>16),P=O+(U^M^D)+z[10]+3200236656&4294967295,O=U+(P<<23&4294967295|P>>>9),P=D+(O^U^M)+z[13]+681279174&4294967295,D=O+(P<<4&4294967295|P>>>28),P=M+(D^O^U)+z[0]+3936430074&4294967295,M=D+(P<<11&4294967295|P>>>21),P=U+(M^D^O)+z[3]+3572445317&4294967295,U=M+(P<<16&4294967295|P>>>16),P=O+(U^M^D)+z[6]+76029189&4294967295,O=U+(P<<23&4294967295|P>>>9),P=D+(O^U^M)+z[9]+3654602809&4294967295,D=O+(P<<4&4294967295|P>>>28),P=M+(D^O^U)+z[12]+3873151461&4294967295,M=D+(P<<11&4294967295|P>>>21),P=U+(M^D^O)+z[15]+530742520&4294967295,U=M+(P<<16&4294967295|P>>>16),P=O+(U^M^D)+z[2]+3299628645&4294967295,O=U+(P<<23&4294967295|P>>>9),P=D+(U^(O|~M))+z[0]+4096336452&4294967295,D=O+(P<<6&4294967295|P>>>26),P=M+(O^(D|~U))+z[7]+1126891415&4294967295,M=D+(P<<10&4294967295|P>>>22),P=U+(D^(M|~O))+z[14]+2878612391&4294967295,U=M+(P<<15&4294967295|P>>>17),P=O+(M^(U|~D))+z[5]+4237533241&4294967295,O=U+(P<<21&4294967295|P>>>11),P=D+(U^(O|~M))+z[12]+1700485571&4294967295,D=O+(P<<6&4294967295|P>>>26),P=M+(O^(D|~U))+z[3]+2399980690&4294967295,M=D+(P<<10&4294967295|P>>>22),P=U+(D^(M|~O))+z[10]+4293915773&4294967295,U=M+(P<<15&4294967295|P>>>17),P=O+(M^(U|~D))+z[1]+2240044497&4294967295,O=U+(P<<21&4294967295|P>>>11),P=D+(U^(O|~M))+z[8]+1873313359&4294967295,D=O+(P<<6&4294967295|P>>>26),P=M+(O^(D|~U))+z[15]+4264355552&4294967295,M=D+(P<<10&4294967295|P>>>22),P=U+(D^(M|~O))+z[6]+2734768916&4294967295,U=M+(P<<15&4294967295|P>>>17),P=O+(M^(U|~D))+z[13]+1309151649&4294967295,O=U+(P<<21&4294967295|P>>>11),P=D+(U^(O|~M))+z[4]+4149444226&4294967295,D=O+(P<<6&4294967295|P>>>26),P=M+(O^(D|~U))+z[11]+3174756917&4294967295,M=D+(P<<10&4294967295|P>>>22),P=U+(D^(M|~O))+z[2]+718787259&4294967295,U=M+(P<<15&4294967295|P>>>17),P=O+(M^(U|~D))+z[9]+3951481745&4294967295,k.g[0]=k.g[0]+D&4294967295,k.g[1]=k.g[1]+(U+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+U&4294967295,k.g[3]=k.g[3]+M&4294967295}r.prototype.v=function(k,D){D===void 0&&(D=k.length);const O=D-this.blockSize,z=this.C;let U=this.h,M=0;for(;M<D;){if(U==0)for(;M<=O;)i(this,k,M),M+=this.blockSize;if(typeof k=="string"){for(;M<D;)if(z[U++]=k.charCodeAt(M++),U==this.blockSize){i(this,z),U=0;break}}else for(;M<D;)if(z[U++]=k[M++],U==this.blockSize){i(this,z),U=0;break}}this.h=U,this.o+=D},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var D=1;D<k.length-8;++D)k[D]=0;D=this.o*8;for(var O=k.length-8;O<k.length;++O)k[O]=D&255,D/=256;for(this.v(k),k=Array(16),D=0,O=0;O<4;++O)for(let z=0;z<32;z+=8)k[D++]=this.g[O]>>>z&255;return k};function o(k,D){var O=a;return Object.prototype.hasOwnProperty.call(O,k)?O[k]:O[k]=D(k)}function s(k,D){this.h=D;const O=[];let z=!0;for(let U=k.length-1;U>=0;U--){const M=k[U]|0;z&&M==D||(O[U]=M,z=!1)}this.g=O}var a={};function c(k){return-128<=k&&k<128?o(k,function(D){return new s([D|0],D<0?-1:0)}):new s([k|0],k<0?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return p;if(k<0)return _(u(-k));const D=[];let O=1;for(let z=0;k>=O;z++)D[z]=k/O|0,O*=4294967296;return new s(D,0)}function f(k,D){if(k.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(k.charAt(0)=="-")return _(f(k.substring(1),D));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=u(Math.pow(D,8));let z=p;for(let M=0;M<k.length;M+=8){var U=Math.min(8,k.length-M);const P=parseInt(k.substring(M,M+U),D);U<8?(U=u(Math.pow(D,U)),z=z.j(U).add(u(P))):(z=z.j(O),z=z.add(u(P)))}return z}var p=c(0),v=c(1),w=c(16777216);t=s.prototype,t.m=function(){if(S(this))return-_(this).m();let k=0,D=1;for(let O=0;O<this.g.length;O++){const z=this.i(O);k+=(z>=0?z:4294967296+z)*D,D*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(E(this))return"0";if(S(this))return"-"+_(this).toString(k);const D=u(Math.pow(k,6));var O=this;let z="";for(;;){const U=q(O,D).g;O=N(O,U.j(D));let M=((O.g.length>0?O.g[0]:O.h)>>>0).toString(k);if(O=U,E(O))return M+z;for(;M.length<6;)M="0"+M;z=M+z}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function E(k){if(k.h!=0)return!1;for(let D=0;D<k.g.length;D++)if(k.g[D]!=0)return!1;return!0}function S(k){return k.h==-1}t.l=function(k){return k=N(this,k),S(k)?-1:E(k)?0:1};function _(k){const D=k.g.length,O=[];for(let z=0;z<D;z++)O[z]=~k.g[z];return new s(O,~k.h).add(v)}t.abs=function(){return S(this)?_(this):this},t.add=function(k){const D=Math.max(this.g.length,k.g.length),O=[];let z=0;for(let U=0;U<=D;U++){let M=z+(this.i(U)&65535)+(k.i(U)&65535),P=(M>>>16)+(this.i(U)>>>16)+(k.i(U)>>>16);z=P>>>16,M&=65535,P&=65535,O[U]=P<<16|M}return new s(O,O[O.length-1]&-2147483648?-1:0)};function N(k,D){return k.add(_(D))}t.j=function(k){if(E(this)||E(k))return p;if(S(this))return S(k)?_(this).j(_(k)):_(_(this).j(k));if(S(k))return _(this.j(_(k)));if(this.l(w)<0&&k.l(w)<0)return u(this.m()*k.m());const D=this.g.length+k.g.length,O=[];for(var z=0;z<2*D;z++)O[z]=0;for(z=0;z<this.g.length;z++)for(let U=0;U<k.g.length;U++){const M=this.i(z)>>>16,P=this.i(z)&65535,me=k.i(U)>>>16,ce=k.i(U)&65535;O[2*z+2*U]+=P*ce,j(O,2*z+2*U),O[2*z+2*U+1]+=M*ce,j(O,2*z+2*U+1),O[2*z+2*U+1]+=P*me,j(O,2*z+2*U+1),O[2*z+2*U+2]+=M*me,j(O,2*z+2*U+2)}for(k=0;k<D;k++)O[k]=O[2*k+1]<<16|O[2*k];for(k=D;k<2*D;k++)O[k]=0;return new s(O,0)};function j(k,D){for(;(k[D]&65535)!=k[D];)k[D+1]+=k[D]>>>16,k[D]&=65535,D++}function F(k,D){this.g=k,this.h=D}function q(k,D){if(E(D))throw Error("division by zero");if(E(k))return new F(p,p);if(S(k))return D=q(_(k),D),new F(_(D.g),_(D.h));if(S(D))return D=q(k,_(D)),new F(_(D.g),D.h);if(k.g.length>30){if(S(k)||S(D))throw Error("slowDivide_ only works with positive integers.");for(var O=v,z=D;z.l(k)<=0;)O=V(O),z=V(z);var U=$(O,1),M=$(z,1);for(z=$(z,2),O=$(O,2);!E(z);){var P=M.add(z);P.l(k)<=0&&(U=U.add(O),M=P),z=$(z,1),O=$(O,1)}return D=N(k,U.j(D)),new F(U,D)}for(U=p;k.l(D)>=0;){for(O=Math.max(1,Math.floor(k.m()/D.m())),z=Math.ceil(Math.log(O)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),M=u(O),P=M.j(D);S(P)||P.l(k)>0;)O-=z,M=u(O),P=M.j(D);E(M)&&(M=v),U=U.add(M),k=N(k,P)}return new F(U,k)}t.B=function(k){return q(this,k).h},t.and=function(k){const D=Math.max(this.g.length,k.g.length),O=[];for(let z=0;z<D;z++)O[z]=this.i(z)&k.i(z);return new s(O,this.h&k.h)},t.or=function(k){const D=Math.max(this.g.length,k.g.length),O=[];for(let z=0;z<D;z++)O[z]=this.i(z)|k.i(z);return new s(O,this.h|k.h)},t.xor=function(k){const D=Math.max(this.g.length,k.g.length),O=[];for(let z=0;z<D;z++)O[z]=this.i(z)^k.i(z);return new s(O,this.h^k.h)};function V(k){const D=k.g.length+1,O=[];for(let z=0;z<D;z++)O[z]=k.i(z)<<1|k.i(z-1)>>>31;return new s(O,k.h)}function $(k,D){const O=D>>5;D%=32;const z=k.g.length-O,U=[];for(let M=0;M<z;M++)U[M]=D>0?k.i(M+O)>>>D|k.i(M+O+1)<<32-D:k.i(M+O);return new s(U,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,VO=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,Ta=s}).apply(typeof tI<"u"?tI:typeof self<"u"?self:typeof window<"u"?window:{});var Np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $O,rf,BO,cm,uw,zO,qO,GO;(function(){var t,e=Object.defineProperty;function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Np=="object"&&Np];for(var C=0;C<x.length;++C){var R=x[C];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=n(this);function i(x,C){if(C)e:{var R=r;x=x.split(".");for(var B=0;B<x.length-1;B++){var Z=x[B];if(!(Z in R))break e;R=R[Z]}x=x[x.length-1],B=R[x],C=C(B),C!=B&&C!=null&&e(R,x,{configurable:!0,writable:!0,value:C})}}i("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(x){return x||function(C){var R=[],B;for(B in C)Object.prototype.hasOwnProperty.call(C,B)&&R.push([B,C[B]]);return R}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function a(x){var C=typeof x;return C=="object"&&x!=null||C=="function"}function c(x,C,R){return x.call.apply(x.bind,arguments)}function u(x,C,R){return u=c,u.apply(null,arguments)}function f(x,C){var R=Array.prototype.slice.call(arguments,1);return function(){var B=R.slice();return B.push.apply(B,arguments),x.apply(this,B)}}function p(x,C){function R(){}R.prototype=C.prototype,x.Z=C.prototype,x.prototype=new R,x.prototype.constructor=x,x.Ob=function(B,Z,re){for(var Te=Array(arguments.length-2),at=2;at<arguments.length;at++)Te[at-2]=arguments[at];return C.prototype[Z].apply(B,Te)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function w(x){const C=x.length;if(C>0){const R=Array(C);for(let B=0;B<C;B++)R[B]=x[B];return R}return[]}function E(x,C){for(let B=1;B<arguments.length;B++){const Z=arguments[B];var R=typeof Z;if(R=R!="object"?R:Z?Array.isArray(Z)?"array":R:"null",R=="array"||R=="object"&&typeof Z.length=="number"){R=x.length||0;const re=Z.length||0;x.length=R+re;for(let Te=0;Te<re;Te++)x[R+Te]=Z[Te]}else x.push(Z)}}class S{constructor(C,R){this.i=C,this.j=R,this.h=0,this.g=null}get(){let C;return this.h>0?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function _(x){s.setTimeout(()=>{throw x},0)}function N(){var x=k;let C=null;return x.g&&(C=x.g,x.g=x.g.next,x.g||(x.h=null),C.next=null),C}class j{constructor(){this.h=this.g=null}add(C,R){const B=F.get();B.set(C,R),this.h?this.h.next=B:this.g=B,this.h=B}}var F=new S(()=>new q,x=>x.reset());class q{constructor(){this.next=this.g=this.h=null}set(C,R){this.h=C,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let V,$=!1,k=new j,D=()=>{const x=Promise.resolve(void 0);V=()=>{x.then(O)}};function O(){for(var x;x=N();){try{x.h.call(x.g)}catch(R){_(R)}var C=F;C.j(x),C.h<100&&(C.h++,x.next=C.g,C.g=x)}$=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(x,C){this.type=x,this.g=this.target=C,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var x=!1,C=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const R=()=>{};s.addEventListener("test",R,C),s.removeEventListener("test",R,C)}catch{}return x})();function P(x){return/^[\s\xa0]*$/.test(x)}function me(x,C){U.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,C)}p(me,U),me.prototype.init=function(x,C){const R=this.type=x.type,B=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=C,C=x.relatedTarget,C||(R=="mouseover"?C=x.fromElement:R=="mouseout"&&(C=x.toElement)),this.relatedTarget=C,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),ge=0;function xe(x,C,R,B,Z){this.listener=x,this.proxy=null,this.src=C,this.type=R,this.capture=!!B,this.ha=Z,this.key=++ge,this.da=this.fa=!1}function le(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function ne(x,C,R){for(const B in x)C.call(R,x[B],B,x)}function de(x,C){for(const R in x)C.call(void 0,x[R],R,x)}function Y(x){const C={};for(const R in x)C[R]=x[R];return C}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(x,C){let R,B;for(let Z=1;Z<arguments.length;Z++){B=arguments[Z];for(R in B)x[R]=B[R];for(let re=0;re<ie.length;re++)R=ie[re],Object.prototype.hasOwnProperty.call(B,R)&&(x[R]=B[R])}}function _e(x){this.src=x,this.g={},this.h=0}_e.prototype.add=function(x,C,R,B,Z){const re=x.toString();x=this.g[re],x||(x=this.g[re]=[],this.h++);const Te=Ge(x,C,B,Z);return Te>-1?(C=x[Te],R||(C.fa=!1)):(C=new xe(C,this.src,re,!!B,Z),C.fa=R,x.push(C)),C};function $e(x,C){const R=C.type;if(R in x.g){var B=x.g[R],Z=Array.prototype.indexOf.call(B,C,void 0),re;(re=Z>=0)&&Array.prototype.splice.call(B,Z,1),re&&(le(C),x.g[R].length==0&&(delete x.g[R],x.h--))}}function Ge(x,C,R,B){for(let Z=0;Z<x.length;++Z){const re=x[Z];if(!re.da&&re.listener==C&&re.capture==!!R&&re.ha==B)return Z}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),ze={};function H(x,C,R,B,Z){if(Array.isArray(C)){for(let re=0;re<C.length;re++)H(x,C[re],R,B,Z);return null}return R=Ne(R),x&&x[ce]?x.J(C,R,a(B)?!!B.capture:!1,Z):oe(x,C,R,!1,B,Z)}function oe(x,C,R,B,Z,re){if(!C)throw Error("Invalid event type");const Te=a(Z)?!!Z.capture:!!Z;let at=rt(x);if(at||(x[Ue]=at=new _e(x)),R=at.add(C,R,B,Te,re),R.proxy)return R;if(B=ve(),R.proxy=B,B.src=x,B.listener=R,x.addEventListener)M||(Z=Te),Z===void 0&&(Z=!1),x.addEventListener(C.toString(),B,Z);else if(x.attachEvent)x.attachEvent(Be(C.toString()),B);else if(x.addListener&&x.removeListener)x.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return R}function ve(){function x(R){return C.call(x.src,x.listener,R)}const C=He;return x}function ae(x,C,R,B,Z){if(Array.isArray(C))for(var re=0;re<C.length;re++)ae(x,C[re],R,B,Z);else B=a(B)?!!B.capture:!!B,R=Ne(R),x&&x[ce]?(x=x.i,re=String(C).toString(),re in x.g&&(C=x.g[re],R=Ge(C,R,B,Z),R>-1&&(le(C[R]),Array.prototype.splice.call(C,R,1),C.length==0&&(delete x.g[re],x.h--)))):x&&(x=rt(x))&&(C=x.g[C.toString()],x=-1,C&&(x=Ge(C,R,B,Z)),(R=x>-1?C[x]:null)&&Xe(R))}function Xe(x){if(typeof x!="number"&&x&&!x.da){var C=x.src;if(C&&C[ce])$e(C.i,x);else{var R=x.type,B=x.proxy;C.removeEventListener?C.removeEventListener(R,B,x.capture):C.detachEvent?C.detachEvent(Be(R),B):C.addListener&&C.removeListener&&C.removeListener(B),(R=rt(C))?($e(R,x),R.h==0&&(R.src=null,C[Ue]=null)):le(x)}}}function Be(x){return x in ze?ze[x]:ze[x]="on"+x}function He(x,C){if(x.da)x=!0;else{C=new me(C,this);const R=x.listener,B=x.ha||x.src;x.fa&&Xe(x),x=R.call(B,C)}return x}function rt(x){return x=x[Ue],x instanceof _e?x:null}var Ye="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ne(x){return typeof x=="function"?x:(x[Ye]||(x[Ye]=function(C){return x.handleEvent(C)}),x[Ye])}function be(){z.call(this),this.i=new _e(this),this.M=this,this.G=null}p(be,z),be.prototype[ce]=!0,be.prototype.removeEventListener=function(x,C,R,B){ae(this,x,C,R,B)};function De(x,C){var R,B=x.G;if(B)for(R=[];B;B=B.G)R.push(B);if(x=x.M,B=C.type||C,typeof C=="string")C=new U(C,x);else if(C instanceof U)C.target=C.target||x;else{var Z=C;C=new U(B,x),fe(C,Z)}Z=!0;let re,Te;if(R)for(Te=R.length-1;Te>=0;Te--)re=C.g=R[Te],Z=Je(re,B,!0,C)&&Z;if(re=C.g=x,Z=Je(re,B,!0,C)&&Z,Z=Je(re,B,!1,C)&&Z,R)for(Te=0;Te<R.length;Te++)re=C.g=R[Te],Z=Je(re,B,!1,C)&&Z}be.prototype.N=function(){if(be.Z.N.call(this),this.i){var x=this.i;for(const C in x.g){const R=x.g[C];for(let B=0;B<R.length;B++)le(R[B]);delete x.g[C],x.h--}}this.G=null},be.prototype.J=function(x,C,R,B){return this.i.add(String(x),C,!1,R,B)},be.prototype.K=function(x,C,R,B){return this.i.add(String(x),C,!0,R,B)};function Je(x,C,R,B){if(C=x.i.g[String(C)],!C)return!0;C=C.concat();let Z=!0;for(let re=0;re<C.length;++re){const Te=C[re];if(Te&&!Te.da&&Te.capture==R){const at=Te.listener,Xt=Te.ha||Te.src;Te.fa&&$e(x.i,Te),Z=at.call(Xt,B)!==!1&&Z}}return Z&&!B.defaultPrevented}function dt(x,C){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=u(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(C)>2147483647?-1:s.setTimeout(x,C||0)}function G(x){x.g=dt(()=>{x.g=null,x.i&&(x.i=!1,G(x))},x.l);const C=x.h;x.h=null,x.m.apply(null,C)}class je extends z{constructor(C,R){super(),this.m=C,this.l=R,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:G(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ct(x){z.call(this),this.h=x,this.g={}}p(ct,z);var ft=[];function At(x){ne(x.g,function(C,R){this.g.hasOwnProperty(R)&&Xe(C)},x),x.g={}}ct.prototype.N=function(){ct.Z.N.call(this),At(this)},ct.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yr=s.JSON.stringify,io=s.JSON.parse,Ho=class{stringify(x){return s.JSON.stringify(x,void 0)}parse(x){return s.JSON.parse(x,void 0)}};function oo(){}function lc(){}var so={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mn(){U.call(this,"d")}p(Mn,U);function qs(){U.call(this,"c")}p(qs,U);var xr={},Wo=null;function ao(){return Wo=Wo||new be}xr.Ia="serverreachability";function Gs(x){U.call(this,xr.Ia,x)}p(Gs,U);function Ti(x){const C=ao();De(C,new Gs(C))}xr.STAT_EVENT="statevent";function Dr(x,C){U.call(this,xr.STAT_EVENT,x),this.stat=C}p(Dr,U);function Bt(x){const C=ao();De(C,new Dr(C,x))}xr.Ja="timingevent";function Hs(x,C){U.call(this,xr.Ja,x),this.size=C}p(Hs,U);function Ai(x,C){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){x()},C)}function Zr(){this.g=!0}Zr.prototype.ua=function(){this.g=!1};function cc(x,C,R,B,Z,re){x.info(function(){if(x.g)if(re){var Te="",at=re.split("&");for(let Ct=0;Ct<at.length;Ct++){var Xt=at[Ct].split("=");if(Xt.length>1){const on=Xt[0];Xt=Xt[1];const $r=on.split("_");Te=$r.length>=2&&$r[1]=="type"?Te+(on+"="+Xt+"&"):Te+(on+"=redacted&")}}}else Te=null;else Te=re;return"XMLHTTP REQ ("+B+") [attempt "+Z+"]: "+C+`
`+R+`
`+Te})}function uc(x,C,R,B,Z,re,Te){x.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+Z+"]: "+C+`
`+R+`
`+re+" "+Te})}function br(x,C,R,B){x.info(function(){return"XMLHTTP TEXT ("+C+"): "+Ko(x,R)+(B?" "+B:"")})}function dc(x,C){x.info(function(){return"TIMEOUT: "+C})}Zr.prototype.info=function(){};function Ko(x,C){if(!x.g)return C;if(!C)return null;try{const re=JSON.parse(C);if(re){for(x=0;x<re.length;x++)if(Array.isArray(re[x])){var R=re[x];if(!(R.length<2)){var B=R[1];if(Array.isArray(B)&&!(B.length<1)){var Z=B[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(let Te=1;Te<B.length;Te++)B[Te]=""}}}}return yr(re)}catch{return C}}var lo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ci={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ka;function ei(){}p(ei,oo),ei.prototype.g=function(){return new XMLHttpRequest},Ka=new ei;function Or(x){return encodeURIComponent(String(x))}function K(x){var C=1;x=x.split(":");const R=[];for(;C>0&&x.length;)R.push(x.shift()),C--;return x.length&&R.push(x.join(":")),R}function pe(x,C,R,B){this.j=x,this.i=C,this.l=R,this.S=B||1,this.V=new ct(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ae}function Ae(){this.i=null,this.g="",this.h=!1}var ke={},Qt={};function Dn(x,C,R){x.M=1,x.A=Jo(ni(C)),x.u=R,x.R=!0,ti(x,null)}function ti(x,C){x.F=Date.now(),Ya(x),x.B=ni(x.A);var R=x.B,B=x.S;Array.isArray(B)||(B=[String(B)]),dd(R.i,"t",B),x.C=0,R=x.j.L,x.h=new Ae,x.g=kh(x.j,R?C:null,!x.u),x.P>0&&(x.O=new je(u(x.Y,x,x.g),x.P)),C=x.V,R=x.g,B=x.ba;var Z="readystatechange";Array.isArray(Z)||(Z&&(ft[0]=Z.toString()),Z=ft);for(let re=0;re<Z.length;re++){const Te=H(R,Z[re],B||C.handleEvent,!1,C.h||C);if(!Te)break;C.g[Te.key]=Te}C=x.J?Y(x.J):{},x.u?(x.v||(x.v="POST"),C["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,C)):(x.v="GET",x.g.ea(x.B,x.v,null,C)),Ti(),cc(x.i,x.v,x.B,x.l,x.S,x.u)}pe.prototype.ba=function(x){x=x.target;const C=this.O;C&&go(x)==3?C.j():this.Y(x)},pe.prototype.Y=function(x){try{if(x==this.g)e:{const at=go(this.g),Xt=this.g.ya(),Ct=this.g.ca();if(!(at<3)&&(at!=3||this.g&&(this.h.h||this.g.la()||Ph(this.g)))){this.K||at!=4||Xt==7||(Xt==8||Ct<=0?Ti(3):Ti(2)),hc(this);var C=this.g.ca();this.X=C;var R=fc(this);if(this.o=C==200,uc(this.i,this.v,this.B,this.l,this.S,at,C),this.o){if(this.U&&!this.L){t:{if(this.g){var B,Z=this.g;if((B=Z.g?Z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(B)){var re=B;break t}}re=null}if(x=re)br(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ot(this,x);else{this.o=!1,this.m=3,Bt(12),Yo(this),Ja(this);break e}}if(this.R){x=!0;let on;for(;!this.K&&this.C<R.length;)if(on=Sh(this,R),on==Qt){at==4&&(this.m=4,Bt(14),x=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(on==ke){this.m=4,Bt(15),br(this.i,this.l,R,"[Invalid Chunk]"),x=!1;break}else br(this.i,this.l,on,null),Ot(this,on);if(Eh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||R.length!=0||this.h.h||(this.m=1,Bt(16),x=!1),this.o=this.o&&x,!x)br(this.i,this.l,R,"[Invalid Chunked Response]"),Yo(this),Ja(this);else if(R.length>0&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.aa&&!Te.P&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),ol(Te),Te.P=!0,Bt(11))}}else br(this.i,this.l,R,null),Ot(this,R);at==4&&Yo(this),this.o&&!this.K&&(at==4?Ec(this.j,this):(this.o=!1,Ya(this)))}else hd(this.g),C==400&&R.indexOf("Unknown SID")>0?(this.m=3,Bt(12)):(this.m=0,Bt(13)),Yo(this),Ja(this)}}}catch{}finally{}};function fc(x){if(!Eh(x))return x.g.la();const C=Ph(x.g);if(C==="")return"";let R="";const B=C.length,Z=go(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return Yo(x),Ja(x),"";x.h.i=new s.TextDecoder}for(let re=0;re<B;re++)x.h.h=!0,R+=x.h.i.decode(C[re],{stream:!(Z&&re==B-1)});return C.length=0,x.h.g+=R,x.C=0,x.h.g}function Eh(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function Sh(x,C){var R=x.C,B=C.indexOf(`
`,R);return B==-1?Qt:(R=Number(C.substring(R,B)),isNaN(R)?ke:(B+=1,B+R>C.length?Qt:(C=C.slice(B,B+R),x.C=B+R,C)))}pe.prototype.cancel=function(){this.K=!0,Yo(this)};function Ya(x){x.T=Date.now()+x.H,nd(x,x.H)}function nd(x,C){if(x.D!=null)throw Error("WatchDog timer not null");x.D=Ai(u(x.aa,x),C)}function hc(x){x.D&&(s.clearTimeout(x.D),x.D=null)}pe.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(dc(this.i,this.B),this.M!=2&&(Ti(),Bt(17)),Yo(this),this.m=2,Ja(this)):nd(this,this.T-x)};function Ja(x){x.j.I==0||x.K||Ec(x.j,x)}function Yo(x){hc(x);var C=x.O;C&&typeof C.dispose=="function"&&C.dispose(),x.O=null,At(x.V),x.g&&(C=x.g,x.g=null,C.abort(),C.dispose())}function Ot(x,C){try{var R=x.j;if(R.I!=0&&(R.g==x||id(R.h,x))){if(!x.L&&id(R.h,x)&&R.I==3){try{var B=R.Ba.g.parse(C)}catch{B=null}if(Array.isArray(B)&&B.length==3){var Z=B;if(Z[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<x.F)_c(R),Ur(R);else break e;xo(R),Bt(18)}}else R.xa=Z[1],0<R.xa-R.K&&Z[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=Ai(u(R.Va,R),6e3));Qa(R.h)<=1&&R.ta&&(R.ta=void 0)}else Vr(R,11)}else if((x.L||R.g==x)&&_c(R),!P(C))for(Z=R.Ba.g.parse(C),C=0;C<Z.length;C++){let Ct=Z[C];const on=Ct[0];if(!(on<=R.K))if(R.K=on,Ct=Ct[1],R.I==2)if(Ct[0]=="c"){R.M=Ct[1],R.ba=Ct[2];const $r=Ct[3];$r!=null&&(R.ka=$r,R.j.info("VER="+R.ka));const ts=Ct[4];ts!=null&&(R.za=ts,R.j.info("SVER="+R.za));const bo=Ct[5];bo!=null&&typeof bo=="number"&&bo>0&&(B=1.5*bo,R.O=B,R.j.info("backChannelRequestTimeoutMs_="+B)),B=R;const wo=x.g;if(wo){const Ac=wo.g?wo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ac){var re=B.h;re.g||Ac.indexOf("spdy")==-1&&Ac.indexOf("quic")==-1&&Ac.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(mc(re,re.h),re.h=null))}if(B.G){const gd=wo.g?wo.g.getResponseHeader("X-HTTP-Session-Id"):null;gd&&(B.wa=gd,Et(B.J,B.G,gd))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-x.F,R.j.info("Handshake RTT: "+R.T+"ms")),B=R;var Te=x;if(B.na=md(B,B.L?B.ba:null,B.W),Te.L){Xa(B.h,Te);var at=Te,Xt=B.O;Xt&&(at.H=Xt),at.D&&(hc(at),Ya(at)),B.g=Te}else Kn(B);R.i.length>0&&es(R)}else Ct[0]!="stop"&&Ct[0]!="close"||Vr(R,7);else R.I==3&&(Ct[0]=="stop"||Ct[0]=="close"?Ct[0]=="stop"?Vr(R,7):bc(R):Ct[0]!="noop"&&R.l&&R.l.qa(Ct),R.A=0)}}Ti(4)}catch{}}var py=class{constructor(x,C){this.g=x,this.map=C}};function pc(x){this.l=x||10,s.PerformanceNavigationTiming?(x=s.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rd(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Qa(x){return x.h?1:x.g?x.g.size:0}function id(x,C){return x.h?x.h==C:x.g?x.g.has(C):!1}function mc(x,C){x.g?x.g.add(C):x.h=C}function Xa(x,C){x.h&&x.h==C?x.h=null:x.g&&x.g.has(C)&&x.g.delete(C)}pc.prototype.cancel=function(){if(this.i=Lr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Lr(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let C=x.i;for(const R of x.g.values())C=C.concat(R.G);return C}return w(x.i)}var Th=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jr(x,C){if(x){x=x.split("&");for(let R=0;R<x.length;R++){const B=x[R].indexOf("=");let Z,re=null;B>=0?(Z=x[R].substring(0,B),re=x[R].substring(B+1)):Z=x[R],C(Z,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function co(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let C;x instanceof co?(this.l=x.l,Za(this,x.j),this.o=x.o,this.g=x.g,uo(this,x.u),this.h=x.h,Ws(this,fd(x.i)),this.m=x.m):x&&(C=String(x).match(Th))?(this.l=!1,Za(this,C[1]||"",!0),this.o=el(C[2]||""),this.g=el(C[3]||"",!0),uo(this,C[4]),this.h=el(C[5]||"",!0),Ws(this,C[6]||"",!0),this.m=el(C[7]||"")):(this.l=!1,this.i=new gt(null,this.l))}co.prototype.toString=function(){const x=[];var C=this.j;C&&x.push(tl(C,sd,!0),":");var R=this.g;return(R||C=="file")&&(x.push("//"),(C=this.o)&&x.push(tl(C,sd,!0),"@"),x.push(Or(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&x.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&x.push("/"),x.push(tl(R,R.charAt(0)=="/"?nl:ad,!0))),(R=this.i.toString())&&x.push("?",R),(R=this.m)&&x.push("#",tl(R,ld)),x.join("")},co.prototype.resolve=function(x){const C=ni(this);let R=!!x.j;R?Za(C,x.j):R=!!x.o,R?C.o=x.o:R=!!x.g,R?C.g=x.g:R=x.u!=null;var B=x.h;if(R)uo(C,x.u);else if(R=!!x.h){if(B.charAt(0)!="/")if(this.g&&!this.h)B="/"+B;else{var Z=C.h.lastIndexOf("/");Z!=-1&&(B=C.h.slice(0,Z+1)+B)}if(Z=B,Z==".."||Z==".")B="";else if(Z.indexOf("./")!=-1||Z.indexOf("/.")!=-1){B=Z.lastIndexOf("/",0)==0,Z=Z.split("/");const re=[];for(let Te=0;Te<Z.length;){const at=Z[Te++];at=="."?B&&Te==Z.length&&re.push(""):at==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),B&&Te==Z.length&&re.push("")):(re.push(at),B=!0)}B=re.join("/")}else B=Z}return R?C.h=B:R=x.i.toString()!=="",R?Ws(C,fd(x.i)):R=!!x.m,R&&(C.m=x.m),C};function ni(x){return new co(x)}function Za(x,C,R){x.j=R?el(C,!0):C,x.j&&(x.j=x.j.replace(/:$/,""))}function uo(x,C){if(C){if(C=Number(C),isNaN(C)||C<0)throw Error("Bad port number "+C);x.u=C}else x.u=null}function Ws(x,C,R){C instanceof gt?(x.i=C,vc(x.i,x.l)):(R||(C=tl(C,my)),x.i=new gt(C,x.l))}function Et(x,C,R){x.i.set(C,R)}function Jo(x){return Et(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function el(x,C){return x?C?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function tl(x,C,R){return typeof x=="string"?(x=encodeURI(x).replace(C,od),R&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function od(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var sd=/[#\/\?@]/g,ad=/[#\?:]/g,nl=/[#\?]/g,my=/[#\?@]/g,ld=/#/g;function gt(x,C){this.h=this.g=null,this.i=x||null,this.j=!!C}function fo(x){x.g||(x.g=new Map,x.h=0,x.i&&jr(x.i,function(C,R){x.add(decodeURIComponent(C.replace(/\+/g," ")),R)}))}t=gt.prototype,t.add=function(x,C){fo(this),this.i=null,x=ho(this,x);let R=this.g.get(x);return R||this.g.set(x,R=[]),R.push(C),this.h+=1,this};function cd(x,C){fo(x),C=ho(x,C),x.g.has(C)&&(x.i=null,x.h-=x.g.get(C).length,x.g.delete(C))}function gc(x,C){return fo(x),C=ho(x,C),x.g.has(C)}t.forEach=function(x,C){fo(this),this.g.forEach(function(R,B){R.forEach(function(Z){x.call(C,Z,B,this)},this)},this)};function ud(x,C){fo(x);let R=[];if(typeof C=="string")gc(x,C)&&(R=R.concat(x.g.get(ho(x,C))));else for(x=Array.from(x.g.values()),C=0;C<x.length;C++)R=R.concat(x[C]);return R}t.set=function(x,C){return fo(this),this.i=null,x=ho(this,x),gc(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[C]),this.h+=1,this},t.get=function(x,C){return x?(x=ud(this,x),x.length>0?String(x[0]):C):C};function dd(x,C,R){cd(x,C),R.length>0&&(x.i=null,x.g.set(ho(x,C),w(R)),x.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],C=Array.from(this.g.keys());for(let B=0;B<C.length;B++){var R=C[B];const Z=Or(R);R=ud(this,R);for(let re=0;re<R.length;re++){let Te=Z;R[re]!==""&&(Te+="="+Or(R[re])),x.push(Te)}}return this.i=x.join("&")};function fd(x){const C=new gt;return C.i=x.i,x.g&&(C.g=new Map(x.g),C.h=x.h),C}function ho(x,C){return C=String(C),x.j&&(C=C.toLowerCase()),C}function vc(x,C){C&&!x.j&&(fo(x),x.i=null,x.g.forEach(function(R,B){const Z=B.toLowerCase();B!=Z&&(cd(this,B),dd(this,Z,R))},x)),x.j=C}function po(x,C){const R=new Zr;if(s.Image){const B=new Image;B.onload=f(On,R,"TestLoadImage: loaded",!0,C,B),B.onerror=f(On,R,"TestLoadImage: error",!1,C,B),B.onabort=f(On,R,"TestLoadImage: abort",!1,C,B),B.ontimeout=f(On,R,"TestLoadImage: timeout",!1,C,B),s.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=x}else C(!1)}function mo(x,C){const R=new Zr,B=new AbortController,Z=setTimeout(()=>{B.abort(),On(R,"TestPingServer: timeout",!1,C)},1e4);fetch(x,{signal:B.signal}).then(re=>{clearTimeout(Z),re.ok?On(R,"TestPingServer: ok",!0,C):On(R,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(Z),On(R,"TestPingServer: error",!1,C)})}function On(x,C,R,B,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),B(R)}catch{}}function rl(){this.g=new Ho}function Qo(x){this.i=x.Sb||null,this.h=x.ab||!1}p(Qo,oo),Qo.prototype.g=function(){return new Fr(this.i,this.h)};function Fr(x,C){be.call(this),this.H=x,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Fr,be),t=Fr.prototype,t.open=function(x,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=C,this.readyState=1,Ii(this)},t.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const C={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(C.body=x),(this.H||s).fetch(new Request(this.D,C)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},t.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,Ii(this)),this.g&&(this.readyState=3,Ii(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ah(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ah(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}t.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var C=x.value?x.value:new Uint8Array(0);(C=this.B.decode(C,{stream:!x.done}))&&(this.response=this.responseText+=C)}x.done?Ks(this):Ii(this),this.readyState==3&&Ah(this)}},t.Oa=function(x){this.g&&(this.response=this.responseText=x,Ks(this))},t.Na=function(x){this.g&&(this.response=x,Ks(this))},t.ga=function(){this.g&&Ks(this)};function Ks(x){x.readyState=4,x.l=null,x.j=null,x.B=null,Ii(x)}t.setRequestHeader=function(x,C){this.A.append(x,C)},t.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],C=this.h.entries();for(var R=C.next();!R.done;)R=R.value,x.push(R[0]+": "+R[1]),R=C.next();return x.join(`\r
`)};function Ii(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Fr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function Ch(x){let C="";return ne(x,function(R,B){C+=B,C+=":",C+=R,C+=`\r
`}),C}function yc(x,C,R){e:{for(B in R){var B=!1;break e}B=!0}B||(R=Ch(R),typeof x=="string"?R!=null&&Or(R):Et(x,C,R))}function Nt(x){be.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Nt,be);var Ih=/^https?$/i,gy=["POST","PUT"];t=Nt.prototype,t.Fa=function(x){this.H=x},t.ea=function(x,C,R,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);C=C?C.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ka.g(),this.g.onreadystatechange=v(u(this.Ca,this));try{this.B=!0,this.g.open(C,String(x),!0),this.B=!1}catch(re){Ys(this,re);return}if(x=R||"",R=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var Z in B)R.set(Z,B[Z]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const re of B.keys())R.set(re,B.get(re));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(R.keys()).find(re=>re.toLowerCase()=="content-type"),Z=s.FormData&&x instanceof s.FormData,!(Array.prototype.indexOf.call(gy,C,void 0)>=0)||B||Z||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Te]of R)this.g.setRequestHeader(re,Te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(re){Ys(this,re)}};function Ys(x,C){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=C,x.o=5,Js(x),Zo(x)}function Js(x){x.A||(x.A=!0,De(x,"complete"),De(x,"error"))}t.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,De(this,"complete"),De(this,"abort"),Zo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zo(this,!0)),Nt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Xo(this):this.Xa())},t.Xa=function(){Xo(this)};function Xo(x){if(x.h&&typeof o<"u"){if(x.v&&go(x)==4)setTimeout(x.Ca.bind(x),0);else if(De(x,"readystatechange"),go(x)==4){x.h=!1;try{const re=x.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var R;if(!(R=C)){var B;if(B=re===0){let Te=String(x.D).match(Th)[1]||null;!Te&&s.self&&s.self.location&&(Te=s.self.location.protocol.slice(0,-1)),B=!Ih.test(Te?Te.toLowerCase():"")}R=B}if(R)De(x,"complete"),De(x,"success");else{x.o=6;try{var Z=go(x)>2?x.g.statusText:""}catch{Z=""}x.l=Z+" ["+x.ca()+"]",Js(x)}}finally{Zo(x)}}}}function Zo(x,C){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const R=x.g;x.g=null,C||De(x,"ready");try{R.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function go(x){return x.g?x.g.readyState:0}t.ca=function(){try{return go(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(x){if(this.g){var C=this.g.responseText;return x&&C.indexOf(x)==0&&(C=C.substring(x.length)),io(C)}};function Ph(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function hd(x){const C={};x=(x.g&&go(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<x.length;B++){if(P(x[B]))continue;var R=K(x[B]);const Z=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const re=C[Z]||[];C[Z]=re,re.push(R)}de(C,function(B){return B.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vo(x,C,R){return R&&R.internalChannelParams&&R.internalChannelParams[x]||C}function xc(x){this.za=0,this.i=[],this.j=new Zr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vo("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vo("baseRetryDelayMs",5e3,x),this.Za=vo("retryDelaySeedMs",1e4,x),this.Ta=vo("forwardChannelMaxRetries",2,x),this.va=vo("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new pc(x&&x.concurrentRequestLimit),this.Ba=new rl,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=xc.prototype,t.ka=8,t.I=1,t.connect=function(x,C,R,B){Bt(0),this.W=x,this.H=C||{},R&&B!==void 0&&(this.H.OSID=R,this.H.OAID=B),this.F=this.X,this.J=md(this,null,this.W),es(this)};function bc(x){if(wc(x),x.I==3){var C=x.V++,R=ni(x.J);if(Et(R,"SID",x.M),Et(R,"RID",C),Et(R,"TYPE","terminate"),yo(x,R),C=new pe(x,x.j,C),C.M=2,C.A=Jo(ni(R)),R=!1,s.navigator&&s.navigator.sendBeacon)try{R=s.navigator.sendBeacon(C.A.toString(),"")}catch{}!R&&s.Image&&(new Image().src=C.A,R=!0),R||(C.g=kh(C.j,null),C.g.ea(C.A)),C.F=Date.now(),Ya(C)}sl(x)}function Ur(x){x.g&&(ol(x),x.g.cancel(),x.g=null)}function wc(x){Ur(x),x.v&&(s.clearTimeout(x.v),x.v=null),_c(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&s.clearTimeout(x.m),x.m=null)}function es(x){if(!rd(x.h)&&!x.m){x.m=!0;var C=x.Ea;V||D(),$||(V(),$=!0),k.add(C,x),x.D=0}}function Nh(x,C){return Qa(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=C.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=Ai(u(x.Ea,x,C),Sc(x,x.D)),x.D++,!0)}t.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const Z=new pe(this,this.j,x);let re=this.o;if(this.U&&(re?(re=Y(re),fe(re,this.U)):re=this.U),this.u!==null||this.R||(Z.J=re,re=null),this.S)e:{for(var C=0,R=0;R<this.i.length;R++){t:{var B=this.i[R];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(C+=B,C>4096){C=R;break e}if(C===4096||R===this.i.length-1){C=R+1;break e}}C=1e3}else C=1e3;C=pd(this,Z,C),R=ni(this.J),Et(R,"RID",x),Et(R,"CVER",22),this.G&&Et(R,"X-HTTP-Session-Id",this.G),yo(this,R),re&&(this.R?C="headers="+Or(Ch(re))+"&"+C:this.u&&yc(R,this.u,re)),mc(this.h,Z),this.Ra&&Et(R,"TYPE","init"),this.S?(Et(R,"$req",C),Et(R,"SID","null"),Z.U=!0,Dn(Z,R,null)):Dn(Z,R,C),this.I=2}}else this.I==3&&(x?il(this,x):this.i.length==0||rd(this.h)||il(this))};function il(x,C){var R;C?R=C.l:R=x.V++;const B=ni(x.J);Et(B,"SID",x.M),Et(B,"RID",R),Et(B,"AID",x.K),yo(x,B),x.u&&x.o&&yc(B,x.u,x.o),R=new pe(x,x.j,R,x.D+1),x.u===null&&(R.J=x.o),C&&(x.i=C.G.concat(x.i)),C=pd(x,R,1e3),R.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),mc(x.h,R),Dn(R,B,C)}function yo(x,C){x.H&&ne(x.H,function(R,B){Et(C,B,R)}),x.l&&ne({},function(R,B){Et(C,B,R)})}function pd(x,C,R){R=Math.min(x.i.length,R);const B=x.l?u(x.l.Ka,x.l,x):null;e:{var Z=x.i;let at=-1;for(;;){const Xt=["count="+R];at==-1?R>0?(at=Z[0].g,Xt.push("ofs="+at)):at=0:Xt.push("ofs="+at);let Ct=!0;for(let on=0;on<R;on++){var re=Z[on].g;const $r=Z[on].map;if(re-=at,re<0)at=Math.max(0,Z[on].g-100),Ct=!1;else try{re="req"+re+"_"||"";try{var Te=$r instanceof Map?$r:Object.entries($r);for(const[ts,bo]of Te){let wo=bo;a(bo)&&(wo=yr(bo)),Xt.push(re+ts+"="+encodeURIComponent(wo))}}catch(ts){throw Xt.push(re+"type="+encodeURIComponent("_badmap")),ts}}catch{B&&B($r)}}if(Ct){Te=Xt.join("&");break e}}Te=void 0}return x=x.i.splice(0,R),C.G=x,Te}function Kn(x){if(!x.g&&!x.v){x.Y=1;var C=x.Da;V||D(),$||(V(),$=!0),k.add(C,x),x.A=0}}function xo(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=Ai(u(x.Da,x),Sc(x,x.A)),x.A++,!0)}t.Da=function(){if(this.v=null,Qs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=Ai(u(this.Wa,this),x)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Bt(10),Ur(this),Qs(this))};function ol(x){x.B!=null&&(s.clearTimeout(x.B),x.B=null)}function Qs(x){x.g=new pe(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var C=ni(x.na);Et(C,"RID","rpc"),Et(C,"SID",x.M),Et(C,"AID",x.K),Et(C,"CI",x.F?"0":"1"),!x.F&&x.ia&&Et(C,"TO",x.ia),Et(C,"TYPE","xmlhttp"),yo(x,C),x.u&&x.o&&yc(C,x.u,x.o),x.O&&(x.g.H=x.O);var R=x.g;x=x.ba,R.M=1,R.A=Jo(ni(C)),R.u=null,R.R=!0,ti(R,x)}t.Va=function(){this.C!=null&&(this.C=null,Ur(this),xo(this),Bt(19))};function _c(x){x.C!=null&&(s.clearTimeout(x.C),x.C=null)}function Ec(x,C){var R=null;if(x.g==C){_c(x),ol(x),x.g=null;var B=2}else if(id(x.h,C))R=C.G,Xa(x.h,C),B=1;else return;if(x.I!=0){if(C.o)if(B==1){R=C.u?C.u.length:0,C=Date.now()-C.F;var Z=x.D;B=ao(),De(B,new Hs(B,R)),es(x)}else Kn(x);else if(Z=C.m,Z==3||Z==0&&C.X>0||!(B==1&&Nh(x,C)||B==2&&xo(x)))switch(R&&R.length>0&&(C=x.h,C.i=C.i.concat(R)),Z){case 1:Vr(x,5);break;case 4:Vr(x,10);break;case 3:Vr(x,6);break;default:Vr(x,2)}}}function Sc(x,C){let R=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(R*=2),R*C}function Vr(x,C){if(x.j.info("Error code "+C),C==2){var R=u(x.bb,x),B=x.Ua;const Z=!B;B=new co(B||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Za(B,"https"),Jo(B),Z?po(B.toString(),R):mo(B.toString(),R)}else Bt(2);x.I=0,x.l&&x.l.pa(C),sl(x),wc(x)}t.bb=function(x){x?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function sl(x){if(x.I=0,x.ja=[],x.l){const C=Lr(x.h);(C.length!=0||x.i.length!=0)&&(E(x.ja,C),E(x.ja,x.i),x.h.i.length=0,w(x.i),x.i.length=0),x.l.oa()}}function md(x,C,R){var B=R instanceof co?ni(R):new co(R);if(B.g!="")C&&(B.g=C+"."+B.g),uo(B,B.u);else{var Z=s.location;B=Z.protocol,C=C?C+"."+Z.hostname:Z.hostname,Z=+Z.port;const re=new co(null);B&&Za(re,B),C&&(re.g=C),Z&&uo(re,Z),R&&(re.h=R),B=re}return R=x.G,C=x.wa,R&&C&&Et(B,R,C),Et(B,"VER",x.ka),yo(x,B),B}function kh(x,C,R){if(C&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return C=x.Aa&&!x.ma?new Nt(new Qo({ab:R})):new Nt(x.ma),C.Fa(x.L),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rh(){}t=Rh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Tc(){}Tc.prototype.g=function(x,C){return new Ln(x,C)};function Ln(x,C){be.call(this),this.g=new xc(C),this.l=x,this.h=C&&C.messageUrlParams||null,x=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(x?x["X-WebChannel-Content-Type"]=C.messageContentType:x={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.sa&&(x?x["X-WebChannel-Client-Profile"]=C.sa:x={"X-WebChannel-Client-Profile":C.sa}),this.g.U=x,(x=C&&C.Qb)&&!P(x)&&(this.g.u=x),this.A=C&&C.supportsCrossDomainXhr||!1,this.v=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!P(C)&&(this.g.G=C,x=this.h,x!==null&&C in x&&(x=this.h,C in x&&delete x[C])),this.j=new Xs(this)}p(Ln,be),Ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){bc(this.g)},Ln.prototype.o=function(x){var C=this.g;if(typeof x=="string"){var R={};R.__data__=x,x=R}else this.v&&(R={},R.__data__=yr(x),x=R);C.i.push(new py(C.Ya++,x)),C.I==3&&es(C)},Ln.prototype.N=function(){this.g.l=null,delete this.j,bc(this.g),delete this.g,Ln.Z.N.call(this)};function Mh(x){Mn.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var C=x.__sm__;if(C){e:{for(const R in C){x=R;break e}x=void 0}(this.i=x)&&(x=this.i,C=C!==null&&x in C?C[x]:void 0),this.data=C}else this.data=x}p(Mh,Mn);function Dh(){qs.call(this),this.status=1}p(Dh,qs);function Xs(x){this.g=x}p(Xs,Rh),Xs.prototype.ra=function(){De(this.g,"a")},Xs.prototype.qa=function(x){De(this.g,new Mh(x))},Xs.prototype.pa=function(x){De(this.g,new Dh)},Xs.prototype.oa=function(){De(this.g,"b")},Tc.prototype.createWebChannel=Tc.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,GO=function(){return new Tc},qO=function(){return ao()},zO=xr,uw={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},lo.NO_ERROR=0,lo.TIMEOUT=8,lo.HTTP_ERROR=6,cm=lo,Ci.COMPLETE="complete",BO=Ci,lc.EventType=so,so.OPEN="a",so.CLOSE="b",so.ERROR="c",so.MESSAGE="d",be.prototype.listen=be.prototype.J,rf=lc,Nt.prototype.listenOnce=Nt.prototype.K,Nt.prototype.getLastError=Nt.prototype.Ha,Nt.prototype.getLastErrorCode=Nt.prototype.ya,Nt.prototype.getStatus=Nt.prototype.ca,Nt.prototype.getResponseJson=Nt.prototype.La,Nt.prototype.getResponseText=Nt.prototype.la,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Fa,$O=Nt}).apply(typeof Np<"u"?Np:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tr.UNAUTHENTICATED=new tr(null),tr.GOOGLE_CREDENTIALS=new tr("google-credentials-uid"),tr.FIRST_PARTY=new tr("first-party-uid"),tr.MOCK_USER=new tr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu="12.8.0";function f8(t){Uu=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=new Gg("@firebase/firestore");function Qc(){return Ul.logLevel}function Me(t,...e){if(Ul.logLevel<=ht.DEBUG){const n=e.map(uE);Ul.debug(`Firestore (${Uu}): ${t}`,...n)}}function Ts(t,...e){if(Ul.logLevel<=ht.ERROR){const n=e.map(uE);Ul.error(`Firestore (${Uu}): ${t}`,...n)}}function Eu(t,...e){if(Ul.logLevel<=ht.WARN){const n=e.map(uE);Ul.warn(`Firestore (${Uu}): ${t}`,...n)}}function uE(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,HO(t,r,n)}function HO(t,e,n){let r=`FIRESTORE (${Uu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ts(r),new Error(r)}function Tt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||HO(e,i,r)}function lt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends to{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(tr.UNAUTHENTICATED)))}shutdown(){}}class p8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class m8{constructor(e){this.t=e,this.currentUser=tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Tt(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new bs,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=o;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},a=c=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new bs)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt(typeof r.accessToken=="string",31837,{l:r}),new WO(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new tr(e)}}class g8{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=tr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class v8{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new g8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(tr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y8{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Tt(this.o===void 0,3512);const r=o=>{o.error!=null&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,Me("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new nI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Tt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new nI(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=x8(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function pt(t,e){return t<e?-1:t>e?1:0}function dw(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return nx(i)===nx(o)?pt(i,o):nx(i)?1:-1}return pt(t.length,e.length)}const b8=55296,w8=57343;function nx(t){const e=t.charCodeAt(0);return e>=b8&&e<=w8}function Su(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="__name__";class Io{constructor(e,n,r){n===void 0?n=0:n>e.length&&nt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&nt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Io.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Io?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Io.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return pt(e.length,n.length)}static compareSegments(e,n){const r=Io.isNumericId(e),i=Io.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Io.extractNumericId(e).compare(Io.extractNumericId(n)):dw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ta.fromString(e.substring(4,e.length-2))}}class Dt extends Io{construct(e,n,r){return new Dt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Dt(n)}static emptyPath(){return new Dt([])}}const _8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends Io{construct(e,n,r){return new Bn(e,n,r)}static isValidIdentifier(e){return _8.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rI}static keyField(){return new Bn([rI])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Pe(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Pe(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Pe(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Pe(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(n)}static emptyPath(){return new Bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(Dt.fromString(e))}static fromName(e){return new Ke(Dt.fromString(e).popFirst(5))}static empty(){return new Ke(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new Dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t,e,n){if(!n)throw new Pe(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function E8(t,e,n,r){if(e===!0&&r===!0)throw new Pe(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iI(t){if(!Ke.isDocumentKey(t))throw new Pe(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oI(t){if(Ke.isDocumentKey(t))throw new Pe(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function YO(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Yg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":nt(12329,{type:typeof t})}function Qi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Pe(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yg(t);throw new Pe(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t,e){const n={typeString:t};return e&&(n.value=e),n}function Xf(t,e){if(!YO(t))throw new Pe(ue.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Pe(ue.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=-62135596800,aI=1e6;class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*aI);return new Ut(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Pe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Pe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<sI)throw new Pe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aI}_compareTo(e){return this.seconds===e.seconds?pt(this.nanoseconds,e.nanoseconds):pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xf(e,Ut._jsonSchema))return new Ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-sI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ut._jsonSchemaVersion="firestore/timestamp/1.0",Ut._jsonSchema={type:un("string",Ut._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{static fromTimestamp(e){return new st(e)}static min(){return new st(new Ut(0,0))}static max(){return new st(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f=-1;function S8(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=st.fromTimestamp(r===1e9?new Ut(n+1,0):new Ut(n,r));return new Na(i,Ke.empty(),e)}function T8(t){return new Na(t.readTime,t.key,_f)}class Na{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Na(st.min(),Ke.empty(),_f)}static max(){return new Na(st.max(),Ke.empty(),_f)}}function A8(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ke.comparator(t.documentKey,e.documentKey),n!==0?n:pt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class I8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==C8)throw t;Me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new he(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof he?n:he.resolve(n)}catch(n){return he.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):he.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):he.reject(n)}static resolve(e){return new he(((n,r)=>{n(e)}))}static reject(e){return new he(((n,r)=>{r(e)}))}static waitFor(e){return new he(((n,r)=>{let i=0,o=0,s=!1;e.forEach((a=>{++i,a.next((()=>{++o,s&&o===i&&n()}),(c=>r(c)))})),s=!0,o===i&&n()}))}static or(e){let n=he.resolve(!1);for(const r of e)n=n.next((i=>i?he.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,o)=>{r.push(n.call(this,i,o))})),this.waitFor(r)}static mapArray(e,n){return new he(((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const u=c;n(e[u]).next((f=>{s[u]=f,++a,a===o&&r(s)}),(f=>i(f)))}}))}static doWhile(e,n){return new he(((r,i)=>{const o=()=>{e()===!0?n().next((()=>{o()}),i):r()};o()}))}}function P8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $u(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Jg.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=-1;function Qg(t){return t==null}function Rm(t){return t===0&&1/t==-1/0}function N8(t){return typeof t=="number"&&Number.isInteger(t)&&!Rm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO="";function k8(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lI(e)),e=R8(t.get(n),e);return lI(e)}function R8(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case JO:n+="";break;default:n+=o}}return n}function lI(t){return t+JO+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $a(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function QO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n){this.comparator=e,this.root=n||$n.EMPTY}insert(e,n){return new Kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kp(this.root,e,this.comparator,!1)}getReverseIterator(){return new kp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kp(this.root,e,this.comparator,!0)}}class kp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??$n.RED,this.left=i??$n.EMPTY,this.right=o??$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new $n(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return $n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw nt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw nt(27949);return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw nt(57766)}get value(){throw nt(16141)}get color(){throw nt(16727)}get left(){throw nt(29726)}get right(){throw nt(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new $n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uI(this.data.getIterator())}getIteratorFrom(e){return new uI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new vn(this.comparator);return n.data=e,n}}class uI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new Wr([])}unionWith(e){let n=new vn(Bn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Su(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new XO("Invalid base64 string: "+o):o}})(e);return new Gn(n)}static fromUint8Array(e){const n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new Gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gn.EMPTY_BYTE_STRING=new Gn("");const M8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ka(t){if(Tt(!!t,39018),typeof t=="string"){let e=0;const n=M8.exec(t);if(Tt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tn(t.seconds),nanos:tn(t.nanos)}}function tn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ra(t){return typeof t=="string"?Gn.fromBase64String(t):Gn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO="server_timestamp",eL="__type__",tL="__previous_value__",nL="__local_write_time__";function hE(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[eL])==null?void 0:r.stringValue)===ZO}function Xg(t){const e=t.mapValue.fields[tL];return hE(e)?Xg(e):e}function Ef(t){const e=ka(t.mapValue.fields[nL].timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e,n,r,i,o,s,a,c,u,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f,this.apiKey=p}}const Mm="(default)";class Sf{constructor(e,n){this.projectId=e,this.database=n||Mm}static empty(){return new Sf("","")}get isDefaultDatabase(){return this.database===Mm}isEqual(e){return e instanceof Sf&&e.projectId===this.projectId&&e.database===this.database}}function O8(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Pe(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sf(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL="__type__",L8="__max__",Rp={mapValue:{}},iL="__vector__",Dm="value";function Ma(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hE(t)?4:F8(t)?9007199254740991:j8(t)?10:11:nt(28295,{value:t})}function Uo(t,e){if(t===e)return!0;const n=Ma(t);if(n!==Ma(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ef(t).isEqual(Ef(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=ka(i.timestampValue),a=ka(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Ra(i.bytesValue).isEqual(Ra(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return tn(i.geoPointValue.latitude)===tn(o.geoPointValue.latitude)&&tn(i.geoPointValue.longitude)===tn(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return tn(i.integerValue)===tn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=tn(i.doubleValue),a=tn(o.doubleValue);return s===a?Rm(s)===Rm(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Su(t.arrayValue.values||[],e.arrayValue.values||[],Uo);case 10:case 11:return(function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(cI(s)!==cI(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Uo(s[c],a[c])))return!1;return!0})(t,e);default:return nt(52216,{left:t})}}function Tf(t,e){return(t.values||[]).find((n=>Uo(n,e)))!==void 0}function Tu(t,e){if(t===e)return 0;const n=Ma(t),r=Ma(e);if(n!==r)return pt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pt(t.booleanValue,e.booleanValue);case 2:return(function(o,s){const a=tn(o.integerValue||o.doubleValue),c=tn(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return dI(t.timestampValue,e.timestampValue);case 4:return dI(Ef(t),Ef(e));case 5:return dw(t.stringValue,e.stringValue);case 6:return(function(o,s){const a=Ra(o),c=Ra(s);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){const a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){const f=pt(a[u],c[u]);if(f!==0)return f}return pt(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){const a=pt(tn(o.latitude),tn(s.latitude));return a!==0?a:pt(tn(o.longitude),tn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return fI(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var v,w,E,S;const a=o.fields||{},c=s.fields||{},u=(v=a[Dm])==null?void 0:v.arrayValue,f=(w=c[Dm])==null?void 0:w.arrayValue,p=pt(((E=u==null?void 0:u.values)==null?void 0:E.length)||0,((S=f==null?void 0:f.values)==null?void 0:S.length)||0);return p!==0?p:fI(u,f)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Rp.mapValue&&s===Rp.mapValue)return 0;if(o===Rp.mapValue)return 1;if(s===Rp.mapValue)return-1;const a=o.fields||{},c=Object.keys(a),u=s.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const v=dw(c[p],f[p]);if(v!==0)return v;const w=Tu(a[c[p]],u[f[p]]);if(w!==0)return w}return pt(c.length,f.length)})(t.mapValue,e.mapValue);default:throw nt(23264,{he:n})}}function dI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pt(t,e);const n=ka(t),r=ka(e),i=pt(n.seconds,r.seconds);return i!==0?i:pt(n.nanos,r.nanos)}function fI(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Tu(n[i],r[i]);if(o)return o}return pt(n.length,r.length)}function Au(t){return fw(t)}function fw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=ka(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ra(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ke.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=fw(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${fw(n.fields[s])}`;return i+"}"})(t.mapValue):nt(61005,{value:t})}function um(t){switch(Ma(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xg(t);return e?16+um(e):16;case 5:return 2*t.stringValue.length;case 6:return Ra(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+um(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return $a(r.fields,((o,s)=>{i+=o.length+um(s)})),i})(t.mapValue);default:throw nt(13486,{value:t})}}function hI(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hw(t){return!!t&&"integerValue"in t}function pE(t){return!!t&&"arrayValue"in t}function pI(t){return!!t&&"nullValue"in t}function mI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dm(t){return!!t&&"mapValue"in t}function j8(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[rL])==null?void 0:r.stringValue)===iL}function pf(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $a(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=pf(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pf(t.arrayValue.values[n]);return e}return{...t}}function F8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===L8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.value=e}static empty(){return new Pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pf(n)}setAll(e){let n=Bn.emptyPath(),r={},i=[];e.forEach(((s,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=pf(s):i.push(a.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());dm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Uo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];dm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){$a(n,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new Pr(pf(this.value))}}function oL(t){const e=[];return $a(t.fields,((n,r)=>{const i=new Bn([n]);if(dm(r)){const o=oL(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)})),new Wr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new nr(e,0,st.min(),st.min(),st.min(),Pr.empty(),0)}static newFoundDocument(e,n,r,i){return new nr(e,1,n,st.min(),r,i,0)}static newNoDocument(e,n){return new nr(e,2,n,st.min(),st.min(),Pr.empty(),0)}static newUnknownDocument(e,n){return new nr(e,3,n,st.min(),st.min(),Pr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(st.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=st.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.position=e,this.inclusive=n}}function gI(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Ke.comparator(Ke.fromName(s.referenceValue),n.key):r=Tu(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function vI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Uo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n="asc"){this.field=e,this.dir=n}}function U8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{}class cn extends sL{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $8(e,n,r):n==="array-contains"?new q8(e,r):n==="in"?new G8(e,r):n==="not-in"?new H8(e,r):n==="array-contains-any"?new W8(e,r):new cn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new B8(e,r):new z8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Tu(n,this.value)):n!==null&&Ma(this.value)===Ma(n)&&this.matchesComparison(Tu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xi extends sL{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xi(e,n)}matches(e){return aL(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function aL(t){return t.op==="and"}function lL(t){return V8(t)&&aL(t)}function V8(t){for(const e of t.filters)if(e instanceof Xi)return!1;return!0}function pw(t){if(t instanceof cn)return t.field.canonicalString()+t.op.toString()+Au(t.value);if(lL(t))return t.filters.map((e=>pw(e))).join(",");{const e=t.filters.map((n=>pw(n))).join(",");return`${t.op}(${e})`}}function cL(t,e){return t instanceof cn?(function(r,i){return i instanceof cn&&r.op===i.op&&r.field.isEqual(i.field)&&Uo(r.value,i.value)})(t,e):t instanceof Xi?(function(r,i){return i instanceof Xi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,s,a)=>o&&cL(s,i.filters[a])),!0):!1})(t,e):void nt(19439)}function uL(t){return t instanceof cn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Au(n.value)}`})(t):t instanceof Xi?(function(n){return n.op.toString()+" {"+n.getFilters().map(uL).join(" ,")+"}"})(t):"Filter"}class $8 extends cn{constructor(e,n,r){super(e,n,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const n=Ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class B8 extends cn{constructor(e,n){super(e,"in",n),this.keys=dL("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class z8 extends cn{constructor(e,n){super(e,"not-in",n),this.keys=dL("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function dL(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Ke.fromName(r.referenceValue)))}class q8 extends cn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pE(n)&&Tf(n.arrayValue,this.value)}}class G8 extends cn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Tf(this.value.arrayValue,n)}}class H8 extends cn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Tf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Tf(this.value.arrayValue,n)}}class W8 extends cn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pE(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Tf(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}}function yI(t,e=null,n=[],r=[],i=null,o=null,s=null){return new K8(t,e,n,r,i,o,s)}function mE(t){const e=lt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>pw(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Qg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Au(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Au(r))).join(",")),e.Te=n}return e.Te}function gE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!U8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cL(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vI(t.startAt,e.startAt)&&vI(t.endAt,e.endAt)}function mw(t){return Ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Y8(t,e,n,r,i,o,s,a){return new Bu(t,e,n,r,i,o,s,a)}function vE(t){return new Bu(t)}function xI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function J8(t){return Ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function fL(t){return t.collectionGroup!==null}function mf(t){const e=lt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new vn(Bn.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Af(o,r))})),n.has(Bn.keyField().canonicalString())||e.Ie.push(new Af(Bn.keyField(),r))}return e.Ie}function Do(t){const e=lt(t);return e.Ee||(e.Ee=Q8(e,mf(t))),e.Ee}function Q8(t,e){if(t.limitType==="F")return yI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Af(i.field,o)}));const n=t.endAt?new Om(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Om(t.startAt.position,t.startAt.inclusive):null;return yI(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gw(t,e){const n=t.filters.concat([e]);return new Bu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function X8(t,e){const n=t.explicitOrderBy.concat([e]);return new Bu(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function vw(t,e,n){return new Bu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zg(t,e){return gE(Do(t),Do(e))&&t.limitType===e.limitType}function hL(t){return`${mE(Do(t))}|lt:${t.limitType}`}function Xc(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>uL(i))).join(", ")}]`),Qg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Au(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Au(i))).join(",")),`Target(${r})`})(Do(t))}; limitType=${t.limitType})`}function ev(t,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ke.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(const o of mf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){const u=gI(s,a,c);return s.inclusive?u<=0:u<0})(r.startAt,mf(r),i)||r.endAt&&!(function(s,a,c){const u=gI(s,a,c);return s.inclusive?u>=0:u>0})(r.endAt,mf(r),i))})(t,e)}function Z8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pL(t){return(e,n)=>{let r=!1;for(const i of mf(t)){const o=eq(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function eq(t,e,n){const r=t.field.isKeyField()?Ke.comparator(e.key,n.key):(function(o,s,a){const c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Tu(c,u):nt(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return nt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$a(this.inner,((n,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return QO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq=new Kt(Ke.comparator);function As(){return tq}const mL=new Kt(Ke.comparator);function of(...t){let e=mL;for(const n of t)e=e.insert(n.key,n);return e}function gL(t){let e=mL;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Al(){return gf()}function vL(){return gf()}function gf(){return new tc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const nq=new Kt(Ke.comparator),rq=new vn(Ke.comparator);function mt(...t){let e=rq;for(const n of t)e=e.add(n);return e}const iq=new vn(pt);function oq(){return iq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rm(e)?"-0":e}}function yL(t){return{integerValue:""+t}}function xL(t,e){return N8(e)?yL(e):yE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this._=void 0}}function sq(t,e,n){return t instanceof Lm?(function(i,o){const s={fields:{[eL]:{stringValue:ZO},[nL]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&hE(o)&&(o=Xg(o)),o&&(s.fields[tL]=o),{mapValue:s}})(n,e):t instanceof Cf?wL(t,e):t instanceof If?_L(t,e):(function(i,o){const s=bL(i,o),a=bI(s)+bI(i.Ae);return hw(s)&&hw(i.Ae)?yL(a):yE(i.serializer,a)})(t,e)}function aq(t,e,n){return t instanceof Cf?wL(t,e):t instanceof If?_L(t,e):n}function bL(t,e){return t instanceof Pf?(function(r){return hw(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Lm extends tv{}class Cf extends tv{constructor(e){super(),this.elements=e}}function wL(t,e){const n=EL(e);for(const r of t.elements)n.some((i=>Uo(i,r)))||n.push(r);return{arrayValue:{values:n}}}class If extends tv{constructor(e){super(),this.elements=e}}function _L(t,e){let n=EL(e);for(const r of t.elements)n=n.filter((i=>!Uo(i,r)));return{arrayValue:{values:n}}}class Pf extends tv{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bI(t){return tn(t.integerValue||t.doubleValue)}function EL(t){return pE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{constructor(e,n){this.field=e,this.transform=n}}function cq(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Cf&&i instanceof Cf||r instanceof If&&i instanceof If?Su(r.elements,i.elements,Uo):r instanceof Pf&&i instanceof Pf?Uo(r.Ae,i.Ae):r instanceof Lm&&i instanceof Lm})(t.transform,e.transform)}class uq{constructor(e,n){this.version=e,this.transformResults=n}}class yi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yi}static exists(e){return new yi(void 0,e)}static updateTime(e){return new yi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nv{}function SL(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xE(t.key,yi.none()):new Zf(t.key,t.data,yi.none());{const n=t.data,r=Pr.empty();let i=new vn(Bn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ba(t.key,r,new Wr(i.toArray()),yi.none())}}function dq(t,e,n){t instanceof Zf?(function(i,o,s){const a=i.value.clone(),c=_I(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Ba?(function(i,o,s){if(!fm(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=_I(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(TL(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function vf(t,e,n,r){return t instanceof Zf?(function(o,s,a,c){if(!fm(o.precondition,s))return a;const u=o.value.clone(),f=EI(o.fieldTransforms,c,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ba?(function(o,s,a,c){if(!fm(o.precondition,s))return a;const u=EI(o.fieldTransforms,c,s),f=s.data;return f.setAll(TL(o)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(o,s,a){return fm(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function fq(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=bL(r.transform,i||null);o!=null&&(n===null&&(n=Pr.empty()),n.set(r.field,o))}return n||null}function wI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Su(r,i,((o,s)=>cq(o,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zf extends nv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ba extends nv{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function TL(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function _I(t,e,n){const r=new Map;Tt(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,aq(s,a,n[i]))}return r}function EI(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,sq(o,s,e))}return r}class xE extends nv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hq extends nv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&dq(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vL();return this.mutations.forEach((i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const c=SL(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(st.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),mt())}isEqual(e){return this.batchId===e.batchId&&Su(this.mutations,e.mutations,((n,r)=>wI(n,r)))&&Su(this.baseMutations,e.baseMutations,((n,r)=>wI(n,r)))}}class bE{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Tt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return nq})();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new bE(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gq{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an,yt;function vq(t){switch(t){case ue.OK:return nt(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return nt(15467,{code:t})}}function AL(t){if(t===void 0)return Ts("GRPC error has no .code"),ue.UNKNOWN;switch(t){case an.OK:return ue.OK;case an.CANCELLED:return ue.CANCELLED;case an.UNKNOWN:return ue.UNKNOWN;case an.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case an.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case an.INTERNAL:return ue.INTERNAL;case an.UNAVAILABLE:return ue.UNAVAILABLE;case an.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case an.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case an.NOT_FOUND:return ue.NOT_FOUND;case an.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case an.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case an.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case an.ABORTED:return ue.ABORTED;case an.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case an.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case an.DATA_LOSS:return ue.DATA_LOSS;default:return nt(39323,{code:t})}}(yt=an||(an={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xq=new Ta([4294967295,4294967295],0);function SI(t){const e=yq().encode(t),n=new VO;return n.update(e),new Uint8Array(n.digest())}function TI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ta([n,r],0),new Ta([i,o],0)]}class wE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new sf(`Invalid padding: ${n}`);if(r<0)throw new sf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new sf(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ta.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Ta.fromNumber(r)));return i.compare(xq)===1&&(i=new Ta([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=SI(e),[r,i]=TI(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new wE(o,i,n);return r.forEach((a=>s.insert(a))),s}insert(e){if(this.ge===0)return;const n=SI(e),[r,i]=TI(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.be(s)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class sf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,eh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rv(st.min(),i,new Kt(pt),As(),mt())}}class eh{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new eh(r,n,mt(),mt(),mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class CL{constructor(e,n){this.targetId=e,this.Ce=n}}class IL{constructor(e,n,r=Gn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class AI{constructor(){this.ve=0,this.Fe=CI(),this.Me=Gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=mt(),n=mt(),r=mt();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:nt(38017,{changeType:o})}})),new eh(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=CI()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class bq{constructor(e){this.Ge=e,this.ze=new Map,this.je=As(),this.He=Mp(),this.Je=Mp(),this.Ze=new Kt(pt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:nt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(mw(o))if(r===0){const s=new Ke(o.path);this.et(n,s,nr.newNoDocument(s,st.min()))}else Tt(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const a=this.ut(e),c=a?this.ct(a,e,s):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Ra(r).toUint8Array()}catch(c){if(c instanceof XO)return Eu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new wE(s,i,o)}catch(c){return Eu(c instanceof sf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((o=>{const s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(n,o,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((o,s)=>{const a=this.ot(s);if(a){if(o.current&&mw(a.target)){const c=new Ke(a.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,nr.newNoDocument(c,e))}o.Be&&(n.set(s,o.ke()),o.Ke())}}));let r=mt();this.Je.forEach(((o,s)=>{let a=!0;s.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(o))})),this.je.forEach(((o,s)=>s.setReadTime(e)));const i=new rv(e,n,this.Ze,this.je,r);return this.je=As(),this.He=Mp(),this.Je=Mp(),this.Ze=new Kt(pt),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new AI,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new vn(pt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new vn(pt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new AI),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Mp(){return new Kt(Ke.comparator)}function CI(){return new Kt(Ke.comparator)}const wq={asc:"ASCENDING",desc:"DESCENDING"},_q={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Eq={and:"AND",or:"OR"};class Sq{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yw(t,e){return t.useProto3Json||Qg(e)?e:{value:e}}function jm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PL(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Tq(t,e){return jm(t,e.toTimestamp())}function Oo(t){return Tt(!!t,49232),st.fromTimestamp((function(n){const r=ka(n);return new Ut(r.seconds,r.nanos)})(t))}function _E(t,e){return xw(t,e).canonicalString()}function xw(t,e){const n=(function(i){return new Dt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function NL(t){const e=Dt.fromString(t);return Tt(OL(e),10190,{key:e.toString()}),e}function bw(t,e){return _E(t.databaseId,e.path)}function rx(t,e){const n=NL(e);if(n.get(1)!==t.databaseId.projectId)throw new Pe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Pe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ke(RL(n))}function kL(t,e){return _E(t.databaseId,e)}function Aq(t){const e=NL(t);return e.length===4?Dt.emptyPath():RL(e)}function ww(t){return new Dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RL(t){return Tt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function II(t,e,n){return{name:bw(t,e),fields:n.value.mapValue.fields}}function Cq(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:nt(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(u,f){return u.useProto3Json?(Tt(f===void 0||typeof f=="string",58123),Gn.fromBase64String(f||"")):(Tt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Gn.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(u){const f=u.code===void 0?ue.UNKNOWN:AL(u.code);return new Pe(f,u.message||"")})(s);n=new IL(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=rx(t,r.document.name),o=Oo(r.document.updateTime),s=r.document.createTime?Oo(r.document.createTime):st.min(),a=new Pr({mapValue:{fields:r.document.fields}}),c=nr.newFoundDocument(i,o,s,a),u=r.targetIds||[],f=r.removedTargetIds||[];n=new hm(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=rx(t,r.document),o=r.readTime?Oo(r.readTime):st.min(),s=nr.newNoDocument(i,o),a=r.removedTargetIds||[];n=new hm([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=rx(t,r.document),o=r.removedTargetIds||[];n=new hm([],o,i,null)}else{if(!("filter"in e))return nt(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new gq(i,o),a=r.targetId;n=new CL(a,s)}}return n}function Iq(t,e){let n;if(e instanceof Zf)n={update:II(t,e.key,e.value)};else if(e instanceof xE)n={delete:bw(t,e.key)};else if(e instanceof Ba)n={update:II(t,e.key,e.data),updateMask:jq(e.fieldMask)};else{if(!(e instanceof hq))return nt(16599,{dt:e.type});n={verify:bw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,s){const a=s.transform;if(a instanceof Lm)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Cf)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof If)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Pf)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw nt(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Tq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:nt(27497)})(t,e.precondition)),n}function Pq(t,e){return t&&t.length>0?(Tt(e!==void 0,14353),t.map((n=>(function(i,o){let s=i.updateTime?Oo(i.updateTime):Oo(o);return s.isEqual(st.min())&&(s=Oo(o)),new uq(s,i.transformResults||[])})(n,e)))):[]}function Nq(t,e){return{documents:[kL(t,e.path)]}}function kq(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kL(t,i);const o=(function(u){if(u.length!==0)return DL(Xi.create(u,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const s=(function(u){if(u.length!==0)return u.map((f=>(function(v){return{field:Zc(v.field),direction:Dq(v.dir)}})(f)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=yw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:i}}function Rq(t){let e=Aq(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Tt(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=(function(p){const v=ML(p);return v instanceof Xi&&lL(v)?v.getFilters():[v]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map((v=>(function(E){return new Af(eu(E.field),(function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(v)))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let v;return v=typeof p=="object"?p.value:p,Qg(v)?null:v})(n.limit));let c=null;n.startAt&&(c=(function(p){const v=!!p.before,w=p.values||[];return new Om(w,v)})(n.startAt));let u=null;return n.endAt&&(u=(function(p){const v=!p.before,w=p.values||[];return new Om(w,v)})(n.endAt)),Y8(e,i,s,o,a,"F",c,u)}function Mq(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nt(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ML(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=eu(n.unaryFilter.field);return cn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=eu(n.unaryFilter.field);return cn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=eu(n.unaryFilter.field);return cn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=eu(n.unaryFilter.field);return cn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return nt(61313);default:return nt(60726)}})(t):t.fieldFilter!==void 0?(function(n){return cn.create(eu(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return nt(58110);default:return nt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Xi.create(n.compositeFilter.filters.map((r=>ML(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return nt(1026)}})(n.compositeFilter.op))})(t):nt(30097,{filter:t})}function Dq(t){return wq[t]}function Oq(t){return _q[t]}function Lq(t){return Eq[t]}function Zc(t){return{fieldPath:t.canonicalString()}}function eu(t){return Bn.fromServerFormat(t.fieldPath)}function DL(t){return t instanceof cn?(function(n){if(n.op==="=="){if(mI(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NAN"}};if(pI(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mI(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NOT_NAN"}};if(pI(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zc(n.field),op:Oq(n.op),value:n.value}}})(t):t instanceof Xi?(function(n){const r=n.getFilters().map((i=>DL(i)));return r.length===1?r[0]:{compositeFilter:{op:Lq(n.op),filters:r}}})(t):nt(54877,{filter:t})}function jq(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function OL(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function LL(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n,r,i,o=st.min(),s=st.min(),a=Gn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new wa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fq{constructor(e){this.yt=e}}function Uq(t){const e=Rq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vw(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(){this.Sn=new $q}addToCollectionParentIndex(e,n){return this.Sn.add(n),he.resolve()}getCollectionParents(e,n){return he.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return he.resolve()}deleteFieldIndex(e,n){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,n){return he.resolve()}getDocumentsMatchingTarget(e,n){return he.resolve(null)}getIndexType(e,n){return he.resolve(0)}getFieldIndexes(e,n){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,n){return he.resolve(Na.min())}getMinOffsetFromCollectionGroup(e,n){return he.resolve(Na.min())}updateCollectionGroup(e,n,r){return he.resolve()}updateIndexEntries(e,n){return he.resolve()}}class $q{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new vn(Dt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jL=41943040;class Cr{static withCacheSize(e){return new Cr(e,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr.DEFAULT_COLLECTION_PERCENTILE=10,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cr.DEFAULT=new Cr(jL,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cr.DISABLED=new Cr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Cu(0)}static ar(){return new Cu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="LruGarbageCollector",Bq=1048576;function kI([t,e],[n,r]){const i=pt(t,n);return i===0?pt(e,r):i}class zq{constructor(e){this.Pr=e,this.buffer=new vn(kI),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();kI(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qq{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Me(NI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$u(n)?Me(NI,"Ignoring IndexedDB error during garbage collection: ",n):await Vu(n)}await this.Ar(3e5)}))}}class Gq{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return he.resolve(Jg.ce);const r=new zq(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(PI)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PI):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,o,s,a,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(r=p,a=Date.now(),this.removeTargets(e,r,n)))).next((p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(u=Date.now(),Qc()<=ht.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p}))))}}function Hq(t,e){return new Gq(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wq{constructor(){this.changes=new tc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?he.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&vf(r.mutation,i,Wr.empty(),Ut.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,mt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=mt()){const i=Al();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((o=>{let s=of();return o.forEach(((a,c)=>{s=s.insert(a,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=Al();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,mt())))}populateOverlays(e,n,r){const i=[];return r.forEach((o=>{n.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((s,a)=>{n.set(s,a)}))}))}computeViews(e,n,r,i){let o=As();const s=gf(),a=(function(){return gf()})();return n.forEach(((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Ba)?o=o.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),vf(f.mutation,u,f.mutation.getFieldMask(),Ut.now())):s.set(u.key,Wr.empty())})),this.recalculateAndSaveOverlays(e,o).next((c=>(c.forEach(((u,f)=>s.set(u,f))),n.forEach(((u,f)=>a.set(u,new Kq(f,s.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=gf();let i=new Kt(((s,a)=>s-a)),o=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const a of s)a.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let f=r.get(c)||Wr.empty();f=a.applyToLocalView(u,f),r.set(c,f);const p=(i.get(a.batchId)||mt()).add(c);i=i.insert(a.batchId,p)}))})).next((()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,f=c.value,p=vL();f.forEach((v=>{if(!o.has(v)){const w=SL(n.get(v),r.get(v));w!==null&&p.set(v,w),o=o.add(v)}})),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return he.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return J8(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fL(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):he.resolve(Al());let a=_f,c=o;return s.next((u=>he.forEach(u,((f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(f)?he.resolve():this.remoteDocumentCache.getEntry(e,f).next((v=>{c=c.insert(f,v)}))))).next((()=>this.populateOverlays(e,u,o))).next((()=>this.computeViews(e,c,u,mt()))).next((f=>({batchId:a,changes:gL(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ke(n)).next((r=>{let i=of();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=of();return this.indexManager.getCollectionParents(e,o).next((a=>he.forEach(a,(c=>{const u=(function(p,v){return new Bu(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((f=>{f.forEach(((p,v)=>{s=s.insert(p,v)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i)))).next((s=>{o.forEach(((c,u)=>{const f=u.getKey();s.get(f)===null&&(s=s.insert(f,nr.newInvalidDocument(f)))}));let a=of();return s.forEach(((c,u)=>{const f=o.get(c);f!==void 0&&vf(f.mutation,u,Wr.empty(),Ut.now()),ev(n,u)&&(a=a.insert(c,u))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jq{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return he.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Oo(i.createTime)}})(n)),he.resolve()}getNamedQuery(e,n){return he.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:Uq(i.bundledQuery),readTime:Oo(i.readTime)}})(n)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qq{constructor(){this.overlays=new Kt(Ke.comparator),this.Lr=new Map}getOverlay(e,n){return he.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Al();return he.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,o)=>{this.bt(e,n,o)})),he.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(r)),he.resolve()}getOverlaysForCollection(e,n,r){const i=Al(),o=n.length+1,s=new Ke(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return he.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Kt(((u,f)=>u-f));const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=o.get(u.largestBatchId);f===null&&(f=Al(),o=o.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=Al(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,f)=>a.set(u,f))),!(a.size()>=i)););return he.resolve(a)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new mq(n,r));let o=this.Lr.get(n);o===void 0&&(o=mt(),this.Lr.set(n,o)),this.Lr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xq{constructor(){this.sessionToken=Gn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.kr=new vn(Cn.Kr),this.qr=new vn(Cn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Cn(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Cn(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Ke(new Dt([])),r=new Cn(n,e),i=new Cn(n,e+1),o=[];return this.qr.forEachInRange([r,i],(s=>{this.Wr(s),o.push(s.key)})),o}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ke(new Dt([])),r=new Cn(n,e),i=new Cn(n,e+1);let o=mt();return this.qr.forEachInRange([r,i],(s=>{o=o.add(s.key)})),o}containsKey(e){const n=new Cn(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Cn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ke.comparator(e.key,n.key)||pt(e.Hr,n.Hr)}static Ur(e,n){return pt(e.Hr,n.Hr)||Ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new vn(Cn.Kr)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new pq(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.Jr=this.Jr.add(new Cn(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return he.resolve(s)}lookupMutationBatch(e,n){return he.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),o=i<0?0:i;return he.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?fE:this.Yn-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Cn(n,0),i=new Cn(n,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],(s=>{const a=this.Zr(s.Hr);o.push(a)})),he.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vn(pt);return n.forEach((i=>{const o=new Cn(i,0),s=new Cn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,s],(a=>{r=r.add(a.Hr)}))})),he.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Ke.isDocumentKey(o)||(o=o.child(""));const s=new Cn(new Ke(o),0);let a=new vn(pt);return this.Jr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)}),s),he.resolve(this.Yr(a))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Tt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return he.forEach(n.mutations,(i=>{const o=new Cn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Cn(n,0),i=this.Jr.firstAfterOrEqual(r);return he.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(e){this.ti=e,this.docs=(function(){return new Kt(Ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return he.resolve(r?r.document.mutableCopy():nr.newInvalidDocument(n))}getEntries(e,n){let r=As();return n.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nr.newInvalidDocument(i))})),he.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=As();const s=n.path,a=new Ke(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||A8(T8(f),r)<=0||(i.has(f.key)||ev(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return he.resolve(o)}getAllFromCollectionGroup(e,n,r,i){nt(9500)}ni(e,n){return he.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new tG(this)}getSize(e){return he.resolve(this.size)}}class tG extends Wq{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),he.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG{constructor(e){this.persistence=e,this.ri=new tc((n=>mE(n)),gE),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.ii=0,this.si=new EE,this.targetCount=0,this.oi=Cu._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),he.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Cu(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,he.resolve()}updateTargetData(e,n){return this.lr(n),he.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ri.forEach(((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ri.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),he.waitFor(o).next((()=>i))}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return he.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),he.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach((s=>{o.push(i.markPotentiallyOrphaned(e,s))})),he.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),he.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return he.resolve(r)}containsKey(e,n){return he.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,n){this._i={},this.overlays={},this.ai=new Jg(0),this.ui=!1,this.ui=!0,this.ci=new Xq,this.referenceDelegate=e(this),this.li=new nG(this),this.indexManager=new Vq,this.remoteDocumentCache=(function(i){return new eG(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new Fq(n),this.Pi=new Jq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Qq,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new Zq(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Me("MemoryPersistence","Starting transaction:",e);const i=new rG(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((o=>this.referenceDelegate.Ii(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ei(e,n){return he.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class rG extends I8{constructor(e){super(),this.currentSequenceNumber=e}}class SE{constructor(e){this.persistence=e,this.Ri=new EE,this.Ai=null}static Vi(e){return new SE(e)}get di(){if(this.Ai)return this.Ai;throw nt(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),he.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),he.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((o=>this.di.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.di,(r=>{const i=Ke.fromPath(r);return this.mi(e,i).next((o=>{o||n.removeEntry(i,st.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return he.or([()=>he.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Fm{constructor(e,n){this.persistence=e,this.fi=new tc((r=>k8(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=Hq(this,n)}static Vi(e,n){return new Fm(e,n)}Ti(){}Ii(e){return he.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return he.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((o=>o?he.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,(s=>this.wr(e,s,n).next((a=>{a||(r++,o.removeEntry(s,st.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),he.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),he.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=um(e.data.value)),n}wr(e,n,r){return he.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return he.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=mt(),i=mt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new TE(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return AB()?8:P8(or())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.gs(e,n).next((s=>{o.result=s})).next((()=>{if(!o.result)return this.ps(e,n,i,r).next((s=>{o.result=s}))})).next((()=>{if(o.result)return;const s=new iG;return this.ys(e,n,s).next((a=>{if(o.result=a,this.As)return this.ws(e,n,s,a.size)}))})).next((()=>o.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Qc()<=ht.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",Xc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),he.resolve()):(Qc()<=ht.DEBUG&&Me("QueryEngine","Query:",Xc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Qc()<=ht.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",Xc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Do(n))):he.resolve())}gs(e,n){if(xI(n))return he.resolve(null);let r=Do(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=vw(n,null,"F"),r=Do(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const s=mt(...o);return this.fs.getDocuments(e,s).next((a=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.bs(n,a);return this.Ss(n,u,s,c.readTime)?this.gs(e,vw(n,null,"F")):this.Ds(e,u,n,c)}))))})))))}ps(e,n,r,i){return xI(n)||i.isEqual(st.min())?he.resolve(null):this.fs.getDocuments(e,r).next((o=>{const s=this.bs(n,o);return this.Ss(n,s,r,i)?he.resolve(null):(Qc()<=ht.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xc(n)),this.Ds(e,s,n,S8(i,_f)).next((a=>a)))}))}bs(e,n){let r=new vn(pL(e));return n.forEach(((i,o)=>{ev(e,o)&&(r=r.add(o))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,n,r){return Qc()<=ht.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",Xc(n)),this.fs.getDocumentsMatchingQuery(e,n,Na.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((o=>(n.forEach((s=>{o=o.insert(s.key,s)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="LocalStore",sG=3e8;class aG{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new Kt(pt),this.Fs=new tc((o=>mE(o)),gE),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yq(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function lG(t,e,n,r){return new aG(t,e,n,r)}async function UL(t,e){const n=lt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const s=[],a=[];let c=mt();for(const u of i){s.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of o){a.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Ns:u,removedBatchIds:s,addedBatchIds:a})))}))}))}function cG(t,e){const n=lt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=n.xs.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,f){const p=u.batch,v=p.keys();let w=he.resolve();return v.forEach((E=>{w=w.next((()=>f.getEntry(c,E))).next((S=>{const _=u.docVersions.get(E);Tt(_!==null,48541),S.version.compareTo(_)<0&&(p.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),f.addEntry(S)))}))})),w.next((()=>a.mutationQueue.removeMutationBatch(c,p)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=mt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function VL(t){const e=lt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function uG(t,e){const n=lt(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const s=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const a=[];e.targetChanges.forEach(((f,p)=>{const v=i.get(p);if(!v)return;a.push(n.li.removeMatchingKeys(o,f.removedDocuments,p).next((()=>n.li.addMatchingKeys(o,f.addedDocuments,p))));let w=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(Gn.EMPTY_BYTE_STRING,st.min()).withLastLimboFreeSnapshotVersion(st.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),i=i.insert(p,w),(function(S,_,N){return S.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=sG?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(v,w,f)&&a.push(n.li.updateTargetData(o,w))}));let c=As(),u=mt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))})),a.push(dG(o,s,e.documentUpdates).next((f=>{c=f.Bs,u=f.Ls}))),!r.isEqual(st.min())){const f=n.li.getLastRemoteSnapshotVersion(o).next((p=>n.li.setTargetsMetadata(o,o.currentSequenceNumber,r)));a.push(f)}return he.waitFor(a).next((()=>s.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,c,u))).next((()=>c))})).then((o=>(n.vs=i,o)))}function dG(t,e,n){let r=mt(),i=mt();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let s=As();return n.forEach(((a,c)=>{const u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(st.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):Me(AE,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)})),{Bs:s,Ls:i}}))}function fG(t,e){const n=lt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=fE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function hG(t,e){const n=lt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((o=>o?(i=o,he.resolve(i)):n.li.allocateTargetId(r).next((s=>(i=new wa(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function _w(t,e,n){const r=lt(t),i=r.vs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!$u(s))throw s;Me(AE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function RI(t,e,n){const r=lt(t);let i=st.min(),o=mt();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,u,f){const p=lt(c),v=p.Fs.get(f);return v!==void 0?he.resolve(p.vs.get(v)):p.li.getTargetData(u,f)})(r,s,Do(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,a.targetId).next((c=>{o=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:st.min(),n?o:mt()))).next((a=>(pG(r,Z8(e),a),{documents:a,ks:o})))))}function pG(t,e,n){let r=t.Ms.get(e)||st.min();n.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Ms.set(e,r)}class MI{constructor(){this.activeTargetIds=oq()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mG{constructor(){this.vo=new MI,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new MI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="ConnectivityMonitor";class OI{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Me(DI,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Me(DI,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dp=null;function Ew(){return Dp===null?Dp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dp++,"0x"+Dp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="RestConnection",vG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class yG{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Mm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const s=Ew(),a=this.Qo(e,n.toUriEncodedString());Me(ix,`Sending RPC '${e}' ${s}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,o);const{host:u}=new URL(a),f=ju(u);return this.zo(e,a,c,r,f).then((p=>(Me(ix,`Received RPC '${e}' ${s}: `,p),p)),(p=>{throw Eu(ix,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p}))}jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}Qo(e,n){const r=vG[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="WebChannelConnection",qd=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class hu extends yG{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!hu.c_){const e=qO();qd(e,zO.STAT_EVENT,(n=>{n.stat===uw.PROXY?Me(Zn,"STAT_EVENT: detected buffering proxy"):n.stat===uw.NOPROXY&&Me(Zn,"STAT_EVENT: detected no buffering proxy")})),hu.c_=!0}}zo(e,n,r,i,o){const s=Ew();return new Promise(((a,c)=>{const u=new $O;u.setWithCredentials(!0),u.listenOnce(BO.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case cm.NO_ERROR:const p=u.getResponseJson();Me(Zn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case cm.TIMEOUT:Me(Zn,`RPC '${e}' ${s} timed out`),c(new Pe(ue.DEADLINE_EXCEEDED,"Request time out"));break;case cm.HTTP_ERROR:const v=u.getStatus();if(Me(Zn,`RPC '${e}' ${s} failed with status:`,v,"response text:",u.getResponseText()),v>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);const E=w==null?void 0:w.error;if(E&&E.status&&E.message){const S=(function(N){const j=N.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(j)>=0?j:ue.UNKNOWN})(E.status);c(new Pe(S,E.message))}else c(new Pe(ue.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Pe(ue.UNAVAILABLE,"Connection failed."));break;default:nt(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Me(Zn,`RPC '${e}' ${s} completed.`)}}));const f=JSON.stringify(i);Me(Zn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const i=Ew(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const u=o.join("");Me(Zn,`Creating RPC '${e}' stream ${i}: ${u}`,a);const f=s.createWebChannel(u,a);this.I_(f);let p=!1,v=!1;const w=new xG({Ho:E=>{v?Me(Zn,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(p||(Me(Zn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),Me(Zn,`RPC '${e}' stream ${i} sending:`,E),f.send(E))},Jo:()=>f.close()});return qd(f,rf.EventType.OPEN,(()=>{v||(Me(Zn,`RPC '${e}' stream ${i} transport opened.`),w.i_())})),qd(f,rf.EventType.CLOSE,(()=>{v||(v=!0,Me(Zn,`RPC '${e}' stream ${i} transport closed`),w.o_(),this.E_(f))})),qd(f,rf.EventType.ERROR,(E=>{v||(v=!0,Eu(Zn,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),w.o_(new Pe(ue.UNAVAILABLE,"The operation could not be completed")))})),qd(f,rf.EventType.MESSAGE,(E=>{var S;if(!v){const _=E.data[0];Tt(!!_,16349);const N=_,j=(N==null?void 0:N.error)||((S=N[0])==null?void 0:S.error);if(j){Me(Zn,`RPC '${e}' stream ${i} received error:`,j);const F=j.status;let q=(function(k){const D=an[k];if(D!==void 0)return AL(D)})(F),V=j.message;q===void 0&&(q=ue.INTERNAL,V="Unknown error status: "+F+" with message "+j.message),v=!0,w.o_(new Pe(q,V)),f.close()}else Me(Zn,`RPC '${e}' stream ${i} received:`,_),w.__(_)}})),hu.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return GO()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bG(t){return new hu(t)}function ox(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t){return new Sq(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hu.c_=!1;class $L{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="PersistentStream";class BL{constructor(e,n,r,i,o,s,a,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $L(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(Ts(n.toString()),Ts("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Pe(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Me(LI,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Me(LI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wG extends BL{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Cq(this.serializer,e),r=(function(o){if(!("targetChange"in o))return st.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?st.min():s.readTime?Oo(s.readTime):st.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=ww(this.serializer),n.addTarget=(function(o,s){let a;const c=s.target;if(a=mw(c)?{documents:Nq(o,c)}:{query:kq(o,c).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=PL(o,s.resumeToken);const u=yw(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(st.min())>0){a.readTime=jm(o,s.snapshotVersion.toTimestamp());const u=yw(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const r=Mq(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=ww(this.serializer),n.removeTarget=e,this.K_(n)}}class _G extends BL{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Pq(e.writeResults,e.commitTime),r=Oo(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ww(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Iq(this.serializer,r)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{}class SG extends EG{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Pe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Wo(e,xw(n,r),i,o,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ue.UNKNOWN,o.toString())}))}jo(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.jo(e,xw(n,r),i,s,a,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Pe(ue.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function TG(t,e,n,r){return new SG(t,e,n,r)}class AG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ts(n),this.aa=!1):Me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl="RemoteStore";class CG{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((s=>{r.enqueueAndForget((async()=>{nc(this)&&(Me(Vl,"Restarting streams for network reachability change."),await(async function(c){const u=lt(c);u.Ea.add(4),await th(u),u.Va.set("Unknown"),u.Ea.delete(4),await ov(u)})(this))}))})),this.Va=new AG(r,i)}}async function ov(t){if(nc(t))for(const e of t.Ra)await e(!0)}async function th(t){for(const e of t.Ra)await e(!1)}function zL(t,e){const n=lt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),NE(n)?PE(n):zu(n).O_()&&IE(n,e))}function CE(t,e){const n=lt(t),r=zu(n);n.Ia.delete(e),r.O_()&&qL(n,e),n.Ia.size===0&&(r.O_()?r.L_():nc(n)&&n.Va.set("Unknown"))}function IE(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(st.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zu(t).Z_(e)}function qL(t,e){t.da.$e(e),zu(t).X_(e)}function PE(t){t.da=new bq({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),zu(t).start(),t.Va.ua()}function NE(t){return nc(t)&&!zu(t).x_()&&t.Ia.size>0}function nc(t){return lt(t).Ea.size===0}function GL(t){t.da=void 0}async function IG(t){t.Va.set("Online")}async function PG(t){t.Ia.forEach(((e,n)=>{IE(t,e)}))}async function NG(t,e){GL(t),NE(t)?(t.Va.ha(e),PE(t)):t.Va.set("Unknown")}async function kG(t,e,n){if(t.Va.set("Online"),e instanceof IL&&e.state===2&&e.cause)try{await(async function(i,o){const s=o.cause;for(const a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.da.removeTarget(a))})(t,e)}catch(r){Me(Vl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Um(t,r)}else if(e instanceof hm?t.da.Xe(e):e instanceof CL?t.da.st(e):t.da.tt(e),!n.isEqual(st.min()))try{const r=await VL(t.localStore);n.compareTo(r)>=0&&await(function(o,s){const a=o.da.Tt(s);return a.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=o.Ia.get(u);f&&o.Ia.set(u,f.withResumeToken(c.resumeToken,s))}})),a.targetMismatches.forEach(((c,u)=>{const f=o.Ia.get(c);if(!f)return;o.Ia.set(c,f.withResumeToken(Gn.EMPTY_BYTE_STRING,f.snapshotVersion)),qL(o,c);const p=new wa(f.target,c,u,f.sequenceNumber);IE(o,p)})),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){Me(Vl,"Failed to raise snapshot:",r),await Um(t,r)}}async function Um(t,e,n){if(!$u(e))throw e;t.Ea.add(1),await th(t),t.Va.set("Offline"),n||(n=()=>VL(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Me(Vl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ov(t)}))}function HL(t,e){return e().catch((n=>Um(t,n,e)))}async function sv(t){const e=lt(t),n=Da(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fE;for(;RG(e);)try{const i=await fG(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,MG(e,i)}catch(i){await Um(e,i)}WL(e)&&KL(e)}function RG(t){return nc(t)&&t.Ta.length<10}function MG(t,e){t.Ta.push(e);const n=Da(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function WL(t){return nc(t)&&!Da(t).x_()&&t.Ta.length>0}function KL(t){Da(t).start()}async function DG(t){Da(t).ra()}async function OG(t){const e=Da(t);for(const n of t.Ta)e.ea(n.mutations)}async function LG(t,e,n){const r=t.Ta.shift(),i=bE.from(r,e,n);await HL(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await sv(t)}async function jG(t,e){e&&Da(t).Y_&&await(async function(r,i){if((function(s){return vq(s)&&s!==ue.ABORTED})(i.code)){const o=r.Ta.shift();Da(r).B_(),await HL(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await sv(r)}})(t,e),WL(t)&&KL(t)}async function jI(t,e){const n=lt(t);n.asyncQueue.verifyOperationInProgress(),Me(Vl,"RemoteStore received new credentials");const r=nc(n);n.Ea.add(3),await th(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ov(n)}async function FG(t,e){const n=lt(t);e?(n.Ea.delete(2),await ov(n)):e||(n.Ea.add(2),await th(n),n.Va.set("Unknown"))}function zu(t){return t.ma||(t.ma=(function(n,r,i){const o=lt(n);return o.sa(),new wG(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:IG.bind(null,t),Yo:PG.bind(null,t),t_:NG.bind(null,t),J_:kG.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),NE(t)?PE(t):t.Va.set("Unknown")):(await t.ma.stop(),GL(t))}))),t.ma}function Da(t){return t.fa||(t.fa=(function(n,r,i){const o=lt(n);return o.sa(),new _G(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:DG.bind(null,t),t_:jG.bind(null,t),ta:OG.bind(null,t),na:LG.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await sv(t)):(await t.fa.stop(),t.Ta.length>0&&(Me(Vl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new kE(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pe(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function RE(t,e){if(Ts("AsyncQueue",`${e}: ${t}`),$u(t))return new Pe(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{static emptySet(e){return new pu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ke.comparator(n.key,r.key):(n,r)=>Ke.comparator(n.key,r.key),this.keyedMap=of(),this.sortedSet=new Kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.ga=new Kt(Ke.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):nt(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Iu{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach((a=>{s.push({type:0,doc:a})})),new Iu(e,n,pu.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class VG{constructor(){this.queries=UI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=lt(n),o=i.queries;i.queries=UI(),o.forEach(((s,a)=>{for(const c of a.ba)c.onError(r)}))})(this,new Pe(ue.ABORTED,"Firestore shutting down"))}}function UI(){return new tc((t=>hL(t)),Zg)}async function YL(t,e){const n=lt(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new UG,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=RE(s,`Initialization of query '${Xc(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.ba.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&ME(n)}async function JL(t,e){const n=lt(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.ba.indexOf(e);s>=0&&(o.ba.splice(s,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function $G(t,e){const n=lt(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.ba)a.Fa(i)&&(r=!0);s.wa=i}}r&&ME(n)}function BG(t,e,n){const r=lt(t),i=r.queries.get(e);if(i)for(const o of i.ba)o.onError(n);r.queries.delete(e)}function ME(t){t.Ca.forEach((e=>{e.next()}))}var Sw,VI;(VI=Sw||(Sw={})).Ma="default",VI.Cache="cache";class QL{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Iu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Iu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e){this.key=e}}class ZL{constructor(e){this.key=e}}class zG{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=mt(),this.mutatedKeys=mt(),this.eu=pL(e),this.tu=new pu(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new FI,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,p)=>{const v=i.get(f),w=ev(this.query,p)?p:null,E=!!v&&this.mutatedKeys.has(v.key),S=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let _=!1;v&&w?v.data.isEqual(w.data)?E!==S&&(r.track({type:3,doc:w}),_=!0):this.su(v,w)||(r.track({type:2,doc:w}),_=!0,(c&&this.eu(w,c)>0||u&&this.eu(w,u)<0)&&(a=!0)):!v&&w?(r.track({type:0,doc:w}),_=!0):v&&!w&&(r.track({type:1,doc:v}),_=!0,(c||u)&&(a=!0)),_&&(w?(s=s.add(w),o=S?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Ss:a,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((f,p)=>(function(w,E){const S=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt(20277,{Vt:_})}};return S(w)-S(E)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,u=c!==this.Xa;return this.Xa=c,s.length!==0||u?{snapshot:new Iu(this.query,e.tu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new FI,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=mt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new ZL(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new XL(r))})),n}cu(e){this.Za=e.ks,this.Ya=mt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Iu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const DE="SyncEngine";class qG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class GG{constructor(e){this.key=e,this.hu=!1}}class HG{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new tc((a=>hL(a)),Zg),this.Iu=new Map,this.Eu=new Set,this.Ru=new Kt(Ke.comparator),this.Au=new Map,this.Vu=new EE,this.du={},this.mu=new Map,this.fu=Cu.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WG(t,e,n=!0){const r=oj(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await ej(r,e,n,!0),i}async function KG(t,e){const n=oj(t);await ej(n,e,!0,!1)}async function ej(t,e,n,r){const i=await hG(t.localStore,Do(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await YG(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&zL(t.remoteStore,i),a}async function YG(t,e,n,r,i){t.pu=(p,v,w)=>(async function(S,_,N,j){let F=_.view.ru(N);F.Ss&&(F=await RI(S.localStore,_.query,!1).then((({documents:k})=>_.view.ru(k,F))));const q=j&&j.targetChanges.get(_.targetId),V=j&&j.targetMismatches.get(_.targetId)!=null,$=_.view.applyChanges(F,S.isPrimaryClient,q,V);return BI(S,_.targetId,$.au),$.snapshot})(t,p,v,w);const o=await RI(t.localStore,e,!0),s=new zG(e,o.ks),a=s.ru(o.documents),c=eh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,c);BI(t,n,u.au);const f=new qG(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function JG(t,e,n){const r=lt(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((s=>!Zg(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _w(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&CE(r.remoteStore,i.targetId),Tw(r,i.targetId)})).catch(Vu)):(Tw(r,i.targetId),await _w(r.localStore,i.targetId,!0))}async function QG(t,e){const n=lt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),CE(n.remoteStore,r.targetId))}async function XG(t,e,n){const r=oH(t);try{const i=await(function(s,a){const c=lt(s),u=Ut.now(),f=a.reduce(((w,E)=>w.add(E.key)),mt());let p,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let E=As(),S=mt();return c.xs.getEntries(w,f).next((_=>{E=_,E.forEach(((N,j)=>{j.isValidDocument()||(S=S.add(N))}))})).next((()=>c.localDocuments.getOverlayedDocuments(w,E))).next((_=>{p=_;const N=[];for(const j of a){const F=fq(j,p.get(j.key).overlayedDocument);F!=null&&N.push(new Ba(j.key,F,oL(F.value.mapValue),yi.exists(!0)))}return c.mutationQueue.addMutationBatch(w,u,N,a)})).next((_=>{v=_;const N=_.applyToLocalDocumentSet(p,S);return c.documentOverlayCache.saveOverlays(w,_.batchId,N)}))})).then((()=>({batchId:v.batchId,changes:gL(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let u=s.du[s.currentUser.toKey()];u||(u=new Kt(pt)),u=u.insert(a,c),s.du[s.currentUser.toKey()]=u})(r,i.batchId,n),await nh(r,i.changes),await sv(r.remoteStore)}catch(i){const o=RE(i,"Failed to persist write");n.reject(o)}}async function tj(t,e){const n=lt(t);try{const r=await uG(n.localStore,e);e.targetChanges.forEach(((i,o)=>{const s=n.Au.get(o);s&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Tt(s.hu,14607):i.removedDocuments.size>0&&(Tt(s.hu,42227),s.hu=!1))})),await nh(n,r,e)}catch(r){await Vu(r)}}function $I(t,e,n){const r=lt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(s,a){const c=lt(s);c.onlineState=a;let u=!1;c.queries.forEach(((f,p)=>{for(const v of p.ba)v.va(a)&&(u=!0)})),u&&ME(c)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZG(t,e,n){const r=lt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new Kt(Ke.comparator);s=s.insert(o,nr.newNoDocument(o,st.min()));const a=mt().add(o),c=new rv(st.min(),new Map,new Kt(pt),s,a);await tj(r,c),r.Ru=r.Ru.remove(o),r.Au.delete(e),OE(r)}else await _w(r.localStore,e,!1).then((()=>Tw(r,e,n))).catch(Vu)}async function eH(t,e){const n=lt(t),r=e.batch.batchId;try{const i=await cG(n.localStore,e);rj(n,r,null),nj(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nh(n,i)}catch(i){await Vu(i)}}async function tH(t,e,n){const r=lt(t);try{const i=await(function(s,a){const c=lt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return c.mutationQueue.lookupMutationBatch(u,a).next((p=>(Tt(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(u,p)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,a))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>c.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);rj(r,e,n),nj(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await nh(r,i)}catch(i){await Vu(i)}}function nj(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function rj(t,e,n){const r=lt(t);let i=r.du[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Tw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||ij(t,r)}))}function ij(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(CE(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),OE(t))}function BI(t,e,n){for(const r of n)r instanceof XL?(t.Vu.addReference(r.key,e),nH(t,r)):r instanceof ZL?(Me(DE,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||ij(t,r.key)):nt(19791,{wu:r})}function nH(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Me(DE,"New document in limbo: "+n),t.Eu.add(r),OE(t))}function OE(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ke(Dt.fromString(e)),r=t.fu.next();t.Au.set(r,new GG(n)),t.Ru=t.Ru.insert(n,r),zL(t.remoteStore,new wa(Do(vE(n.path)),r,"TargetPurposeLimboResolution",Jg.ce))}}async function nh(t,e,n){const r=lt(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,c)=>{s.push(r.pu(c,e,n).then((u=>{var f;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){i.push(u);const p=TE.Es(c.targetId,u);o.push(p)}})))})),await Promise.all(s),r.Pu.J_(i),await(async function(c,u){const f=lt(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>he.forEach(u,(v=>he.forEach(v.Ts,(w=>f.persistence.referenceDelegate.addReference(p,v.targetId,w))).next((()=>he.forEach(v.Is,(w=>f.persistence.referenceDelegate.removeReference(p,v.targetId,w)))))))))}catch(p){if(!$u(p))throw p;Me(AE,"Failed to update sequence numbers: "+p)}for(const p of u){const v=p.targetId;if(!p.fromCache){const w=f.vs.get(v),E=w.snapshotVersion,S=w.withLastLimboFreeSnapshotVersion(E);f.vs=f.vs.insert(v,S)}}})(r.localStore,o))}async function rH(t,e){const n=lt(t);if(!n.currentUser.isEqual(e)){Me(DE,"User change. New user:",e.toKey());const r=await UL(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach((a=>{a.forEach((c=>{c.reject(new Pe(ue.CANCELLED,s))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nh(n,r.Ns)}}function iH(t,e){const n=lt(t),r=n.Au.get(e);if(r&&r.hu)return mt().add(r.key);{let i=mt();const o=n.Iu.get(e);if(!o)return i;for(const s of o){const a=n.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function oj(t){const e=lt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZG.bind(null,e),e.Pu.J_=$G.bind(null,e.eventManager),e.Pu.yu=BG.bind(null,e.eventManager),e}function oH(t){const e=lt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tH.bind(null,e),e}class Vm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=iv(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return lG(this.persistence,new oG,e.initialUser,this.serializer)}Cu(e){return new FL(SE.Vi,this.serializer)}Du(e){return new mG}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vm.provider={build:()=>new Vm};class sH extends Vm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Tt(this.persistence.referenceDelegate instanceof Fm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qq(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Cr.withCacheSize(this.cacheSizeBytes):Cr.DEFAULT;return new FL((r=>Fm.Vi(r,n)),this.serializer)}}class Aw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$I(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rH.bind(null,this.syncEngine),await FG(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new VG})()}createDatastore(e){const n=iv(e.databaseInfo.databaseId),r=bG(e.databaseInfo);return TG(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,o,s,a){return new CG(r,i,o,s,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>$I(this.syncEngine,n,0)),(function(){return OI.v()?new OI:new gG})())}createSyncEngine(e,n){return(function(i,o,s,a,c,u,f){const p=new HG(i,o,s,a,c,u);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const o=lt(i);Me(Vl,"RemoteStore shutting down."),o.Ea.add(5),await th(o),o.Aa.shutdown(),o.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Aw.provider={build:()=>new Aw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ts("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="FirestoreClient";class aH{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=tr.UNAUTHENTICATED,this.clientId=dE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async s=>{Me(Oa,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(Me(Oa,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=RE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function sx(t,e){t.asyncQueue.verifyOperationInProgress(),Me(Oa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await UL(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function zI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lH(t);Me(Oa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>jI(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>jI(e.remoteStore,i))),t._onlineComponents=e}async function lH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Me(Oa,"Using user provided OfflineComponentProvider");try{await sx(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Eu("Error using user provided cache. Falling back to memory cache: "+n),await sx(t,new Vm)}}else Me(Oa,"Using default OfflineComponentProvider"),await sx(t,new sH(void 0));return t._offlineComponents}async function aj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Me(Oa,"Using user provided OnlineComponentProvider"),await zI(t,t._uninitializedComponentsProvider._online)):(Me(Oa,"Using default OnlineComponentProvider"),await zI(t,new Aw))),t._onlineComponents}function cH(t){return aj(t).then((e=>e.syncEngine))}async function lj(t){const e=await aj(t),n=e.eventManager;return n.onListen=WG.bind(null,e.syncEngine),n.onUnlisten=JG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=QG.bind(null,e.syncEngine),n}function uH(t,e,n={}){const r=new bs;return t.asyncQueue.enqueueAndForget((async()=>(function(o,s,a,c,u){const f=new sj({next:v=>{f.Nu(),s.enqueueAndForget((()=>JL(o,p)));const w=v.docs.has(a);!w&&v.fromCache?u.reject(new Pe(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&c&&c.source==="server"?u.reject(new Pe(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(v)},error:v=>u.reject(v)}),p=new QL(vE(a.path),f,{includeMetadataChanges:!0,Ka:!0});return YL(o,p)})(await lj(t),t.asyncQueue,e,n,r))),r.promise}function dH(t,e,n={}){const r=new bs;return t.asyncQueue.enqueueAndForget((async()=>(function(o,s,a,c,u){const f=new sj({next:v=>{f.Nu(),s.enqueueAndForget((()=>JL(o,p))),v.fromCache&&c.source==="server"?u.reject(new Pe(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(v)},error:v=>u.reject(v)}),p=new QL(a,f,{includeMetadataChanges:!0,Ka:!0});return YL(o,p)})(await lj(t),t.asyncQueue,e,n,r))),r.promise}function fH(t,e){const n=new bs;return t.asyncQueue.enqueueAndForget((async()=>XG(await cH(t),e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hH="ComponentProvider",qI=new Map;function pH(t,e,n,r,i){return new D8(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,cj(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj="firestore.googleapis.com",GI=!0;class HI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Pe(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uj,this.ssl=GI}else this.host=e.host,this.ssl=e.ssl??GI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bq)throw new Pe(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}E8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cj(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Pe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Pe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Pe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class av{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Pe(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new h8;switch(r.type){case"firstParty":return new v8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Pe(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=qI.get(n);r&&(Me(hH,"Removing Datastore"),qI.delete(n),r.terminate())})(this),Promise.resolve()}}function mH(t,e,n,r={}){var u;t=Qi(t,av);const i=ju(e),o=t._getSettings(),s={...o,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(JD(`https://${a}`),QD("Firestore",!0)),o.host!==uj&&o.host!==a&&Eu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:a,ssl:i,emulatorOptions:r};if(!Pa(c,s)&&(t._setSettings(c),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=tr.MOCK_USER;else{f=yB(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Pe(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new tr(v)}t._authCredentials=new p8(new WO(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rc(this.firestore,e,this._query)}}class nn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Aa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}toJSON(){return{type:nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Xf(n,nn._jsonSchema))return new nn(e,r||null,new Ke(Dt.fromString(n.referencePath)))}}nn._jsonSchemaVersion="firestore/documentReference/1.0",nn._jsonSchema={type:un("string",nn._jsonSchemaVersion),referencePath:un("string")};class Aa extends rc{constructor(e,n,r){super(e,n,vE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new Ke(e))}withConverter(e){return new Aa(this.firestore,e,this._path)}}function fr(t,e,...n){if(t=Vt(t),KO("collection","path",e),t instanceof av){const r=Dt.fromString(e,...n);return oI(r),new Aa(t,null,r)}{if(!(t instanceof nn||t instanceof Aa))throw new Pe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dt.fromString(e,...n));return oI(r),new Aa(t.firestore,null,r)}}function rn(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=dE.newId()),KO("doc","path",e),t instanceof av){const r=Dt.fromString(e,...n);return iI(r),new nn(t,null,new Ke(r))}{if(!(t instanceof nn||t instanceof Aa))throw new Pe(ue.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dt.fromString(e,...n));return iI(r),new nn(t.firestore,t instanceof Aa?t.converter:null,new Ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="AsyncQueue";class KI{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $L(this,"async_queue_retry"),this._c=()=>{const r=ox();r&&Me(WI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ox();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ox();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new bs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!$u(e))throw e;Me(WI,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ts("INTERNAL UNHANDLED ERROR: ",YI(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=kE.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&nt(47125,{Pc:YI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function YI(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ic extends av{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new KI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new KI(e),this._firestoreClient=void 0,await e}}}function gH(t,e){const n=typeof t=="object"?t:Z_(),r=typeof t=="string"?t:Mm,i=Zl(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=gB("firestore");o&&mH(i,...o)}return i}function LE(t){if(t._terminated)throw new Pe(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vH(t),t._firestoreClient}function vH(t){var r,i,o,s;const e=t._freezeSettings(),n=pH(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new aH(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pi(Gn.fromBase64String(e))}catch(n){throw new Pe(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pi(Gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xf(e,pi._jsonSchema))return pi.fromBase64String(e.bytes)}}pi._jsonSchemaVersion="firestore/bytes/1.0",pi._jsonSchema={type:un("string",pi._jsonSchemaVersion),bytes:un("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Pe(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Pe(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Pe(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pt(this._lat,e._lat)||pt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Lo._jsonSchemaVersion}}static fromJSON(e){if(Xf(e,Lo._jsonSchema))return new Lo(e.latitude,e.longitude)}}Lo._jsonSchemaVersion="firestore/geoPoint/1.0",Lo._jsonSchema={type:un("string",Lo._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xf(e,Gi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Gi(e.vectorValues);throw new Pe(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gi._jsonSchemaVersion="firestore/vectorValue/1.0",Gi._jsonSchema={type:un("string",Gi._jsonSchemaVersion),vectorValues:un("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH=/^__.*__$/;class xH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ba(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zf(e,this.data,n,this.fieldTransforms)}}class dj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ba(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt(40011,{dataSource:t})}}class FE{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new FE({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return $m(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(fj(this.dataSource)&&yH.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class bH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||iv(e)}createContext(e,n,r,i=!1){return new FE({dataSource:e,methodName:n,targetDoc:r,path:Bn.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cv(t){const e=t._freezeSettings(),n=iv(t._databaseId);return new bH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hj(t,e,n,r,i,o={}){const s=t.createContext(o.merge||o.mergeFields?2:0,e,n,i);VE("Data must be an object, but it was:",s,r);const a=pj(r,s);let c,u;if(o.merge)c=new Wr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const f=[];for(const p of o.mergeFields){const v=$l(e,p,n);if(!s.contains(v))throw new Pe(ue.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);vj(f,v)||f.push(v)}c=new Wr(f),u=s.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,u=s.fieldTransforms;return new xH(new Pr(a),c,u)}class uv extends lv{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uv}}class UE extends lv{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Pf(e.serializer,xL(e.serializer,this.Vc));return new lq(e.path,n)}isEqual(e){return e instanceof UE&&this.Vc===e.Vc}}function wH(t,e,n,r){const i=t.createContext(1,e,n);VE("Data must be an object, but it was:",i,r);const o=[],s=Pr.empty();$a(r,((c,u)=>{const f=gj(e,c,n);u=Vt(u);const p=i.childContextForFieldPath(f);if(u instanceof uv)o.push(f);else{const v=rh(u,p);v!=null&&(o.push(f),s.set(f,v))}}));const a=new Wr(o);return new dj(s,a,i.fieldTransforms)}function _H(t,e,n,r,i,o){const s=t.createContext(1,e,n),a=[$l(e,r,n)],c=[i];if(o.length%2!=0)throw new Pe(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)a.push($l(e,o[v])),c.push(o[v+1]);const u=[],f=Pr.empty();for(let v=a.length-1;v>=0;--v)if(!vj(u,a[v])){const w=a[v];let E=c[v];E=Vt(E);const S=s.childContextForFieldPath(w);if(E instanceof uv)u.push(w);else{const _=rh(E,S);_!=null&&(u.push(w),f.set(w,_))}}const p=new Wr(u);return new dj(f,p,s.fieldTransforms)}function EH(t,e,n,r=!1){return rh(n,t.createContext(r?4:3,e))}function rh(t,e){if(mj(t=Vt(t)))return VE("Unsupported field value:",e,t),pj(t,e);if(t instanceof lv)return(function(r,i){if(!fj(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const o=[];let s=0;for(const a of r){let c=rh(a,i.childContextForArray(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ut.fromDate(r);return{timestampValue:jm(i.serializer,o)}}if(r instanceof Ut){const o=new Ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jm(i.serializer,o)}}if(r instanceof Lo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pi)return{bytesValue:PL(i.serializer,r._byteString)};if(r instanceof nn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:_E(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gi)return(function(s,a){const c=s instanceof Gi?s.toArray():s;return{mapValue:{fields:{[rL]:{stringValue:iL},[Dm]:{arrayValue:{values:c.map((f=>{if(typeof f!="number")throw a.createError("VectorValues must only contain numeric values.");return yE(a.serializer,f)}))}}}}}})(r,i);if(LL(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Yg(r)}`)})(t,e)}function pj(t,e){const n={};return QO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$a(t,((r,i)=>{const o=rh(i,e.childContextForField(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function mj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ut||t instanceof Lo||t instanceof pi||t instanceof nn||t instanceof lv||t instanceof Gi||LL(t))}function VE(t,e,n){if(!mj(n)||!YO(n)){const r=Yg(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function $l(t,e,n){if((e=Vt(e))instanceof jE)return e._internalPath;if(typeof e=="string")return gj(t,e);throw $m("Field path arguments must be of type string or ",t,!1,void 0,n)}const SH=new RegExp("[~\\*/\\[\\]]");function gj(t,e,n){if(e.search(SH)>=0)throw $m(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jE(...e.split("."))._internalPath}catch{throw $m(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $m(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Pe(ue.INVALID_ARGUMENT,a+t+c)}function vj(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH{convertValue(e,n="none"){switch(Ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ra(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw nt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $a(e,((i,o)=>{r[i]=this.convertValue(o,n)})),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[Dm].arrayValue)==null?void 0:i.values)==null?void 0:o.map((s=>tn(s.doubleValue)));return new Gi(n)}convertGeoPoint(e){return new Lo(tn(e.latitude),tn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ef(e));default:return null}}convertTimestamp(e){const n=ka(e);return new Ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Dt.fromString(e);Tt(OL(r),9688,{name:e});const i=new Sf(r.get(1),r.get(3)),o=new Ke(r.popFirst(5));return i.isEqual(n)||Ts(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj extends TH{constructor(e){super(),this.firestore=e}convertBytes(e){return new pi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,n)}}function xj(t){return new UE("increment",t)}const JI="@firebase/firestore",QI="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field($l("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AH extends bj{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Pe(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $E{}class wj extends $E{}function Vo(t,e,...n){let r=[];e instanceof $E&&r.push(e),r=r.concat(n),(function(o){const s=o.filter((c=>c instanceof BE)).length,a=o.filter((c=>c instanceof dv)).length;if(s>1||s>0&&a>0)throw new Pe(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class dv extends wj{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new dv(e,n,r)}_apply(e){const n=this._parse(e);return _j(e._query,n),new rc(e.firestore,e.converter,gw(e._query,n))}_parse(e){const n=cv(e.firestore);return(function(o,s,a,c,u,f,p){let v;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Pe(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){ZI(p,f);const E=[];for(const S of p)E.push(XI(c,o,S));v={arrayValue:{values:E}}}else v=XI(c,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||ZI(p,f),v=EH(a,s,p,f==="in"||f==="not-in");return cn.create(u,f,v)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zi(t,e,n){const r=e,i=$l("where",t);return dv._create(i,r,n)}class BE extends $E{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new BE(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Xi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)_j(s,c),s=gw(s,c)})(e._query,n),new rc(e.firestore,e.converter,gw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zE extends wj{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zE(e,n)}_apply(e){const n=(function(i,o,s){if(i.startAt!==null)throw new Pe(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Pe(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Af(o,s)})(e._query,this._field,this._direction);return new rc(e.firestore,e.converter,X8(e._query,n))}}function fv(t,e="asc"){const n=e,r=$l("orderBy",t);return zE._create(r,n)}function XI(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new Pe(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fL(e)&&n.indexOf("/")!==-1)throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Dt.fromString(n));if(!Ke.isDocumentKey(r))throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hI(t,new Ke(r))}if(n instanceof nn)return hI(t,n._key);throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yg(n)}.`)}function ZI(t,e){if(!Array.isArray(t)||t.length===0)throw new Pe(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _j(t,e){const n=(function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Pe(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Pe(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Ej(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class af{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ml extends bj{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($l("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Pe(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ml._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ml._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ml._jsonSchema={type:un("string",Ml._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};class pm extends Ml{data(e={}){return super.data(e)}}class mu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new af(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new pm(this._firestore,this._userDataWriter,r.key,r,new af(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Pe(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((a=>{const c=new pm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new af(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>o||a.type!==3)).map((a=>{const c=new pm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new af(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:IH(a.type),doc:c,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Pe(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=mu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function IH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mu._jsonSchemaVersion="firestore/querySnapshot/1.0",mu._jsonSchema={type:un("string",mu._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){t=Qi(t,nn);const e=Qi(t.firestore,ic),n=LE(e);return uH(n,t._key).then((r=>PH(e,t,r)))}function Zi(t){t=Qi(t,rc);const e=Qi(t.firestore,ic),n=LE(e),r=new yj(e);return CH(t._query),dH(n,t._query).then((i=>new mu(e,r,t,i)))}function hv(t,e,n){t=Qi(t,nn);const r=Qi(t.firestore,ic),i=Ej(t.converter,e),o=cv(r);return gv(r,[hj(o,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,yi.none())])}function Hi(t,e,n,...r){t=Qi(t,nn);const i=Qi(t.firestore,ic),o=cv(i);let s;return s=typeof(e=Vt(e))=="string"||e instanceof jE?_H(o,"updateDoc",t._key,e,n,r):wH(o,"updateDoc",t._key,e),gv(i,[s.toMutation(t._key,yi.exists(!0))])}function pv(t){return gv(Qi(t.firestore,ic),[new xE(t._key,yi.none())])}function mv(t,e){const n=Qi(t.firestore,ic),r=rn(t),i=Ej(t.converter,e),o=cv(t.firestore);return gv(n,[hj(o,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,yi.exists(!1))]).then((()=>r))}function gv(t,e){const n=LE(t);return fH(n,e)}function PH(t,e,n){const r=n.docs.get(e._key),i=new yj(t);return new Ml(t,i,e._key,r,new af(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){f8(Fu),Fo(new Ji("firestore",((r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new ic(new m8(r.getProvider("auth-internal")),new y8(s,r.getProvider("app-check-internal")),O8(s,i),s);return o={useFetchStreams:n,...o},a._setSettings(o),a}),"PUBLIC").setMultipleInstances(!0)),vi(JI,QI,e),vi(JI,QI,"esm2020")})();const Sj="@firebase/installations",qE="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=1e4,Aj=`w:${qE}`,Cj="FIS_v2",NH="https://firebaseinstallations.googleapis.com/v1",kH=3600*1e3,RH="installations",MH="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DH={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},zl=new Xl(RH,MH,DH);function Ij(t){return t instanceof to&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj({projectId:t}){return`${NH}/projects/${t}/installations`}function Nj(t){return{token:t.token,requestStatus:2,expiresIn:LH(t.expiresIn),creationTime:Date.now()}}async function kj(t,e){const r=(await e.json()).error;return zl.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Rj({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function OH(t,{refreshToken:e}){const n=Rj(t);return n.append("Authorization",jH(e)),n}async function Mj(t){const e=await t();return e.status>=500&&e.status<600?t():e}function LH(t){return Number(t.replace("s","000"))}function jH(t){return`${Cj} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FH({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Pj(t),i=Rj(t),o=e.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const s={fid:n,authVersion:Cj,appId:t.appId,sdkVersion:Aj},a={method:"POST",headers:i,body:JSON.stringify(s)},c=await Mj(()=>fetch(r,a));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Nj(u.authToken)}}else throw await kj("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UH(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VH=/^[cdef][\w-]{21}$/,Cw="";function $H(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=BH(t);return VH.test(n)?n:Cw}catch{return Cw}}function BH(t){return UH(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=new Map;function Lj(t,e){const n=vv(t);jj(n,e),zH(n,e)}function jj(t,e){const n=Oj.get(t);if(n)for(const r of n)r(e)}function zH(t,e){const n=qH();n&&n.postMessage({key:t,fid:e}),GH()}let Cl=null;function qH(){return!Cl&&"BroadcastChannel"in self&&(Cl=new BroadcastChannel("[Firebase] FID Change"),Cl.onmessage=t=>{jj(t.data.key,t.data.fid)}),Cl}function GH(){Oj.size===0&&Cl&&(Cl.close(),Cl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HH="firebase-installations-database",WH=1,ql="firebase-installations-store";let ax=null;function GE(){return ax||(ax=tO(HH,WH,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ql)}}})),ax}async function Bm(t,e){const n=vv(t),i=(await GE()).transaction(ql,"readwrite"),o=i.objectStore(ql),s=await o.get(n);return await o.put(e,n),await i.done,(!s||s.fid!==e.fid)&&Lj(t,e.fid),e}async function Fj(t){const e=vv(t),r=(await GE()).transaction(ql,"readwrite");await r.objectStore(ql).delete(e),await r.done}async function yv(t,e){const n=vv(t),i=(await GE()).transaction(ql,"readwrite"),o=i.objectStore(ql),s=await o.get(n),a=e(s);return a===void 0?await o.delete(n):await o.put(a,n),await i.done,a&&(!s||s.fid!==a.fid)&&Lj(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HE(t){let e;const n=await yv(t.appConfig,r=>{const i=KH(r),o=YH(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===Cw?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function KH(t){const e=t||{fid:$H(),registrationStatus:0};return Uj(e)}function YH(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(zl.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=JH(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:QH(t)}:{installationEntry:e}}async function JH(t,e){try{const n=await FH(t,e);return Bm(t.appConfig,n)}catch(n){throw Ij(n)&&n.customData.serverCode===409?await Fj(t.appConfig):await Bm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function QH(t){let e=await eP(t.appConfig);for(;e.registrationStatus===1;)await Dj(100),e=await eP(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await HE(t);return r||n}return e}function eP(t){return yv(t,e=>{if(!e)throw zl.create("installation-not-found");return Uj(e)})}function Uj(t){return XH(t)?{fid:t.fid,registrationStatus:0}:t}function XH(t){return t.registrationStatus===1&&t.registrationTime+Tj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZH({appConfig:t,heartbeatServiceProvider:e},n){const r=eW(t,n),i=OH(t,n),o=e.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const s={installation:{sdkVersion:Aj,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(s)},c=await Mj(()=>fetch(r,a));if(c.ok){const u=await c.json();return Nj(u)}else throw await kj("Generate Auth Token",c)}function eW(t,{fid:e}){return`${Pj(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WE(t,e=!1){let n;const r=await yv(t.appConfig,o=>{if(!Vj(o))throw zl.create("not-registered");const s=o.authToken;if(!e&&rW(s))return o;if(s.requestStatus===1)return n=tW(t,e),o;{if(!navigator.onLine)throw zl.create("app-offline");const a=oW(o);return n=nW(t,a),a}});return n?await n:r.authToken}async function tW(t,e){let n=await tP(t.appConfig);for(;n.authToken.requestStatus===1;)await Dj(100),n=await tP(t.appConfig);const r=n.authToken;return r.requestStatus===0?WE(t,e):r}function tP(t){return yv(t,e=>{if(!Vj(e))throw zl.create("not-registered");const n=e.authToken;return sW(n)?{...e,authToken:{requestStatus:0}}:e})}async function nW(t,e){try{const n=await ZH(t,e),r={...e,authToken:n};return await Bm(t.appConfig,r),n}catch(n){if(Ij(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Fj(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Bm(t.appConfig,r)}throw n}}function Vj(t){return t!==void 0&&t.registrationStatus===2}function rW(t){return t.requestStatus===2&&!iW(t)}function iW(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+kH}function oW(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function sW(t){return t.requestStatus===1&&t.requestTime+Tj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aW(t){const e=t,{installationEntry:n,registrationPromise:r}=await HE(e);return r?r.catch(console.error):WE(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lW(t,e=!1){const n=t;return await cW(n),(await WE(n,e)).token}async function cW(t){const{registrationPromise:e}=await HE(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uW(t){if(!t||!t.options)throw lx("App Configuration");if(!t.name)throw lx("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw lx(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function lx(t){return zl.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="installations",dW="installations-internal",fW=t=>{const e=t.getProvider("app").getImmediate(),n=uW(e),r=Zl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},hW=t=>{const e=t.getProvider("app").getImmediate(),n=Zl(e,$j).getImmediate();return{getId:()=>aW(n),getToken:i=>lW(n,i)}};function pW(){Fo(new Ji($j,fW,"PUBLIC")),Fo(new Ji(dW,hW,"PRIVATE"))}pW();vi(Sj,qE);vi(Sj,qE,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="analytics",mW="firebase_id",gW="origin",vW=60*1e3,yW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",KE="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new Gg("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Yr=new Xl("analytics","Analytics",xW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bW(t){if(!t.startsWith(KE)){const e=Yr.create("invalid-gtag-resource",{gtagURL:t});return hr.warn(e.message),""}return t}function Bj(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function wW(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function _W(t,e){const n=wW("firebase-js-sdk-policy",{createScriptURL:bW}),r=document.createElement("script"),i=`${KE}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function EW(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function SW(t,e,n,r,i,o){const s=r[i];try{if(s)await e[s];else{const c=(await Bj(n)).find(u=>u.measurementId===i);c&&await e[c.appId]}}catch(a){hr.error(a)}t("config",i,o)}async function TW(t,e,n,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=await Bj(n);for(const c of s){const u=a.find(p=>p.measurementId===c),f=u&&e[u.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,i||{})}catch(o){hr.error(o)}}function AW(t,e,n,r){async function i(o,...s){try{if(o==="event"){const[a,c]=s;await TW(t,e,n,a,c)}else if(o==="config"){const[a,c]=s;await SW(t,e,n,r,a,c)}else if(o==="consent"){const[a,c]=s;t("consent",a,c)}else if(o==="get"){const[a,c,u]=s;t("get",a,c,u)}else if(o==="set"){const[a]=s;t("set",a)}else t(o,...s)}catch(a){hr.error(a)}}return i}function CW(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=AW(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function IW(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(KE)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PW=30,NW=1e3;class kW{constructor(e={},n=NW){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const zj=new kW;function RW(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function MW(t){var s;const{appId:e,apiKey:n}=t,r={method:"GET",headers:RW(n)},i=yW.replace("{app-id}",e),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();(s=c.error)!=null&&s.message&&(a=c.error.message)}catch{}throw Yr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function DW(t,e=zj,n){const{appId:r,apiKey:i,measurementId:o}=t.options;if(!r)throw Yr.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Yr.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new jW;return setTimeout(async()=>{a.abort()},vW),qj({appId:r,apiKey:i,measurementId:o},s,a,e)}async function qj(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=zj){var a;const{appId:o,measurementId:s}=t;try{await OW(r,e)}catch(c){if(s)return hr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:s};throw c}try{const c=await MW(t);return i.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!LW(u)){if(i.deleteThrottleMetadata(o),s)return hr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:s};throw c}const f=Number((a=u==null?void 0:u.customData)==null?void 0:a.httpStatus)===503?AC(n,i.intervalMillis,PW):AC(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return i.setThrottleMetadata(o,p),hr.debug(`Calling attemptFetch again in ${f} millis`),qj(t,p,r,i)}}function OW(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(Yr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function LW(t){if(!(t instanceof to)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class jW{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function FW(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const o=await e,s={...r,send_to:o};t("event",n,s)}}async function UW(t,e,n,r){if(r&&r.global){const i={};for(const o of Object.keys(n))i[`user_properties.${o}`]=n[o];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VW(){if(J_())try{await Q_()}catch(t){return hr.warn(Yr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return hr.warn(Yr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function $W(t,e,n,r,i,o,s){const a=DW(t);a.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&hr.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>hr.error(v)),e.push(a);const c=VW().then(v=>{if(v)return r.getId()}),[u,f]=await Promise.all([a,c]);IW(o)||_W(o,u.measurementId),i("js",new Date);const p=(s==null?void 0:s.config)??{};return p[gW]="firebase",p.update=!0,f!=null&&(p[mW]=f),i("config",u.measurementId,p),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e){this.app=e}_delete(){return delete gu[this.app.options.appId],Promise.resolve()}}let gu={},nP=[];const rP={};let cx="dataLayer",zW="gtag",iP,YE,oP=!1;function qW(){const t=[];if(Y_()&&t.push("This is a browser extension environment."),XD()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Yr.create("invalid-analytics-context",{errorInfo:e});hr.warn(n.message)}}function GW(t,e,n){qW();const r=t.options.appId;if(!r)throw Yr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)hr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Yr.create("no-api-key");if(gu[r]!=null)throw Yr.create("already-exists",{id:r});if(!oP){EW(cx);const{wrappedGtag:o,gtagCore:s}=CW(gu,nP,rP,cx,zW);YE=o,iP=s,oP=!0}return gu[r]=$W(t,nP,rP,e,iP,cx,n),new BW(t)}function HW(t=Z_()){t=Vt(t);const e=Zl(t,zm);return e.isInitialized()?e.getImmediate():WW(t)}function WW(t,e={}){const n=Zl(t,zm);if(n.isInitialized()){const i=n.getImmediate();if(Pa(e,n.getOptions()))return i;throw Yr.create("already-initialized")}return n.initialize({options:e})}async function KW(){if(Y_()||!XD()||!J_())return!1;try{return await Q_()}catch{return!1}}function YW(t,e,n){t=Vt(t),UW(YE,gu[t.app.options.appId],e,n).catch(r=>hr.error(r))}function JW(t,e,n,r){t=Vt(t),FW(YE,gu[t.app.options.appId],e,n,r).catch(i=>hr.error(i))}const sP="@firebase/analytics",aP="0.10.19";function QW(){Fo(new Ji(zm,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return GW(r,i,n)},"PUBLIC")),Fo(new Ji("analytics-internal",t,"PRIVATE")),vi(sP,aP),vi(sP,aP,"esm2020");function t(e){try{const n=e.getProvider(zm).getImmediate();return{logEvent:(r,i,o)=>JW(n,r,i,o),setUserProperties:(r,i)=>YW(n,r,i)}}catch(n){throw Yr.create("interop-component-reg-failed",{reason:n})}}}QW();const XW={apiKey:"AIzaSyAch6npJL9rfD9aBr8B2q5Ec8VAVvy_rWk",authDomain:"muhll-ca343.firebaseapp.com",projectId:"muhll-ca343",storageBucket:"muhll-ca343.firebasestorage.app",messagingSenderId:"393991777150",appId:"1:393991777150:web:e049dd17b3c2794784e12f",measurementId:"G-P8XSBNDX81"},JE=nO(XW),Pn=l8(JE),vt=gH(JE);typeof window<"u"&&KW().then(t=>t?HW(JE):null);const Gj="adelawad1@gmail.com",qu={ar:{title:" ",subtitle:"       ",searchPlaceholder:"    ...",searchBtn:"  ",analyzing:"      ...",resultsTitle:"   ",marketStats:"  ",competitorTable:"  ",swotAnalysis:"   (SWOT)",recommendations:"  ",priceTrend:"  ",store:"",price:" (.)",rating:"",shipping:" ()",status:"",avgPrice:" ",demand:" ",saturation:" ",liveBadge:"    2025      ",sourcesTitle:"  ",verdictTitle:"   ",marketDeepDive:"  ",marketingSection:"  ",opsSection:"  ",strategySection:"  ",login:" ",logout:" ",signup:"  ",email:" ",password:" ",alreadyHaveAccount:"    ",dontHaveAccount:"    ",adminBadge:"  - ",welcome:"    ",authRequired:"       ",pricingTitle:" ",pricingSubtitle:"    ",subscribeNow:" ",manageUsers:"  ",userEmail:" ",userPlan:" ",userStatus:" ",actions:"",noAccess:"       .",forgotPassword:"  ",resetSent:"        .",emailInUse:"    .      .",wrongPassword:"      .",getKey:"  ",profile:" ",updateProfile:" ",displayName:" ",saveChanges:" ",changePassword:"  ",newPassword:"  ",deleteAccount:"  ",deleteAccountWarning:" :      .      .",reauthRequired:"       .",verdicts:{GO:" (  )","NO-GO":"       ( )","PROCEED WITH CAUTION":"  (  )"},levels:{High:"",Medium:"",Low:""},monthlyDemand:" ",demandScore:" ",stability:"",peakMonths:" ",lowMonths:" ",unitsEstimated:" ",overallStrength:" ",volatilityLevel:" ",estimatedAtExpectedSales:"    ",startupInvestment:" ",easeOfEntry:" ",demandAnalysis:" ",marketDemandEvaluation:"   ",activeCompetitors:" ",strengthIndex:" ",entryDifficulty:" ",marketGaps:" ",opportunitiesIdentified:" ",competitorsTable:" ",averageSalePrice:"  ",profitMargin:" ",breakEvenPoint:" ",profitabilityScore:" ",monthlyRevenue:" ",revenueStreams:" ",profitDrivers:" ",successScore:" ",probabilityOfSuccess:" ",riskScore:" ",beginnerFriendly:" ",capitalRequired:"  ",swotStrengths:" ",swotWeaknesses:" ",swotOpportunities:"",swotThreats:"",demandTrend:" ",seasonalityAnalysis:" ",geographicDistribution:" ",competitorAnalysis:" ",competitorIntelligence:"   ",marketGapsOpportunities:"  ",profitabilityAnalysis:" ",revenueAndProfit:"    ",priceSensitivity:" ",costStructure:" ",days:"",sar:".",strengthRating:" ",pricingViability:" ",expectedProfitMargins:"  ",supplyChainEase:"  ",paymentMethods:" ",deliveryMethods:" ",decisionMetrics:" ",strategicDecisionFramework:"   ",timeToProfit:" ",estimatedBreakEven:"   ",goWithConfidence:" -  ",cautionConsiderRisks:" -    ",noGoNotRecommended:"      ",basedOnAnalysis:"         ",growthOpportunities:" ",identifiedGaps:"    ",noOpportunities:"   ",type:"",uniqueSellingProposition:" ",saturationRisk:" ",imitationRisk:" ",directCompetitors:" ",buyerIntentAnalysis:"  ",buyerIntentDescription:"    ",intentScore:"  ",intentLevel:" ",searchIntentType:"  ",unlockSearchEngine:"  ",searchHistoryTitle:"   ",searchHistoryQuestion:"     ",tryFreeTrialDescription:" 3    .     !",reviewPreviousSearches:"  ",useFreeSearches:"  ",noSearchHistory:"    ",buyerJourneyStage:"  ",conversionProbability:" ",keywordAnalysis:"  ",transactionalKeywords:" ",informationalKeywords:" ",brandKeywords:"  ",insights:" ",growthScenarios:" ",growthScenariosDescription:"   ",conservativeScenario:" ",moderateScenario:" ",optimisticScenario:" ",recommendedScenario:"  ",monthlyProfit:" ",growthRate:" ",timeframe:" ",assumptions:"",scalabilityFactors:"  ",executiveSummary:" ",executiveSummaryDescription:"     ",onePageSummary:"",keyFindings:" ",criticalMetrics:" ",marketSize:" ",investmentRequired:" ",initialInvestment:" ",monthlyInvestment:" ",breakEven:"",strategicRecommendation:" ",nextSteps:" ",transactional:"",informational:"",mixed:""},en:{title:"Tahleel Plus",subtitle:"Deep Strategic Analysis for Global E-commerce Markets",searchPlaceholder:"Search by product name or link...",searchBtn:"Deep Data Analysis",analyzing:"Conducting comprehensive market scan and live analysis...",resultsTitle:"Comprehensive Strategic Analysis Report",marketStats:"Digital Market Statistics",competitorTable:"Direct Competitor Map",swotAnalysis:"Strategic SWOT Analysis",recommendations:"Proposed Action Plan",priceTrend:"Price & Demand Dynamics",store:"Store",price:"Price (SAR)",rating:"Rating",shipping:"Shipping (Days)",status:"Status",avgPrice:"Avg Price",demand:"Demand Level",saturation:"Market Saturation",liveBadge:"Live Market Analysis 2025  Real-time data from search engine",sourcesTitle:"Verified Reference Data",verdictTitle:"Final Market Entry Recommendation",marketDeepDive:"Feasibility & Demand Analysis",marketingSection:"Marketing & Audience Strategy",opsSection:"Logistics & Expected Financials",strategySection:"Competitive Edge & Risks",login:"Login",logout:"Logout",signup:"Create Account",email:"Email Address",password:"Password",alreadyHaveAccount:"Already have an account? Login",dontHaveAccount:"Don't have an account? Sign Up",adminBadge:"Admin Dashboard",welcome:"Welcome to Tahleel Plus",authRequired:"Please login to access the advanced search engine",pricingTitle:"Subscription Plans",pricingSubtitle:"Select the perfect plan for your business growth",subscribeNow:"Subscribe Now",manageUsers:"User & Subscription Management",userEmail:"User Email",userPlan:"Current Plan",userStatus:"Account Status",actions:"Actions",noAccess:"Sorry, you need to upgrade your plan to access deep analysis.",forgotPassword:"Forgot Password?",resetSent:"A password reset link has been sent to your email.",emailInUse:"This email is already in use. Please login instead.",wrongPassword:"Invalid email or password.",getKey:"Get Key",profile:"Profile Settings",updateProfile:"Update Profile",displayName:"Full Name",saveChanges:"Save Changes",changePassword:"Change Password",newPassword:"New Password",deleteAccount:"Delete Account",deleteAccountWarning:" Warning: All your data and reports will be permanently deleted. This action cannot be undone.",reauthRequired:"This action requires you to re-authenticate for security.",verdicts:{GO:"GO (High Potential)","NO-GO":"NO-GO (High Risk)","PROCEED WITH CAUTION":"PROCEED WITH CAUTION"},levels:{High:"High",Medium:"Medium",Low:"Low"},monthlyDemand:"Monthly Demand",demandScore:"Demand Score",stability:"Stability",peakMonths:"Peak Months",lowMonths:"Low Months",unitsEstimated:"units estimated",overallStrength:"overall strength",volatilityLevel:"volatility level",estimatedAtExpectedSales:"estimated at expected sales volume",startupInvestment:"startup investment",easeOfEntry:"ease of entry",demandAnalysis:"Demand Analysis",marketDemandEvaluation:"Comprehensive market demand evaluation",activeCompetitors:"Active Competitors",strengthIndex:"Strength Index",entryDifficulty:"Entry Difficulty",marketGaps:"Market Gaps",opportunitiesIdentified:"opportunities identified",competitorsTable:"Competitors Table",averageSalePrice:"Average Sale Price",profitMargin:"Profit Margin",breakEvenPoint:"Break Even Point",profitabilityScore:"Profitability Score",monthlyRevenue:"Monthly Revenue",revenueStreams:"Revenue Streams",profitDrivers:"Profit Drivers",successScore:"Success Score",riskScore:"Risk Score",beginnerFriendly:"Beginner Friendly",capitalRequired:"Capital Required",swotStrengths:"Strengths",swotWeaknesses:"Weaknesses",swotOpportunities:"Opportunities",swotThreats:"Threats",demandTrend:"Demand Trend",seasonalityAnalysis:"Seasonality Analysis",geographicDistribution:"Geographic Distribution",competitorAnalysis:"Competitor Analysis",competitorIntelligence:"Strategic competitor intelligence and market positioning",marketGapsOpportunities:"Market Gaps & Opportunities",profitabilityAnalysis:"Profitability Analysis",revenueAndProfit:"Revenue potential and profit metrics evaluation",priceSensitivity:"Price Sensitivity",costStructure:"Cost Structure",low:"Low",high:"High",days:"days",sar:"SAR",strengthRating:"strength rating",pricingViability:"Pricing Viability",expectedProfitMargins:"Expected Profit Margins",supplyChainEase:"Supply Chain Ease",paymentMethods:"Payment Methods",deliveryMethods:"Delivery Methods",decisionMetrics:"Decision Metrics",strategicDecisionFramework:"Strategic Investment Decision Framework",timeToProfit:"Time to Profit",estimatedBreakEven:"Estimated Break-Even Timeline",goWithConfidence:"GO - Proceed with Confidence",cautionConsiderRisks:"CAUTION - Consider Risks",noGoNotRecommended:"NO-GO - Not Recommended",basedOnAnalysis:"This recommendation is based on comprehensive market, competition, and profitability analysis",growthOpportunities:"Growth Opportunities",identifiedGaps:"Identified market gaps and expansion strategies",noOpportunities:"No specific opportunities identified",type:"Type",uniqueSellingProposition:"Unique Selling Proposition",saturationRisk:"Saturation Risk",imitationRisk:"Imitation Risk",directCompetitors:"Direct Competitors",buyerIntentAnalysis:"Buyer Intent Analysis",buyerIntentDescription:"Customer behavior and purchase intent analysis",intentScore:"Intent Score",intentLevel:"Intent Level",searchIntentType:"Search Intent Type",buyerJourneyStage:"Buyer Journey Stage",conversionProbability:"Conversion Probability",keywordAnalysis:"Keyword Analysis",transactionalKeywords:"Transactional Keywords",informationalKeywords:"Informational Keywords",brandKeywords:"Brand Keywords",insights:"Insights & Recommendations",growthScenarios:"Growth Scenarios",growthScenariosDescription:"Growth forecasts and revenue potential",conservativeScenario:"Conservative Scenario",moderateScenario:"Moderate Scenario",optimisticScenario:"Optimistic Scenario",recommendedScenario:"Recommended Scenario",monthlyProfit:"Monthly Profit",growthRate:"Growth Rate",timeframe:"Timeframe",assumptions:"Assumptions",scalabilityFactors:"Scalability Factors",executiveSummary:"Executive Summary",executiveSummaryDescription:"Comprehensive one-page executive summary",onePageSummary:"Summary",keyFindings:"Key Findings",criticalMetrics:"Critical Metrics",marketSize:"Market Size",investmentRequired:"Investment Required",initialInvestment:"Initial Investment",monthlyInvestment:"Monthly Investment",breakEven:"Break Even",strategicRecommendation:"Strategic Recommendation",nextSteps:"Next Steps",transactional:"Transactional",informational:"Informational",mixed:"Mixed"}},ux={ar:["    ...","   ...","   ...","  ...","   ...","   ...","    ...","   ...","   ...","   ...","  ...","    ...","  ...","  ...","  ..."],en:["Extracting price data from platforms...","Gathering ratings and reviews information...","Analyzing sales figures and demand patterns...","Processing competitor data...","Calculating average prices and margins...","Extracting demand seasonality trends...","Evaluating product market strength...","Computing potential growth scenarios...","Analyzing consumer behavior and purchasing...","Extracting available growth opportunities...","Evaluating risks and challenges...","Calculating expected return on investment...","Formulating final recommendations...","Compiling results and data...","Completing comprehensive analysis..."]},Pu=[{code:"SA",nameAr:"  ",nameEn:"Saudi Arabia",googleCode:"SA"},{code:"EG",nameAr:"",nameEn:"Egypt",googleCode:"EG"},{code:"AE",nameAr:"  ",nameEn:"United Arab Emirates",googleCode:"AE"},{code:"JO",nameAr:"",nameEn:"Jordan",googleCode:"JO"},{code:"KW",nameAr:"",nameEn:"Kuwait",googleCode:"KW"},{code:"QA",nameAr:"",nameEn:"Qatar",googleCode:"QA"},{code:"BH",nameAr:"",nameEn:"Bahrain",googleCode:"BH"},{code:"OM",nameAr:"",nameEn:"Oman",googleCode:"OM"},{code:"LB",nameAr:"",nameEn:"Lebanon",googleCode:"LB"},{code:"SY",nameAr:"",nameEn:"Syria",googleCode:"SY"},{code:"IQ",nameAr:"",nameEn:"Iraq",googleCode:"IQ"},{code:"MA",nameAr:"",nameEn:"Morocco",googleCode:"MA"},{code:"TN",nameAr:"",nameEn:"Tunisia",googleCode:"TN"},{code:"DZ",nameAr:"",nameEn:"Algeria",googleCode:"DZ"},{code:"IN",nameAr:"",nameEn:"India",googleCode:"IN"},{code:"PK",nameAr:"",nameEn:"Pakistan",googleCode:"PK"},{code:"BD",nameAr:"",nameEn:"Bangladesh",googleCode:"BD"},{code:"SG",nameAr:"",nameEn:"Singapore",googleCode:"SG"},{code:"MY",nameAr:"",nameEn:"Malaysia",googleCode:"MY"},{code:"TH",nameAr:"",nameEn:"Thailand",googleCode:"TH"},{code:"PH",nameAr:"",nameEn:"Philippines",googleCode:"PH"},{code:"ID",nameAr:"",nameEn:"Indonesia",googleCode:"ID"},{code:"VN",nameAr:"",nameEn:"Vietnam",googleCode:"VN"},{code:"GB",nameAr:" ",nameEn:"United Kingdom",googleCode:"GB"},{code:"DE",nameAr:"",nameEn:"Germany",googleCode:"DE"},{code:"FR",nameAr:"",nameEn:"France",googleCode:"FR"},{code:"ES",nameAr:"",nameEn:"Spain",googleCode:"ES"},{code:"IT",nameAr:"",nameEn:"Italy",googleCode:"IT"},{code:"NL",nameAr:"",nameEn:"Netherlands",googleCode:"NL"},{code:"SE",nameAr:"",nameEn:"Sweden",googleCode:"SE"},{code:"CH",nameAr:"",nameEn:"Switzerland",googleCode:"CH"},{code:"AT",nameAr:"",nameEn:"Austria",googleCode:"AT"},{code:"PL",nameAr:"",nameEn:"Poland",googleCode:"PL"},{code:"NG",nameAr:"",nameEn:"Nigeria",googleCode:"NG"},{code:"ZA",nameAr:" ",nameEn:"South Africa",googleCode:"ZA"},{code:"KE",nameAr:"",nameEn:"Kenya",googleCode:"KE"},{code:"US",nameAr:" ",nameEn:"United States",googleCode:"US"},{code:"CA",nameAr:"",nameEn:"Canada",googleCode:"CA"},{code:"MX",nameAr:"",nameEn:"Mexico",googleCode:"MX"},{code:"BR",nameAr:"",nameEn:"Brazil",googleCode:"BR"},{code:"AR",nameAr:"",nameEn:"Argentina",googleCode:"AR"}],Op={SA:{currency:" ",currencyCode:"SAR",language:"",platforms:["","",""," "," "],topStores:[" ","","","",""," ","  ",""," ","","","","VogaCloset","",""],marketChar:"     2030  "},EG:{currency:" ",currencyCode:"EGP",language:"",platforms:["","."," ","",""],topStores:[" ",""," "," ","","",""],marketChar:"       "},AE:{currency:" ",currencyCode:"AED",language:"",platforms:[""," ","",""," "],topStores:[" ","","","","","  ",""],marketChar:"        "},JO:{currency:" ",currencyCode:"JOD",language:"",platforms:["","","",""],topStores:["","","","","   "],marketChar:"     "},KW:{currency:" ",currencyCode:"KWD",language:"",platforms:["","",""," "],topStores:[" ",""," "," ",""],marketChar:"    "},QA:{currency:" ",currencyCode:"QAR",language:"",platforms:["","",""],topStores:[" ",""," ","  "],marketChar:"      "},BH:{currency:" ",currencyCode:"BHD",language:"",platforms:["","",""],topStores:[" ",""," "],marketChar:"     "},OM:{currency:" ",currencyCode:"OMR",language:"",platforms:["",""," "],topStores:[" ","  "," "],marketChar:"     "},LB:{currency:" ",currencyCode:"LBP",language:"",platforms:["","",""],topStores:[""," "],marketChar:"    "},SY:{currency:" ",currencyCode:"SYP",language:"",platforms:[" "," "],topStores:[" "],marketChar:"    "},IQ:{currency:" ",currencyCode:"IQD",language:"",platforms:[" ",""],topStores:[""," "," "],marketChar:"    "},MA:{currency:" ",currencyCode:"MAD",language:"",platforms:["","",""],topStores:[" ","",""],marketChar:"   "},TN:{currency:" ",currencyCode:"TND",language:"",platforms:["","",""],topStores:[" "," "],marketChar:"    "},DZ:{currency:" ",currencyCode:"DZD",language:"",platforms:["",""," "],topStores:[" ",""],marketChar:"   "},IN:{currency:" ",currencyCode:"INR",language:"",platforms:["Amazon.in","Flipkart","Snapdeal","Myntra"],topStores:["Amazon India","Flipkart","Snapdeal","Myntra","Nykaa","Ajio"],marketChar:"     "},PK:{currency:" ",currencyCode:"PKR",language:"",platforms:["Daraz","TCS","Telemart","Alibaba"],topStores:["Daraz","Telemart","Goto.pk","PakStyle"],marketChar:"     "},BD:{currency:" ",currencyCode:"BDT",language:"",platforms:["Daraz","Alibaba","AjkerDeal"],topStores:["Daraz Bangladesh","AjkerDeal","Evaly","Pickaboo"],marketChar:"    "},SG:{currency:" ",currencyCode:"SGD",language:"",platforms:["Lazada","Shopee","Amazon","Carousell"],topStores:["Lazada","Shopee","Amazon Singapore","Qoo10","Carousell"],marketChar:"   "},MY:{currency:" ",currencyCode:"MYR",language:"",platforms:["Lazada","Shopee","Amazon","Mudah"],topStores:["Lazada Malaysia","Shopee Malaysia","Zalora","Mudah"],marketChar:"      "},TH:{currency:" ",currencyCode:"THB",language:"",platforms:["Lazada","Shopee","JD.co.th","Blibli"],topStores:["Lazada Thailand","Shopee Thailand","JD Central","Central Online"],marketChar:"     "},PH:{currency:" ",currencyCode:"PHP",language:"",platforms:["Lazada","Shopee","Zalora","Amazon"],topStores:["Lazada Philippines","Shopee Philippines","Zalora","BeautyMNL"],marketChar:"  "},ID:{currency:" ",currencyCode:"IDR",language:"",platforms:["Tokopedia","Shopee","Lazada","Bukalapak"],topStores:["Tokopedia","Shopee Indonesia","Lazada Indonesia","Bukalapak","Blibli"],marketChar:"     "},VN:{currency:" ",currencyCode:"VND",language:"",platforms:["Shopee","Lazada","Sendo","TikTok Shop"],topStores:["Shopee Vietnam","Lazada Vietnam","Tiki","Sendo"],marketChar:"   "},GB:{currency:" ",currencyCode:"GBP",language:"English",platforms:["Amazon UK","eBay UK","ASOS","Etsy"],topStores:["Amazon UK","eBay UK","ASOS","Argos","John Lewis","Currys"],marketChar:"  "},DE:{currency:"",currencyCode:"EUR",language:"English",platforms:["Amazon.de","eBay","Kaufland","Otto"],topStores:["Amazon Germany","eBay Germany","Otto","Zalando","MediaMarkt"],marketChar:"  "},FR:{currency:"",currencyCode:"EUR",language:"English",platforms:["Amazon.fr","eBay","Cdiscount","Fnac"],topStores:["Amazon France","Cdiscount","Fnac","Veepee","La Redoute"],marketChar:"   "},ES:{currency:"",currencyCode:"EUR",language:"English",platforms:["Amazon.es","eBay","Mercado","Carrefour"],topStores:["Amazon Spain","El Corte Ingls","PcComponentes","Carrefour"],marketChar:"    "},IT:{currency:"",currencyCode:"EUR",language:"English",platforms:["Amazon.it","eBay","Subito","Unieuro"],topStores:["Amazon Italy","eBay Italy","Unieuro","MediaWorld"],marketChar:"   "},NL:{currency:"",currencyCode:"EUR",language:"English",platforms:["Amazon.nl","eBay","Bol.com","Coolblue"],topStores:["Bol.com","Coolblue","Amazon Netherlands","Zalando"],marketChar:"  "},SE:{currency:" ",currencyCode:"SEK",language:"English",platforms:["Amazon.se","eBay","Webhallen","Tradera"],topStores:["Amazon Sweden","CDON","Webhallen","Elgiganten"],marketChar:"    "},CH:{currency:" ",currencyCode:"CHF",language:"English",platforms:["Amazon","Galaxus","Ricardo","Migros"],topStores:["Galaxus","Digitec","Migros","Coop"],marketChar:"   "},AT:{currency:"",currencyCode:"EUR",language:"English",platforms:["Amazon.at","eBay","Willhaben","Alternate"],topStores:["Amazon Austria","Willhaben","MediaMarkt","Conrad"],marketChar:"    "},PL:{currency:" ",currencyCode:"PLN",language:"English",platforms:["Amazon.pl","Allegro","OLX","eBay"],topStores:["Allegro","Amazon Poland","OLX Poland","Ceneo"],marketChar:"     "},NG:{currency:" ",currencyCode:"NGN",language:"English",platforms:["Jumia","Konga","Jiji","OLX"],topStores:["Jumia Nigeria","Konga","Jiji","PayPorte"],marketChar:"    "},ZA:{currency:"  ",currencyCode:"ZAR",language:"English",platforms:["Takealot","Superbalist","Loot","Gumtree"],topStores:["Takealot","Superbalist","Makro","Game"],marketChar:"   "},KE:{currency:" ",currencyCode:"KES",language:"English",platforms:["Jumia","OLX","Kilimall","Sokowatch"],topStores:["Jumia Kenya","Kilimall","Sky.Garden","Masoko"],marketChar:"     "},US:{currency:" ",currencyCode:"USD",language:"English",platforms:["Amazon.com","eBay","Walmart","Target"],topStores:["Amazon","Walmart","eBay","Target","Best Buy","Costco","Home Depot"],marketChar:"    "},CA:{currency:" ",currencyCode:"CAD",language:"English",platforms:["Amazon.ca","eBay","Shopify","Kijiji"],topStores:["Amazon Canada","Walmart Canada","Best Buy Canada","Canadian Tire"],marketChar:"  "},MX:{currency:" ",currencyCode:"MXN",language:"Spanish",platforms:["Mercado Libre","Amazon.mx","OLX","Shopify"],topStores:["Mercado Libre","Amazon Mexico","Liverpool","Palacio de Hierro"],marketChar:"    "},BR:{currency:" ",currencyCode:"BRL",language:"Portuguese",platforms:["Mercado Livre","B2Brazil","Amazon.br","OLX"],topStores:["Mercado Livre","Amazon Brazil","Magazine Luiza","Americanas"],marketChar:"    "},AR:{currency:" ",currencyCode:"ARS",language:"Spanish",platforms:["Mercado Libre","Amazon.ar","OLX","Tiendamia"],topStores:["Mercado Libre","Garbarino","Fravega","Musimundo"],marketChar:"    "}};var ZW={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eK,tK;function nK(){return{geminiUrl:eK,vertexUrl:tK}}function rK(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=nK();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Os{}function Ie(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function y(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const c=t[a];if(Array.isArray(n))for(let u=0;u<c.length;u++){const f=c[u];y(f,e.slice(o+1),n[u])}else for(const u of c)y(u,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const c=t[a];y(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function g(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(a=>g(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function iK(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let a=-1;for(let c=0;c<i.length;c++)if(i[c]==="*"){a=c;break}if(a!==-1&&o.length>a)for(let c=a;c<o.length;c++){const u=o[c];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&s.add(u)}Iw(t,i,o,0,s)}}function Iw(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(const c of a[s])Iw(c,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,a=Object.keys(s).filter(u=>!u.startsWith("_")&&!i.has(u)),c={};for(const u of a)c[u]=s[u];for(const[u,f]of Object.entries(c)){const p=[];for(const v of n.slice(r))v==="*"?p.push(u):p.push(v);y(s,p,f)}for(const u of a)delete s[u]}}else{const s=t;o in s&&Iw(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QE(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oK(t){const e={},n=g(t,["operationName"]);n!=null&&y(e,["operationName"],n);const r=g(t,["resourceName"]);return r!=null&&y(e,["_url","resourceName"],r),e}function sK(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=g(t,["done"]);i!=null&&y(e,["done"],i);const o=g(t,["error"]);o!=null&&y(e,["error"],o);const s=g(t,["response","generateVideoResponse"]);return s!=null&&y(e,["response"],lK(s)),e}function aK(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=g(t,["done"]);i!=null&&y(e,["done"],i);const o=g(t,["error"]);o!=null&&y(e,["error"],o);const s=g(t,["response"]);return s!=null&&y(e,["response"],cK(s)),e}function lK(t){const e={},n=g(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>uK(s))),y(e,["generatedVideos"],o)}const r=g(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const i=g(t,["raiMediaFilteredReasons"]);return i!=null&&y(e,["raiMediaFilteredReasons"],i),e}function cK(t){const e={},n=g(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>dK(s))),y(e,["generatedVideos"],o)}const r=g(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const i=g(t,["raiMediaFilteredReasons"]);return i!=null&&y(e,["raiMediaFilteredReasons"],i),e}function uK(t){const e={},n=g(t,["video"]);return n!=null&&y(e,["video"],vK(n)),e}function dK(t){const e={},n=g(t,["_self"]);return n!=null&&y(e,["video"],yK(n)),e}function fK(t){const e={},n=g(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function hK(t){const e={},n=g(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function pK(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=g(t,["done"]);i!=null&&y(e,["done"],i);const o=g(t,["error"]);o!=null&&y(e,["error"],o);const s=g(t,["response"]);return s!=null&&y(e,["response"],mK(s)),e}function mK(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["parent"]);r!=null&&y(e,["parent"],r);const i=g(t,["documentName"]);return i!=null&&y(e,["documentName"],i),e}function Hj(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=g(t,["done"]);i!=null&&y(e,["done"],i);const o=g(t,["error"]);o!=null&&y(e,["error"],o);const s=g(t,["response"]);return s!=null&&y(e,["response"],gK(s)),e}function gK(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["parent"]);r!=null&&y(e,["parent"],r);const i=g(t,["documentName"]);return i!=null&&y(e,["documentName"],i),e}function vK(t){const e={},n=g(t,["uri"]);n!=null&&y(e,["uri"],n);const r=g(t,["encodedVideo"]);r!=null&&y(e,["videoBytes"],QE(r));const i=g(t,["encoding"]);return i!=null&&y(e,["mimeType"],i),e}function yK(t){const e={},n=g(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const r=g(t,["bytesBase64Encoded"]);r!=null&&y(e,["videoBytes"],QE(r));const i=g(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lP;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(lP||(lP={}));var cP;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(cP||(cP={}));var uP;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(uP||(uP={}));var Ce;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ce||(Ce={}));var dP;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(dP||(dP={}));var fP;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(fP||(fP={}));var hP;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(hP||(hP={}));var pP;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(pP||(pP={}));var mP;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(mP||(mP={}));var gP;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(gP||(gP={}));var vP;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(vP||(vP={}));var yP;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(yP||(yP={}));var xP;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(xP||(xP={}));var bP;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(bP||(bP={}));var wP;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(wP||(wP={}));var _P;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(_P||(_P={}));var EP;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(EP||(EP={}));var SP;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(SP||(SP={}));var TP;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(TP||(TP={}));var AP;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(AP||(AP={}));var CP;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(CP||(CP={}));var qm;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(qm||(qm={}));var IP;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(IP||(IP={}));var PP;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(PP||(PP={}));var NP;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(NP||(NP={}));var Pw;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Pw||(Pw={}));var kP;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(kP||(kP={}));var RP;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(RP||(RP={}));var MP;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(MP||(MP={}));var DP;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(DP||(DP={}));var OP;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(OP||(OP={}));var LP;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(LP||(LP={}));var jP;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(jP||(jP={}));var FP;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(FP||(FP={}));var UP;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(UP||(UP={}));var VP;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(VP||(VP={}));var $P;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})($P||($P={}));var BP;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(BP||(BP={}));var zP;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(zP||(zP={}));var qP;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(qP||(qP={}));var GP;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(GP||(GP={}));var HP;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(HP||(HP={}));var WP;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(WP||(WP={}));var KP;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(KP||(KP={}));var YP;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(YP||(YP={}));var JP;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(JP||(JP={}));var QP;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(QP||(QP={}));var XP;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(XP||(XP={}));var ZP;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(ZP||(ZP={}));var eN;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(eN||(eN={}));var tN;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(tN||(tN={}));var nN;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(nN||(nN={}));var rN;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(rN||(rN={}));var iN;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(iN||(iN={}));var oN;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(oN||(oN={}));var iu;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(iu||(iu={}));class Nw{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Gd{get text(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1;const p=[];for(const v of(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[w,E]of Object.entries(v))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(E!==null||E!==void 0)&&p.push(w);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;f=!0,u+=v.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const f=[];for(const p of(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[v,w]of Object.entries(p))v!=="inlineData"&&(w!==null||w!==void 0)&&f.push(v);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,i,o,s,a,c,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,i,o,s,a,c,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.output}}class sN{}class aN{}class xK{}class bK{}class wK{}class _K{}class lN{}class cN{}class uN{}class EK{}class Gm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Gm;let i;const o=e;return n?i=aK(o):i=sK(o),Object.assign(r,i),r}}class dN{}class fN{}class hN{}class pN{}class SK{}class TK{}class AK{}class XE{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new XE,o=pK(e);return Object.assign(r,o),r}}class CK{}class IK{}class PK{}class mN{}class NK{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,u]of Object.entries(a))c!=="text"&&c!=="thought"&&u!==null&&s.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,c]of Object.entries(s))a!=="inlineData"&&c!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class kK{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ZE{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ZE,o=Hj(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Wj(t,e){const n=wt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Kj(t){return Array.isArray(t)?t.map(e=>Hm(e)):[Hm(t)]}function Hm(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Yj(t){const e=Hm(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Jj(t){const e=Hm(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gN(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Qj(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>gN(e)):[gN(t)]}function kw(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function vN(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function yN(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ir(t){if(t==null)throw new Error("ContentUnion is required");return kw(t)?t:{role:"user",parts:Qj(t)}}function eS(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=ir(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=ir(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ir(n)):[ir(e)]}function xi(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(vN(t)||yN(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ir(t)]}const e=[],n=[],r=kw(t[0]);for(const i of t){const o=kw(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(vN(i)||yN(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:Qj(n)}),e}function RK(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Ce).includes(n[0].toUpperCase())?n[0].toUpperCase():Ce.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Ce).includes(r.toUpperCase())?r.toUpperCase():Ce.TYPE_UNSPECIFIED})}}function vu(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&RK(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Ce).includes(a.toUpperCase())?a.toUpperCase():Ce.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=vu(a);else if(r.includes(s)){const c=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}c.push(vu(u))}e[s]=c}else if(i.includes(s)){const c={};for(const[u,f]of Object.entries(a))c[u]=vu(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=a}return e}function tS(t){return vu(t)}function nS(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function rS(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Gu(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=vu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=vu(e.response));return t}function Hu(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function MK(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Ls(t,e){if(typeof e!="string")throw new Error("name must be a string");return MK(t,e,"cachedContents")}function Xj(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function za(t){return QE(t)}function DK(t){return t!=null&&typeof t=="object"&&"name"in t}function OK(t){return t!=null&&typeof t=="object"&&"video"in t}function LK(t){return t!=null&&typeof t=="object"&&"uri"in t}function Zj(t){var e;let n;if(DK(t)&&(n=t.name),!(LK(t)&&(n=t.uri,n===void 0))&&!(OK(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function e4(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function t4(t){for(const e of["models","tunedModels","publisherModels"])if(jK(t,e))return t[e];return[]}function jK(t,e){return t!==null&&typeof t=="object"&&e in t}function FK(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function UK(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=FK(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function n4(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function VK(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function r4(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Wu(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function i4(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $K(t){const e={},n=g(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const r=g(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>wY(s))),y(e,["inlinedResponses"],o)}const i=g(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),y(e,["inlinedEmbedContentResponses"],o)}return e}function BK(t){const e={},n=g(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const r=g(t,["gcsDestination","outputUriPrefix"]);r!=null&&y(e,["gcsUri"],r);const i=g(t,["bigqueryDestination","outputUri"]);return i!=null&&y(e,["bigqueryUri"],i),e}function zK(t){const e={},n=g(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const r=g(t,["gcsUri"]);r!=null&&y(e,["gcsDestination","outputUriPrefix"],r);const i=g(t,["bigqueryUri"]);if(i!=null&&y(e,["bigqueryDestination","outputUri"],i),g(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(g(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function mm(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["metadata","displayName"]);r!=null&&y(e,["displayName"],r);const i=g(t,["metadata","state"]);i!=null&&y(e,["state"],i4(i));const o=g(t,["metadata","createTime"]);o!=null&&y(e,["createTime"],o);const s=g(t,["metadata","endTime"]);s!=null&&y(e,["endTime"],s);const a=g(t,["metadata","updateTime"]);a!=null&&y(e,["updateTime"],a);const c=g(t,["metadata","model"]);c!=null&&y(e,["model"],c);const u=g(t,["metadata","output"]);return u!=null&&y(e,["dest"],$K(r4(u))),e}function Rw(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=g(t,["state"]);i!=null&&y(e,["state"],i4(i));const o=g(t,["error"]);o!=null&&y(e,["error"],o);const s=g(t,["createTime"]);s!=null&&y(e,["createTime"],s);const a=g(t,["startTime"]);a!=null&&y(e,["startTime"],a);const c=g(t,["endTime"]);c!=null&&y(e,["endTime"],c);const u=g(t,["updateTime"]);u!=null&&y(e,["updateTime"],u);const f=g(t,["model"]);f!=null&&y(e,["model"],f);const p=g(t,["inputConfig"]);p!=null&&y(e,["src"],qK(p));const v=g(t,["outputConfig"]);v!=null&&y(e,["dest"],BK(r4(v)));const w=g(t,["completionStats"]);return w!=null&&y(e,["completionStats"],w),e}function qK(t){const e={},n=g(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const r=g(t,["gcsSource","uris"]);r!=null&&y(e,["gcsUri"],r);const i=g(t,["bigquerySource","inputUri"]);return i!=null&&y(e,["bigqueryUri"],i),e}function GK(t,e){const n={};if(g(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=g(e,["fileName"]);r!=null&&y(n,["fileName"],r);const i=g(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>bY(t,s))),y(n,["requests","requests"],o)}return n}function HK(t){const e={},n=g(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const r=g(t,["gcsUri"]);r!=null&&y(e,["gcsSource","uris"],r);const i=g(t,["bigqueryUri"]);if(i!=null&&y(e,["bigquerySource","inputUri"],i),g(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function WK(t){const e={},n=g(t,["data"]);if(n!=null&&y(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function KK(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],Wu(t,r)),n}function YK(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],Wu(t,r)),n}function JK(t){const e={},n=g(t,["content"]);n!=null&&y(e,["content"],n);const r=g(t,["citationMetadata"]);r!=null&&y(e,["citationMetadata"],QK(r));const i=g(t,["tokenCount"]);i!=null&&y(e,["tokenCount"],i);const o=g(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const s=g(t,["avgLogprobs"]);s!=null&&y(e,["avgLogprobs"],s);const a=g(t,["groundingMetadata"]);a!=null&&y(e,["groundingMetadata"],a);const c=g(t,["index"]);c!=null&&y(e,["index"],c);const u=g(t,["logprobsResult"]);u!=null&&y(e,["logprobsResult"],u);const f=g(t,["safetyRatings"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(w=>w)),y(e,["safetyRatings"],v)}const p=g(t,["urlContextMetadata"]);return p!=null&&y(e,["urlContextMetadata"],p),e}function QK(t){const e={},n=g(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),y(e,["citations"],r)}return e}function o4(t){const e={},n=g(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>IY(o))),y(e,["parts"],i)}const r=g(t,["role"]);return r!=null&&y(e,["role"],r),e}function XK(t,e){const n={},r=g(t,["displayName"]);if(e!==void 0&&r!=null&&y(e,["batch","displayName"],r),g(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ZK(t,e){const n={},r=g(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const i=g(t,["dest"]);return e!==void 0&&i!=null&&y(e,["outputConfig"],zK(VK(i))),n}function xN(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["src"]);i!=null&&y(n,["batch","inputConfig"],GK(t,n4(t,i)));const o=g(e,["config"]);return o!=null&&XK(o,n),n}function eY(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["model"],wt(t,r));const i=g(e,["src"]);i!=null&&y(n,["inputConfig"],HK(n4(t,i)));const o=g(e,["config"]);return o!=null&&ZK(o,n),n}function tY(t,e){const n={},r=g(t,["displayName"]);return e!==void 0&&r!=null&&y(e,["batch","displayName"],r),n}function nY(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["src"]);i!=null&&y(n,["batch","inputConfig"],cY(t,i));const o=g(e,["config"]);return o!=null&&tY(o,n),n}function rY(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],Wu(t,r)),n}function iY(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],Wu(t,r)),n}function oY(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["name"]);r!=null&&y(e,["name"],r);const i=g(t,["done"]);i!=null&&y(e,["done"],i);const o=g(t,["error"]);return o!=null&&y(e,["error"],o),e}function sY(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["name"]);r!=null&&y(e,["name"],r);const i=g(t,["done"]);i!=null&&y(e,["done"],i);const o=g(t,["error"]);return o!=null&&y(e,["error"],o),e}function aY(t,e){const n={},r=g(e,["contents"]);if(r!=null){let o=eS(t,r);Array.isArray(o)&&(o=o.map(s=>s)),y(n,["requests[]","request","content"],o)}const i=g(e,["config"]);return i!=null&&(y(n,["_self"],lY(i,n)),iK(n,{"requests[].*":"requests[].request.*"})),n}function lY(t,e){const n={},r=g(t,["taskType"]);e!==void 0&&r!=null&&y(e,["requests[]","taskType"],r);const i=g(t,["title"]);e!==void 0&&i!=null&&y(e,["requests[]","title"],i);const o=g(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),g(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function cY(t,e){const n={},r=g(e,["fileName"]);r!=null&&y(n,["file_name"],r);const i=g(e,["inlinedRequests"]);return i!=null&&y(n,["requests"],aY(t,i)),n}function uY(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function dY(t){const e={},n=g(t,["id"]);n!=null&&y(e,["id"],n);const r=g(t,["args"]);r!=null&&y(e,["args"],r);const i=g(t,["name"]);if(i!=null&&y(e,["name"],i),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fY(t){const e={},n=g(t,["allowedFunctionNames"]);n!=null&&y(e,["allowedFunctionNames"],n);const r=g(t,["mode"]);if(r!=null&&y(e,["mode"],r),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hY(t,e,n){const r={},i=g(e,["systemInstruction"]);n!==void 0&&i!=null&&y(n,["systemInstruction"],o4(ir(i)));const o=g(e,["temperature"]);o!=null&&y(r,["temperature"],o);const s=g(e,["topP"]);s!=null&&y(r,["topP"],s);const a=g(e,["topK"]);a!=null&&y(r,["topK"],a);const c=g(e,["candidateCount"]);c!=null&&y(r,["candidateCount"],c);const u=g(e,["maxOutputTokens"]);u!=null&&y(r,["maxOutputTokens"],u);const f=g(e,["stopSequences"]);f!=null&&y(r,["stopSequences"],f);const p=g(e,["responseLogprobs"]);p!=null&&y(r,["responseLogprobs"],p);const v=g(e,["logprobs"]);v!=null&&y(r,["logprobs"],v);const w=g(e,["presencePenalty"]);w!=null&&y(r,["presencePenalty"],w);const E=g(e,["frequencyPenalty"]);E!=null&&y(r,["frequencyPenalty"],E);const S=g(e,["seed"]);S!=null&&y(r,["seed"],S);const _=g(e,["responseMimeType"]);_!=null&&y(r,["responseMimeType"],_);const N=g(e,["responseSchema"]);N!=null&&y(r,["responseSchema"],tS(N));const j=g(e,["responseJsonSchema"]);if(j!=null&&y(r,["responseJsonSchema"],j),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=g(e,["safetySettings"]);if(n!==void 0&&F!=null){let P=F;Array.isArray(P)&&(P=P.map(me=>PY(me))),y(n,["safetySettings"],P)}const q=g(e,["tools"]);if(n!==void 0&&q!=null){let P=Hu(q);Array.isArray(P)&&(P=P.map(me=>kY(Gu(me)))),y(n,["tools"],P)}const V=g(e,["toolConfig"]);if(n!==void 0&&V!=null&&y(n,["toolConfig"],NY(V)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=g(e,["cachedContent"]);n!==void 0&&$!=null&&y(n,["cachedContent"],Ls(t,$));const k=g(e,["responseModalities"]);k!=null&&y(r,["responseModalities"],k);const D=g(e,["mediaResolution"]);D!=null&&y(r,["mediaResolution"],D);const O=g(e,["speechConfig"]);if(O!=null&&y(r,["speechConfig"],nS(O)),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=g(e,["thinkingConfig"]);z!=null&&y(r,["thinkingConfig"],z);const U=g(e,["imageConfig"]);U!=null&&y(r,["imageConfig"],xY(U));const M=g(e,["enableEnhancedCivicAnswers"]);return M!=null&&y(r,["enableEnhancedCivicAnswers"],M),r}function pY(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>JK(u))),y(e,["candidates"],c)}const i=g(t,["modelVersion"]);i!=null&&y(e,["modelVersion"],i);const o=g(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const s=g(t,["responseId"]);s!=null&&y(e,["responseId"],s);const a=g(t,["usageMetadata"]);return a!=null&&y(e,["usageMetadata"],a),e}function mY(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],Wu(t,r)),n}function gY(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],Wu(t,r)),n}function vY(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function yY(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function xY(t){const e={},n=g(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const r=g(t,["imageSize"]);if(r!=null&&y(e,["imageSize"],r),g(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(g(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function bY(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["request","model"],wt(t,r));const i=g(e,["contents"]);if(i!=null){let a=xi(i);Array.isArray(a)&&(a=a.map(c=>o4(c))),y(n,["request","contents"],a)}const o=g(e,["metadata"]);o!=null&&y(n,["metadata"],o);const s=g(e,["config"]);return s!=null&&y(n,["request","generationConfig"],hY(t,s,g(n,["request"],{}))),n}function wY(t){const e={},n=g(t,["response"]);n!=null&&y(e,["response"],pY(n));const r=g(t,["error"]);return r!=null&&y(e,["error"],r),e}function _Y(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=g(t,["pageToken"]);if(e!==void 0&&i!=null&&y(e,["_query","pageToken"],i),g(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function EY(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=g(t,["pageToken"]);e!==void 0&&i!=null&&y(e,["_query","pageToken"],i);const o=g(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function SY(t){const e={},n=g(t,["config"]);return n!=null&&_Y(n,e),e}function TY(t){const e={},n=g(t,["config"]);return n!=null&&EY(n,e),e}function AY(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=g(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>mm(s))),y(e,["batchJobs"],o)}return e}function CY(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=g(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Rw(s))),y(e,["batchJobs"],o)}return e}function IY(t){const e={},n=g(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const r=g(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const i=g(t,["executableCode"]);i!=null&&y(e,["executableCode"],i);const o=g(t,["fileData"]);o!=null&&y(e,["fileData"],uY(o));const s=g(t,["functionCall"]);s!=null&&y(e,["functionCall"],dY(s));const a=g(t,["functionResponse"]);a!=null&&y(e,["functionResponse"],a);const c=g(t,["inlineData"]);c!=null&&y(e,["inlineData"],WK(c));const u=g(t,["text"]);u!=null&&y(e,["text"],u);const f=g(t,["thought"]);f!=null&&y(e,["thought"],f);const p=g(t,["thoughtSignature"]);p!=null&&y(e,["thoughtSignature"],p);const v=g(t,["videoMetadata"]);return v!=null&&y(e,["videoMetadata"],v),e}function PY(t){const e={},n=g(t,["category"]);if(n!=null&&y(e,["category"],n),g(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=g(t,["threshold"]);return r!=null&&y(e,["threshold"],r),e}function NY(t){const e={},n=g(t,["retrievalConfig"]);n!=null&&y(e,["retrievalConfig"],n);const r=g(t,["functionCallingConfig"]);return r!=null&&y(e,["functionCallingConfig"],fY(r)),e}function kY(t){const e={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=g(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const r=g(t,["fileSearch"]);r!=null&&y(e,["fileSearch"],r);const i=g(t,["codeExecution"]);if(i!=null&&y(e,["codeExecution"],i),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=g(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),y(e,["functionDeclarations"],f)}const s=g(t,["googleMaps"]);s!=null&&y(e,["googleMaps"],vY(s));const a=g(t,["googleSearch"]);a!=null&&y(e,["googleSearch"],yY(a));const c=g(t,["googleSearchRetrieval"]);c!=null&&y(e,["googleSearchRetrieval"],c);const u=g(t,["urlContext"]);return u!=null&&y(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Cs||(Cs={}));class oc{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RY extends Os{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new oc(Cs.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=xN(this.apiClient,e),r=n._url,i=Ie("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,c=a.requests,u=[];for(const f of c){const p=Object.assign({},f);if(p.systemInstruction){const v=p.systemInstruction;delete p.systemInstruction;const w=p.request;w.systemInstruction=v,p.request=w}u.push(p)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=eY(this.apiClient,e);return a=Ie("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Rw(f))}else{const u=xN(this.apiClient,e);return a=Ie("{model}:batchGenerateContent",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>mm(f))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=nY(this.apiClient,e);return o=Ie("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>mm(c))}}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=gY(this.apiClient,e);return a=Ie("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Rw(f))}else{const u=mY(this.apiClient,e);return a=Ie("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>mm(f))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const c=YK(this.apiClient,e);s=Ie("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=KK(this.apiClient,e);s=Ie("batches/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=TY(e);return a=Ie("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=CY(f),v=new mN;return Object.assign(v,p),v})}else{const u=SY(e);return a=Ie("batches",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=AY(f),v=new mN;return Object.assign(v,p),v})}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=iY(this.apiClient,e);return a=Ie("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>sY(f))}else{const u=rY(this.apiClient,e);return a=Ie("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>oY(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MY(t){const e={},n=g(t,["data"]);if(n!=null&&y(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function bN(t){const e={},n=g(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>nJ(o))),y(e,["parts"],i)}const r=g(t,["role"]);return r!=null&&y(e,["role"],r),e}function DY(t,e){const n={},r=g(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const i=g(t,["expireTime"]);e!==void 0&&i!=null&&y(e,["expireTime"],i);const o=g(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const s=g(t,["contents"]);if(e!==void 0&&s!=null){let f=xi(s);Array.isArray(f)&&(f=f.map(p=>bN(p))),y(e,["contents"],f)}const a=g(t,["systemInstruction"]);e!==void 0&&a!=null&&y(e,["systemInstruction"],bN(ir(a)));const c=g(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>iJ(p))),y(e,["tools"],f)}const u=g(t,["toolConfig"]);if(e!==void 0&&u!=null&&y(e,["toolConfig"],rJ(u)),g(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function OY(t,e){const n={},r=g(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const i=g(t,["expireTime"]);e!==void 0&&i!=null&&y(e,["expireTime"],i);const o=g(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const s=g(t,["contents"]);if(e!==void 0&&s!=null){let p=xi(s);Array.isArray(p)&&(p=p.map(v=>v)),y(e,["contents"],p)}const a=g(t,["systemInstruction"]);e!==void 0&&a!=null&&y(e,["systemInstruction"],ir(a));const c=g(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(v=>oJ(v))),y(e,["tools"],p)}const u=g(t,["toolConfig"]);e!==void 0&&u!=null&&y(e,["toolConfig"],u);const f=g(t,["kmsKeyName"]);return e!==void 0&&f!=null&&y(e,["encryption_spec","kmsKeyName"],f),n}function LY(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["model"],Wj(t,r));const i=g(e,["config"]);return i!=null&&DY(i,n),n}function jY(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["model"],Wj(t,r));const i=g(e,["config"]);return i!=null&&OY(i,n),n}function FY(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],Ls(t,r)),n}function UY(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],Ls(t,r)),n}function VY(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function $Y(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function BY(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function zY(t){const e={},n=g(t,["id"]);n!=null&&y(e,["id"],n);const r=g(t,["args"]);r!=null&&y(e,["args"],r);const i=g(t,["name"]);if(i!=null&&y(e,["name"],i),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qY(t){const e={},n=g(t,["allowedFunctionNames"]);n!=null&&y(e,["allowedFunctionNames"],n);const r=g(t,["mode"]);if(r!=null&&y(e,["mode"],r),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function GY(t){const e={},n=g(t,["description"]);n!=null&&y(e,["description"],n);const r=g(t,["name"]);r!=null&&y(e,["name"],r);const i=g(t,["parameters"]);i!=null&&y(e,["parameters"],i);const o=g(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const s=g(t,["response"]);s!=null&&y(e,["response"],s);const a=g(t,["responseJsonSchema"]);if(a!=null&&y(e,["responseJsonSchema"],a),g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function HY(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],Ls(t,r)),n}function WY(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["_url","name"],Ls(t,r)),n}function KY(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function YY(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function JY(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=g(t,["pageToken"]);return e!==void 0&&i!=null&&y(e,["_query","pageToken"],i),n}function QY(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=g(t,["pageToken"]);return e!==void 0&&i!=null&&y(e,["_query","pageToken"],i),n}function XY(t){const e={},n=g(t,["config"]);return n!=null&&JY(n,e),e}function ZY(t){const e={},n=g(t,["config"]);return n!=null&&QY(n,e),e}function eJ(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=g(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),y(e,["cachedContents"],o)}return e}function tJ(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=g(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),y(e,["cachedContents"],o)}return e}function nJ(t){const e={},n=g(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const r=g(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const i=g(t,["executableCode"]);i!=null&&y(e,["executableCode"],i);const o=g(t,["fileData"]);o!=null&&y(e,["fileData"],BY(o));const s=g(t,["functionCall"]);s!=null&&y(e,["functionCall"],zY(s));const a=g(t,["functionResponse"]);a!=null&&y(e,["functionResponse"],a);const c=g(t,["inlineData"]);c!=null&&y(e,["inlineData"],MY(c));const u=g(t,["text"]);u!=null&&y(e,["text"],u);const f=g(t,["thought"]);f!=null&&y(e,["thought"],f);const p=g(t,["thoughtSignature"]);p!=null&&y(e,["thoughtSignature"],p);const v=g(t,["videoMetadata"]);return v!=null&&y(e,["videoMetadata"],v),e}function rJ(t){const e={},n=g(t,["retrievalConfig"]);n!=null&&y(e,["retrievalConfig"],n);const r=g(t,["functionCallingConfig"]);return r!=null&&y(e,["functionCallingConfig"],qY(r)),e}function iJ(t){const e={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=g(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const r=g(t,["fileSearch"]);r!=null&&y(e,["fileSearch"],r);const i=g(t,["codeExecution"]);if(i!=null&&y(e,["codeExecution"],i),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=g(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),y(e,["functionDeclarations"],f)}const s=g(t,["googleMaps"]);s!=null&&y(e,["googleMaps"],KY(s));const a=g(t,["googleSearch"]);a!=null&&y(e,["googleSearch"],YY(a));const c=g(t,["googleSearchRetrieval"]);c!=null&&y(e,["googleSearchRetrieval"],c);const u=g(t,["urlContext"]);return u!=null&&y(e,["urlContext"],u),e}function oJ(t){const e={},n=g(t,["retrieval"]);n!=null&&y(e,["retrieval"],n);const r=g(t,["computerUse"]);if(r!=null&&y(e,["computerUse"],r),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=g(t,["codeExecution"]);i!=null&&y(e,["codeExecution"],i);const o=g(t,["enterpriseWebSearch"]);o!=null&&y(e,["enterpriseWebSearch"],o);const s=g(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>GY(v))),y(e,["functionDeclarations"],p)}const a=g(t,["googleMaps"]);a!=null&&y(e,["googleMaps"],a);const c=g(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],c);const u=g(t,["googleSearchRetrieval"]);u!=null&&y(e,["googleSearchRetrieval"],u);const f=g(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function sJ(t,e){const n={},r=g(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const i=g(t,["expireTime"]);return e!==void 0&&i!=null&&y(e,["expireTime"],i),n}function aJ(t,e){const n={},r=g(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const i=g(t,["expireTime"]);return e!==void 0&&i!=null&&y(e,["expireTime"],i),n}function lJ(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["_url","name"],Ls(t,r));const i=g(e,["config"]);return i!=null&&sJ(i,n),n}function cJ(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["_url","name"],Ls(t,r));const i=g(e,["config"]);return i!=null&&aJ(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uJ extends Os{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new oc(Cs.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=jY(this.apiClient,e);return a=Ie("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const u=LY(this.apiClient,e);return a=Ie("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=WY(this.apiClient,e);return a=Ie("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const u=HY(this.apiClient,e);return a=Ie("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=UY(this.apiClient,e);return a=Ie("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=$Y(f),v=new hN;return Object.assign(v,p),v})}else{const u=FY(this.apiClient,e);return a=Ie("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=VY(f),v=new hN;return Object.assign(v,p),v})}}async update(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=cJ(this.apiClient,e);return a=Ie("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const u=lJ(this.apiClient,e);return a=Ie("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=ZY(e);return a=Ie("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=tJ(f),v=new pN;return Object.assign(v,p),v})}else{const u=XY(e);return a=Ie("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=eJ(f),v=new pN;return Object.assign(v,p),v})}}}function Wm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function wN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ot(t){return this instanceof ot?(this.v=t,this):new ot(t)}function Wi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(w){return function(E){return Promise.resolve(E).then(w,p)}}function a(w,E){r[w]&&(i[w]=function(S){return new Promise(function(_,N){o.push([w,S,_,N])>1||c(w,S)})},E&&(i[w]=E(i[w])))}function c(w,E){try{u(r[w](E))}catch(S){v(o[0][3],S)}}function u(w){w.value instanceof ot?Promise.resolve(w.value.v).then(f,p):v(o[0][2],w)}function f(w){c("next",w)}function p(w){c("throw",w)}function v(w,E){w(E),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Ki(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof wN=="function"?wN(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dJ(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:s4(n)}function s4(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function fJ(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function _N(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!s4(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class hJ{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new pJ(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class pJ{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),fJ(o)}async sendMessage(e){var n;await this.sendPromise;const r=ir(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const c=await i,u=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let v=[];f!=null&&(v=(a=f.slice(p))!==null&&a!==void 0?a:[]);const w=u?[u]:[];this.recordHistory(r,w,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=ir(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?_N(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Wi(this,arguments,function*(){var i,o,s,a,c,u;const f=[];try{for(var p=!0,v=Ki(e),w;w=yield ot(v.next()),i=w.done,!i;p=!0){a=w.value,p=!1;const E=a;if(dJ(E)){const S=(u=(c=E.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content;S!==void 0&&f.push(S)}yield yield ot(E)}}catch(E){o={error:E}}finally{try{!p&&!i&&(s=v.return)&&(yield ot(s.call(v)))}finally{if(o)throw o.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(..._N(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xv extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,xv.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mJ(t){const e={},n=g(t,["file"]);return n!=null&&y(e,["file"],n),e}function gJ(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function vJ(t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","file"],Zj(n)),e}function yJ(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function xJ(t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","file"],Zj(n)),e}function bJ(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=g(t,["pageToken"]);return e!==void 0&&i!=null&&y(e,["_query","pageToken"],i),n}function wJ(t){const e={},n=g(t,["config"]);return n!=null&&bJ(n,e),e}function _J(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=g(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),y(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EJ extends Os{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new oc(Cs.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=wJ(e);return o=Ie("files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const u=_J(c),f=new CK;return Object.assign(f,u),f})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=mJ(e);return o=Ie("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=gJ(c),f=new IK;return Object.assign(f,u),f})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xJ(e);return o=Ie("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=vJ(e);return o=Ie("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const u=yJ(c),f=new PK;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gm(t){const e={},n=g(t,["data"]);if(n!=null&&y(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function SJ(t){const e={},n=g(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>VJ(o))),y(e,["parts"],i)}const r=g(t,["role"]);return r!=null&&y(e,["role"],r),e}function TJ(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function AJ(t){const e={},n=g(t,["id"]);n!=null&&y(e,["id"],n);const r=g(t,["args"]);r!=null&&y(e,["args"],r);const i=g(t,["name"]);if(i!=null&&y(e,["name"],i),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CJ(t){const e={},n=g(t,["description"]);n!=null&&y(e,["description"],n);const r=g(t,["name"]);r!=null&&y(e,["name"],r);const i=g(t,["parameters"]);i!=null&&y(e,["parameters"],i);const o=g(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const s=g(t,["response"]);s!=null&&y(e,["response"],s);const a=g(t,["responseJsonSchema"]);if(a!=null&&y(e,["responseJsonSchema"],a),g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function IJ(t){const e={},n=g(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const r=g(t,["responseJsonSchema"]);r!=null&&y(e,["responseJsonSchema"],r);const i=g(t,["audioTimestamp"]);i!=null&&y(e,["audioTimestamp"],i);const o=g(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const s=g(t,["enableAffectiveDialog"]);s!=null&&y(e,["enableAffectiveDialog"],s);const a=g(t,["frequencyPenalty"]);a!=null&&y(e,["frequencyPenalty"],a);const c=g(t,["logprobs"]);c!=null&&y(e,["logprobs"],c);const u=g(t,["maxOutputTokens"]);u!=null&&y(e,["maxOutputTokens"],u);const f=g(t,["mediaResolution"]);f!=null&&y(e,["mediaResolution"],f);const p=g(t,["presencePenalty"]);p!=null&&y(e,["presencePenalty"],p);const v=g(t,["responseLogprobs"]);v!=null&&y(e,["responseLogprobs"],v);const w=g(t,["responseMimeType"]);w!=null&&y(e,["responseMimeType"],w);const E=g(t,["responseModalities"]);E!=null&&y(e,["responseModalities"],E);const S=g(t,["responseSchema"]);S!=null&&y(e,["responseSchema"],S);const _=g(t,["routingConfig"]);_!=null&&y(e,["routingConfig"],_);const N=g(t,["seed"]);N!=null&&y(e,["seed"],N);const j=g(t,["speechConfig"]);j!=null&&y(e,["speechConfig"],j);const F=g(t,["stopSequences"]);F!=null&&y(e,["stopSequences"],F);const q=g(t,["temperature"]);q!=null&&y(e,["temperature"],q);const V=g(t,["thinkingConfig"]);V!=null&&y(e,["thinkingConfig"],V);const $=g(t,["topK"]);$!=null&&y(e,["topK"],$);const k=g(t,["topP"]);if(k!=null&&y(e,["topP"],k),g(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function PJ(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function NJ(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function kJ(t,e){const n={},r=g(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],r);const i=g(t,["responseModalities"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig","responseModalities"],i);const o=g(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const s=g(t,["topP"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","topP"],s);const a=g(t,["topK"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","topK"],a);const c=g(t,["maxOutputTokens"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","maxOutputTokens"],c);const u=g(t,["mediaResolution"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","mediaResolution"],u);const f=g(t,["seed"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","seed"],f);const p=g(t,["speechConfig"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","speechConfig"],rS(p));const v=g(t,["thinkingConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","thinkingConfig"],v);const w=g(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const E=g(t,["systemInstruction"]);e!==void 0&&E!=null&&y(e,["setup","systemInstruction"],SJ(ir(E)));const S=g(t,["tools"]);if(e!==void 0&&S!=null){let $=Hu(S);Array.isArray($)&&($=$.map(k=>BJ(Gu(k)))),y(e,["setup","tools"],$)}const _=g(t,["sessionResumption"]);e!==void 0&&_!=null&&y(e,["setup","sessionResumption"],$J(_));const N=g(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&y(e,["setup","inputAudioTranscription"],N);const j=g(t,["outputAudioTranscription"]);e!==void 0&&j!=null&&y(e,["setup","outputAudioTranscription"],j);const F=g(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const q=g(t,["contextWindowCompression"]);e!==void 0&&q!=null&&y(e,["setup","contextWindowCompression"],q);const V=g(t,["proactivity"]);if(e!==void 0&&V!=null&&y(e,["setup","proactivity"],V),g(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function RJ(t,e){const n={},r=g(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],IJ(r));const i=g(t,["responseModalities"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig","responseModalities"],i);const o=g(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const s=g(t,["topP"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","topP"],s);const a=g(t,["topK"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","topK"],a);const c=g(t,["maxOutputTokens"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","maxOutputTokens"],c);const u=g(t,["mediaResolution"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","mediaResolution"],u);const f=g(t,["seed"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","seed"],f);const p=g(t,["speechConfig"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","speechConfig"],rS(p));const v=g(t,["thinkingConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","thinkingConfig"],v);const w=g(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const E=g(t,["systemInstruction"]);e!==void 0&&E!=null&&y(e,["setup","systemInstruction"],ir(E));const S=g(t,["tools"]);if(e!==void 0&&S!=null){let k=Hu(S);Array.isArray(k)&&(k=k.map(D=>zJ(Gu(D)))),y(e,["setup","tools"],k)}const _=g(t,["sessionResumption"]);e!==void 0&&_!=null&&y(e,["setup","sessionResumption"],_);const N=g(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&y(e,["setup","inputAudioTranscription"],N);const j=g(t,["outputAudioTranscription"]);e!==void 0&&j!=null&&y(e,["setup","outputAudioTranscription"],j);const F=g(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const q=g(t,["contextWindowCompression"]);e!==void 0&&q!=null&&y(e,["setup","contextWindowCompression"],q);const V=g(t,["proactivity"]);e!==void 0&&V!=null&&y(e,["setup","proactivity"],V);const $=g(t,["explicitVadSignal"]);return e!==void 0&&$!=null&&y(e,["setup","explicitVadSignal"],$),n}function MJ(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["setup","model"],wt(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],kJ(i,n)),n}function DJ(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["setup","model"],wt(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],RJ(i,n)),n}function OJ(t){const e={},n=g(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function LJ(t){const e={},n=g(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),y(e,["weightedPrompts"],r)}return e}function jJ(t){const e={},n=g(t,["media"]);if(n!=null){let u=Kj(n);Array.isArray(u)&&(u=u.map(f=>gm(f))),y(e,["mediaChunks"],u)}const r=g(t,["audio"]);r!=null&&y(e,["audio"],gm(Jj(r)));const i=g(t,["audioStreamEnd"]);i!=null&&y(e,["audioStreamEnd"],i);const o=g(t,["video"]);o!=null&&y(e,["video"],gm(Yj(o)));const s=g(t,["text"]);s!=null&&y(e,["text"],s);const a=g(t,["activityStart"]);a!=null&&y(e,["activityStart"],a);const c=g(t,["activityEnd"]);return c!=null&&y(e,["activityEnd"],c),e}function FJ(t){const e={},n=g(t,["media"]);if(n!=null){let u=Kj(n);Array.isArray(u)&&(u=u.map(f=>f)),y(e,["mediaChunks"],u)}const r=g(t,["audio"]);r!=null&&y(e,["audio"],Jj(r));const i=g(t,["audioStreamEnd"]);i!=null&&y(e,["audioStreamEnd"],i);const o=g(t,["video"]);o!=null&&y(e,["video"],Yj(o));const s=g(t,["text"]);s!=null&&y(e,["text"],s);const a=g(t,["activityStart"]);a!=null&&y(e,["activityStart"],a);const c=g(t,["activityEnd"]);return c!=null&&y(e,["activityEnd"],c),e}function UJ(t){const e={},n=g(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const r=g(t,["serverContent"]);r!=null&&y(e,["serverContent"],r);const i=g(t,["toolCall"]);i!=null&&y(e,["toolCall"],i);const o=g(t,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],o);const s=g(t,["usageMetadata"]);s!=null&&y(e,["usageMetadata"],qJ(s));const a=g(t,["goAway"]);a!=null&&y(e,["goAway"],a);const c=g(t,["sessionResumptionUpdate"]);c!=null&&y(e,["sessionResumptionUpdate"],c);const u=g(t,["voiceActivityDetectionSignal"]);u!=null&&y(e,["voiceActivityDetectionSignal"],u);const f=g(t,["voiceActivity"]);return f!=null&&y(e,["voiceActivity"],GJ(f)),e}function VJ(t){const e={},n=g(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const r=g(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const i=g(t,["executableCode"]);i!=null&&y(e,["executableCode"],i);const o=g(t,["fileData"]);o!=null&&y(e,["fileData"],TJ(o));const s=g(t,["functionCall"]);s!=null&&y(e,["functionCall"],AJ(s));const a=g(t,["functionResponse"]);a!=null&&y(e,["functionResponse"],a);const c=g(t,["inlineData"]);c!=null&&y(e,["inlineData"],gm(c));const u=g(t,["text"]);u!=null&&y(e,["text"],u);const f=g(t,["thought"]);f!=null&&y(e,["thought"],f);const p=g(t,["thoughtSignature"]);p!=null&&y(e,["thoughtSignature"],p);const v=g(t,["videoMetadata"]);return v!=null&&y(e,["videoMetadata"],v),e}function $J(t){const e={},n=g(t,["handle"]);if(n!=null&&y(e,["handle"],n),g(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function BJ(t){const e={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=g(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const r=g(t,["fileSearch"]);r!=null&&y(e,["fileSearch"],r);const i=g(t,["codeExecution"]);if(i!=null&&y(e,["codeExecution"],i),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=g(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),y(e,["functionDeclarations"],f)}const s=g(t,["googleMaps"]);s!=null&&y(e,["googleMaps"],PJ(s));const a=g(t,["googleSearch"]);a!=null&&y(e,["googleSearch"],NJ(a));const c=g(t,["googleSearchRetrieval"]);c!=null&&y(e,["googleSearchRetrieval"],c);const u=g(t,["urlContext"]);return u!=null&&y(e,["urlContext"],u),e}function zJ(t){const e={},n=g(t,["retrieval"]);n!=null&&y(e,["retrieval"],n);const r=g(t,["computerUse"]);if(r!=null&&y(e,["computerUse"],r),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=g(t,["codeExecution"]);i!=null&&y(e,["codeExecution"],i);const o=g(t,["enterpriseWebSearch"]);o!=null&&y(e,["enterpriseWebSearch"],o);const s=g(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>CJ(v))),y(e,["functionDeclarations"],p)}const a=g(t,["googleMaps"]);a!=null&&y(e,["googleMaps"],a);const c=g(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],c);const u=g(t,["googleSearchRetrieval"]);u!=null&&y(e,["googleSearchRetrieval"],u);const f=g(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function qJ(t){const e={},n=g(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const r=g(t,["cachedContentTokenCount"]);r!=null&&y(e,["cachedContentTokenCount"],r);const i=g(t,["candidatesTokenCount"]);i!=null&&y(e,["responseTokenCount"],i);const o=g(t,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const s=g(t,["thoughtsTokenCount"]);s!=null&&y(e,["thoughtsTokenCount"],s);const a=g(t,["totalTokenCount"]);a!=null&&y(e,["totalTokenCount"],a);const c=g(t,["promptTokensDetails"]);if(c!=null){let w=c;Array.isArray(w)&&(w=w.map(E=>E)),y(e,["promptTokensDetails"],w)}const u=g(t,["cacheTokensDetails"]);if(u!=null){let w=u;Array.isArray(w)&&(w=w.map(E=>E)),y(e,["cacheTokensDetails"],w)}const f=g(t,["candidatesTokensDetails"]);if(f!=null){let w=f;Array.isArray(w)&&(w=w.map(E=>E)),y(e,["responseTokensDetails"],w)}const p=g(t,["toolUsePromptTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(E=>E)),y(e,["toolUsePromptTokensDetails"],w)}const v=g(t,["trafficType"]);return v!=null&&y(e,["trafficType"],v),e}function GJ(t){const e={},n=g(t,["type"]);return n!=null&&y(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HJ(t){const e={},n=g(t,["data"]);if(n!=null&&y(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function WJ(t){const e={},n=g(t,["content"]);n!=null&&y(e,["content"],n);const r=g(t,["citationMetadata"]);r!=null&&y(e,["citationMetadata"],KJ(r));const i=g(t,["tokenCount"]);i!=null&&y(e,["tokenCount"],i);const o=g(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const s=g(t,["avgLogprobs"]);s!=null&&y(e,["avgLogprobs"],s);const a=g(t,["groundingMetadata"]);a!=null&&y(e,["groundingMetadata"],a);const c=g(t,["index"]);c!=null&&y(e,["index"],c);const u=g(t,["logprobsResult"]);u!=null&&y(e,["logprobsResult"],u);const f=g(t,["safetyRatings"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(w=>w)),y(e,["safetyRatings"],v)}const p=g(t,["urlContextMetadata"]);return p!=null&&y(e,["urlContextMetadata"],p),e}function KJ(t){const e={},n=g(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),y(e,["citations"],r)}return e}function YJ(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["contents"]);if(i!=null){let o=xi(i);Array.isArray(o)&&(o=o.map(s=>s)),y(n,["contents"],o)}return n}function JJ(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),y(e,["tokensInfo"],i)}return e}function QJ(t){const e={},n=g(t,["values"]);n!=null&&y(e,["values"],n);const r=g(t,["statistics"]);return r!=null&&y(e,["statistics"],XJ(r)),e}function XJ(t){const e={},n=g(t,["truncated"]);n!=null&&y(e,["truncated"],n);const r=g(t,["token_count"]);return r!=null&&y(e,["tokenCount"],r),e}function bv(t){const e={},n=g(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>aX(o))),y(e,["parts"],i)}const r=g(t,["role"]);return r!=null&&y(e,["role"],r),e}function ZJ(t){const e={},n=g(t,["controlType"]);n!=null&&y(e,["controlType"],n);const r=g(t,["enableControlImageComputation"]);return r!=null&&y(e,["computeControl"],r),e}function eQ(t){const e={};if(g(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function tQ(t,e){const n={},r=g(t,["systemInstruction"]);e!==void 0&&r!=null&&y(e,["systemInstruction"],ir(r));const i=g(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>u4(a))),y(e,["tools"],s)}const o=g(t,["generationConfig"]);return e!==void 0&&o!=null&&y(e,["generationConfig"],HQ(o)),n}function nQ(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["contents"]);if(i!=null){let s=xi(i);Array.isArray(s)&&(s=s.map(a=>bv(a))),y(n,["contents"],s)}const o=g(e,["config"]);return o!=null&&eQ(o),n}function rQ(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["contents"]);if(i!=null){let s=xi(i);Array.isArray(s)&&(s=s.map(a=>a)),y(n,["contents"],s)}const o=g(e,["config"]);return o!=null&&tQ(o,n),n}function iQ(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["totalTokens"]);r!=null&&y(e,["totalTokens"],r);const i=g(t,["cachedContentTokenCount"]);return i!=null&&y(e,["cachedContentTokenCount"],i),e}function oQ(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["totalTokens"]);return r!=null&&y(e,["totalTokens"],r),e}function sQ(t,e){const n={},r=g(e,["model"]);return r!=null&&y(n,["_url","name"],wt(t,r)),n}function aQ(t,e){const n={},r=g(e,["model"]);return r!=null&&y(n,["_url","name"],wt(t,r)),n}function lQ(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function cQ(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function uQ(t,e){const n={},r=g(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const i=g(t,["negativePrompt"]);e!==void 0&&i!=null&&y(e,["parameters","negativePrompt"],i);const o=g(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const s=g(t,["aspectRatio"]);e!==void 0&&s!=null&&y(e,["parameters","aspectRatio"],s);const a=g(t,["guidanceScale"]);e!==void 0&&a!=null&&y(e,["parameters","guidanceScale"],a);const c=g(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const u=g(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&y(e,["parameters","safetySetting"],u);const f=g(t,["personGeneration"]);e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f);const p=g(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&y(e,["parameters","includeSafetyAttributes"],p);const v=g(t,["includeRaiReason"]);e!==void 0&&v!=null&&y(e,["parameters","includeRaiReason"],v);const w=g(t,["language"]);e!==void 0&&w!=null&&y(e,["parameters","language"],w);const E=g(t,["outputMimeType"]);e!==void 0&&E!=null&&y(e,["parameters","outputOptions","mimeType"],E);const S=g(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&y(e,["parameters","outputOptions","compressionQuality"],S);const _=g(t,["addWatermark"]);e!==void 0&&_!=null&&y(e,["parameters","addWatermark"],_);const N=g(t,["labels"]);e!==void 0&&N!=null&&y(e,["labels"],N);const j=g(t,["editMode"]);e!==void 0&&j!=null&&y(e,["parameters","editMode"],j);const F=g(t,["baseSteps"]);return e!==void 0&&F!=null&&y(e,["parameters","editConfig","baseSteps"],F),n}function dQ(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=g(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>hX(c))),y(n,["instances[0]","referenceImages"],a)}const s=g(e,["config"]);return s!=null&&uQ(s,n),n}function fQ(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>wv(o))),y(e,["generatedImages"],i)}return e}function hQ(t,e){const n={},r=g(t,["taskType"]);e!==void 0&&r!=null&&y(e,["requests[]","taskType"],r);const i=g(t,["title"]);e!==void 0&&i!=null&&y(e,["requests[]","title"],i);const o=g(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),g(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function pQ(t,e){const n={},r=g(t,["taskType"]);e!==void 0&&r!=null&&y(e,["instances[]","task_type"],r);const i=g(t,["title"]);e!==void 0&&i!=null&&y(e,["instances[]","title"],i);const o=g(t,["outputDimensionality"]);e!==void 0&&o!=null&&y(e,["parameters","outputDimensionality"],o);const s=g(t,["mimeType"]);e!==void 0&&s!=null&&y(e,["instances[]","mimeType"],s);const a=g(t,["autoTruncate"]);return e!==void 0&&a!=null&&y(e,["parameters","autoTruncate"],a),n}function mQ(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["contents"]);if(i!=null){let a=eS(t,i);Array.isArray(a)&&(a=a.map(c=>c)),y(n,["requests[]","content"],a)}const o=g(e,["config"]);o!=null&&hQ(o,n);const s=g(e,["model"]);return s!==void 0&&y(n,["requests[]","model"],wt(t,s)),n}function gQ(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["contents"]);if(i!=null){let s=eS(t,i);Array.isArray(s)&&(s=s.map(a=>a)),y(n,["instances[]","content"],s)}const o=g(e,["config"]);return o!=null&&pQ(o,n),n}function vQ(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),y(e,["embeddings"],o)}const i=g(t,["metadata"]);return i!=null&&y(e,["metadata"],i),e}function yQ(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>QJ(s))),y(e,["embeddings"],o)}const i=g(t,["metadata"]);return i!=null&&y(e,["metadata"],i),e}function xQ(t){const e={},n=g(t,["endpoint"]);n!=null&&y(e,["name"],n);const r=g(t,["deployedModelId"]);return r!=null&&y(e,["deployedModelId"],r),e}function bQ(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function wQ(t){const e={},n=g(t,["id"]);n!=null&&y(e,["id"],n);const r=g(t,["args"]);r!=null&&y(e,["args"],r);const i=g(t,["name"]);if(i!=null&&y(e,["name"],i),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _Q(t){const e={},n=g(t,["allowedFunctionNames"]);n!=null&&y(e,["allowedFunctionNames"],n);const r=g(t,["mode"]);if(r!=null&&y(e,["mode"],r),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function EQ(t){const e={},n=g(t,["description"]);n!=null&&y(e,["description"],n);const r=g(t,["name"]);r!=null&&y(e,["name"],r);const i=g(t,["parameters"]);i!=null&&y(e,["parameters"],i);const o=g(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const s=g(t,["response"]);s!=null&&y(e,["response"],s);const a=g(t,["responseJsonSchema"]);if(a!=null&&y(e,["responseJsonSchema"],a),g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function SQ(t,e,n){const r={},i=g(e,["systemInstruction"]);n!==void 0&&i!=null&&y(n,["systemInstruction"],bv(ir(i)));const o=g(e,["temperature"]);o!=null&&y(r,["temperature"],o);const s=g(e,["topP"]);s!=null&&y(r,["topP"],s);const a=g(e,["topK"]);a!=null&&y(r,["topK"],a);const c=g(e,["candidateCount"]);c!=null&&y(r,["candidateCount"],c);const u=g(e,["maxOutputTokens"]);u!=null&&y(r,["maxOutputTokens"],u);const f=g(e,["stopSequences"]);f!=null&&y(r,["stopSequences"],f);const p=g(e,["responseLogprobs"]);p!=null&&y(r,["responseLogprobs"],p);const v=g(e,["logprobs"]);v!=null&&y(r,["logprobs"],v);const w=g(e,["presencePenalty"]);w!=null&&y(r,["presencePenalty"],w);const E=g(e,["frequencyPenalty"]);E!=null&&y(r,["frequencyPenalty"],E);const S=g(e,["seed"]);S!=null&&y(r,["seed"],S);const _=g(e,["responseMimeType"]);_!=null&&y(r,["responseMimeType"],_);const N=g(e,["responseSchema"]);N!=null&&y(r,["responseSchema"],tS(N));const j=g(e,["responseJsonSchema"]);if(j!=null&&y(r,["responseJsonSchema"],j),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=g(e,["safetySettings"]);if(n!==void 0&&F!=null){let P=F;Array.isArray(P)&&(P=P.map(me=>pX(me))),y(n,["safetySettings"],P)}const q=g(e,["tools"]);if(n!==void 0&&q!=null){let P=Hu(q);Array.isArray(P)&&(P=P.map(me=>wX(Gu(me)))),y(n,["tools"],P)}const V=g(e,["toolConfig"]);if(n!==void 0&&V!=null&&y(n,["toolConfig"],bX(V)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=g(e,["cachedContent"]);n!==void 0&&$!=null&&y(n,["cachedContent"],Ls(t,$));const k=g(e,["responseModalities"]);k!=null&&y(r,["responseModalities"],k);const D=g(e,["mediaResolution"]);D!=null&&y(r,["mediaResolution"],D);const O=g(e,["speechConfig"]);if(O!=null&&y(r,["speechConfig"],nS(O)),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=g(e,["thinkingConfig"]);z!=null&&y(r,["thinkingConfig"],z);const U=g(e,["imageConfig"]);U!=null&&y(r,["imageConfig"],QQ(U));const M=g(e,["enableEnhancedCivicAnswers"]);return M!=null&&y(r,["enableEnhancedCivicAnswers"],M),r}function TQ(t,e,n){const r={},i=g(e,["systemInstruction"]);n!==void 0&&i!=null&&y(n,["systemInstruction"],ir(i));const o=g(e,["temperature"]);o!=null&&y(r,["temperature"],o);const s=g(e,["topP"]);s!=null&&y(r,["topP"],s);const a=g(e,["topK"]);a!=null&&y(r,["topK"],a);const c=g(e,["candidateCount"]);c!=null&&y(r,["candidateCount"],c);const u=g(e,["maxOutputTokens"]);u!=null&&y(r,["maxOutputTokens"],u);const f=g(e,["stopSequences"]);f!=null&&y(r,["stopSequences"],f);const p=g(e,["responseLogprobs"]);p!=null&&y(r,["responseLogprobs"],p);const v=g(e,["logprobs"]);v!=null&&y(r,["logprobs"],v);const w=g(e,["presencePenalty"]);w!=null&&y(r,["presencePenalty"],w);const E=g(e,["frequencyPenalty"]);E!=null&&y(r,["frequencyPenalty"],E);const S=g(e,["seed"]);S!=null&&y(r,["seed"],S);const _=g(e,["responseMimeType"]);_!=null&&y(r,["responseMimeType"],_);const N=g(e,["responseSchema"]);N!=null&&y(r,["responseSchema"],tS(N));const j=g(e,["responseJsonSchema"]);j!=null&&y(r,["responseJsonSchema"],j);const F=g(e,["routingConfig"]);F!=null&&y(r,["routingConfig"],F);const q=g(e,["modelSelectionConfig"]);q!=null&&y(r,["modelConfig"],q);const V=g(e,["safetySettings"]);if(n!==void 0&&V!=null){let ge=V;Array.isArray(ge)&&(ge=ge.map(xe=>xe)),y(n,["safetySettings"],ge)}const $=g(e,["tools"]);if(n!==void 0&&$!=null){let ge=Hu($);Array.isArray(ge)&&(ge=ge.map(xe=>u4(Gu(xe)))),y(n,["tools"],ge)}const k=g(e,["toolConfig"]);n!==void 0&&k!=null&&y(n,["toolConfig"],k);const D=g(e,["labels"]);n!==void 0&&D!=null&&y(n,["labels"],D);const O=g(e,["cachedContent"]);n!==void 0&&O!=null&&y(n,["cachedContent"],Ls(t,O));const z=g(e,["responseModalities"]);z!=null&&y(r,["responseModalities"],z);const U=g(e,["mediaResolution"]);U!=null&&y(r,["mediaResolution"],U);const M=g(e,["speechConfig"]);M!=null&&y(r,["speechConfig"],nS(M));const P=g(e,["audioTimestamp"]);P!=null&&y(r,["audioTimestamp"],P);const me=g(e,["thinkingConfig"]);me!=null&&y(r,["thinkingConfig"],me);const ce=g(e,["imageConfig"]);if(ce!=null&&y(r,["imageConfig"],XQ(ce)),g(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function EN(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["contents"]);if(i!=null){let s=xi(i);Array.isArray(s)&&(s=s.map(a=>bv(a))),y(n,["contents"],s)}const o=g(e,["config"]);return o!=null&&y(n,["generationConfig"],SQ(t,o,n)),n}function SN(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["contents"]);if(i!=null){let s=xi(i);Array.isArray(s)&&(s=s.map(a=>a)),y(n,["contents"],s)}const o=g(e,["config"]);return o!=null&&y(n,["generationConfig"],TQ(t,o,n)),n}function TN(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>WJ(u))),y(e,["candidates"],c)}const i=g(t,["modelVersion"]);i!=null&&y(e,["modelVersion"],i);const o=g(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const s=g(t,["responseId"]);s!=null&&y(e,["responseId"],s);const a=g(t,["usageMetadata"]);return a!=null&&y(e,["usageMetadata"],a),e}function AN(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),y(e,["candidates"],u)}const i=g(t,["createTime"]);i!=null&&y(e,["createTime"],i);const o=g(t,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const s=g(t,["promptFeedback"]);s!=null&&y(e,["promptFeedback"],s);const a=g(t,["responseId"]);a!=null&&y(e,["responseId"],a);const c=g(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function AQ(t,e){const n={};if(g(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=g(t,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const i=g(t,["aspectRatio"]);e!==void 0&&i!=null&&y(e,["parameters","aspectRatio"],i);const o=g(t,["guidanceScale"]);if(e!==void 0&&o!=null&&y(e,["parameters","guidanceScale"],o),g(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=g(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&y(e,["parameters","safetySetting"],s);const a=g(t,["personGeneration"]);e!==void 0&&a!=null&&y(e,["parameters","personGeneration"],a);const c=g(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&y(e,["parameters","includeSafetyAttributes"],c);const u=g(t,["includeRaiReason"]);e!==void 0&&u!=null&&y(e,["parameters","includeRaiReason"],u);const f=g(t,["language"]);e!==void 0&&f!=null&&y(e,["parameters","language"],f);const p=g(t,["outputMimeType"]);e!==void 0&&p!=null&&y(e,["parameters","outputOptions","mimeType"],p);const v=g(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&y(e,["parameters","outputOptions","compressionQuality"],v),g(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=g(t,["imageSize"]);if(e!==void 0&&w!=null&&y(e,["parameters","sampleImageSize"],w),g(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function CQ(t,e){const n={},r=g(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const i=g(t,["negativePrompt"]);e!==void 0&&i!=null&&y(e,["parameters","negativePrompt"],i);const o=g(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const s=g(t,["aspectRatio"]);e!==void 0&&s!=null&&y(e,["parameters","aspectRatio"],s);const a=g(t,["guidanceScale"]);e!==void 0&&a!=null&&y(e,["parameters","guidanceScale"],a);const c=g(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const u=g(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&y(e,["parameters","safetySetting"],u);const f=g(t,["personGeneration"]);e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f);const p=g(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&y(e,["parameters","includeSafetyAttributes"],p);const v=g(t,["includeRaiReason"]);e!==void 0&&v!=null&&y(e,["parameters","includeRaiReason"],v);const w=g(t,["language"]);e!==void 0&&w!=null&&y(e,["parameters","language"],w);const E=g(t,["outputMimeType"]);e!==void 0&&E!=null&&y(e,["parameters","outputOptions","mimeType"],E);const S=g(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&y(e,["parameters","outputOptions","compressionQuality"],S);const _=g(t,["addWatermark"]);e!==void 0&&_!=null&&y(e,["parameters","addWatermark"],_);const N=g(t,["labels"]);e!==void 0&&N!=null&&y(e,["labels"],N);const j=g(t,["imageSize"]);e!==void 0&&j!=null&&y(e,["parameters","sampleImageSize"],j);const F=g(t,["enhancePrompt"]);return e!==void 0&&F!=null&&y(e,["parameters","enhancePrompt"],F),n}function IQ(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=g(e,["config"]);return o!=null&&AQ(o,n),n}function PQ(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=g(e,["config"]);return o!=null&&CQ(o,n),n}function NQ(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>BQ(s))),y(e,["generatedImages"],o)}const i=g(t,["positivePromptSafetyAttributes"]);return i!=null&&y(e,["positivePromptSafetyAttributes"],l4(i)),e}function kQ(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>wv(s))),y(e,["generatedImages"],o)}const i=g(t,["positivePromptSafetyAttributes"]);return i!=null&&y(e,["positivePromptSafetyAttributes"],c4(i)),e}function RQ(t,e){const n={},r=g(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r),g(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=g(t,["durationSeconds"]);if(e!==void 0&&i!=null&&y(e,["parameters","durationSeconds"],i),g(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=g(t,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const s=g(t,["resolution"]);e!==void 0&&s!=null&&y(e,["parameters","resolution"],s);const a=g(t,["personGeneration"]);if(e!==void 0&&a!=null&&y(e,["parameters","personGeneration"],a),g(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=g(t,["negativePrompt"]);e!==void 0&&c!=null&&y(e,["parameters","negativePrompt"],c);const u=g(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&y(e,["parameters","enhancePrompt"],u),g(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=g(t,["lastFrame"]);e!==void 0&&f!=null&&y(e,["instances[0]","lastFrame"],_v(f));const p=g(t,["referenceImages"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(w=>DX(w))),y(e,["instances[0]","referenceImages"],v)}if(g(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(g(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function MQ(t,e){const n={},r=g(t,["numberOfVideos"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const i=g(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const o=g(t,["fps"]);e!==void 0&&o!=null&&y(e,["parameters","fps"],o);const s=g(t,["durationSeconds"]);e!==void 0&&s!=null&&y(e,["parameters","durationSeconds"],s);const a=g(t,["seed"]);e!==void 0&&a!=null&&y(e,["parameters","seed"],a);const c=g(t,["aspectRatio"]);e!==void 0&&c!=null&&y(e,["parameters","aspectRatio"],c);const u=g(t,["resolution"]);e!==void 0&&u!=null&&y(e,["parameters","resolution"],u);const f=g(t,["personGeneration"]);e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f);const p=g(t,["pubsubTopic"]);e!==void 0&&p!=null&&y(e,["parameters","pubsubTopic"],p);const v=g(t,["negativePrompt"]);e!==void 0&&v!=null&&y(e,["parameters","negativePrompt"],v);const w=g(t,["enhancePrompt"]);e!==void 0&&w!=null&&y(e,["parameters","enhancePrompt"],w);const E=g(t,["generateAudio"]);e!==void 0&&E!=null&&y(e,["parameters","generateAudio"],E);const S=g(t,["lastFrame"]);e!==void 0&&S!=null&&y(e,["instances[0]","lastFrame"],no(S));const _=g(t,["referenceImages"]);if(e!==void 0&&_!=null){let F=_;Array.isArray(F)&&(F=F.map(q=>OX(q))),y(e,["instances[0]","referenceImages"],F)}const N=g(t,["mask"]);e!==void 0&&N!=null&&y(e,["instances[0]","mask"],MX(N));const j=g(t,["compressionQuality"]);return e!==void 0&&j!=null&&y(e,["parameters","compressionQuality"],j),n}function DQ(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=g(t,["done"]);i!=null&&y(e,["done"],i);const o=g(t,["error"]);o!=null&&y(e,["error"],o);const s=g(t,["response","generateVideoResponse"]);return s!=null&&y(e,["response"],FQ(s)),e}function OQ(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=g(t,["done"]);i!=null&&y(e,["done"],i);const o=g(t,["error"]);o!=null&&y(e,["error"],o);const s=g(t,["response"]);return s!=null&&y(e,["response"],UQ(s)),e}function LQ(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=g(e,["image"]);o!=null&&y(n,["instances[0]","image"],_v(o));const s=g(e,["video"]);s!=null&&y(n,["instances[0]","video"],d4(s));const a=g(e,["source"]);a!=null&&VQ(a,n);const c=g(e,["config"]);return c!=null&&RQ(c,n),n}function jQ(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=g(e,["image"]);o!=null&&y(n,["instances[0]","image"],no(o));const s=g(e,["video"]);s!=null&&y(n,["instances[0]","video"],f4(s));const a=g(e,["source"]);a!=null&&$Q(a,n);const c=g(e,["config"]);return c!=null&&MQ(c,n),n}function FQ(t){const e={},n=g(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>qQ(s))),y(e,["generatedVideos"],o)}const r=g(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const i=g(t,["raiMediaFilteredReasons"]);return i!=null&&y(e,["raiMediaFilteredReasons"],i),e}function UQ(t){const e={},n=g(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>GQ(s))),y(e,["generatedVideos"],o)}const r=g(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const i=g(t,["raiMediaFilteredReasons"]);return i!=null&&y(e,["raiMediaFilteredReasons"],i),e}function VQ(t,e){const n={},r=g(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const i=g(t,["image"]);e!==void 0&&i!=null&&y(e,["instances[0]","image"],_v(i));const o=g(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],d4(o)),n}function $Q(t,e){const n={},r=g(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const i=g(t,["image"]);e!==void 0&&i!=null&&y(e,["instances[0]","image"],no(i));const o=g(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],f4(o)),n}function BQ(t){const e={},n=g(t,["_self"]);n!=null&&y(e,["image"],ZQ(n));const r=g(t,["raiFilteredReason"]);r!=null&&y(e,["raiFilteredReason"],r);const i=g(t,["_self"]);return i!=null&&y(e,["safetyAttributes"],l4(i)),e}function wv(t){const e={},n=g(t,["_self"]);n!=null&&y(e,["image"],a4(n));const r=g(t,["raiFilteredReason"]);r!=null&&y(e,["raiFilteredReason"],r);const i=g(t,["_self"]);i!=null&&y(e,["safetyAttributes"],c4(i));const o=g(t,["prompt"]);return o!=null&&y(e,["enhancedPrompt"],o),e}function zQ(t){const e={},n=g(t,["_self"]);n!=null&&y(e,["mask"],a4(n));const r=g(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),y(e,["labels"],i)}return e}function qQ(t){const e={},n=g(t,["video"]);return n!=null&&y(e,["video"],kX(n)),e}function GQ(t){const e={},n=g(t,["_self"]);return n!=null&&y(e,["video"],RX(n)),e}function HQ(t){const e={},n=g(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const r=g(t,["responseJsonSchema"]);r!=null&&y(e,["responseJsonSchema"],r);const i=g(t,["audioTimestamp"]);i!=null&&y(e,["audioTimestamp"],i);const o=g(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const s=g(t,["enableAffectiveDialog"]);s!=null&&y(e,["enableAffectiveDialog"],s);const a=g(t,["frequencyPenalty"]);a!=null&&y(e,["frequencyPenalty"],a);const c=g(t,["logprobs"]);c!=null&&y(e,["logprobs"],c);const u=g(t,["maxOutputTokens"]);u!=null&&y(e,["maxOutputTokens"],u);const f=g(t,["mediaResolution"]);f!=null&&y(e,["mediaResolution"],f);const p=g(t,["presencePenalty"]);p!=null&&y(e,["presencePenalty"],p);const v=g(t,["responseLogprobs"]);v!=null&&y(e,["responseLogprobs"],v);const w=g(t,["responseMimeType"]);w!=null&&y(e,["responseMimeType"],w);const E=g(t,["responseModalities"]);E!=null&&y(e,["responseModalities"],E);const S=g(t,["responseSchema"]);S!=null&&y(e,["responseSchema"],S);const _=g(t,["routingConfig"]);_!=null&&y(e,["routingConfig"],_);const N=g(t,["seed"]);N!=null&&y(e,["seed"],N);const j=g(t,["speechConfig"]);j!=null&&y(e,["speechConfig"],j);const F=g(t,["stopSequences"]);F!=null&&y(e,["stopSequences"],F);const q=g(t,["temperature"]);q!=null&&y(e,["temperature"],q);const V=g(t,["thinkingConfig"]);V!=null&&y(e,["thinkingConfig"],V);const $=g(t,["topK"]);$!=null&&y(e,["topK"],$);const k=g(t,["topP"]);if(k!=null&&y(e,["topP"],k),g(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function WQ(t,e){const n={},r=g(e,["model"]);return r!=null&&y(n,["_url","name"],wt(t,r)),n}function KQ(t,e){const n={},r=g(e,["model"]);return r!=null&&y(n,["_url","name"],wt(t,r)),n}function YQ(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function JQ(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function QQ(t){const e={},n=g(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const r=g(t,["imageSize"]);if(r!=null&&y(e,["imageSize"],r),g(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(g(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function XQ(t){const e={},n=g(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const r=g(t,["imageSize"]);r!=null&&y(e,["imageSize"],r);const i=g(t,["personGeneration"]);i!=null&&y(e,["personGeneration"],i);const o=g(t,["outputMimeType"]);o!=null&&y(e,["imageOutputOptions","mimeType"],o);const s=g(t,["outputCompressionQuality"]);return s!=null&&y(e,["imageOutputOptions","compressionQuality"],s),e}function ZQ(t){const e={},n=g(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],za(n));const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function a4(t){const e={},n=g(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const r=g(t,["bytesBase64Encoded"]);r!=null&&y(e,["imageBytes"],za(r));const i=g(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function _v(t){const e={};if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=g(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],za(n));const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function no(t){const e={},n=g(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const r=g(t,["imageBytes"]);r!=null&&y(e,["bytesBase64Encoded"],za(r));const i=g(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function eX(t,e,n){const r={},i=g(e,["pageSize"]);n!==void 0&&i!=null&&y(n,["_query","pageSize"],i);const o=g(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const s=g(e,["filter"]);n!==void 0&&s!=null&&y(n,["_query","filter"],s);const a=g(e,["queryBase"]);return n!==void 0&&a!=null&&y(n,["_url","models_url"],e4(t,a)),r}function tX(t,e,n){const r={},i=g(e,["pageSize"]);n!==void 0&&i!=null&&y(n,["_query","pageSize"],i);const o=g(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const s=g(e,["filter"]);n!==void 0&&s!=null&&y(n,["_query","filter"],s);const a=g(e,["queryBase"]);return n!==void 0&&a!=null&&y(n,["_url","models_url"],e4(t,a)),r}function nX(t,e){const n={},r=g(e,["config"]);return r!=null&&eX(t,r,n),n}function rX(t,e){const n={},r=g(e,["config"]);return r!=null&&tX(t,r,n),n}function iX(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=g(t,["_self"]);if(i!=null){let o=t4(i);Array.isArray(o)&&(o=o.map(s=>Mw(s))),y(e,["models"],o)}return e}function oX(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=g(t,["_self"]);if(i!=null){let o=t4(i);Array.isArray(o)&&(o=o.map(s=>Dw(s))),y(e,["models"],o)}return e}function sX(t){const e={},n=g(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const r=g(t,["segmentationClasses"]);r!=null&&y(e,["maskClasses"],r);const i=g(t,["maskDilation"]);return i!=null&&y(e,["dilation"],i),e}function Mw(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=g(t,["description"]);i!=null&&y(e,["description"],i);const o=g(t,["version"]);o!=null&&y(e,["version"],o);const s=g(t,["_self"]);s!=null&&y(e,["tunedModelInfo"],_X(s));const a=g(t,["inputTokenLimit"]);a!=null&&y(e,["inputTokenLimit"],a);const c=g(t,["outputTokenLimit"]);c!=null&&y(e,["outputTokenLimit"],c);const u=g(t,["supportedGenerationMethods"]);u!=null&&y(e,["supportedActions"],u);const f=g(t,["temperature"]);f!=null&&y(e,["temperature"],f);const p=g(t,["maxTemperature"]);p!=null&&y(e,["maxTemperature"],p);const v=g(t,["topP"]);v!=null&&y(e,["topP"],v);const w=g(t,["topK"]);w!=null&&y(e,["topK"],w);const E=g(t,["thinking"]);return E!=null&&y(e,["thinking"],E),e}function Dw(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=g(t,["description"]);i!=null&&y(e,["description"],i);const o=g(t,["versionId"]);o!=null&&y(e,["version"],o);const s=g(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>xQ(v))),y(e,["endpoints"],p)}const a=g(t,["labels"]);a!=null&&y(e,["labels"],a);const c=g(t,["_self"]);c!=null&&y(e,["tunedModelInfo"],EX(c));const u=g(t,["defaultCheckpointId"]);u!=null&&y(e,["defaultCheckpointId"],u);const f=g(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["checkpoints"],p)}return e}function aX(t){const e={},n=g(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const r=g(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const i=g(t,["executableCode"]);i!=null&&y(e,["executableCode"],i);const o=g(t,["fileData"]);o!=null&&y(e,["fileData"],bQ(o));const s=g(t,["functionCall"]);s!=null&&y(e,["functionCall"],wQ(s));const a=g(t,["functionResponse"]);a!=null&&y(e,["functionResponse"],a);const c=g(t,["inlineData"]);c!=null&&y(e,["inlineData"],HJ(c));const u=g(t,["text"]);u!=null&&y(e,["text"],u);const f=g(t,["thought"]);f!=null&&y(e,["thought"],f);const p=g(t,["thoughtSignature"]);p!=null&&y(e,["thoughtSignature"],p);const v=g(t,["videoMetadata"]);return v!=null&&y(e,["videoMetadata"],v),e}function lX(t){const e={},n=g(t,["productImage"]);return n!=null&&y(e,["image"],no(n)),e}function cX(t,e){const n={},r=g(t,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const i=g(t,["baseSteps"]);e!==void 0&&i!=null&&y(e,["parameters","baseSteps"],i);const o=g(t,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const s=g(t,["seed"]);e!==void 0&&s!=null&&y(e,["parameters","seed"],s);const a=g(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&y(e,["parameters","safetySetting"],a);const c=g(t,["personGeneration"]);e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c);const u=g(t,["addWatermark"]);e!==void 0&&u!=null&&y(e,["parameters","addWatermark"],u);const f=g(t,["outputMimeType"]);e!==void 0&&f!=null&&y(e,["parameters","outputOptions","mimeType"],f);const p=g(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&y(e,["parameters","outputOptions","compressionQuality"],p);const v=g(t,["enhancePrompt"]);e!==void 0&&v!=null&&y(e,["parameters","enhancePrompt"],v);const w=g(t,["labels"]);return e!==void 0&&w!=null&&y(e,["labels"],w),n}function uX(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["source"]);i!=null&&fX(i,n);const o=g(e,["config"]);return o!=null&&cX(o,n),n}function dX(t){const e={},n=g(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>wv(i))),y(e,["generatedImages"],r)}return e}function fX(t,e){const n={},r=g(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const i=g(t,["personImage"]);e!==void 0&&i!=null&&y(e,["instances[0]","personImage","image"],no(i));const o=g(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>lX(a))),y(e,["instances[0]","productImages"],s)}return n}function hX(t){const e={},n=g(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],no(n));const r=g(t,["referenceId"]);r!=null&&y(e,["referenceId"],r);const i=g(t,["referenceType"]);i!=null&&y(e,["referenceType"],i);const o=g(t,["maskImageConfig"]);o!=null&&y(e,["maskImageConfig"],sX(o));const s=g(t,["controlImageConfig"]);s!=null&&y(e,["controlImageConfig"],ZJ(s));const a=g(t,["styleImageConfig"]);a!=null&&y(e,["styleImageConfig"],a);const c=g(t,["subjectImageConfig"]);return c!=null&&y(e,["subjectImageConfig"],c),e}function l4(t){const e={},n=g(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const r=g(t,["safetyAttributes","scores"]);r!=null&&y(e,["scores"],r);const i=g(t,["contentType"]);return i!=null&&y(e,["contentType"],i),e}function c4(t){const e={},n=g(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const r=g(t,["safetyAttributes","scores"]);r!=null&&y(e,["scores"],r);const i=g(t,["contentType"]);return i!=null&&y(e,["contentType"],i),e}function pX(t){const e={},n=g(t,["category"]);if(n!=null&&y(e,["category"],n),g(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=g(t,["threshold"]);return r!=null&&y(e,["threshold"],r),e}function mX(t){const e={},n=g(t,["image"]);return n!=null&&y(e,["image"],no(n)),e}function gX(t,e){const n={},r=g(t,["mode"]);e!==void 0&&r!=null&&y(e,["parameters","mode"],r);const i=g(t,["maxPredictions"]);e!==void 0&&i!=null&&y(e,["parameters","maxPredictions"],i);const o=g(t,["confidenceThreshold"]);e!==void 0&&o!=null&&y(e,["parameters","confidenceThreshold"],o);const s=g(t,["maskDilation"]);e!==void 0&&s!=null&&y(e,["parameters","maskDilation"],s);const a=g(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&y(e,["parameters","binaryColorThreshold"],a);const c=g(t,["labels"]);return e!==void 0&&c!=null&&y(e,["labels"],c),n}function vX(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["source"]);i!=null&&xX(i,n);const o=g(e,["config"]);return o!=null&&gX(o,n),n}function yX(t){const e={},n=g(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>zQ(i))),y(e,["generatedMasks"],r)}return e}function xX(t,e){const n={},r=g(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const i=g(t,["image"]);e!==void 0&&i!=null&&y(e,["instances[0]","image"],no(i));const o=g(t,["scribbleImage"]);return e!==void 0&&o!=null&&y(e,["instances[0]","scribble"],mX(o)),n}function bX(t){const e={},n=g(t,["retrievalConfig"]);n!=null&&y(e,["retrievalConfig"],n);const r=g(t,["functionCallingConfig"]);return r!=null&&y(e,["functionCallingConfig"],_Q(r)),e}function wX(t){const e={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=g(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const r=g(t,["fileSearch"]);r!=null&&y(e,["fileSearch"],r);const i=g(t,["codeExecution"]);if(i!=null&&y(e,["codeExecution"],i),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=g(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),y(e,["functionDeclarations"],f)}const s=g(t,["googleMaps"]);s!=null&&y(e,["googleMaps"],YQ(s));const a=g(t,["googleSearch"]);a!=null&&y(e,["googleSearch"],JQ(a));const c=g(t,["googleSearchRetrieval"]);c!=null&&y(e,["googleSearchRetrieval"],c);const u=g(t,["urlContext"]);return u!=null&&y(e,["urlContext"],u),e}function u4(t){const e={},n=g(t,["retrieval"]);n!=null&&y(e,["retrieval"],n);const r=g(t,["computerUse"]);if(r!=null&&y(e,["computerUse"],r),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=g(t,["codeExecution"]);i!=null&&y(e,["codeExecution"],i);const o=g(t,["enterpriseWebSearch"]);o!=null&&y(e,["enterpriseWebSearch"],o);const s=g(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>EQ(v))),y(e,["functionDeclarations"],p)}const a=g(t,["googleMaps"]);a!=null&&y(e,["googleMaps"],a);const c=g(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],c);const u=g(t,["googleSearchRetrieval"]);u!=null&&y(e,["googleSearchRetrieval"],u);const f=g(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function _X(t){const e={},n=g(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const r=g(t,["createTime"]);r!=null&&y(e,["createTime"],r);const i=g(t,["updateTime"]);return i!=null&&y(e,["updateTime"],i),e}function EX(t){const e={},n=g(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const r=g(t,["createTime"]);r!=null&&y(e,["createTime"],r);const i=g(t,["updateTime"]);return i!=null&&y(e,["updateTime"],i),e}function SX(t,e){const n={},r=g(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const i=g(t,["description"]);e!==void 0&&i!=null&&y(e,["description"],i);const o=g(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function TX(t,e){const n={},r=g(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const i=g(t,["description"]);e!==void 0&&i!=null&&y(e,["description"],i);const o=g(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function AX(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","name"],wt(t,r));const i=g(e,["config"]);return i!=null&&SX(i,n),n}function CX(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["config"]);return i!=null&&TX(i,n),n}function IX(t,e){const n={},r=g(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const i=g(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&y(e,["parameters","safetySetting"],i);const o=g(t,["personGeneration"]);e!==void 0&&o!=null&&y(e,["parameters","personGeneration"],o);const s=g(t,["includeRaiReason"]);e!==void 0&&s!=null&&y(e,["parameters","includeRaiReason"],s);const a=g(t,["outputMimeType"]);e!==void 0&&a!=null&&y(e,["parameters","outputOptions","mimeType"],a);const c=g(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&y(e,["parameters","outputOptions","compressionQuality"],c);const u=g(t,["enhanceInputImage"]);e!==void 0&&u!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],u);const f=g(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=g(t,["labels"]);e!==void 0&&p!=null&&y(e,["labels"],p);const v=g(t,["numberOfImages"]);e!==void 0&&v!=null&&y(e,["parameters","sampleCount"],v);const w=g(t,["mode"]);return e!==void 0&&w!=null&&y(e,["parameters","mode"],w),n}function PX(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],wt(t,r));const i=g(e,["image"]);i!=null&&y(n,["instances[0]","image"],no(i));const o=g(e,["upscaleFactor"]);o!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=g(e,["config"]);return s!=null&&IX(s,n),n}function NX(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>wv(o))),y(e,["generatedImages"],i)}return e}function kX(t){const e={},n=g(t,["uri"]);n!=null&&y(e,["uri"],n);const r=g(t,["encodedVideo"]);r!=null&&y(e,["videoBytes"],za(r));const i=g(t,["encoding"]);return i!=null&&y(e,["mimeType"],i),e}function RX(t){const e={},n=g(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const r=g(t,["bytesBase64Encoded"]);r!=null&&y(e,["videoBytes"],za(r));const i=g(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function MX(t){const e={},n=g(t,["image"]);n!=null&&y(e,["_self"],no(n));const r=g(t,["maskMode"]);return r!=null&&y(e,["maskMode"],r),e}function DX(t){const e={},n=g(t,["image"]);n!=null&&y(e,["image"],_v(n));const r=g(t,["referenceType"]);return r!=null&&y(e,["referenceType"],r),e}function OX(t){const e={},n=g(t,["image"]);n!=null&&y(e,["image"],no(n));const r=g(t,["referenceType"]);return r!=null&&y(e,["referenceType"],r),e}function d4(t){const e={},n=g(t,["uri"]);n!=null&&y(e,["uri"],n);const r=g(t,["videoBytes"]);r!=null&&y(e,["encodedVideo"],za(r));const i=g(t,["mimeType"]);return i!=null&&y(e,["encoding"],i),e}function f4(t){const e={},n=g(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const r=g(t,["videoBytes"]);r!=null&&y(e,["bytesBase64Encoded"],za(r));const i=g(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LX(t,e){const n={},r=g(t,["displayName"]);return e!==void 0&&r!=null&&y(e,["displayName"],r),n}function jX(t){const e={},n=g(t,["config"]);return n!=null&&LX(n,e),e}function FX(t,e){const n={},r=g(t,["force"]);return e!==void 0&&r!=null&&y(e,["_query","force"],r),n}function UX(t){const e={},n=g(t,["name"]);n!=null&&y(e,["_url","name"],n);const r=g(t,["config"]);return r!=null&&FX(r,e),e}function VX(t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function $X(t,e){const n={},r=g(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),y(e,["customMetadata"],o)}const i=g(t,["chunkingConfig"]);return e!==void 0&&i!=null&&y(e,["chunkingConfig"],i),n}function BX(t){const e={},n=g(t,["name"]);n!=null&&y(e,["name"],n);const r=g(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=g(t,["done"]);i!=null&&y(e,["done"],i);const o=g(t,["error"]);o!=null&&y(e,["error"],o);const s=g(t,["response"]);return s!=null&&y(e,["response"],qX(s)),e}function zX(t){const e={},n=g(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const r=g(t,["fileName"]);r!=null&&y(e,["fileName"],r);const i=g(t,["config"]);return i!=null&&$X(i,e),e}function qX(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["parent"]);r!=null&&y(e,["parent"],r);const i=g(t,["documentName"]);return i!=null&&y(e,["documentName"],i),e}function GX(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=g(t,["pageToken"]);return e!==void 0&&i!=null&&y(e,["_query","pageToken"],i),n}function HX(t){const e={},n=g(t,["config"]);return n!=null&&GX(n,e),e}function WX(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=g(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),y(e,["fileSearchStores"],o)}return e}function h4(t,e){const n={},r=g(t,["mimeType"]);e!==void 0&&r!=null&&y(e,["mimeType"],r);const i=g(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const o=g(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),y(e,["customMetadata"],a)}const s=g(t,["chunkingConfig"]);return e!==void 0&&s!=null&&y(e,["chunkingConfig"],s),n}function KX(t){const e={},n=g(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const r=g(t,["config"]);return r!=null&&h4(r,e),e}function YX(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JX="Content-Type",QX="X-Server-Timeout",XX="User-Agent",Ow="x-goog-api-client",ZX="1.37.0",eZ=`google-genai-sdk/${ZX}`,tZ="v1beta1",nZ="v1beta";class rZ{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:tZ,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:nZ,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>o.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&iZ(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await CN(i),new Nw(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await CN(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Wi(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";const a="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:f}=yield ot(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=o.decode(f,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),_=S.status,N=S.code,j=`got status: ${_}. ${JSON.stringify(E)}`;if(N>=400&&N<600)throw new xv({message:j,status:N})}}catch(E){if(E.name==="ApiError")throw E}s+=p;let v=-1,w=0;for(;;){v=-1,w=0;for(const _ of c){const N=s.indexOf(_);N!==-1&&(v===-1||N<v)&&(v=N,w=_.length)}if(v===-1)break;const E=s.substring(0,v);s=s.substring(v+w);const S=E.trim();if(S.startsWith(a)){const _=S.substring(a.length).trim();try{const N=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ot(new Nw(N))}catch(N){throw new Error(`exception parsing stream chunk ${_}. ${N}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=eZ+" "+this.clientOptions.userAgentExtra;return e[XX]=n,e[Ow]=n,e[JX]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(QX,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const c={file:i},u=this.getFileName(e),f=Ie("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(f,i.sizeBytes,i.mimeType,u,c,n==null?void 0:n.httpOptions);return o.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),a=String(s.size),c=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};r!=null&&h4(r,p);const v=await this.fetchUploadUrl(u,a,c,f,p,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var a;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:c});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(a=u==null?void 0:u.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function CN(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new xv({message:i,status:n}):new Error(i)}}function iZ(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const u=s[c],f=a[c];u&&typeof u=="object"&&!Array.isArray(u)&&f&&typeof f=="object"&&!Array.isArray(f)?a[c]=r(f,u):(f&&u&&typeof f!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof u}. Overwriting.`),a[c]=u)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oZ="mcp_used/unknown";let sZ=!1;function p4(t){for(const e of t)if(aZ(e)||typeof e=="object"&&"inputSchema"in e)return!0;return sZ}function m4(t){var e;const n=(e=t[Ow])!==null&&e!==void 0?e:"";t[Ow]=(n+` ${oZ}`).trimStart()}function aZ(t){return t!==null&&typeof t=="object"&&t instanceof iS}function lZ(t){return Wi(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const s=yield ot(n.listTools({cursor:i}));for(const a of s.tools)yield yield ot(a),o++;if(!s.nextCursor)break;i=s.nextCursor}})}class iS{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new iS(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const f of this.mcpClients)try{for(var a=!0,c=(n=void 0,Ki(lZ(f))),u;u=await c.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const p=i;s.push(p);const v=p.name;if(o[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);o[v]=f}}catch(p){n={error:p}}finally{try{!a&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),UK(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function cZ(t,e,n){const r=new kK;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class uZ{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=hZ(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const f=new Promise(F=>{u=F}),p=e.callbacks,v=function(){u({})},w=this.apiClient,E={onopen:v,onmessage:F=>{cZ(w,p.onmessage,F)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(F){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(F){}},S=this.webSocketFactory.create(c,fZ(s),E);S.connect(),await f;const j={setup:{model:wt(this.apiClient,e.model)}};return S.send(JSON.stringify(j)),new dZ(S,this.apiClient)}}class dZ{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=LJ(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=OJ(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(iu.PLAY)}pause(){this.sendPlaybackControl(iu.PAUSE)}stop(){this.sendPlaybackControl(iu.STOP)}resetContext(){this.sendPlaybackControl(iu.RESET_CONTEXT)}close(){this.conn.close()}}function fZ(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function hZ(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pZ="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function mZ(t,e,n){const r=new NK;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=UJ(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class gZ{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new uZ(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&p4(e.config.tools)&&m4(p);const v=bZ(p);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,f);else{const O=this.apiClient.getApiKey();let z="BidiGenerateContent",U="key";O!=null&&O.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),z="BidiGenerateContentConstrained",U="access_token"),f=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.${z}?${U}=${O}`}let w=()=>{};const E=new Promise(O=>{w=O}),S=e.callbacks,_=function(){var O;(O=S==null?void 0:S.onopen)===null||O===void 0||O.call(S),w({})},N=this.apiClient,j={onopen:_,onmessage:O=>{mZ(N,S.onmessage,O)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(O){},onclose:(r=S==null?void 0:S.onclose)!==null&&r!==void 0?r:function(O){}},F=this.webSocketFactory.create(f,xZ(v),j);F.connect(),await E;let q=wt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){const O=this.apiClient.getProject(),z=this.apiClient.getLocation();q=`projects/${O}/locations/${z}/`+q}let V={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[qm.AUDIO]}:e.config.responseModalities=[qm.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const $=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],k=[];for(const O of $)if(this.isCallableTool(O)){const z=O;k.push(await z.tool())}else k.push(O);k.length>0&&(e.config.tools=k);const D={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=DJ(this.apiClient,D):V=MJ(this.apiClient,D),delete V.config,F.send(JSON.stringify(V)),new yZ(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const vZ={turnComplete:!0};class yZ{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=xi(n.turns),e.isVertexAI()||(r=r.map(i=>bv(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(pZ)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},vZ),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:FJ(e)}:n={realtimeInput:jJ(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function xZ(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function bZ(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IN=10;function PN(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(yu(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function yu(t){return"callTool"in t&&typeof t.callTool=="function"}function wZ(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>yu(i)))!==null&&r!==void 0?r:!1}function NN(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(yu(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function kN(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _Z extends Os{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!wZ(n)||PN(n.config))return await this.generateContentInternal(c);const u=NN(n);if(u.length>0){const S=u.map(_=>`tools[${_}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${S}.`)}let f,p;const v=xi(c.contents),w=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:IN;let E=0;for(;E<w&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const S=f.candidates[0].content,_=[];for(const N of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(yu(N)){const F=await N.callTool(f.functionCalls);_.push(...F)}E++,p={role:"user",parts:_},c.contents=xi(c.contents),c.contents.push(S),c.contents.push(p),kN(c.config)&&(v.push(S),v.push(p))}return kN(c.config)&&(f.automaticFunctionCallingHistory=v),f},this.generateContentStream=async n=>{var r,i,o,s,a;if(this.maybeMoveToResponseJsonSchem(n),PN(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const c=NN(n);if(c.length>0){const p=c.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,f=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:s.push(c);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new oc(Cs.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,a,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((c=(a=n.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>yu(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&p4(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},c);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),m4(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(yu(s)){const a=s,c=await a.tool();for(const u of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(o.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);o.set(u.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:IN;let s=!1,a=0;const c=await this.initAfcToolsMap(e);return(function(u,f,p){return Wi(this,arguments,function*(){for(var v,w,E,S,_,N;a<o;){s&&(a++,s=!1);const V=yield ot(u.processParamsMaybeAddMcpUsage(p)),$=yield ot(u.generateContentStreamInternal(V)),k=[],D=[];try{for(var j=!0,F=(w=void 0,Ki($)),q;q=yield ot(F.next()),v=q.done,!v;j=!0){S=q.value,j=!1;const O=S;if(yield yield ot(O),O.candidates&&(!((_=O.candidates[0])===null||_===void 0)&&_.content)){D.push(O.candidates[0].content);for(const z of(N=O.candidates[0].content.parts)!==null&&N!==void 0?N:[])if(a<o&&z.functionCall){if(!z.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(z.functionCall.name)){const U=yield ot(f.get(z.functionCall.name).callTool([z.functionCall]));k.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${z.functionCall.name}`)}}}}catch(O){w={error:O}}finally{try{!j&&!v&&(E=F.return)&&(yield ot(E.call(F)))}finally{if(w)throw w.error}}if(k.length>0){s=!0;const O=new Gd;O.candidates=[{content:{role:"user",parts:k}}],yield yield ot(O);const z=[];z.push(...D),z.push({role:"user",parts:k});const U=xi(p.contents).concat(z);p.contents=U}else break}})})(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=SN(this.apiClient,e);return a=Ie("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=AN(f),v=new Gd;return Object.assign(v,p),v})}else{const u=EN(this.apiClient,e);return a=Ie("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=TN(f),v=new Gd;return Object.assign(v,p),v})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=SN(this.apiClient,e);return a=Ie("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Wi(this,arguments,function*(){var v,w,E,S;try{for(var _=!0,N=Ki(p),j;j=yield ot(N.next()),v=j.done,!v;_=!0){S=j.value,_=!1;const F=S,q=AN(yield ot(F.json()));q.sdkHttpResponse={headers:F.headers};const V=new Gd;Object.assign(V,q),yield yield ot(V)}}catch(F){w={error:F}}finally{try{!_&&!v&&(E=N.return)&&(yield ot(E.call(N)))}finally{if(w)throw w.error}}})})}else{const u=EN(this.apiClient,e);return a=Ie("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return Wi(this,arguments,function*(){var v,w,E,S;try{for(var _=!0,N=Ki(p),j;j=yield ot(N.next()),v=j.done,!v;_=!0){S=j.value,_=!1;const F=S,q=TN(yield ot(F.json()));q.sdkHttpResponse={headers:F.headers};const V=new Gd;Object.assign(V,q),yield yield ot(V)}}catch(F){w={error:F}}finally{try{!_&&!v&&(E=N.return)&&(yield ot(E.call(N)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=gQ(this.apiClient,e);return a=Ie("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=yQ(f),v=new sN;return Object.assign(v,p),v})}else{const u=mQ(this.apiClient,e);return a=Ie("{model}:batchEmbedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=vQ(f),v=new sN;return Object.assign(v,p),v})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=PQ(this.apiClient,e);return a=Ie("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=kQ(f),v=new aN;return Object.assign(v,p),v})}else{const u=IQ(this.apiClient,e);return a=Ie("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=NQ(f),v=new aN;return Object.assign(v,p),v})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=dQ(this.apiClient,e);return o=Ie("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const u=fQ(c),f=new xK;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=PX(this.apiClient,e);return o=Ie("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const u=NX(c),f=new bK;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=uX(this.apiClient,e);return o=Ie("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=dX(c),f=new wK;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=vX(this.apiClient,e);return o=Ie("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=yX(c),f=new _K;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=KQ(this.apiClient,e);return a=Ie("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Dw(f))}else{const u=WQ(this.apiClient,e);return a=Ie("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Mw(f))}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=rX(this.apiClient,e);return a=Ie("{models_url}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=oX(f),v=new lN;return Object.assign(v,p),v})}else{const u=nX(this.apiClient,e);return a=Ie("{models_url}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=iX(f),v=new lN;return Object.assign(v,p),v})}}async update(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=CX(this.apiClient,e);return a=Ie("{model}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Dw(f))}else{const u=AX(this.apiClient,e);return a=Ie("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Mw(f))}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=aQ(this.apiClient,e);return a=Ie("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=cQ(f),v=new cN;return Object.assign(v,p),v})}else{const u=sQ(this.apiClient,e);return a=Ie("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=lQ(f),v=new cN;return Object.assign(v,p),v})}}async countTokens(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=rQ(this.apiClient,e);return a=Ie("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=oQ(f),v=new uN;return Object.assign(v,p),v})}else{const u=nQ(this.apiClient,e);return a=Ie("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=iQ(f),v=new uN;return Object.assign(v,p),v})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=YJ(this.apiClient,e);return o=Ie("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const u=JJ(c),f=new EK;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=jQ(this.apiClient,e);return a=Ie("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const p=OQ(f),v=new Gm;return Object.assign(v,p),v})}else{const u=LQ(this.apiClient,e);return a=Ie("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const p=DQ(f),v=new Gm;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EZ extends Os{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=hK(e);return a=Ie("{operationName}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{const u=fK(e);return a=Ie("{operationName}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=oK(e);return o=Ie("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SZ(t){const e={},n=g(t,["data"]);if(n!=null&&y(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function TZ(t){const e={},n=g(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>DZ(o))),y(e,["parts"],i)}const r=g(t,["role"]);return r!=null&&y(e,["role"],r),e}function AZ(t,e,n){const r={},i=g(e,["expireTime"]);n!==void 0&&i!=null&&y(n,["expireTime"],i);const o=g(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&y(n,["newSessionExpireTime"],o);const s=g(e,["uses"]);n!==void 0&&s!=null&&y(n,["uses"],s);const a=g(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&y(n,["bidiGenerateContentSetup"],MZ(t,a));const c=g(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&y(n,["fieldMask"],c),r}function CZ(t,e){const n={},r=g(e,["config"]);return r!=null&&y(n,["config"],AZ(t,r,n)),n}function IZ(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=g(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function PZ(t){const e={},n=g(t,["id"]);n!=null&&y(e,["id"],n);const r=g(t,["args"]);r!=null&&y(e,["args"],r);const i=g(t,["name"]);if(i!=null&&y(e,["name"],i),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NZ(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function kZ(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function RZ(t,e){const n={},r=g(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],r);const i=g(t,["responseModalities"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig","responseModalities"],i);const o=g(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const s=g(t,["topP"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","topP"],s);const a=g(t,["topK"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","topK"],a);const c=g(t,["maxOutputTokens"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","maxOutputTokens"],c);const u=g(t,["mediaResolution"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","mediaResolution"],u);const f=g(t,["seed"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","seed"],f);const p=g(t,["speechConfig"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","speechConfig"],rS(p));const v=g(t,["thinkingConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","thinkingConfig"],v);const w=g(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const E=g(t,["systemInstruction"]);e!==void 0&&E!=null&&y(e,["setup","systemInstruction"],TZ(ir(E)));const S=g(t,["tools"]);if(e!==void 0&&S!=null){let $=Hu(S);Array.isArray($)&&($=$.map(k=>LZ(Gu(k)))),y(e,["setup","tools"],$)}const _=g(t,["sessionResumption"]);e!==void 0&&_!=null&&y(e,["setup","sessionResumption"],OZ(_));const N=g(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&y(e,["setup","inputAudioTranscription"],N);const j=g(t,["outputAudioTranscription"]);e!==void 0&&j!=null&&y(e,["setup","outputAudioTranscription"],j);const F=g(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const q=g(t,["contextWindowCompression"]);e!==void 0&&q!=null&&y(e,["setup","contextWindowCompression"],q);const V=g(t,["proactivity"]);if(e!==void 0&&V!=null&&y(e,["setup","proactivity"],V),g(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function MZ(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["setup","model"],wt(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],RZ(i,n)),n}function DZ(t){const e={},n=g(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const r=g(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const i=g(t,["executableCode"]);i!=null&&y(e,["executableCode"],i);const o=g(t,["fileData"]);o!=null&&y(e,["fileData"],IZ(o));const s=g(t,["functionCall"]);s!=null&&y(e,["functionCall"],PZ(s));const a=g(t,["functionResponse"]);a!=null&&y(e,["functionResponse"],a);const c=g(t,["inlineData"]);c!=null&&y(e,["inlineData"],SZ(c));const u=g(t,["text"]);u!=null&&y(e,["text"],u);const f=g(t,["thought"]);f!=null&&y(e,["thought"],f);const p=g(t,["thoughtSignature"]);p!=null&&y(e,["thoughtSignature"],p);const v=g(t,["videoMetadata"]);return v!=null&&y(e,["videoMetadata"],v),e}function OZ(t){const e={},n=g(t,["handle"]);if(n!=null&&y(e,["handle"],n),g(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function LZ(t){const e={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=g(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const r=g(t,["fileSearch"]);r!=null&&y(e,["fileSearch"],r);const i=g(t,["codeExecution"]);if(i!=null&&y(e,["codeExecution"],i),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=g(t,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),y(e,["functionDeclarations"],f)}const s=g(t,["googleMaps"]);s!=null&&y(e,["googleMaps"],NZ(s));const a=g(t,["googleSearch"]);a!=null&&y(e,["googleSearch"],kZ(a));const c=g(t,["googleSearchRetrieval"]);c!=null&&y(e,["googleSearchRetrieval"],c);const u=g(t,["urlContext"]);return u!=null&&y(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jZ(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function FZ(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=jZ(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(u=>s.includes(u)?`generationConfig.${u}`:u));const c=[];o&&c.push(o),a.length>0&&c.push(...a),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class UZ extends Os{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=CZ(this.apiClient,e);o=Ie("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const c=FZ(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VZ(t,e){const n={},r=g(t,["force"]);return e!==void 0&&r!=null&&y(e,["_query","force"],r),n}function $Z(t){const e={},n=g(t,["name"]);n!=null&&y(e,["_url","name"],n);const r=g(t,["config"]);return r!=null&&VZ(r,e),e}function BZ(t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function zZ(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=g(t,["pageToken"]);return e!==void 0&&i!=null&&y(e,["_query","pageToken"],i),n}function qZ(t){const e={},n=g(t,["parent"]);n!=null&&y(e,["_url","parent"],n);const r=g(t,["config"]);return r!=null&&zZ(r,e),e}function GZ(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=g(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),y(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HZ extends Os{constructor(e){super(),this.apiClient=e,this.list=async n=>new oc(Cs.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=BZ(e);return o=Ie("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=$Z(e);i=Ie("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=qZ(e);return o=Ie("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=GZ(c),f=new SK;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WZ extends Os{constructor(e,n=new HZ(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new oc(Cs.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=jX(e);return o=Ie("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=VX(e);return o=Ie("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=UX(e);i=Ie("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=HX(e);return o=Ie("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=WX(c),f=new TK;return Object.assign(f,u),f})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=KX(e);return o=Ie("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=YX(c),f=new AK;return Object.assign(f,u),f})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=zX(e);return o=Ie("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=BX(c),f=new XE;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let g4=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return g4=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const KZ=()=>g4();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lw(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const jw=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wi extends Error{}class pr extends wi{constructor(e,n,r,i){super(`${pr.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Ev({message:r,cause:jw(n)});const o=n;return e===400?new y4(e,o,r,i):e===401?new x4(e,o,r,i):e===403?new b4(e,o,r,i):e===404?new w4(e,o,r,i):e===409?new _4(e,o,r,i):e===422?new E4(e,o,r,i):e===429?new S4(e,o,r,i):e>=500?new T4(e,o,r,i):new pr(e,o,r,i)}}class Fw extends pr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ev extends pr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class v4 extends Ev{constructor({message:e}={}){super({message:e??"Request timed out."})}}class y4 extends pr{}class x4 extends pr{}class b4 extends pr{}class w4 extends pr{}class _4 extends pr{}class E4 extends pr{}class S4 extends pr{}class T4 extends pr{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YZ=/^[a-z][a-z0-9+.-]*:/i,JZ=t=>YZ.test(t);let Uw=t=>(Uw=Array.isArray,Uw(t));const QZ=Uw;let XZ=QZ;const RN=XZ;function ZZ(t){if(!t)return!0;for(const e in t)return!1;return!0}function eee(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const tee=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new wi(`${t} must be an integer`);if(e<0)throw new wi(`${t} must be a positive integer`);return e},nee=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ree=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tu="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iee(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const oee=()=>{var t,e,n,r,i;const o=iee();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tu,"X-Stainless-OS":DN(Deno.build.os),"X-Stainless-Arch":MN(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tu,"X-Stainless-OS":DN((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":MN((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=see();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function see(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}const MN=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",DN=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Lp;const aee=()=>Lp??(Lp=oee());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lee(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function A4(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function cee(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return A4({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function C4(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function uee(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dee=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I4=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function dx(t,e,n){return I4(),new File(t,e??"unknown_file",n)}function fee(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const hee=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P4=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",pee=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&P4(t),mee=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function gee(t,e,n){if(I4(),t=await t,pee(t))return t instanceof File?t:dx([await t.arrayBuffer()],t.name);if(mee(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),dx(await Vw(i),e,n)}const r=await Vw(t);if(e||(e=fee(t)),!(n!=null&&n.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return dx(r,e,n)}async function Vw(t){var e,n,r,i,o;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(P4(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(hee(t))try{for(var a=!0,c=Ki(t),u;u=await c.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const f=i;s.push(...await Vw(f))}}catch(f){n={error:f}}finally{try{!a&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}else{const f=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${vee(t)}`)}return s}function vee(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N4{constructor(e){this._client=e}}N4._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k4(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ON=Object.freeze(Object.create(null)),yee=(t=k4)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],s=n.reduce((f,p,v)=>{var w,E,S;/[?#]/.test(p)&&(i=!0);const _=r[v];let N=(i?encodeURIComponent:t)(""+_);return v!==r.length&&(_==null||typeof _=="object"&&_.toString===((S=Object.getPrototypeOf((E=Object.getPrototypeOf((w=_.hasOwnProperty)!==null&&w!==void 0?w:ON))!==null&&E!==void 0?E:ON))===null||S===void 0?void 0:S.toString))&&(N=_+"",o.push({start:f.length+p.length,length:N.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),f+p+(v===r.length?"":N)},""),a=s.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=c.exec(a))!==null;)o.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(o.sort((f,p)=>f.start-p.start),o.length>0){let f=0;const p=o.reduce((v,w)=>{const E=" ".repeat(w.start-f),S="^".repeat(w.length);return f=w.start+w.length,v+E+S},"");throw new wi(`Path parameters result in path with invalid segments:
${o.map(v=>v.error).join(`
`)}
${s}
${p}`)}return s}),jp=yee(k4);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R4 extends N4{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,o=Wm(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new wi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new wi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(jp`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(jp`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(jp`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const o=n??{},{api_version:s=this._client.apiVersion}=o,a=Wm(o,["api_version"]);return this._client.get(jp`/${s}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}R4._key=Object.freeze(["interactions"]);class M4 extends R4{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xee(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let Fp;function oS(t){let e;return(Fp??(e=new globalThis.TextEncoder,Fp=e.encode.bind(e)))(t)}let Up;function LN(t){let e;return(Up??(e=new globalThis.TextDecoder,Up=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sv{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?oS(e):e;this.buffer=xee([this.buffer,n]);const r=[];let i;for(;(i=bee(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(LN(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=LN(this.buffer.subarray(0,o));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Sv.NEWLINE_CHARS=new Set([`
`,"\r"]);Sv.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function bee(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function wee(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Km={off:0,error:200,warn:300,info:400,debug:500},jN=(t,e,n)=>{if(t){if(eee(Km,t))return t;cr(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Km))}`)}};function lf(){}function Vp(t,e,n){return!e||Km[t]>Km[n]?lf:e[t].bind(e)}const _ee={error:lf,warn:lf,info:lf,debug:lf};let FN=new WeakMap;function cr(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return _ee;const i=FN.get(n);if(i&&i[0]===r)return i[1];const o={error:Vp("error",n,r),warn:Vp("warn",n,r),info:Vp("info",n,r),debug:Vp("debug",n,r)};return FN.set(n,[r,o]),o}const bl=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ou{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const o=r?cr(r):console;function s(){return Wi(this,arguments,function*(){var c,u,f,p;if(i)throw new wi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let v=!1;try{try{for(var w=!0,E=Ki(Eee(e,n)),S;S=yield ot(E.next()),c=S.done,!c;w=!0){p=S.value,w=!1;const _=p;if(!v)if(_.data.startsWith("[DONE]")){v=!0;continue}else try{yield yield ot(JSON.parse(_.data))}catch(N){throw o.error("Could not parse message into JSON:",_.data),o.error("From chunk:",_.raw),N}}}catch(_){u={error:_}}finally{try{!w&&!c&&(f=E.return)&&(yield ot(f.call(E)))}finally{if(u)throw u.error}}v=!0}catch(_){if(Lw(_))return yield ot(void 0);throw _}finally{v||n.abort()}})}return new ou(s,n,r)}static fromReadableStream(e,n,r){let i=!1;function o(){return Wi(this,arguments,function*(){var c,u,f,p;const v=new Sv,w=C4(e);try{for(var E=!0,S=Ki(w),_;_=yield ot(S.next()),c=_.done,!c;E=!0){p=_.value,E=!1;const N=p;for(const j of v.decode(N))yield yield ot(j)}}catch(N){u={error:N}}finally{try{!E&&!c&&(f=S.return)&&(yield ot(f.call(S)))}finally{if(u)throw u.error}}for(const N of v.flush())yield yield ot(N)})}function s(){return Wi(this,arguments,function*(){var c,u,f,p;if(i)throw new wi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let v=!1;try{try{for(var w=!0,E=Ki(o()),S;S=yield ot(E.next()),c=S.done,!c;w=!0){p=S.value,w=!1;const _=p;v||_&&(yield yield ot(JSON.parse(_)))}}catch(_){u={error:_}}finally{try{!w&&!c&&(f=E.return)&&(yield ot(f.call(E)))}finally{if(u)throw u.error}}v=!0}catch(_){if(Lw(_))return yield ot(void 0);throw _}finally{v||n.abort()}})}return new ou(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();e.push(s),n.push(s)}return o.shift()}});return[new ou(()=>i(e),this.controller,this.client),new ou(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return A4({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const s=oS(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function Eee(t,e){return Wi(this,arguments,function*(){var r,i,o,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new wi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new wi("Attempted to iterate over a response with no body");const a=new Tee,c=new Sv,u=C4(t.body);try{for(var f=!0,p=Ki(See(u)),v;v=yield ot(p.next()),r=v.done,!r;f=!0){s=v.value,f=!1;const w=s;for(const E of c.decode(w)){const S=a.decode(E);S&&(yield yield ot(S))}}}catch(w){i={error:w}}finally{try{!f&&!r&&(o=p.return)&&(yield ot(o.call(p)))}finally{if(i)throw i.error}}for(const w of c.flush()){const E=a.decode(w);E&&(yield yield ot(E))}})}function See(t){return Wi(this,arguments,function*(){var n,r,i,o;let s=new Uint8Array;try{for(var a=!0,c=Ki(t),u;u=yield ot(c.next()),n=u.done,!n;a=!0){o=u.value,a=!1;const f=o;if(f==null)continue;const p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?oS(f):f;let v=new Uint8Array(s.length+p.length);v.set(s),v.set(p,s.length),s=v;let w;for(;(w=wee(s))!==-1;)yield yield ot(s.slice(0,w)),s=s.slice(w)}}catch(f){r={error:f}}finally{try{!a&&!n&&(i=c.return)&&(yield ot(i.call(c)))}finally{if(r)throw r.error}}s.length>0&&(yield yield ot(s))})}class Tee{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Aee(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Aee(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Cee(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,s=await(async()=>{var a;if(e.options.stream)return cr(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ou.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),u=(a=c==null?void 0:c.split(";")[0])===null||a===void 0?void 0:a.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return cr(t).debug(`[${r}] response parsed`,bl({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sS extends Promise{constructor(e,n,r=Cee){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new sS(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const D4=Symbol("brand.privateNullableHeaders");function*Iee(t){if(!t)return;if(D4 in t){const{values:r,nulls:i}=t;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():RN(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=RN(r[1])?r[1]:[r[1]];let s=!1;for(const a of o)a!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,a])}}const Hd=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[o,s]of Iee(r)){const a=o.toLowerCase();i.has(a)||(e.delete(o),i.add(a)),s===null?(e.delete(o),n.add(a)):(e.append(o,s),n.delete(a))}}return{[D4]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fx=t=>{var e,n,r,i,o,s;if(typeof globalThis.process<"u")return(r=(n=(e=ZW)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var O4;class Tv{constructor(e){var n,r,i,o,s,a,c,{baseURL:u=fx("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=fx("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,v=Wm(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:f,apiVersion:p},v),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(r=w.timeout)!==null&&r!==void 0?r:Tv.DEFAULT_TIMEOUT,this.logger=(i=w.logger)!==null&&i!==void 0?i:console;const E="warn";this.logLevel=E,this.logLevel=(s=(o=jN(w.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:jN(fx("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:E,this.fetchOptions=w.fetchOptions,this.maxRetries=(a=w.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(c=w.fetch)!==null&&c!==void 0?c:lee(),this.encoder=dee,this._options=w,this.apiKey=f,this.apiVersion=p,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Hd([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Hd([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Hd([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new wi(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${tu}`}defaultIdempotencyKey(){return`stainless-node-retry-${KZ()}`}makeStatusError(e,n,r,i){return pr.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=JZ(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return ZZ(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new sS(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,o,s;const a=await e,c=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=c),await this.prepareOptions(a);const{req:u,url:f,timeout:p}=await this.buildRequest(a,{retryCount:c-n});await this.prepareRequest(u,{url:f,options:a});const v="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=r===void 0?"":`, retryOf: ${r}`,E=Date.now();if(cr(this).debug(`[${v}] sending request`,bl({retryOfRequestLogID:r,method:a.method,url:f,options:a,headers:u.headers})),!((o=a.signal)===null||o===void 0)&&o.aborted)throw new Fw;const S=new AbortController,_=await this.fetchWithTimeout(f,u,p,S).catch(jw),N=Date.now();if(_ instanceof globalThis.Error){const F=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Fw;const q=Lw(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(n)return cr(this).info(`[${v}] connection ${q?"timed out":"failed"} - ${F}`),cr(this).debug(`[${v}] connection ${q?"timed out":"failed"} (${F})`,bl({retryOfRequestLogID:r,url:f,durationMs:N-E,message:_.message})),this.retryRequest(a,n,r??v);throw cr(this).info(`[${v}] connection ${q?"timed out":"failed"} - error; no more retries left`),cr(this).debug(`[${v}] connection ${q?"timed out":"failed"} (error; no more retries left)`,bl({retryOfRequestLogID:r,url:f,durationMs:N-E,message:_.message})),q?new v4:new Ev({cause:_})}const j=`[${v}${w}] ${u.method} ${f} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${N-E}ms`;if(!_.ok){const F=await this.shouldRetry(_);if(n&&F){const O=`retrying, ${n} attempts remaining`;return await uee(_.body),cr(this).info(`${j} - ${O}`),cr(this).debug(`[${v}] response error (${O})`,bl({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,durationMs:N-E})),this.retryRequest(a,n,r??v,_.headers)}const q=F?"error; no more retries left":"error; not retryable";cr(this).info(`${j} - ${q}`);const V=await _.text().catch(O=>jw(O).message),$=nee(V),k=$?void 0:V;throw cr(this).debug(`[${v}] response error (${q})`,bl({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,message:k,durationMs:Date.now()-E})),this.makeStatusError(_.status,$,k,_.headers)}return cr(this).info(j),cr(this).debug(`[${v}] response start`,bl({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,durationMs:N-E})),{response:_,options:a,controller:S,requestLogID:v,retryOfRequestLogID:r,startTime:E}}async fetchWithTimeout(e,n,r,i){const o=n||{},{signal:s,method:a}=o,c=Wm(o,["signal","method"]);s&&s.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),r),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,p=Object.assign(Object.assign(Object.assign({signal:i.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);a&&(p.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var o;let s;const a=i==null?void 0:i.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(s=u)}const c=i==null?void 0:i.get("retry-after");if(c&&!s){const u=parseFloat(c);Number.isNaN(u)?s=Date.parse(c)-Date.now():s=u*1e3}if(!(s&&0<=s&&s<60*1e3)){const u=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,u)}return await ree(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,o;const s=Object.assign({},e),{method:a,path:c,query:u,defaultBaseURL:f}=s,p=this.buildURL(c,u,f);"timeout"in s&&tee("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:v,body:w}=this.buildBody({options:s}),E=await this.buildHeaders({options:e,method:a,bodyHeaders:v,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:E},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:p,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let a=Hd([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),aee()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Hd([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:cee(e)}:this.encoder({body:e,headers:r})}}Tv.DEFAULT_TIMEOUT=6e4;class kn extends Tv{constructor(){super(...arguments),this.interactions=new M4(this)}}O4=kn;kn.GeminiNextGenAPIClient=O4;kn.GeminiNextGenAPIClientError=wi;kn.APIError=pr;kn.APIConnectionError=Ev;kn.APIConnectionTimeoutError=v4;kn.APIUserAbortError=Fw;kn.NotFoundError=w4;kn.ConflictError=_4;kn.RateLimitError=S4;kn.BadRequestError=y4;kn.AuthenticationError=x4;kn.InternalServerError=T4;kn.PermissionDeniedError=b4;kn.UnprocessableEntityError=E4;kn.toFile=gee;kn.Interactions=M4;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pee(t,e){const n={},r=g(t,["name"]);return r!=null&&y(n,["_url","name"],r),n}function Nee(t,e){const n={},r=g(t,["name"]);return r!=null&&y(n,["_url","name"],r),n}function kee(t,e){const n={},r=g(t,["sdkHttpResponse"]);return r!=null&&y(n,["sdkHttpResponse"],r),n}function Ree(t,e){const n={},r=g(t,["sdkHttpResponse"]);return r!=null&&y(n,["sdkHttpResponse"],r),n}function Mee(t,e,n){const r={};if(g(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=g(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&y(e,["displayName"],i),g(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=g(t,["epochCount"]);e!==void 0&&o!=null&&y(e,["tuningTask","hyperparameters","epochCount"],o);const s=g(t,["learningRateMultiplier"]);if(s!=null&&y(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),g(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(g(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(g(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=g(t,["batchSize"]);e!==void 0&&a!=null&&y(e,["tuningTask","hyperparameters","batchSize"],a);const c=g(t,["learningRate"]);if(e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","learningRate"],c),g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(g(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function Dee(t,e,n){const r={};let i=g(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const w=g(t,["validationDataset"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec"],UN(w))}else if(i==="PREFERENCE_TUNING"){const w=g(t,["validationDataset"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec"],UN(w))}const o=g(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&y(e,["tunedModelDisplayName"],o);const s=g(t,["description"]);e!==void 0&&s!=null&&y(e,["description"],s);let a=g(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const w=g(t,["epochCount"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(a==="PREFERENCE_TUNING"){const w=g(t,["epochCount"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let c=g(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const w=g(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(c==="PREFERENCE_TUNING"){const w=g(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let u=g(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const w=g(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(u==="PREFERENCE_TUNING"){const w=g(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let f=g(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=g(t,["adapterSize"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(f==="PREFERENCE_TUNING"){const w=g(t,["adapterSize"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(g(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=g(t,["labels"]);e!==void 0&&p!=null&&y(e,["labels"],p);const v=g(t,["beta"]);return e!==void 0&&v!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],v),r}function Oee(t,e){const n={},r=g(t,["baseModel"]);r!=null&&y(n,["baseModel"],r);const i=g(t,["preTunedModel"]);i!=null&&y(n,["preTunedModel"],i);const o=g(t,["trainingDataset"]);o!=null&&Hee(o);const s=g(t,["config"]);return s!=null&&Mee(s,n),n}function Lee(t,e){const n={},r=g(t,["baseModel"]);r!=null&&y(n,["baseModel"],r);const i=g(t,["preTunedModel"]);i!=null&&y(n,["preTunedModel"],i);const o=g(t,["trainingDataset"]);o!=null&&Wee(o,n,e);const s=g(t,["config"]);return s!=null&&Dee(s,n,e),n}function jee(t,e){const n={},r=g(t,["name"]);return r!=null&&y(n,["_url","name"],r),n}function Fee(t,e){const n={},r=g(t,["name"]);return r!=null&&y(n,["_url","name"],r),n}function Uee(t,e,n){const r={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const o=g(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const s=g(t,["filter"]);return e!==void 0&&s!=null&&y(e,["_query","filter"],s),r}function Vee(t,e,n){const r={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const o=g(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const s=g(t,["filter"]);return e!==void 0&&s!=null&&y(e,["_query","filter"],s),r}function $ee(t,e){const n={},r=g(t,["config"]);return r!=null&&Uee(r,n),n}function Bee(t,e){const n={},r=g(t,["config"]);return r!=null&&Vee(r,n),n}function zee(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const i=g(t,["nextPageToken"]);i!=null&&y(n,["nextPageToken"],i);const o=g(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>L4(a))),y(n,["tuningJobs"],s)}return n}function qee(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const i=g(t,["nextPageToken"]);i!=null&&y(n,["nextPageToken"],i);const o=g(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>$w(a))),y(n,["tuningJobs"],s)}return n}function Gee(t,e){const n={},r=g(t,["name"]);r!=null&&y(n,["model"],r);const i=g(t,["name"]);return i!=null&&y(n,["endpoint"],i),n}function Hee(t,e){const n={};if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=g(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),y(n,["examples","examples"],i)}return n}function Wee(t,e,n){const r={};let i=g(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=g(t,["gcsUri"]);e!==void 0&&s!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=g(t,["gcsUri"]);e!==void 0&&s!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=g(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=g(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=g(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(g(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function L4(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const i=g(t,["name"]);i!=null&&y(n,["name"],i);const o=g(t,["state"]);o!=null&&y(n,["state"],Xj(o));const s=g(t,["createTime"]);s!=null&&y(n,["createTime"],s);const a=g(t,["tuningTask","startTime"]);a!=null&&y(n,["startTime"],a);const c=g(t,["tuningTask","completeTime"]);c!=null&&y(n,["endTime"],c);const u=g(t,["updateTime"]);u!=null&&y(n,["updateTime"],u);const f=g(t,["description"]);f!=null&&y(n,["description"],f);const p=g(t,["baseModel"]);p!=null&&y(n,["baseModel"],p);const v=g(t,["_self"]);return v!=null&&y(n,["tunedModel"],Gee(v)),n}function $w(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const i=g(t,["name"]);i!=null&&y(n,["name"],i);const o=g(t,["state"]);o!=null&&y(n,["state"],Xj(o));const s=g(t,["createTime"]);s!=null&&y(n,["createTime"],s);const a=g(t,["startTime"]);a!=null&&y(n,["startTime"],a);const c=g(t,["endTime"]);c!=null&&y(n,["endTime"],c);const u=g(t,["updateTime"]);u!=null&&y(n,["updateTime"],u);const f=g(t,["error"]);f!=null&&y(n,["error"],f);const p=g(t,["description"]);p!=null&&y(n,["description"],p);const v=g(t,["baseModel"]);v!=null&&y(n,["baseModel"],v);const w=g(t,["tunedModel"]);w!=null&&y(n,["tunedModel"],w);const E=g(t,["preTunedModel"]);E!=null&&y(n,["preTunedModel"],E);const S=g(t,["supervisedTuningSpec"]);S!=null&&y(n,["supervisedTuningSpec"],S);const _=g(t,["preferenceOptimizationSpec"]);_!=null&&y(n,["preferenceOptimizationSpec"],_);const N=g(t,["tuningDataStats"]);N!=null&&y(n,["tuningDataStats"],N);const j=g(t,["encryptionSpec"]);j!=null&&y(n,["encryptionSpec"],j);const F=g(t,["partnerModelTuningSpec"]);F!=null&&y(n,["partnerModelTuningSpec"],F);const q=g(t,["customBaseModel"]);q!=null&&y(n,["customBaseModel"],q);const V=g(t,["experiment"]);V!=null&&y(n,["experiment"],V);const $=g(t,["labels"]);$!=null&&y(n,["labels"],$);const k=g(t,["outputUri"]);k!=null&&y(n,["outputUri"],k);const D=g(t,["pipelineJob"]);D!=null&&y(n,["pipelineJob"],D);const O=g(t,["serviceAccount"]);O!=null&&y(n,["serviceAccount"],O);const z=g(t,["tunedModelDisplayName"]);z!=null&&y(n,["tunedModelDisplayName"],z);const U=g(t,["veoTuningSpec"]);return U!=null&&y(n,["veoTuningSpec"],U),n}function Kee(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const i=g(t,["name"]);i!=null&&y(n,["name"],i);const o=g(t,["metadata"]);o!=null&&y(n,["metadata"],o);const s=g(t,["done"]);s!=null&&y(n,["done"],s);const a=g(t,["error"]);return a!=null&&y(n,["error"],a),n}function UN(t,e){const n={},r=g(t,["gcsUri"]);r!=null&&y(n,["validationDatasetUri"],r);const i=g(t,["vertexDatasetResource"]);return i!=null&&y(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yee extends Os{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new oc(Cs.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Pw.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=Fee(e);return a=Ie("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>$w(f))}else{const u=jee(e);return a=Ie("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>L4(f))}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=Bee(e);return a=Ie("tuningJobs",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=qee(f),v=new dN;return Object.assign(v,p),v})}else{const u=$ee(e);return a=Ie("tunedModels",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=zee(f),v=new dN;return Object.assign(v,p),v})}}async cancel(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const u=Nee(e);return a=Ie("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=Ree(f),v=new fN;return Object.assign(v,p),v})}else{const u=Pee(e);return a=Ie("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=kee(f),v=new fN;return Object.assign(v,p),v})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=Lee(e,e);return o=Ie("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>$w(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Oee(e);return o=Ie("tunedModels",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>Kee(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jee{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Qee=1024*1024*8,Xee=3,Zee=1e3,ete=2,Ym="x-goog-upload-status";async function tte(t,e,n){var r;const i=await j4(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Ym])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function nte(t,e,n){var r;const i=await j4(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Ym])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=Hj(o),a=new ZE;return Object.assign(a,s),a}async function j4(t,e,n){var r,i;let o=0,s=0,a=new Nw(new Response),c="upload";for(o=t.size;s<o;){const u=Math.min(Qee,o-s),f=t.slice(s,s+u);s+u>=o&&(c+=", finalize");let p=0,v=Zee;for(;p<Xee&&(a=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[Ym]));)p++,await ite(v),v=v*ete;if(s+=u,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[Ym])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function rte(t){return{size:t.size,type:t.type}}function ite(t){return new Promise(e=>setTimeout(e,t))}class ote{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tte(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nte(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await rte(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ste{create(e,n,r){return new ate(e,n,r)}}class ate{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VN="x-goog-api-key";class lte{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(VN)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(VN,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cte="gl-node/";class aS{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new kn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=rK(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new lte(this.apiKey);this.apiClient=new rZ({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:cte+"web",uploader:new ote,downloader:new Jee}),this.models=new _Z(this.apiClient),this.live=new gZ(this.apiClient,i,new ste),this.batches=new RY(this.apiClient),this.chats=new hJ(this.models,this.apiClient),this.caches=new uJ(this.apiClient),this.files=new EJ(this.apiClient),this.operations=new EZ(this.apiClient),this.authTokens=new UZ(this.apiClient),this.tunings=new Yee(this.apiClient),this.fileSearchStores=new WZ(this.apiClient)}}function ute(t,e){if(!t||t.length===0)return{activeCompetitors:e||0,competitorStrengthIndex:0,topCompetitors:[],marketGaps:["  ","No specific market gaps identified"],entryDifficulty:"Low",analysisDetails:{strengthBreakdown:{volumeWeight:.4,ratingWeight:.3,salesWeight:.3},competitiveIntensity:0,marketConcentration:0,consolidationLevel:"Minimal"}};const n=t.filter(S=>S.rating&&S.rating>=2.5),r=n.map(S=>{const _=Math.min((S.salesVolume||0)/1e3,100),N=(S.rating||0)*20,j=S.price?50:0,F=_*.4+N*.3+j*.3;return{...S,strengthIndex:Math.min(F,100)}}),i=r.sort((S,_)=>_.strengthIndex-S.strengthIndex).slice(0,3).map(S=>({name:S.storeName||S.name||"Unknown",rating:S.rating||0,price:S.price||0,strength:S.strengthIndex,strengths:[`Rating: ${S.rating||0}/5`,`Price Point: SAR ${S.price||0}`,`Supply: ${S.stockStatus||"Available"}`],weaknesses:["Limited market presence","Competition from larger retailers"]})),o=[];r.length<3?o.push("   -    "):r.length<6&&o.push("  -   ");const s=r.reduce((S,_)=>S+(_.rating||0),0)/r.length;s<3.5?o.push("     -     "):s<4&&o.push("   -     ");const a=r.reduce((S,_)=>_.price&&_.price>0?{min:Math.min(S.min,_.price),max:Math.max(S.max,_.price)}:S,{min:1/0,max:0});if(a.min!==1/0&&a.max>0){const S=a.max-a.min,_=(a.max+a.min)/2;S>a.max*.5&&o.push("   -      "),a.min>_*.7&&o.push("   -     "),a.max<_*1.5&&o.push("   -    ")}const c=r.filter(S=>S.shippingDays&&S.shippingDays>0);c.length>0?c.reduce((_,N)=>_+(N.shippingDays||5),0)/c.length>3&&o.push("   -     (-)"):o.push("     -    "),r.filter(S=>S.stockStatus&&(S.stockStatus.toLowerCase().includes("out")||S.stockStatus.toLowerCase().includes(""))).length>r.length*.3&&o.push("    -    "),r.filter(S=>{const _=(a.max+a.min)/2;return S.price&&Math.abs(S.price-_)<_*.15}).length>r.length*.6&&o.push("    -     "),s<4.2&&r.length>=3&&o.push("       -    "),r.length>0&&r.length<10&&o.push("       "),r.length<5&&o.push("    -     ");let p="Low";const v=n.length/10*100;v>60?p="High":v>30&&(p="Medium");const w=r.reduce((S,_)=>S+_.strengthIndex,0)/r.length;w>70&&(p=p==="High"?"High":"Medium"),r.reduce((S,_)=>S+_.strengthIndex,0);const E=i.length/n.length*100;return{activeCompetitors:e&&e>n.length?e:n.length,competitorStrengthIndex:Math.round(w),topCompetitors:i,marketGaps:o.length>0?o:["  ","Market is stable"],entryDifficulty:p,analysisDetails:{strengthBreakdown:{volumeWeight:.4,ratingWeight:.3,salesWeight:.3},competitiveIntensity:Math.round(v),marketConcentration:Math.round(E),consolidationLevel:n.length>10?"Fragmented":n.length>5?"Moderate":"Consolidated"}}}function dte(t,e,n,r="en"){const i=(t==null?void 0:t.averagePrice)||(e&&e.length>0?e.reduce((P,me)=>P+(me.price||0),0)/e.length:100),o=.4,s=.05,a=.05,c=i*o,u=i*s,f=i*a,p=c+u+f,v=i-p,w=v/i*100,E=(e==null?void 0:e.filter(P=>P.price>0).map(P=>P.price))||[];let S=r==="ar"?"":"Medium";if(E.length>1){const P=Math.sqrt(E.reduce((me,ce)=>me+Math.pow(ce-i,2),0)/E.length)/i;P>.15?S=r==="ar"?" -   ":"High - Consider competitive pricing":P<.05&&(S=r==="ar"?" -   ":"Low - Standardized pricing market")}const _=2e3,j=Math.ceil(_/v),F=Math.max(1,Math.ceil(2/(n/100))),q=n/100,V=Math.max(5,Math.round(q*75)),$=V*i,k=Math.min(w/40*100,100),D=n,O=100-Math.min(((e==null?void 0:e.length)||0)*5,50),z=Math.round(k*.4+D*.35+O*.25),U={conservative:Math.round((V*.5-j)*v),moderate:Math.round(V*v),optimistic:Math.round((V*1.5-j)*v)};U.conservative=Math.max(U.conservative,0);let M=r==="ar"?"":"Medium";return n>=80?M=r==="ar"?" ":"Very High":n>=60?M=r==="ar"?"":"High":n<40&&(M=r==="ar"?"":"Low"),{averageSalePrice:Math.round(i),estimatedProfitMargin:Math.round(w),breakEvenPoint:j,profitabilityScore:Math.max(0,Math.min(100,z)),priceSensitivity:S,estimatedMonthlyRevenue:`SAR ${Math.round($).toLocaleString()}`,costBreakdown:{productCost:Math.round(c),shippingCost:Math.round(u),platformFee:Math.round(f),marginPercentage:Math.round(w)},breakEvenAnalysis:{unitsSoldNeeded:j,monthsToBreakEven:F,estimatedCapital:Math.round(_*F+c*j)},profitabilityLevels:U,revenueBreakdown:{estimatedMonthlyUnits:V,averagePrice:Math.round(i),totalRevenue:Math.round($),demandBasis:M},profitPerUnit:Math.round(v)}}function fte(t,e,n,r){const i=[];if(t>60&&e<50){const s=Math.round(t*.6+(100-e)*.4);i.push({type:"green",title:"Green Zone Opportunity",titleAr:"  ",description:"High demand market with weak competitive presence. Ideal for market entry.",descriptionAr:"      .   .",potentialScore:s,actionItems:["Enter market quickly before competitors strengthen","Build brand presence and customer loyalty","Focus on quality and customer service to establish dominance"]})}if(n>30&&r&&r.length>2){const s=r.filter(a=>a.price>0).map(a=>a.price);if(s.length>0){const a=s.reduce((u,f)=>u+f)/s.length;if(a*n/100>a*.2){const u=Math.round(Math.min(n*1.5,100)),f=Math.round(a*.8);i.push({type:"priceGap",title:"Price Gap Opportunity",titleAr:"  ",description:`Significant price gap identified. Average competitor price is ${a.toFixed(0)} SAR. You can sell at ${f} SAR with ${n}% margin.`,descriptionAr:`    .    ${a.toFixed(0)} ..    ${f} .   ${n}%.`,potentialScore:u,metrics:{avgCompetitorPrice:`${a.toFixed(0)} .`,suggestedPrice:`${f} .`,priceGap:`${(a-f).toFixed(0)} .`,competitorCount:r.length},actionItems:["Implement premium positioning strategy","Emphasize unique value proposition","Target quality-conscious customers willing to pay more"]})}}}if(t>50&&r&&r.length>0){const s=r.reduce((a,c)=>a+(c.rating||0),0)/r.length;if(s<3.5){const a=Math.round(50+(t-s*20));i.push({type:"contentQuality",title:"Content Quality Opportunity",titleAr:"  ",description:`Competitors have low ratings (${s.toFixed(1)}/5) despite high demand. Excellence in customer service and product quality can capture market share.`,descriptionAr:`    (${s.toFixed(1)}/5)   .          .`,potentialScore:Math.max(0,Math.min(100,a)),metrics:{avgRating:s,competitorCount:r.length},actionItems:["Focus on customer experience and satisfaction","Build strong reviews and testimonials","Emphasize quality control and product excellence","Implement superior after-sales service"]})}}if(t>40&&t<70&&e<60){const s=Math.round(40+(t-50)*2+(100-e)*.5),a=Math.round(t/100*2e3);i.push({type:"emerging",title:"Emerging Market Opportunity",titleAr:"  ",description:`Category showing growth potential with manageable competition. Estimated ${a} units/month market size with ${(r==null?void 0:r.length)||0} active competitors.`,descriptionAr:`       .    ${a} /  ${(r==null?void 0:r.length)||0}  .`,potentialScore:Math.max(0,Math.min(100,s)),metrics:{marketSize:`${a} /`,competitorCount:(r==null?void 0:r.length)||0},actionItems:["Build brand awareness early in market development","Invest in content marketing and education","Establish partnerships with complementary services","Create community and customer loyalty programs"]})}if(t<40&&n>35&&e<40){const s=Math.round(n*.7+(100-e)*.3);i.push({type:"niche",title:"Niche Market Opportunity",titleAr:"  ",description:"Untapped niche market with high profitability potential. Requires targeted marketing to specific audience.",descriptionAr:"       .     .",potentialScore:Math.min(100,s),actionItems:["Target specific customer segments with precision marketing","Build expertise and thought leadership in the niche","Create exclusive products or services for the niche","Develop partnerships within the niche community"]})}i.sort((s,a)=>a.potentialScore-s.potentialScore);const o={greenZone:i.filter(s=>s.type==="green").length,priceGap:i.filter(s=>s.type==="priceGap").length,contentQuality:i.filter(s=>s.type==="contentQuality").length,emerging:i.filter(s=>s.type==="emerging").length};return{opportunities:i,totalOpportunitiesFound:i.length,bestOpportunity:i.length>0?i[0]:void 0,opportunityMap:o}}function hte(t,e,n,r,i,o){var le,ne,de,Y;const s=Math.max(0,Math.min(100,t)),a=Math.max(0,Math.min(100,100-e)),c=Math.max(0,Math.min(100,n*2)),u=Math.round(s*.3+a*.3+c*.4);let f=Math.round(100-u);const p=(o==null?void 0:o.activeCompetitors)||5;p>15?f=Math.min(100,f+15):p>10&&(f=Math.min(100,f+10));const v=(i==null?void 0:i.averageSalePrice)||100,w=((le=i==null?void 0:i.costBreakdown)==null?void 0:le.productCost)||v*.4,E=((ne=i==null?void 0:i.revenueBreakdown)==null?void 0:ne.estimatedMonthlyUnits)||30,S=((de=i==null?void 0:i.breakEvenAnalysis)==null?void 0:de.monthsToBreakEven)||3,N=w*E*3,j=v*E*.15*3,q=1500*3,V=N+j+q,$=V*.2,k=Math.round(V+$);let D="";k<5e3?D="Very Low (< SAR 5,000)":k<15e3?D="Low (SAR 5,000 - 15,000)":k<3e4?D="Medium (SAR 15,000 - 30,000)":k<5e4?D="High (SAR 30,000 - 50,000)":k<1e5?D="Very High (SAR 50,000 - 100,000)":D="Enterprise (> SAR 100,000)";const O=k<25e3&&a>45&&c>30&&S<=4,z=((Y=i==null?void 0:i.profitabilityLevels)==null?void 0:Y.moderate)||E*(v*.5)*.3,U=z>0?Math.max(1,Math.ceil(k/z)):12;let M="";U<=2?M="1-2 months (Very Fast)":U<=4?M="2-4 months (Fast)":U<=6?M="4-6 months (Moderate)":U<=9?M="6-9 months (Average)":U<=12?M="9-12 months (Slow)":U<=18?M="12-18 months (Very Slow)":M="18+ months (Long-term)";const P=[];s<30?P.push("Very low demand - High volume needed to profitability"):s<50&&P.push("Moderate demand - Requires effective marketing"),e>70?P.push("Strong competition - Difficult to gain market share"):e>50&&P.push("Moderate competition - Need differentiation strategy"),n<15&&P.push("Low profit margins - High volume required for viability"),p>20&&P.push("Highly saturated market - Difficult for new entrants"),U>12&&P.push("Long time to profitability - Requires sustained funding");const me=[{item:"Market Demand (> 50 score)",status:s>50?"PASS":s>30?"WARN":"FAIL"},{item:"Competitive Pressure (< 60 strength)",status:e<60?"PASS":e<75?"WARN":"FAIL"},{item:"Profit Potential (> 20% margin)",status:n>20?"PASS":n>10?"WARN":"FAIL"},{item:"Capital Efficiency (< SAR 30,000)",status:k<3e4?"PASS":k<5e4?"WARN":"FAIL"},{item:"Time to ROI (< 6 months)",status:U<6?"PASS":U<12?"WARN":"FAIL"},{item:"Market Saturation (< 15 competitors)",status:p<15?"PASS":p<25?"WARN":"FAIL"}];let ce="GO",ge="High";u>=70?(ce="GO",ge="High"):u>=50?(ce="CAUTION",ge="Medium"):(ce="NO-GO",ge="Low");const xe=me.filter(ie=>ie.status==="FAIL").length;return xe>=3?(ce="NO-GO",ge="Low"):xe>=2&&(ce="CAUTION",ge="Medium"),{successScore:Math.max(0,Math.min(100,u)),riskScore:Math.max(0,Math.min(100,f)),beginnerFriendly:O,capitalRequired:D,timeToProfit:M,recommendation:ce,detailedAnalysis:{demandFactor:s,competitionFactor:a,profitFactor:c,riskFactors:P,confidenceLevel:ge},viabilityChecklist:me}}function pte(t,e,n,r){const i=t.toLowerCase().trim(),o=["","buy","","price","","store","","order","","delivery","","best","","cheap","","offer","","coupon","","discount","","shipping"],s=[" ","what is","","how","","why","","method","","information","","explain","","review","","comparison","","benefits","","features"],a=["","noon","","amazon"," ","aliexpress","","souq","","jarir","","extra"];let c=0,u=0,f=0;const p=[],v=[],w=[];o.forEach($=>{i.includes($)&&(c++,p.includes($)||p.push($))}),s.forEach($=>{i.includes($)&&(u++,v.includes($)||v.push($))}),a.forEach($=>{i.includes($)&&(f++,w.includes($)||w.push($))});const E=t.trim(),S=/[\u0600-\u06FF]/.test(E);p.length<5&&(S?[` ${E}`,` ${E}`,`${E}  `,`${E} `,` ${E}`,`${E} `,` ${E}`,`${E} `]:[`buy ${E}`,`${E} price`,`${E} online`,`${E} delivery`,`best ${E}`,`cheap ${E}`,`${E} deals`,`${E} discount`]).forEach(k=>{p.length<8&&!p.includes(k)&&p.push(k)}),v.length<5&&(S?[`  ${E}`,` ${E}`,` ${E}`,`${E} `,` ${E}`,`${E} `]:[`what is ${E}`,`${E} features`,`${E} review`,`${E} experience`,`${E} benefits`,`${E} comparison`]).forEach(k=>{v.length<6&&!v.includes(k)&&v.push(k)}),n&&n.length>0&&w.length<3&&n.slice(0,5).forEach($=>{const k=$.storeName||$.name;if(k&&w.length<5){const D=S?`${E}  ${k}`:`${E} from ${k}`;w.includes(D)||w.push(D)}}),w.length<3&&(S?[`${E} `,`${E} `,`${E} `]:[`${E} noon`,`${E} amazon`,`${E} souq`]).forEach(k=>{w.length<5&&!w.includes(k)&&w.push(k)});let _;c>u*2?_="Transactional":u>c*2?_="Informational":_="Mixed";let N=50;N+=c*10,N+=f*5,N-=u*5,N+=e/100*20,n&&n.length>0&&(N+=Math.min(n.length*2,20)),N=Math.max(0,Math.min(100,N));let j;N>=70?j="High":N>=40?j="Medium":j="Low";let F;_==="Informational"?F="Awareness / Research Stage":_==="Mixed"?F="Consideration / Evaluation Stage":F="Decision / Purchase Stage";let q=0;j==="High"?q=.6+Math.random()*.15:j==="Medium"?q=.3+Math.random()*.15:q=.1+Math.random()*.15;const V=[];return j==="High"?(V.push("   -    "),V.push("High buying intent - Customers are ready to purchase now"),V.push("     "),V.push("Focus on optimizing checkout and payment experience")):j==="Medium"?(V.push("    "),V.push("Customers are in comparison and evaluation stage"),V.push("    "),V.push("Provide comparison content and trusted reviews")):(V.push("    "),V.push("Customers are in early research stage"),V.push("    "),V.push("Invest in educational content and awareness")),_==="Transactional"&&(V.push("   -   "),V.push("Direct purchase queries - High conversion probability")),f>0&&(V.push("     -     "),V.push("Search includes specific brands - Advanced in buyer journey")),n.length>5&&(V.push("       "),V.push("High competition indicates strong demand and product awareness")),{intentScore:Math.round(N),intentLevel:j,searchIntentType:_,buyerJourneyStage:F,keywordAnalysis:{transactionalKeywords:p.slice(0,8),informationalKeywords:v.slice(0,6),brandKeywords:w.slice(0,5)},conversionProbability:Math.round(q*100)/100,insights:V}}function mte(t,e,n,r,i){var ae,Xe,Be,He;const o=(e==null?void 0:e.averageSalePrice)||(r==null?void 0:r.averagePrice)||100,s=(e==null?void 0:e.estimatedProfitMargin)||25,a=((ae=e==null?void 0:e.costBreakdown)==null?void 0:ae.productCost)||o*.4,c=((Xe=e==null?void 0:e.costBreakdown)==null?void 0:Xe.shippingCost)||o*.05,u=((Be=e==null?void 0:e.costBreakdown)==null?void 0:Be.platformFee)||o*.05,f=(e==null?void 0:e.profitPerUnit)||o-a-c-u,p=((He=e==null?void 0:e.revenueBreakdown)==null?void 0:He.estimatedMonthlyUnits)||Math.round(t/100*50),v=n>70?.6:n>50?.8:1,w=Math.max(5,Math.round(p*.3*v)),E=w*o,S=Math.round(w*a),_=Math.round(w*c),N=Math.round(w*u),j=Math.round(E*.08),F=Math.round(1500+E*.05),q=S+_+N+j+F,V=Math.max(0,E-q),$=5,k=["      ","Slow start with focus on risk minimization",` ${w}    `,`Selling ${w} units monthly initially`,`  : ${j.toLocaleString()} ./`,`Limited marketing budget: SAR ${j.toLocaleString()}/month`,` : ${Math.round(a)} .`,`Unit cost: SAR ${Math.round(a)}`],D=Math.max(15,Math.round(p*.6*v)),O=D*o,z=Math.round(D*a),U=Math.round(D*c),M=Math.round(D*u),P=Math.round(E*.12),me=Math.round(2e3+O*.04),ce=z+U+M+P+me,ge=Math.max(0,O-ce),xe=15,le=["    ","Balanced strategy between growth and caution",` ${D}  `,`Selling ${D} units monthly`,`  : ${P.toLocaleString()} ./`,`Moderate marketing budget: SAR ${P.toLocaleString()}/month`,` : ${Math.round(o)} .`,`Selling price: SAR ${Math.round(o)}`],ne=Math.max(30,Math.round(p*v)),de=ne*o,Y=Math.round(ne*a*.95),ie=Math.round(ne*c*.9),fe=Math.round(ne*u),_e=Math.round(de*.18),$e=Math.round(2500+de*.03),Ge=Y+ie+fe+_e+$e,Ue=Math.max(0,de-Ge),ze=30,H=["     ","Aggressive growth strategy with major investment",` ${ne}  `,`Selling ${ne} units monthly`,`  : ${_e.toLocaleString()} ./`,`Strong marketing budget: SAR ${_e.toLocaleString()}/month`,`  : ${Math.round(s)}%`,`Expected profit margin: ${Math.round(s)}%`];let oe;t>=70&&n<50&&s>25?oe="optimistic":t<40||n>70||s<15?oe="conservative":oe="moderate",i&&(i>=70?oe==="conservative"&&(oe="moderate"):i<40&&oe==="optimistic"&&(oe="moderate"));const ve=[];return t>60&&(ve.push("     "),ve.push("Strong market demand supports rapid expansion")),s>25&&(ve.push("     "),ve.push("Good profit margins allow for reinvestment")),n<60&&(ve.push("    "),ve.push("Moderate competition facilitates market entry")),ve.push("    "),ve.push("Potential to expand into similar products"),ve.push("     (   )"),ve.push("Multiple sales channels available (Noon, Amazon, own store)"),o<500&&(ve.push("      "),ve.push("Low-priced product facilitates high-volume sales")),{conservative:{monthlyRevenue:Math.round(E),monthlyProfit:Math.round(V),growthRate:$,timeframe:"6-12 months",assumptions:k,costBreakdown:{productCosts:S,shippingCosts:_,platformFees:N,marketingBudget:j,operationalExpenses:F,totalCosts:q,unitsSold:w,pricePerUnit:Math.round(o),costPerUnit:Math.round(a),profitPerUnit:Math.round(f)}},moderate:{monthlyRevenue:Math.round(O),monthlyProfit:Math.round(ge),growthRate:xe,timeframe:"3-6 months",assumptions:le,costBreakdown:{productCosts:z,shippingCosts:U,platformFees:M,marketingBudget:P,operationalExpenses:me,totalCosts:ce,unitsSold:D,pricePerUnit:Math.round(o),costPerUnit:Math.round(a),profitPerUnit:Math.round(f)}},optimistic:{monthlyRevenue:Math.round(de),monthlyProfit:Math.round(Ue),growthRate:ze,timeframe:"1-3 months",assumptions:H,costBreakdown:{productCosts:Y,shippingCosts:ie,platformFees:fe,marketingBudget:_e,operationalExpenses:$e,totalCosts:Ge,unitsSold:ne,pricePerUnit:Math.round(o),costPerUnit:Math.round(a*.95),profitPerUnit:Math.round(f*1.05)}},recommendedScenario:oe,scalabilityFactors:ve}}function gte(t,e,n,r,i,o,s,a,c="en"){const u=c==="ar",f=u?`   : ${t}

 : ${e.recommendation==="GO"?" -   ":e.recommendation==="PROCEED WITH CAUTION"?"  -   ":"       -  "}

 : ${n!=null&&n.demandScore?`${n.demandScore}%   ${n.monthlyDemandEstimate} /`:""}

: ${(r==null?void 0:r.activeCompetitors)||0}     ${(r==null?void 0:r.competitorStrengthIndex)||0}%

:    ${(i==null?void 0:i.estimatedProfitMargin)||0}%    ${(i==null?void 0:i.estimatedMonthlyRevenue)||" "}

 : ${s!=null&&s.intentLevel?`${s.intentLevel==="High"?"":s.intentLevel==="Medium"?"":""} -   ${Math.round(s.conversionProbability*100)}%`:"  "}

  : ${(a==null?void 0:a.recommendedScenario)==="optimistic"?" -  ":(a==null?void 0:a.recommendedScenario)==="moderate"?" -  ":" -  "}

: ${o!=null&&o.riskScore?`${o.riskScore}%  `:""}

:  ${e.recommendation==="GO"?"   ":e.recommendation==="PROCEED WITH CAUTION"?"     ":"      "}`:`Comprehensive Market Opportunity Analysis: ${t}

Final Recommendation: ${e.recommendation==="GO"?"GO - Promising Investment Opportunity":e.recommendation==="PROCEED WITH CAUTION"?"PROCEED WITH CAUTION - Deeper Study Required":"NO-GO - High Risk"}

Market Demand: ${n!=null&&n.demandScore?`${n.demandScore}% demand level, ${n.monthlyDemandEstimate} units/month`:"Average"}

Competition: ${(r==null?void 0:r.activeCompetitors)||0} active competitors, ${(r==null?void 0:r.competitorStrengthIndex)||0}% competition strength

Profitability: Expected ${(i==null?void 0:i.estimatedProfitMargin)||0}% profit margin, estimated monthly revenue ${(i==null?void 0:i.estimatedMonthlyRevenue)||"N/A"}

Buyer Intent: ${s!=null&&s.intentLevel?`${s.intentLevel} - ${Math.round(s.conversionProbability*100)}% conversion probability`:"Analysis not available"}

Recommended Scenario: ${(a==null?void 0:a.recommendedScenario)==="optimistic"?"Optimistic - Rapid Growth":(a==null?void 0:a.recommendedScenario)==="moderate"?"Moderate - Stable Growth":"Conservative - Gradual Growth"}

Risk: ${o!=null&&o.riskScore?`${o.riskScore}% risk level`:"Moderate"}

Assessment: This is ${e.recommendation==="GO"?"a promising project worth investing in":e.recommendation==="PROCEED WITH CAUTION"?"a project requiring careful study and planning":"a high-risk project not currently recommended"}`,p=[];(n==null?void 0:n.demandScore)>=70?p.push(u?"    ":" Strong and promising market demand"):(n==null?void 0:n.demandScore)>=40?p.push(u?"   ":" Moderate market demand"):p.push(u?"   ":" Weak market demand"),(r==null?void 0:r.competitorStrengthIndex)<50?p.push(u?"   -   ":" Low competition - Good entry opportunity"):(r==null?void 0:r.competitorStrengthIndex)<70?p.push(u?"   -  ":" Moderate competition - Competitive possible"):p.push(u?"   -   ":" Fierce competition - Difficult to differentiate"),(i==null?void 0:i.estimatedProfitMargin)>25?p.push(u?"   ":" Excellent profit margins"):(i==null?void 0:i.estimatedProfitMargin)>15?p.push(u?"   ":" Reasonable profit margins"):p.push(u?"   ":" Low profit margins"),(s==null?void 0:s.intentLevel)==="High"&&p.push(u?"    -   ":" High buying intent - Customers ready to buy"),o!=null&&o.beginnerFriendly&&p.push(u?"  ":" Beginner-friendly");const v={marketSize:n!=null&&n.monthlyDemandEstimate?`${n.monthlyDemandEstimate} ${u?"/":"units/month"}`:u?"":"Medium",demandLevel:n!=null&&n.demandScore?`${n.demandScore}%`:u?"":"Medium",competitionLevel:r!=null&&r.competitorStrengthIndex?`${r.competitorStrengthIndex}% (${r.activeCompetitors} ${u?"":"competitors"})`:u?"":"Medium",profitPotential:i!=null&&i.estimatedProfitMargin?`${i.estimatedProfitMargin}% ${u?" ":"margin"}`:u?"":"Medium",riskLevel:o!=null&&o.riskScore?`${o.riskScore}%`:u?"":"Medium"},w=Math.round(((i==null?void 0:i.breakEvenPoint)||30)*((i==null?void 0:i.averageSalePrice)||100)*.5),E=Math.round(w*.3),S={initial:w,monthly:E,breakEven:i!=null&&i.breakEvenPoint?`${i.breakEvenPoint} ${u?"":"units"}`:u?"3-6 ":"3-6 months"},_=e.reasoning||(u?"          .":"This project requires comprehensive market and competition study before making final decision."),N=[];return e.recommendation==="GO"?N.push(u?"1.     ":"1. Secure initial capital and suppliers",u?"2.     ":"2. Develop marketing strategy and branding",u?"3.     (   )":"3. Choose appropriate sales channels (Noon, Amazon, own store)",u?"4.    ":"4. Build supply chain and shipping",u?"5.     ":"5. Launch pilot version and continuous improvement"):e.recommendation==="PROCEED WITH CAUTION"?N.push(u?"1.       ":"1. Conduct deeper market research and detailed competitive analysis",u?"2.     ":"2. Test market with limited budget first",u?"3.    ":"3. Develop clear competitive advantage",u?"4.    ":"4. Build conservative financial plan",u?"5.      ":"5. Monitor performance and adjust strategy as needed"):N.push(u?"1.       ":"1. Search for alternative opportunities with lower risks",u?"2.       ":"2. Study niche or subcategory with less competition",u?"3.      ":"3. Reassess business model and value proposition",u?"4.       ":"4. Build expertise in field before major investment",u?"5.    ":"5. Consult e-commerce experts"),{onePageSummary:f,keyFindings:p,criticalMetrics:v,investmentRequired:S,strategicRecommendation:_,nextSteps:N}}async function vte(t,e,n,r="SA"){if(!e||!n)return console.log(" Google Search API   -   "),[];try{const i={SA:`${t}  site:(noon.com OR namshi.com OR amazon.sa OR jarir.com OR extra.com OR salla.sa OR zid.sa)`,EG:`${t}  site:(jumia.eg OR noon.eg OR amazon.eg OR souq.com)`,AE:`${t}  site:(noon.ae OR namshi.ae OR amazon.ae OR carrefour.ae)`,JO:`${t}  site:(jumia.jo OR noon.jo)`,KW:`${t}  site:(noon.kw OR amazon.kw)`,QA:`${t}  site:(noon.qa)`,BH:`${t}  site:(noon.bh)`,OM:`${t}  site:(noon.om)`},o=i[r]||i.SA,s={SA:"sa",EG:"eg",AE:"ae",JO:"jo",KW:"kw",QA:"qa",BH:"bh",OM:"om",LB:"lb",SY:"sy",IQ:"iq",MA:"ma",TN:"tn",DZ:"dz"},a=new URL("https://www.googleapis.com/customsearch/v1");a.searchParams.append("key",e),a.searchParams.append("cx",n),a.searchParams.append("q",o),a.searchParams.append("num","10"),a.searchParams.append("gl",s[r]||"sa"),a.searchParams.append("lr","lang_ar");const c=await fetch(a.toString());if(!c.ok)return console.error("Google Search API Error:",c.status,await c.text()),[];const u=await c.json();return!u.items||u.items.length===0?[]:u.items.map(f=>({storeName:F4(f.displayLink),url:f.link,description:f.snippet,platform:xte(f.displayLink)}))}catch(i){return console.error("    :",i),[]}}async function yte(t,e,n){if(!e||!n)return{priceRange:" ",availability:"  API",popularStores:[]};try{const r=`${t}  `,i=new URL("https://www.googleapis.com/customsearch/v1");i.searchParams.append("key",e),i.searchParams.append("cx",n),i.searchParams.append("q",r),i.searchParams.append("num","10"),i.searchParams.append("gl","sa"),i.searchParams.append("lr","lang_ar");const o=await fetch(i.toString());if(!o.ok)throw new Error(`HTTP ${o.status}`);const s=await o.json();if(!s.items)return{priceRange:"    ",availability:"",popularStores:[]};const a=bte(s.items),c=s.items.map(u=>F4(u.displayLink));return{priceRange:a.length>0?`${Math.min(...a)} - ${Math.max(...a)} `:" ",availability:s.items.length>5?" ":"",popularStores:Array.from(new Set(c)).slice(0,5)}}catch(r){return console.error("     :",r),{priceRange:"  ",availability:" ",popularStores:[]}}}function F4(t){const e={"noon.com":"","amazon.sa":" ","namshi.com":"","jarir.com":" ","extra.com":"","salla.sa":"","zid.sa":"","aliexpress.com":" ","souq.com":"","wadi.com":""};for(const[n,r]of Object.entries(e))if(t.includes(n))return r;return t.replace("www.","").split(".")[0]}function xte(t){return t.includes("salla.sa")?"Salla":t.includes("zid.sa")?"Zid":t.includes("noon.com")?"Noon":t.includes("amazon")?"Amazon":" "}function bte(t){const e=[];return t.forEach(n=>{const i=`${n.title} ${n.snippet}`.match(/(\d+(?:,\d+)?(?:\.\d+)?)\s*(?:|\.|SAR)/gi);i&&i.forEach(o=>{const s=parseFloat(o.replace(/[^\d.]/g,""));s>10&&s<1e5&&e.push(s)})}),e}const wte={type:Ce.OBJECT,properties:{itemName:{type:Ce.STRING},category:{type:Ce.STRING},summary:{type:Ce.STRING},targetMarket:{type:Ce.STRING},marketAnalysis:{type:Ce.OBJECT,properties:{actualDemand:{type:Ce.STRING},problemSolved:{type:Ce.STRING},searchVolume:{type:Ce.STRING},culturalCompatibility:{type:Ce.STRING},scalability:{type:Ce.STRING},seasonalFactors:{type:Ce.STRING}},required:["actualDemand","problemSolved","searchVolume","culturalCompatibility","scalability","seasonalFactors"]},marketingStrategy:{type:Ce.OBJECT,properties:{targetAudience:{type:Ce.OBJECT,properties:{demographics:{type:Ce.STRING},behavior:{type:Ce.STRING},interests:{type:Ce.ARRAY,items:{type:Ce.STRING}}},required:["demographics","behavior","interests"]},bestChannels:{type:Ce.ARRAY,items:{type:Ce.STRING}},expectedCAC:{type:Ce.STRING},conversionKPIs:{type:Ce.STRING}},required:["targetAudience","bestChannels","expectedCAC","conversionKPIs"]},strategicAnalysis:{type:Ce.OBJECT,properties:{directCompetitors:{type:Ce.ARRAY,items:{type:Ce.STRING}},usp:{type:Ce.STRING},saturationRisk:{type:Ce.STRING},imitationRisk:{type:Ce.STRING}},required:["directCompetitors","usp","saturationRisk","imitationRisk"]},operationsFinancials:{type:Ce.OBJECT,properties:{pricingViability:{type:Ce.STRING},expectedProfitMargins:{type:Ce.STRING},supplyChainEase:{type:Ce.STRING},recommendedPaymentMethods:{type:Ce.ARRAY,items:{type:Ce.STRING}},recommendedDelivery:{type:Ce.ARRAY,items:{type:Ce.STRING}}},required:["pricingViability","expectedProfitMargins","supplyChainEase","recommendedPaymentMethods","recommendedDelivery"]},finalVerdict:{type:Ce.OBJECT,properties:{recommendation:{type:Ce.STRING},reasoning:{type:Ce.STRING}},required:["recommendation","reasoning"]},marketStats:{type:Ce.OBJECT,properties:{averagePrice:{type:Ce.NUMBER},highestPrice:{type:Ce.NUMBER},lowestPrice:{type:Ce.NUMBER},demandLevel:{type:Ce.STRING},marketSaturation:{type:Ce.NUMBER}},required:["averagePrice","highestPrice","lowestPrice","demandLevel","marketSaturation"]},competitors:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{storeName:{type:Ce.STRING},price:{type:Ce.NUMBER},rating:{type:Ce.NUMBER},shippingDays:{type:Ce.NUMBER},stockStatus:{type:Ce.STRING},url:{type:Ce.STRING}},required:["storeName","price","rating","shippingDays","stockStatus","url"]}},trends:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{date:{type:Ce.STRING},price:{type:Ce.NUMBER},demand:{type:Ce.NUMBER}},required:["date","price","demand"]}},swot:{type:Ce.OBJECT,properties:{strengths:{type:Ce.ARRAY,items:{type:Ce.STRING}},weaknesses:{type:Ce.ARRAY,items:{type:Ce.STRING}},opportunities:{type:Ce.ARRAY,items:{type:Ce.STRING}},threats:{type:Ce.ARRAY,items:{type:Ce.STRING}}},required:["strengths","weaknesses","opportunities","threats"]},recommendations:{type:Ce.ARRAY,items:{type:Ce.STRING}}},required:["itemName","category","summary","marketAnalysis","marketingStrategy","strategicAnalysis","operationsFinancials","finalVerdict","marketStats","competitors","trends","swot","recommendations"]};async function _te(t,e,n,r,i,o="SA"){var f,p,v,w,E,S,_,N,j,F,q,V,$,k;const s=n||"PLACEHOLDER_API_KEY",a=new aS({apiKey:s}),c=Op[o]||Op.SA,u=`
    
     EXPERT PERSONA:      (20+  )
    
    
     **CRITICAL - READ THIS FIRST** 
    
     **   : ${o}**
    
     **  :**
    -        ${o}
    -    -  ${c.currencyCode} 
    -      ${o}
    
     ** :**
    -   100%   ${o} 
    -    ${c.currency} (${c.currencyCode})
    -   : ${c.platforms.join(", ")}
    -   : ${c.marketChar}
    
      :
    - : ${o}
    -  : ${c.currency} (${c.currencyCode})
    -  : ${c.language}
    -   : ${c.platforms.join(", ")}
    -  : ${c.marketChar}
    
              20 .
     :
    -      
    -       
    -      
    -        
    -       
    
    :         : "${t}"
    
    
          (CRITICAL!)
    
    
    ${r?`
        Google Search -  :
    
    1 **     :**
       -   " "  Google
       -        
       -       (  !)
       -  :      
       -   =      
       
    2 **    / :**
       -   :    
       -   : (///)
       -         :
         *     
         *    
         *   
       - :   = 15-25%     = 5-10%
       
    3 **   :**
       -    : "   X " " "
       -      -  !
       
    4 **    :**
       -      =   
       -   50    =  
       
     ** :     :**
    -     Google  
    -     (  )
    -    :      
    `:""}
    
    
        
    
    
         (Demand Score Calculation):
    
        .   Demand Score        .
    
        (    0-100):
    
    1   (Search Interest) -  25%:
       -     Google
       -   
       -     
       -    
       
    2    (Actual Sales Strength) -  35%:
       -    
       -     
       -   
       -   ( 10  =  )
       
    3  (Competition) -  15%:
       -    =  
       -    = 80-100 
       -   (50%) = 50 
       -   (80%+) = 20-30 
       
    4    (Repeat Purchase) -  10%:
       -   ( ) = 80-100
       -    () = 50-70
       -    () = 20-40
       
    5   (Conversion Rate) -  10%:
       -   +   =  
       -   =  
       -   =  
       
    6   (Trend Stability) -  5%:
       -   = 30-50
       -    = 70-90
       -   = 80-100
    
      :
    Demand Score = (Search  0.25) + (Sales  0.35) + (Competition  0.15) + (Repeat  0.10) + (Conversion  0.10) + (Trend  0.05)
    
          Demand Score:
    - 80-100:   (Very High)  8,000+ /
    - 60-79:  (High)  2,000-8,000 /
    - 40-59:  (Medium)  500-2,000 /
    - 0-39:  (Low)    500 /
    
      :
    -   -    
    -     Google Search
    -         
    -     -  
    
       :
     **CRITICAL**:     :
    -  : ${c.platforms.join(", ")}
    -       
    -    (LIVE Search)    
    -      
    -     ${c.currencyCode} (${c.currency})
    -        
    -    : GO  NO-GO  PROCEED WITH CAUTION
    
      (Competitors) -   :
    
    
     **  :**
    
    1 **      ${o}:**
       -  : ${((f=c.topStores)==null?void 0:f.join(", "))||c.platforms.join(", ")}
       -  : ${c.platforms.join(", ")}
       ${o==="SA"?`
            :
       -   (amazon.sa) -  
       -  (noon.com) -   
       -  (jarir.com) -  
       -  (extra.com) -  
       -  (namshi.com) - 
       -   (shein.com) - 
       -   - 
       -    -  
       -  (ounass.sa) - 
       -  (styli.com) - 
       -  (mumzworld.com) -  
       -       
       `:""}
    
    2 **  :**
       -     ( )
       -   
       -   
    
    3 **  :**
       - storeName:    ( ""  ""  "")
       - price:   ${c.currencyCode}
       - rating:  (1-5)
       - shippingDays:   (1-7)
       - stockStatus: ""  ""  " "
       - url:     
    
    4 **:**
       -    
       -    
       -      
       -      ${o}
    
    5 ** :** 10-15    
    
    
     **   :**
    -        ${o} 
    - : ${c.currencyCode}  -   SAR  
    - : ${c.platforms.join("  ")} 
    -         ${o}
    
    
     **MANDATORY LANGUAGE DIRECTIVE - ABSOLUTE REQUIREMENT**
    
    ${e==="ar"?` **   -  100%** 
    
     **       :**
    
     **:**
    -        
    -  :    (: " "  "Arabic Coffee")
    -  :  (: ""  "Electronics")
    -  : " "  ""  ""  "" - !
    -  : ""  " "  "" - !
    -  :   
    -  :    
    -  : ""  ""  "" - !
    -  : " "  " " - !
    -  : " "  " " - !
    
     ** :**
    -      (NO English words at all)
    -    (:  "Salla" -  "")
    -     
    -       
    
     ** :**
    - "High demand"  " "
    - "Available"  ""
    - "Amazon"  ""
    - "Credit Card"  " "
    - "Fast Shipping"  " "
    - "Electronics"  ""
    - "GO"  " "
    - "NO-GO"  " "
    - "PROCEED WITH CAUTION"  " "
    
     ** :        !**`:` **ENGLISH LANGUAGE RULES - 100% MANDATORY** 
    
     **Everything MUST be in pure English:**
    
     **Required:**
    - All texts and values must be in complete English
    - Product names: Write in English (example: "Arabic Coffee" not " ")
    - Category names: In English (example: "Electronics" not "")
    - Demand level: "Very High" or "High" or "Medium" or "Low" - in English!
    - Stock status: "Available" or "Out of Stock" or "Limited" - in English!
    - Recommendations and analysis: Complete English sentences
    - Store names: Write them in English transliteration
    - Platform names: "Amazon" and "Noon" and "Salla" - in English!
    - Payment methods: "Bank Transfer" and "Credit Card" - in English!
    - Shipping methods: "Express Shipping" and "Standard Delivery" - in English!
    
     **Absolutely forbidden:**
    - Any Arabic word in texts (NO Arabic words at all)
    - Writing in Arabic script
    - Mixing languages in the same sentence
    - Using Arabic terms even if commonly used
    
     **Conversion examples:**
    - " "  "High demand"
    - ""  "Available"
    - ""  "Amazon"
    - " "  "Credit Card"
    - " "  "Fast Shipping"
    - ""  "Electronics"
    
     **Top Priority: Every character in the response must be English!**`}
    
    Year: 2025.
  `;try{const D=t.includes("http")||t.includes("www.")||t.includes("salla.sa")||t.includes("zid.sa")||t.includes("noon.com")||t.includes("amazon.sa");let O=t;D&&(O=e==="ar"?`  : ${o} | : ${c.currencyCode}
        
 /: ${t}

   :
 **       ${o}  -  !**

1.     :
   -   (Rating) -  !
   -  
   -   ( )
   -   ${c.currencyCode}
   -  /

2.   Google     ${o}:
   -  : ${c.platforms.join("  ")}
   -       
   -     ${o}
   -     

3.   /:
   -  4.5+  =  
   -  4.0-4.5 = 
   -  3.5-4.0 = 
   -    3.5 = 

4.       :
   -   =  
   -   =  
   -     =  

      ${o}    .`:` Target Market: ${o} | Currency: ${c.currencyCode}
        
Product/Store URL: ${t}

 Critical Instructions:
1. Open the link and extract actual data:
   - Product rating - very important!
   - Number of reviews
   - Sales count (if available)
   - Price
   - Store rank/strength

2. Search Google for same product:
   - Where does this link appear in search results?
   - How many competitors?
   - What's this store's ranking?

3. Evaluate product/store strength:
   - Rating 4.5+ stars = very strong
   - Rating 4.0-4.5 = strong
   - Rating 3.5-4.0 = average
   - Rating below 3.5 = weak

4. Calculate product's market share based on:
   - High rating = bigger share
   - Competitive price = more sales
   - High search rank = more visibility

Then search for similar products to estimate total market size.`);const z=e==="ar"?`${t}      `:`${t} Saudi Arabia e-commerce market prices stores sales`,U=await a.models.generateContent({model:"gemini-3-pro-preview",contents:`${e==="ar"?` ** : ${o}** | : ${c.currencyCode} | : ${c.platforms.join("  ")}
        
     20+       : ${O}   ${o} .

 ** **:       ${o} -       !`:` **Target Market: ${o}** | Currency: ${c.currencyCode} | Platforms: ${c.platforms.join(", ")}
        
As a market analysis expert with 20+ years of experience, perform comprehensive and accurate analysis for: ${O} in ${o} market only.

 **CRITICAL**: All analysis must be about ${o} - do NOT mention Saudi Arabia or any other country!`}
        
         ${e==="ar"?"  :":"Required Analysis Methodology:"}
        
        ${e==="ar"?`
        
           =   +     ${o}
        
        
        1      ${o}:
           -   Google : "${t}"  ${o}
           -  : ${c.platforms.join("  ")}
           -     :
             *   (  =  )
             *     
             *       ${o}
           -  Search Interest  0-100
        
        2    :
           -     
           -   ( 10  =  )
           -   (  =  )
           -  Actual Sales  0-100
        
        3   (   =  ):
           -   (<30%) = 80-100 
           -   (30-60%) = 50-70 
           -   (>60%) = 20-40 
        
        4    :
           -   = 80-100
           -    = 50-70
           -    = 20-40
        
        5   :
           -   +   = 80-100
           -  = 50-70
           -   = 20-40
        
        6   :
           -   = 80-100
           -  = 40-60
           -   = 20-40
        
          Demand Score :
        = (Search  0.25) + (Sales  0.35) + (Competition  0.15) + (Repeat  0.10) + (Conversion  0.10) + (Trend  0.05)
        
           :
        - Score 80-100    (8000+ /)
        - Score 60-79   (2000-8000 /)
        - Score 40-59   (500-2000 /)
        - Score 0-39   (  500 /)
        
        2       :
           ${D?`
               - :
           )  Demand Score   
           )     :
              -   (4.5+ =  )
              -  
              -    
           `:`
           -  Demand Score 
           - Score  =  
           `}
        
        3     :
           -      - !
           - "   8000 " =  
           -    10 =  
        
          :
        -   Demand Score (6  )
        -   -  
        - monthlyDemandEstimate     demandLevel
        -    Google Search -  
        -  = 10     
        `:`
        
         Demand Score Methodology (6 Weighted Factors)
        
        
        1 Evaluate Search Interest (0-100):
           - Search Google for: "${t}"
           - Monthly search volume indicators
           - Number of articles and reviews
           - First page appearance = high score
           - Rate Search Interest: 0-100
        
        2 Calculate Actual Sales Strength (0-100):
           - Number of stores  average sales
           - Reviews count (every 10 reviews = strong signal)
           - Stock status (frequent out-of-stock = high demand)
           - Rate Actual Sales: 0-100
        
        3 Evaluate Competition ( lower = higher score):
           - Low saturation (<30%) = 80-100 points
           - Medium saturation (30-60%) = 50-70 points
           - High saturation (>60%) = 20-40 points
        
        4 Calculate Repeat Purchase Potential:
           - Consumable products = 80-100
           - Frequent use = 50-70
           - One-time purchase = 20-40
        
        5 Estimate Conversion Likelihood:
           - Good price + high rating = 80-100
           - Average = 50-70
           - Hard to sell = 20-40
        
        6 Analyze Trend Stability:
           - Evergreen product = 80-100
           - Seasonal = 40-60
           - Temporary trend = 20-40
        
         Calculate Final Demand Score:
        = (Search  0.25) + (Sales  0.35) + (Competition  0.15) + (Repeat  0.10) + (Conversion  0.10) + (Trend  0.05)
        
        Then determine demand level:
        - Score 80-100  Very High (8000+ units/month)
        - Score 60-79  High (2000-8000 units/month)
        - Score 40-59  Medium (500-2000 units/month)
        - Score 0-39  Low (less than 500 units/month)
        
        ${D?`
         If store URL: Calculate total market first, then store's share based on rating and price competitiveness
        `:""}
        
        3 Use Actual Data if Found:
           - If found real sales number - use it!
           - "Sold 8000 times" = actual data
           - Reviews count  10 = sales estimate
        
         Critical:
        - Use Demand Score methodology (6 weighted factors)
        - Be realistic - don't exaggerate
        - monthlyDemandEstimate must match demandLevel
        - Use data from Google Search - don't guess
        - Competitors = at least 10 from real stores
        `}`,config:{systemInstruction:u,responseMimeType:"application/json",responseSchema:wte,tools:[{googleSearch:{}}],temperature:.7,topP:.9,topK:40}}),M=U.text;if(!M)throw new Error("Empty AI response");const P=JSON.parse(M);if(e==="ar"){const ge=xe=>{if(typeof xe=="string")return xe;if(typeof xe=="object"&&xe!==null){if(Array.isArray(xe))return xe.map(ne=>ge(ne));const le={};for(const[ne,de]of Object.entries(xe))le[ne]=ge(de);return le}return xe};Object.assign(P,ge(P))}const me=(w=(v=(p=U.candidates)==null?void 0:p[0])==null?void 0:v.groundingMetadata)==null?void 0:w.groundingChunks;me&&(P.sources=me.filter(ge=>ge.web).map(ge=>({title:ge.web.title,uri:ge.web.uri})));let ce=[];if(r&&i)try{if(console.log(" Using Google Search API for enhanced accuracy..."),ce=await vte(t,r,i,o),ce.length>0){console.log(` Found ${ce.length} real competitors from Google Search`);const xe=ce.slice(0,10).map((le,ne)=>{var de,Y,ie,fe,_e,$e,Ge,Ue,ze;return{storeName:le.storeName,price:((Y=(de=P.competitors)==null?void 0:de[ne])==null?void 0:Y.price)||((ie=P.marketStats)==null?void 0:ie.averagePrice)||150,rating:((_e=(fe=P.competitors)==null?void 0:fe[ne])==null?void 0:_e.rating)||4,shippingDays:((Ge=($e=P.competitors)==null?void 0:$e[ne])==null?void 0:Ge.shippingDays)||3,stockStatus:((ze=(Ue=P.competitors)==null?void 0:Ue[ne])==null?void 0:ze.stockStatus)||(e==="ar"?"":"Available"),url:le.url}});xe.length>(((E=P.competitors)==null?void 0:E.length)||0)&&(P.competitors=xe)}const ge=await yte(t,r,i);if(ge.popularStores.length>0&&(console.log(" Enhanced market data from Google Search:",ge),ge.priceRange&&ge.priceRange!==" ")){const xe=ge.priceRange.match(/(\d+)\s*-\s*(\d+)/);xe&&(P.marketStats={...P.marketStats,lowestPrice:parseInt(xe[1]),highestPrice:parseInt(xe[2]),averagePrice:Math.round((parseInt(xe[1])+parseInt(xe[2]))/2),demandLevel:ge.availability.includes("")||ge.availability.includes("abundant")?e==="ar"?"":"High":((S=P.marketStats)==null?void 0:S.demandLevel)||(e==="ar"?"":"Medium"),marketSaturation:((_=P.marketStats)==null?void 0:_.marketSaturation)||50})}}catch(ge){console.warn(" Google Search API error (continuing with Gemini data):",ge)}else(r||i)&&console.log(" Google Search requires both API Key and Search Engine ID");try{const ge=((N=P.competitors)==null?void 0:N.length)||0,xe=((j=P.marketStats)==null?void 0:j.averagePrice)||100,le=((F=P.marketStats)==null?void 0:F.marketSaturation)||50;let ne=500;const de=ge*100,Y=xe<100?1500:xe<300?800:xe<600?400:200,ie=(100-le)*20;if(ne=Math.round((de+Y+ie)/3),ne=Math.max(200,Math.min(15e3,ne)),D&&ge>0){const rt=(P.competitors||[])[0]||{},Ye=rt.rating||3.5,Ne=rt.price||xe,be=Ye>=4.5?1.5:Ye>=4?1.2:Ye>=3.5?1:Ye>=3?.8:.6,De=Ne<=xe*.9?1.3:Ne<=xe?1.1:Ne<=xe*1.1?.9:.7,Je=le<40?1.3:le<60?1:le<80?.7:.5,G=.1*be*De*Je,je=Math.max(.03,Math.min(.35,G));ne=Math.round(ne*je),console.log(` Store Analysis: Rating=${Ye}, Price=${Ne}, Share=${(je*100).toFixed(1)}%`)}let fe="",_e=50;if(ne<500?(fe=e==="ar"?"":"Low",_e=25):ne>=500&&ne<2e3?(fe=e==="ar"?"":"Medium",_e=50):ne>=2e3&&ne<8e3?(fe=e==="ar"?"":"High",_e=80):(fe=e==="ar"?" ":"Very High",_e=95),P.marketStats.demandLevel=fe,console.log(` Demand Analysis: ${ne} units/month ${D?"(store share)":"(market-wide)"}  Level: ${fe} (Score: ${_e})`),P.competitors&&P.competitors.length>0){const He=typeof r<"u"&&typeof ce<"u"?ce.length:P.competitors.length,rt=ute(P.competitors,He);P.competitorIntelligence={activeCompetitors:rt.activeCompetitors,competitorStrengthIndex:rt.competitorStrengthIndex,topCompetitors:rt.topCompetitors,marketGaps:rt.marketGaps,entryDifficulty:rt.entryDifficulty}}if(P.marketStats&&P.competitors){const He=dte(P.marketStats,P.competitors,_e,e);P.profitabilityAnalysis={averageSalePrice:He.averageSalePrice,estimatedProfitMargin:He.estimatedProfitMargin,breakEvenPoint:He.breakEvenPoint,profitabilityScore:He.profitabilityScore,priceSensitivity:He.priceSensitivity,estimatedMonthlyRevenue:He.estimatedMonthlyRevenue}}const Ge=((He,rt,Ye,Ne)=>{var ft,At;const be=(He+" "+rt).toLowerCase(),De=((ft=Op[Ne])==null?void 0:ft.nameAr)||"  ",Je=((At=Op[Ne])==null?void 0:At.nameEn)||"Saudi Arabia";let dt=[],G=[],je="",ct="";return be.includes("")||be.includes("")||be.includes("fashion")||be.includes("clothing")||be.includes("")||be.includes("")?Ye==="ar"?(dt=["","","",""],G=["","",""],je=`            ${De}`,ct=`    :         ${De}`):(dt=["Ramadan","Eid","November","December"],G=["January","February","July"],je=`Peak season during Ramadan, Eid, and year-end sales in ${Je}`,ct=`Highest demand in major cities: Riyadh, Jeddah, Dammam with nationwide coverage in ${Je}`):be.includes("")||be.includes("electronics")||be.includes("")||be.includes("phone")||be.includes("")||be.includes("")||be.includes("gaming")||be.includes("")?Ye==="ar"?(dt=["","","",""],G=["","",""],je=`    ()         ${De}`,ct=`             ${De}`):(dt=["November","December","September","October"],G=["January","February","March"],je=`Peak during White Friday (November) and back-to-school season with new product launches in ${Je}`,ct=`Demand concentrated in Riyadh, Jeddah, and Eastern Province with growing demand in secondary cities of ${Je}`):be.includes("")||be.includes("food")||be.includes("")||be.includes("coffee")||be.includes("")||be.includes("")?Ye==="ar"?(dt=["",""," ",""],G=["","",""],je=`         ${De}`,ct=`     ${De}       `):(dt=["Ramadan","Shaaban","Dhul Hijjah","December"],G=["January","February","June"],je=`Peak demand during Ramadan, Hajj season, and year-end in ${Je}`,ct=`Widespread demand across all regions of ${Je} with concentration in major cities and tourist areas`):be.includes("")||be.includes("kids")||be.includes("baby")||be.includes("toys")||be.includes(" ")?Ye==="ar"?(dt=["","","",""],G=["","",""],je=`         ${De}`,ct=`       :     ${De}`):(dt=["Eid","November","December","June"],G=["February","March","September"],je=`Peak during Eid holidays, summer vacation, and year-end in ${Je}`,ct=`High demand in densely populated areas: Riyadh, Jeddah, Makkah, Madinah in ${Je}`):be.includes("")||be.includes("sport")||be.includes("fitness")||be.includes("")||be.includes("health")||be.includes("gym")?Ye==="ar"?(dt=["","","",""],G=["","",""],je=`             ${De}`,ct=`           ${De}`):(dt=["January","February","September","October"],G=["Ramadan","July","August"],je=`Peak with New Year resolutions and autumn season, dip during Ramadan and hot summer in ${Je}`,ct=`Concentrated in major cities and upscale neighborhoods with growth in new areas of ${Je}`):be.includes("")||be.includes("beauty")||be.includes("")||be.includes("perfume")||be.includes("")||be.includes("skincare")?Ye==="ar"?(dt=["","","",""],G=["","",""],je=`         ${De}`,ct=`             ${De}`):(dt=["Ramadan","Eid","November","December"],G=["January","February","July"],je=`Peak during occasions, Eid, wedding season, and year-end in ${Je}`,ct=`Strong demand in Jeddah, Riyadh, and Eastern Province with wide online reach across ${Je}`):be.includes("")||be.includes("home")||be.includes("")||be.includes("furniture")||be.includes("")||be.includes("")?Ye==="ar"?(dt=["","","",""],G=["","",""],je=`            ${De}`,ct=`          ${De}`):(dt=["January","February","November","December"],G=["Ramadan","July","August"],je=`Peak during wedding season and year start/end, dip in Ramadan and summer in ${Je}`,ct=`High demand in new urban areas and modern residential neighborhoods in ${Je}`):Ye==="ar"?(dt=["","","",""],G=["","",""],je=`          ${De}`,ct=`      ${De}:    `):(dt=["November","December","Ramadan","Eid"],G=["January","February","July"],je=`Balanced seasonal patterns with peaks during major shopping seasons in ${Je}`,ct=`Balanced distribution across major regions in ${Je}: Riyadh, Jeddah, Dammam, Makkah`),{peakMonths:dt,lowMonths:G,analysis:je,geoDistribution:ct}})(P.category||"",P.itemName||t,e,o);P.demandAnalysis={monthlyDemandEstimate:ne,demandScore:_e,seasonality:{peakMonths:Ge.peakMonths,lowMonths:Ge.lowMonths,analysis:Ge.analysis},demandStability:_e>70?"High":_e>40?"Medium":"Low",geographicDistribution:Ge.geoDistribution};const Ue=((q=P.competitorIntelligence)==null?void 0:q.competitorStrengthIndex)||50,ze=((V=P.profitabilityAnalysis)==null?void 0:V.estimatedProfitMargin)||20,H=fte(_e,Ue,ze,P.competitors||[]);P.opportunityFinder={opportunities:H.opportunities};const oe=hte(_e,Ue,ze,P.demandAnalysis,P.profitabilityAnalysis,P.competitorIntelligence);P.decisionMetrics={successScore:oe.successScore,riskScore:oe.riskScore,beginnerFriendly:oe.beginnerFriendly,capitalRequired:oe.capitalRequired,timeToProfit:oe.timeToProfit,recommendation:oe.recommendation};const ve=oe.recommendation==="CAUTION"?"PROCEED WITH CAUTION":oe.recommendation;ve!==P.finalVerdict.recommendation&&(console.log(` Correcting Verdict: ${P.finalVerdict.recommendation} -> ${ve}`),P.finalVerdict.recommendation=ve);const ae=pte(t,_e,P.competitors||[],P.marketStats);P.buyerIntentAnalysis={intentScore:ae.intentScore,intentLevel:ae.intentLevel,searchIntentType:ae.searchIntentType,buyerJourneyStage:ae.buyerJourneyStage,keywordAnalysis:ae.keywordAnalysis,conversionProbability:ae.conversionProbability,insights:ae.insights},console.log(` Buyer Intent: ${ae.intentLevel} (${ae.intentScore}%) - ${ae.searchIntentType}`);const Xe=mte(_e,P.profitabilityAnalysis,Ue,P.marketStats,ae.intentScore);P.growthScenarios={conservative:Xe.conservative,moderate:Xe.moderate,optimistic:Xe.optimistic,recommendedScenario:Xe.recommendedScenario,scalabilityFactors:Xe.scalabilityFactors},console.log(` Growth Scenarios: Recommended ${Xe.recommendedScenario}`);const Be=gte(P.itemName,P.finalVerdict,P.demandAnalysis,P.competitorIntelligence,P.profitabilityAnalysis,P.decisionMetrics,P.buyerIntentAnalysis,P.growthScenarios,e);if(P.executiveSummary={onePageSummary:Be.onePageSummary,keyFindings:Be.keyFindings,criticalMetrics:Be.criticalMetrics,investmentRequired:Be.investmentRequired,strategicRecommendation:Be.strategicRecommendation,nextSteps:Be.nextSteps},console.log(` Executive Summary generated - ${Be.keyFindings.length} key findings`),P.trends&&P.trends.length>0){const He=new Date().getFullYear(),rt=P.trends.map((Ye,Ne)=>{const be=Ne%12+1,De=Ne<12?He:He+1,Je=be.toString().padStart(2,"0");return{...Ye,date:`${De}-${Je}`}});P.trends=rt}else{const He=new Date().getFullYear(),rt=(($=P.marketStats)==null?void 0:$.averagePrice)||100,Ye=_e||50;P.trends=Array.from({length:12},(Ne,be)=>{const De=be+1,Je=De.toString().padStart(2,"0"),dt=.9+Math.random()*.2,G=.8+Math.random()*.4,je=[3,4,11,12].includes(De)?1.3:1;return{date:`${He}-${Je}`,price:Math.round(rt*dt),demand:Math.round(Ye*G*je)}})}}catch(ge){console.warn("Warning: Some analyzers failed, continuing with base analysis",ge)}return P}catch(D){throw console.error("AI Service Error:",D),(k=D.message)!=null&&k.includes("API_KEY_INVALID")?new Error(e==="ar"?" API  .      .":"Invalid API Key. Please update it in the Admin Dashboard."):new Error(e==="ar"?"   .     API    .":"Failed to generate report. Ensure the API key in settings is valid and has billing enabled.")}}async function Ete(t,e){if(!t||!e)return t;try{const r=new aS({apiKey:e}).getGenerativeModel({model:"gemini-2.0-flash-exp"}),i=`Translate the following English text to Arabic. Return ONLY the Arabic translation, no explanations:

${t}`;return(await r.generateContent(i)).response.text().trim()||t}catch(n){return console.error("Translation failed:",n),t}}async function Ste(t,e,n){if(!n||!t)return t;try{const i=new aS({apiKey:n}).getGenerativeModel({model:"gemini-2.0-flash-exp"}),o=e==="ar"?`       .   JSON      .


    -  :


1 **:**
   -     JSON  (   )
   -     (keys) -   (values)

2 **  :**
   -       
   -      ("Smartphone"  " ")
   -      ("Electronics"  "")
   -    "Very High"  " "
   -    "Available"  ""
   -    "Amazon"  "", "Noon"  ""
   -    "Credit Card"  " "
   -    "Express Shipping"  " "
   -      
   - GO  " "
   - NO-GO  " "
   - PROCEED WITH CAUTION  " "

3 **   :**
   -  (123.45)   
   -  (URLs)   
   -    

4 ** :**
   -    
   -      
   -        

5 **:**
   -  JSON  
   -     
   -  markdown code blocks

JSON :
${JSON.stringify(t,null,2)}`:`You are a professional translator specializing in market analysis translations. Translate the following JSON object from Arabic to English completely.


 Strict Translation Rules - Follow precisely:


1 **Structure:**
   - Keep the exact same JSON structure (same key names in English)
   - Do not change key names - only values

2 **What to translate:**
   - All texts and sentences  Complete English translation
   - Product names  Translate to English (" "  "Smartphone")
   - Category names  Translate to English (""  "Electronics")
   - Demand level  " "  "Very High"
   - Stock status  ""  "Available"
   - Platform names  ""  "Amazon", ""  "Noon"
   - Payment methods  " "  "Credit Card"
   - Shipping methods  " "  "Express Shipping"
   - Recommendations  Complete, fluent English sentences
   - " "  GO
   - " "  NO-GO
   - " "  PROCEED WITH CAUTION

3 **What NOT to translate:**
   - Numbers (123.45) stay as is
   - URLs stay as is
   - Dates stay in same format

4 **Translation quality:**
   - Use proper, professional English
   - Sentences should be clear and coherent
   - Do not leave any Arabic word in translated text

5 **Output:**
   - Return valid JSON only
   - No explanation or comments
   - No markdown code blocks

JSON to translate:
${JSON.stringify(t,null,2)}`;let a=(await i.generateContent(o)).response.text().trim();a=a.replace(/```json\n?/g,"").replace(/```\n?/g,"");const c=a.match(/\{[\s\S]*\}/);return c&&(a=c[0]),JSON.parse(a)}catch(r){return console.error("Analysis translation failed:",r),t}}const $N=async(t,e,n="SA")=>{try{const r=rn(vt,"users",t),i=e.toLowerCase()===Gj.toLowerCase(),o={uid:t,email:e,region:n,plan:i?"ELITE":"FREE",status:"ACTIVE",createdAt:Date.now(),expiryDate:Date.now()+720*60*60*1e3,searchCount:0,isAdmin:i};return await hv(r,o),o}catch(r){throw console.error("Create User Profile Error:",r.message),r}},U4=t=>t.trim().toLowerCase(),Tte=async(t,e)=>{try{const n=rn(vt,"users",t),r=await Bl(n),i=e.toLowerCase()===Gj.toLowerCase();if(r.exists()){const o=r.data();return i&&!o.isAdmin?(await Hi(n,{isAdmin:!0,plan:"ELITE"}),{...o,isAdmin:!0,plan:"ELITE"}):o}else{const o={uid:t,email:e,region:"SA",plan:i?"ELITE":"FREE",status:"ACTIVE",createdAt:Date.now(),expiryDate:Date.now()+2592e6,searchCount:0,isAdmin:i};return await hv(n,o),o}}catch(n){throw console.error("Firestore Sync Error:",n.message),n}},Bw=async(t,e)=>{const n=rn(vt,"users",t);await Hi(n,e)},V4=async()=>{try{const t=rn(vt,"configs","app"),e=await Bl(t);return e.exists()?e.data():null}catch(t){return console.error("Get App Config Error:",t),null}},Ate=async t=>{const e=rn(vt,"configs","app");await hv(e,{...t,lastUpdated:Date.now()})},BN=async(t,e,n,r="SA",i="ar",o,s)=>{try{const a=U4(e),c=await $4(t,e);if(c)return console.log("Analysis already exists, returning existing ID:",c.id),c.id;const u=fr(vt,"saved_analyses"),f={userId:t,query:e,normalizedQuery:a,timestamp:Date.now(),data:n,dataAr:o||(i==="ar"?n:void 0),dataEn:s||(i==="en"?n:void 0),originalLang:i,region:r,isPublished:!1},p=await mv(u,f);return console.log("New analysis saved with ID:",p.id),p.id}catch(a){throw console.error("Save Analysis Error:",a.message),a}},$4=async(t,e)=>{try{const n=U4(e),r=Vo(fr(vt,"saved_analyses"),zi("userId","==",t),zi("normalizedQuery","==",n)),i=await Zi(r);if(!i.empty){const a=i.docs[0];return{id:a.id,...a.data()}}const o=Vo(fr(vt,"saved_analyses"),zi("userId","==",t),zi("query","==",e)),s=await Zi(o);if(!s.empty){const a=s.docs[0];return{id:a.id,...a.data()}}return null}catch(n){return console.error("Check Existing Analysis Error:",n.message),null}},Cte=async t=>{try{const e=Vo(fr(vt,"saved_analyses"),zi("userId","==",t));return(await Zi(e)).docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>o.timestamp-i.timestamp)}catch(e){return console.error("Get Saved Analyses Error:",e.message),[]}},Ite=async t=>{try{const e=Vo(fr(vt,"saved_analyses"),zi("userId","==",t));return(await Zi(e)).docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>o.timestamp-i.timestamp)}catch(e){return console.error("Get User Saved Analyses Error:",e.message),console.error("Full error:",e),[]}},Pte=async t=>{try{await pv(rn(vt,"saved_analyses",t))}catch(e){console.error("Delete Error:",e.message)}},Nte=async()=>{try{return(await Zi(fr(vt,"users"))).docs.map(e=>e.data())}catch(t){throw new Error(t.code==="permission-denied"?"Access Denied: Admin only.":t.message)}},kte=async(t,e,n,r=!0)=>{const i=rn(vt,"users",t),o={plan:e,status:n,expiryDate:Date.now()+720*60*60*1e3};r&&(o.searchCount=0),await Hi(i,o)},B4=async t=>{const e=rn(vt,"users",t);await pv(e)},Rte=async t=>{const e=rn(vt,"users",t);await Hi(e,{searchCount:0})},Mte=async t=>{const e=rn(vt,"users",t);await Hi(e,{searchCount:xj(1)})},Av=async()=>{try{const t=rn(vt,"configs","plans"),e=await Bl(t);return e.exists()?e.data().list:[]}catch{return[]}},Dte=async t=>{const e=rn(vt,"configs","plans");await hv(e,{list:t})},Ote=async t=>{const e=new URLSearchParams(window.location.search),n=e.get("stripe_success"),r=e.get("plan_id");if(n==="true"&&r){const i=rn(vt,"users",t),s=(await Av()).find(c=>c.id===r),a=(s==null?void 0:s.durationMonths)||1;return await Hi(i,{plan:r,status:"ACTIVE",expiryDate:Date.now()+a*30*24*60*60*1e3}),window.history.replaceState({},document.title,window.location.pathname),!0}return!1},Lte=({current:t,onToggle:e})=>h.jsx("button",{onClick:()=>e(t==="ar"?"en":"ar"),className:"w-10 h-10 flex items-center justify-center text-blue-900 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors","aria-label":t==="ar"?"Switch to English":" ",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})})}),jte="modulepreload",Fte=function(t){return"/"+t},zN={},Ute=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let s=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=s(n.map(u=>{if(u=Fte(u),u in zN)return;zN[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":jte,f||(v.as="script"),v.crossOrigin="",v.href=u,c&&v.setAttribute("nonce",c),document.head.appendChild(v),f)return new Promise((w,E)=>{v.addEventListener("load",w),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},Vte=t=>t.trim().toLowerCase(),lS=async(t,e,n,r,i)=>{try{const s=(await Ca()).length;return(await mv(fr(vt,"libraryCategories"),{nameAr:t,nameEn:e,descriptionAr:n,descriptionEn:r,order:s,createdAt:Date.now(),createdBy:i})).id}catch(o){throw console.error("Error creating category:",o),o}},z4=async(t,e,n,r,i)=>{try{const o=rn(vt,"libraryCategories",t);await Hi(o,{nameAr:e,nameEn:n,descriptionAr:r,descriptionEn:i})}catch(o){throw console.error("Error updating category:",o),o}},q4=async t=>{try{if((await W4(t)).length>0)throw new Error("Cannot delete category with published analyses");const n=rn(vt,"libraryCategories",t);await pv(n)}catch(e){throw console.error("Error deleting category:",e),e}},Ca=async()=>{try{const t=Vo(fr(vt,"libraryCategories"),fv("order","asc"));return(await Zi(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Error fetching categories:",t),[]}},G4=async(t,e,n,r,i,o="",s="",a)=>{try{const c=rn(vt,"libraryCategories",t),u=await Bl(c);if(!u.exists())throw new Error("Category not found");const f=u.data();return(await mv(fr(vt,"publicLibrary"),{categoryId:t,categoryNameAr:f.nameAr,categoryNameEn:f.nameEn,itemName:e,query:n,data:r,publishedAt:Date.now(),publishedDate:Date.now(),publishedBy:i,publisherEmail:o,publisherName:s,views:0,notes:a||""})).id}catch(c){throw console.error("Error publishing analysis:",c),c}},H4=async t=>{try{const e=rn(vt,"publicLibrary",t);await pv(e)}catch(e){throw console.error("Error unpublishing analysis:",e),e}},xu=async()=>{try{const t=Vo(fr(vt,"publicLibrary"),fv("publishedAt","desc"));return(await Zi(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Error fetching public analyses:",t),[]}},W4=async t=>{try{const e=Vo(fr(vt,"publicLibrary"),zi("categoryId","==",t),fv("publishedAt","desc"));return(await Zi(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error fetching category analyses:",e),[]}},K4=async t=>{try{const e=rn(vt,"publicLibrary",t),n=await Bl(e);return n.exists()?(await Hi(e,{views:xj(1)}),{id:n.id,...n.data()}):null}catch(e){return console.error("Error fetching public analysis:",e),null}},Y4=async t=>{try{const e=Vo(fr(vt,"publicLibrary"),zi("publishedBy","==",t),fv("publishedAt","desc"));return(await Zi(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error fetching user published analyses:",e),[]}},vm=async()=>{try{const t=await Ca(),e=await xu(),n=e.reduce((r,i)=>r+(i.views||0),0);return{totalCategories:t.length,totalAnalyses:e.length,totalViews:n}}catch(t){return console.error("Error fetching library stats:",t),{totalCategories:0,totalAnalyses:0,totalViews:0}}},J4=async(t,e,n,r,i,o,s,a,c,u)=>{try{console.log("=== Starting publishAnalysisByUser ==="),console.log("savedAnalysisId:",t),console.log("userId:",e),console.log("query:",r);const f=Vte(r),p=rn(vt,"saved_analyses",t),v=await Bl(p);if(!v.exists())throw console.error("Saved analysis not found!"),new Error("SAVED_ANALYSIS_NOT_FOUND");const w=v.data();if(console.log("Saved analysis isPublished status:",w.isPublished),w.isPublished)throw console.log("Analysis already published!"),new Error("ALREADY_PUBLISHED");const E=a||w.dataAr,S=c||w.dataEn,_=u||w.originalLang;if(w.isPublished)throw console.log("Analysis already published!"),new Error("ALREADY_PUBLISHED");const N=Vo(fr(vt,"publicLibrary"),zi("savedAnalysisId","==",t)),j=await Zi(N);if(!j.empty)throw console.log("Found duplicate by savedAnalysisId!"),await Hi(p,{isPublished:!0,publicAnalysisId:j.docs[0].id}),new Error("ALREADY_PUBLISHED");const F=Vo(fr(vt,"publicLibrary"),zi("publishedBy","==",e),zi("normalizedQuery","==",f)),q=await Zi(F);if(!q.empty)throw console.log("Found duplicate by userId and query!"),await Hi(p,{isPublished:!0,publicAnalysisId:q.docs[0].id}),new Error("ALREADY_PUBLISHED");console.log("No duplicates found, proceeding with publish...");let V=s,$=" ",k="User Analyses";if(s){const O=rn(vt,"libraryCategories",s),z=await Bl(O);if(z.exists()){const U=z.data();$=U.nameAr,k=U.nameEn}}else{const z=(await Ca()).find(U=>U.nameEn==="User Analyses");z?V=z.id:V=await lS(" ","User Analyses","    ","Analyses published by users",e)}const D=await mv(fr(vt,"publicLibrary"),{categoryId:V,categoryNameAr:$,categoryNameEn:k,itemName:i.itemName,query:r,normalizedQuery:f,data:i,dataAr:E,dataEn:S,originalLang:_,publishedAt:Date.now(),publishedDate:Date.now(),publishedBy:e,publisherEmail:n,publisherName:i.userName||(n==null?void 0:n.split("@")[0])||"User",publishedByEmail:n,views:0,notes:"",region:o,savedAnalysisId:t});return console.log("Published successfully with ID:",D.id),await Hi(p,{isPublished:!0,publicAnalysisId:D.id}),console.log("=== publishAnalysisByUser completed successfully ==="),D.id}catch(f){throw console.error("=== publishAnalysisByUser error ===",f),f.message==="ALREADY_PUBLISHED"||f.message==="SAVED_ANALYSIS_NOT_FOUND"||console.error("Error publishing analysis by user:",f),f}},$te=Object.freeze(Object.defineProperty({__proto__:null,createCategory:lS,deleteCategory:q4,getAllPublicAnalyses:xu,getCategories:Ca,getLibraryStats:vm,getPublicAnalysesByCategory:W4,getPublicAnalysis:K4,getPublishedAnalysesByUser:Y4,publishAnalysis:G4,publishAnalysisByUser:J4,unpublishAnalysis:H4,updateCategory:z4},Symbol.toStringTag,{value:"Module"})),Q4=(t,e,n)=>{const r=e==="ar",i=r?"rtl":"ltr",s=t.finalVerdict.recommendation==="GO"?"#059669":t.finalVerdict.recommendation==="PROCEED WITH CAUTION"?"#d97706":"#dc2626";return new Date().getFullYear(),`
<!DOCTYPE html>
<html dir="${i}" lang="${e}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${r?"  ":"Tahleel Plus Report"} - ${t.itemName}</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      direction: ${i};
      background: white;
      color: #1e293b;
      line-height: 1.7;
      padding: 0;
      font-size: 14px;
    }
    
    .container {
      max-width: 210mm;
      margin: 0 auto;
      padding: 15mm;
    }
    
    /*  */
    /* Cover Page */
    /*  */
    .cover-page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      background: linear-gradient(135deg, #0f172a 0%, #1e3a5f 50%, #0d4f4f 100%);
      color: white;
      padding: 40px;
      page-break-after: always;
    }
    
    .cover-logo {
      font-size: 60px;
      margin-bottom: 20px;
    }
    
    .cover-title {
      font-size: 42px;
      font-weight: 900;
      margin-bottom: 10px;
      background: linear-gradient(90deg, #10b981, #06b6d4);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .cover-subtitle {
      font-size: 18px;
      opacity: 0.8;
      margin-bottom: 50px;
    }
    
    .cover-product {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255,255,255,0.2);
      border-radius: 20px;
      padding: 30px 60px;
      margin: 30px 0;
    }
    
    .cover-product-label {
      font-size: 14px;
      opacity: 0.7;
      margin-bottom: 10px;
    }
    
    .cover-product-name {
      font-size: 36px;
      font-weight: 900;
      color: #10b981;
    }
    
    .cover-verdict {
      margin-top: 40px;
      padding: 20px 50px;
      border-radius: 50px;
      font-size: 24px;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 2px;
    }
    
    .cover-verdict.go { background: linear-gradient(135deg, #059669, #10b981); }
    .cover-verdict.caution { background: linear-gradient(135deg, #d97706, #f59e0b); }
    .cover-verdict.nogo { background: linear-gradient(135deg, #dc2626, #ef4444); }
    
    .cover-date {
      margin-top: 50px;
      font-size: 14px;
      opacity: 0.6;
    }
    
    /*  */
    /* Quick Summary Page */
    /*  */
    .quick-summary {
      page-break-after: always;
      padding: 20px 0;
    }
    
    .quick-summary-header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 3px solid #10b981;
    }
    
    .quick-summary-header h2 {
      font-size: 28px;
      font-weight: 900;
      color: #0f172a;
    }
    
    .quick-stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      margin-bottom: 30px;
    }
    
    .quick-stat {
      background: linear-gradient(135deg, #f8fafc, #e2e8f0);
      border-radius: 12px;
      padding: 20px 15px;
      text-align: center;
      border: 2px solid #e2e8f0;
    }
    
    .quick-stat.highlight {
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
      border-color: #059669;
    }
    
    .quick-stat.highlight-blue {
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
      border-color: #2563eb;
    }
    
    .quick-stat.highlight-purple {
      background: linear-gradient(135deg, #8b5cf6, #7c3aed);
      color: white;
      border-color: #7c3aed;
    }
    
    .quick-stat.highlight-amber {
      background: linear-gradient(135deg, #f59e0b, #d97706);
      color: white;
      border-color: #d97706;
    }
    
    .quick-stat-label {
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
      opacity: 0.8;
    }
    
    .quick-stat-value {
      font-size: 28px;
      font-weight: 900;
      line-height: 1;
    }
    
    .quick-stat-subtext {
      font-size: 10px;
      margin-top: 5px;
      opacity: 0.7;
    }
    
    /*  */
    /* Header */
    /*  */
    .report-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 0;
      border-bottom: 3px solid #0f172a;
      margin-bottom: 25px;
    }
    
    .report-header-left h1 {
      font-size: 22px;
      font-weight: 900;
      color: #0f172a;
    }
    
    .report-header-left .product-name {
      font-size: 16px;
      font-weight: 700;
      color: #059669;
    }
    
    .report-header-right {
      text-align: ${r?"left":"right"};
      font-size: 12px;
      color: #64748b;
    }
    
    /*  */
    /* Verdict Box */
    /*  */
    .verdict-box {
      background: linear-gradient(135deg, ${s}08, ${s}15);
      border: 3px solid ${s};
      border-radius: 16px;
      padding: 25px;
      margin: 25px 0;
    }
    
    .verdict-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .verdict-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: ${s};
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: white;
    }
    
    .verdict-recommendation {
      font-size: 26px;
      font-weight: 900;
      color: ${s};
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .verdict-reasoning {
      font-size: 14px;
      color: #475569;
      line-height: 1.8;
      padding: 15px;
      background: white;
      border-radius: 8px;
    }
    
    /*  */
    /* Stats Grid */
    /*  */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin: 25px 0;
    }
    
    .stats-grid-4 {
      grid-template-columns: repeat(4, 1fr);
    }
    
    .stat-card {
      background: linear-gradient(135deg, #f8fafc, #f1f5f9);
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      padding: 18px;
      text-align: center;
    }
    
    .stat-card.accent-green {
      border-color: #10b981;
      background: linear-gradient(135deg, #d1fae5, #a7f3d0);
    }
    
    .stat-card.accent-blue {
      border-color: #3b82f6;
      background: linear-gradient(135deg, #dbeafe, #bfdbfe);
    }
    
    .stat-card.accent-purple {
      border-color: #8b5cf6;
      background: linear-gradient(135deg, #ede9fe, #ddd6fe);
    }
    
    .stat-card .label {
      font-size: 10px;
      font-weight: 800;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 8px;
    }
    
    .stat-card .value {
      font-size: 26px;
      font-weight: 900;
      color: #0f172a;
    }
    
    .stat-card .subtext {
      font-size: 10px;
      color: #94a3b8;
      font-weight: 600;
      margin-top: 4px;
    }
    
    /*  */
    /* Section */
    /*  */
    .section {
      margin: 30px 0;
      page-break-inside: avoid;
    }
    
    .section-header {
      background: linear-gradient(135deg, #0f172a, #1e293b);
      color: white;
      padding: 12px 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      font-size: 18px;
      font-weight: 900;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .section-header.green { background: linear-gradient(135deg, #059669, #10b981); }
    .section-header.blue { background: linear-gradient(135deg, #2563eb, #3b82f6); }
    .section-header.purple { background: linear-gradient(135deg, #7c3aed, #8b5cf6); }
    .section-header.orange { background: linear-gradient(135deg, #d97706, #f59e0b); }
    .section-header.teal { background: linear-gradient(135deg, #0d9488, #14b8a6); }
    .section-header.pink { background: linear-gradient(135deg, #db2777, #ec4899); }
    
    .section-content {
      padding: 0 10px;
    }
    
    /*  */
    /* Table */
    /*  */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
      font-size: 12px;
    }
    
    thead {
      background: linear-gradient(135deg, #1e293b, #334155);
      color: white;
    }
    
    th {
      padding: 12px 10px;
      text-align: ${r?"right":"left"};
      font-weight: 800;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    td {
      padding: 10px;
      border-bottom: 1px solid #e2e8f0;
    }
    
    tbody tr:nth-child(even) {
      background: #f8fafc;
    }
    
    tbody tr:hover {
      background: #f1f5f9;
    }
    
    /*  */
    /* Lists */
    /*  */
    .info-list {
      list-style: none;
      margin: 15px 0;
    }
    
    .info-list li {
      padding: 10px 15px;
      margin: 6px 0;
      background: #f8fafc;
      border-${r?"right":"left"}: 4px solid #10b981;
      border-radius: 6px;
      font-size: 13px;
    }
    
    .info-list li.blue-border {
      border-color: #3b82f6;
    }
    
    .info-list li.purple-border {
      border-color: #8b5cf6;
    }
    
    /*  */
    /* Badges */
    /*  */
    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 700;
      margin: 3px;
    }
    
    .badge-success { background: #d1fae5; color: #065f46; }
    .badge-warning { background: #fef3c7; color: #92400e; }
    .badge-info { background: #dbeafe; color: #1e40af; }
    .badge-danger { background: #fee2e2; color: #991b1b; }
    
    /*  */
    /* Cost Breakdown Table */
    /*  */
    .cost-breakdown {
      background: #f8fafc;
      border-radius: 10px;
      padding: 15px;
      margin: 15px 0;
      border: 2px solid #e2e8f0;
    }
    
    .cost-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px dashed #cbd5e1;
      font-size: 13px;
    }
    
    .cost-row:last-child {
      border-bottom: none;
      padding-top: 12px;
      margin-top: 5px;
      border-top: 2px solid #0f172a;
      font-weight: 900;
      font-size: 15px;
    }
    
    .cost-row .label { color: #475569; }
    .cost-row .value { font-weight: 700; }
    .cost-row .value.negative { color: #dc2626; }
    .cost-row .value.positive { color: #059669; }
    
    /*  */
    /* SWOT Grid */
    /*  */
    .swot-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin: 20px 0;
    }
    
    .swot-card {
      padding: 15px;
      border-radius: 10px;
      border: 2px solid;
    }
    
    .swot-card h4 {
      font-size: 14px;
      font-weight: 900;
      margin-bottom: 10px;
    }
    
    .swot-card ul { list-style: none; }
    .swot-card li { padding: 5px 0; font-size: 12px; }
    
    .swot-strengths { background: #d1fae5; border-color: #059669; }
    .swot-weaknesses { background: #fee2e2; border-color: #dc2626; }
    .swot-opportunities { background: #dbeafe; border-color: #2563eb; }
    .swot-threats { background: #fef3c7; border-color: #d97706; }
    
    /*  */
    /* Footer */
    /*  */
    .page-footer {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 2px solid #e2e8f0;
      text-align: center;
      font-size: 11px;
      color: #64748b;
    }
    
    .page-footer .logo {
      font-size: 18px;
      font-weight: 900;
      color: #0f172a;
      margin-bottom: 5px;
    }
    
    /*  */
    /* Print Specific */
    /*  */
    .page-break { page-break-after: always; }
    .no-break { page-break-inside: avoid; }
    
    @media print {
      body { 
        padding: 0; 
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
      }
      
      .container { padding: 10mm; }
      
      .cover-page {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
      }
      
      .stats-grid, .section, .quick-stat, .stat-card {
        page-break-inside: avoid;
      }
      
      .section-header {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
      }
    }
    
    @page {
      size: A4;
      margin: 10mm;
    }
  </style>
</head>
<body>
  ${Bte(t,r)}
  
  <div class="container">
    ${zte(t,r)}
    ${qte(t,r)}
    ${Hte(t,r)}
    ${Wte(t,r)}
    ${Kte(t,r)}
    ${Yte(t,r)}
    ${Jte(t,r)}
    ${Qte(t,r)}
    ${Xte(t,r)}
    ${Zte(t,r)}
    ${ene(t,r)}
    ${tne(t,r)}
    ${Gte(r)}
  </div>
  
  <script>
    // Auto print when loaded
    window.onload = function() {
      setTimeout(() => {
        window.print();
      }, 800);
    };
  <\/script>
</body>
</html>
  `},Bte=(t,e,n)=>{const r=new Date().toLocaleDateString(e?"ar-SA":"en-US",{year:"numeric",month:"long",day:"numeric"}),i=()=>t.finalVerdict.recommendation==="GO"?"go":t.finalVerdict.recommendation==="PROCEED WITH CAUTION"?"caution":"nogo",o=()=>t.finalVerdict.recommendation==="GO"?e?"  -  ":" GO - Promising Opportunity":t.finalVerdict.recommendation==="PROCEED WITH CAUTION"?e?"  ":" PROCEED WITH CAUTION":e?"  ":" NO-GO";return`
    <div class="cover-page">
      <div class="cover-logo"></div>
      <h1 class="cover-title">${e?" ":"Tahleel Plus"}</h1>
      <p class="cover-subtitle">${e?"    ":"Comprehensive Saudi Market Analysis Report"}</p>
      
      <div class="cover-product">
        <p class="cover-product-label">${e?" ":"Analyzed Product"}</p>
        <h2 class="cover-product-name">${t.itemName}</h2>
      </div>
      
      <div class="cover-verdict ${i()}">${o()}</div>
      
      <p class="cover-date">${r}</p>
    </div>
  `},zte=(t,e)=>{var n,r,i,o,s,a,c,u,f,p,v,w,E,S;return`
    <div class="quick-summary">
      <div class="quick-summary-header">
        <h2>${e?"     ":" Quick Summary from All Sections"}</h2>
      </div>
      
      <div class="quick-stats-grid">
        <div class="quick-stat highlight">
          <div class="quick-stat-label">${e?"":"Demand"}</div>
          <div class="quick-stat-value">${((n=t.demandAnalysis)==null?void 0:n.demandScore)||0}%</div>
          <div class="quick-stat-subtext">${((r=t.demandAnalysis)==null?void 0:r.monthlyDemandEstimate)||0} ${e?"/":"units/mo"}</div>
        </div>
        
        <div class="quick-stat highlight-amber">
          <div class="quick-stat-label">${e?"":"Competitors"}</div>
          <div class="quick-stat-value">${((i=t.competitorIntelligence)==null?void 0:i.activeCompetitors)||0}</div>
          <div class="quick-stat-subtext">${e?"":"Str."}: ${((o=t.competitorIntelligence)==null?void 0:o.competitorStrengthIndex)||0}%</div>
        </div>
        
        <div class="quick-stat highlight">
          <div class="quick-stat-label">${e?"":"Profit"}</div>
          <div class="quick-stat-value">${((s=t.profitabilityAnalysis)==null?void 0:s.estimatedProfitMargin)||0}%</div>
          <div class="quick-stat-subtext">${e?" ":"Margin"}</div>
        </div>
        
        <div class="quick-stat highlight-purple">
          <div class="quick-stat-label">${e?" ":"Intent"}</div>
          <div class="quick-stat-value">${((a=t.buyerIntentAnalysis)==null?void 0:a.intentScore)||0}%</div>
          <div class="quick-stat-subtext">${((c=t.buyerIntentAnalysis)==null?void 0:c.intentLevel)==="High"?e?"":"High":((u=t.buyerIntentAnalysis)==null?void 0:u.intentLevel)==="Medium"?e?"":"Medium":e?"":"Low"}</div>
        </div>
        
        <div class="quick-stat highlight-blue">
          <div class="quick-stat-label">${e?" ":"Success"}</div>
          <div class="quick-stat-value">${((f=t.decisionMetrics)==null?void 0:f.successScore)||0}%</div>
          <div class="quick-stat-subtext">${e?"":"Probability"}</div>
        </div>
        
        <div class="quick-stat" style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; border-color: #dc2626;">
          <div class="quick-stat-label">${e?"":"Risk"}</div>
          <div class="quick-stat-value">${((p=t.decisionMetrics)==null?void 0:p.riskScore)||0}%</div>
          <div class="quick-stat-subtext">${e?"":"Level"}</div>
        </div>
        
        <div class="quick-stat" style="background: linear-gradient(135deg, #ec4899, #db2777); color: white; border-color: #db2777;">
          <div class="quick-stat-label">${e?"":"Opportunities"}</div>
          <div class="quick-stat-value">${((w=(v=t.opportunityFinder)==null?void 0:v.opportunities)==null?void 0:w.length)||0}</div>
          <div class="quick-stat-subtext">${e?" ":"Available"}</div>
        </div>
        
        <div class="quick-stat highlight-blue">
          <div class="quick-stat-label">${e?"":"Scenario"}</div>
          <div class="quick-stat-value" style="font-size: 16px;">
            ${((E=t.growthScenarios)==null?void 0:E.recommendedScenario)==="optimistic"?e?"":"Optimistic":((S=t.growthScenarios)==null?void 0:S.recommendedScenario)==="moderate"?e?"":"Moderate":e?"":"Conservative"}
          </div>
          <div class="quick-stat-subtext">${e?" ":"Recommended"}</div>
        </div>
      </div>
      
      <!-- Market Stats -->
      <div class="stats-grid stats-grid-4" style="margin-top: 20px;">
        <div class="stat-card accent-green">
          <div class="label">${e?" ":"Avg. Price"}</div>
          <div class="value">${t.marketStats.averagePrice.toFixed(0)}</div>
          <div class="subtext">${e?".":"SAR"}</div>
        </div>
        <div class="stat-card">
          <div class="label">${e?" ":"Min Price"}</div>
          <div class="value">${t.marketStats.lowestPrice.toFixed(0)}</div>
          <div class="subtext">${e?".":"SAR"}</div>
        </div>
        <div class="stat-card">
          <div class="label">${e?" ":"Max Price"}</div>
          <div class="value">${t.marketStats.highestPrice.toFixed(0)}</div>
          <div class="subtext">${e?".":"SAR"}</div>
        </div>
        <div class="stat-card accent-blue">
          <div class="label">${e?" ":"Saturation"}</div>
          <div class="value">${t.marketStats.marketSaturation}%</div>
        </div>
      </div>
    </div>
  `},qte=(t,e)=>{const n=new Date().toLocaleDateString(e?"ar-SA":"en-US",{year:"numeric",month:"long",day:"numeric"});return`
    <div class="report-header">
      <div class="report-header-left">
        <h1> ${e?" ":"Tahleel Plus"}</h1>
        <div class="product-name">${t.itemName}</div>
      </div>
      <div class="report-header-right">
        <div>${n}</div>
        <div>${e?"  ":"Market Analysis Report"}</div>
      </div>
    </div>
  `},Gte=t=>`
    <div class="page-footer">
      <div class="logo"> ${t?" ":"Tahleel Plus"}</div>
      <div>${t?"     ":"Saudi E-commerce Market Analysis Platform"}</div>
      <div style="margin-top: 10px;"> ${new Date().getFullYear()} Tahleel Plus - ${t?"  ":"All Rights Reserved"}</div>
    </div>
  `,Hte=(t,e)=>{const n=()=>t.finalVerdict.recommendation==="GO"?"":t.finalVerdict.recommendation==="PROCEED WITH CAUTION"?"":"",r=()=>t.finalVerdict.recommendation==="GO"?e?" -  ":"GO - Promising Opportunity":t.finalVerdict.recommendation==="PROCEED WITH CAUTION"?e?" ":"PROCEED WITH CAUTION":e?"  -  ":"NO-GO - High Risk";return`
    <div class="verdict-box no-break">
      <div class="verdict-header">
        <div class="verdict-icon">${n()}</div>
        <div class="verdict-recommendation">${r()}</div>
      </div>
      <div class="verdict-reasoning">${t.finalVerdict.reasoning}</div>
    </div>
  `},Wte=(t,e)=>`
    <div class="section no-break">
      <div class="section-header blue"> ${e?" ":"Overview"}</div>
      <div class="section-content">
        <p style="font-size: 15px; line-height: 1.9; color: #374151; padding: 15px; background: #f8fafc; border-radius: 10px;">${t.summary}</p>
      </div>
    </div>
  `,Kte=(t,e)=>{if(!t.demandAnalysis)return"";const n=t.demandAnalysis.demandStability==="Stable"?"":t.demandAnalysis.demandStability==="Growing"?"":t.demandAnalysis.demandStability==="Volatile"?"":t.demandAnalysis.demandStability;return`
    <div class="section page-break">
      <div class="section-header green"> ${e?" ":"Demand Analysis"}</div>
      <div class="section-content">
        <div class="stats-grid">
          <div class="stat-card accent-green">
            <div class="label">${e?" ":"Monthly Demand"}</div>
            <div class="value">${t.demandAnalysis.monthlyDemandEstimate}</div>
            <div class="subtext">${e?" ":"units estimated"}</div>
          </div>
          <div class="stat-card accent-blue">
            <div class="label">${e?" ":"Demand Score"}</div>
            <div class="value">${t.demandAnalysis.demandScore}%</div>
            <div class="subtext">${e?" ":"demand strength"}</div>
          </div>
          <div class="stat-card">
            <div class="label">${e?"":"Stability"}</div>
            <div class="value" style="font-size: 20px;">${e?n:t.demandAnalysis.demandStability}</div>
            <div class="subtext">${e?" ":"volatility level"}</div>
          </div>
        </div>
        
        <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?"":"Seasonality"}</h3>
        <div style="display: flex; gap: 20px; flex-wrap: wrap;">
          <div>
            <p style="margin-bottom: 8px; font-weight: 700; color: #059669;"><strong>${e?" :":"Peak Months:"}</strong></p>
            <div>${t.demandAnalysis.seasonality.peakMonths.map(r=>`<span class="badge badge-success">${r}</span>`).join("")}</div>
          </div>
          <div>
            <p style="margin-bottom: 8px; font-weight: 700; color: #3b82f6;"><strong>${e?" :":"Low Months:"}</strong></p>
            <div>${t.demandAnalysis.seasonality.lowMonths.map(r=>`<span class="badge badge-info">${r}</span>`).join("")}</div>
          </div>
        </div>
        
        <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?" ":"Geographic Distribution"}</h3>
        <p style="line-height: 1.8; color: #374151; padding: 15px; background: #f8fafc; border-radius: 8px;">${t.demandAnalysis.geographicDistribution}</p>
      </div>
    </div>
  `},Yte=(t,e)=>{var r,i,o,s;if(!t.competitors||t.competitors.length===0)return"";const n=((r=t.competitorIntelligence)==null?void 0:r.entryDifficulty)==="Low"?"":((i=t.competitorIntelligence)==null?void 0:i.entryDifficulty)==="Medium"?"":((o=t.competitorIntelligence)==null?void 0:o.entryDifficulty)==="High"?"":(s=t.competitorIntelligence)==null?void 0:s.entryDifficulty;return`
    <div class="section page-break">
      <div class="section-header orange"> ${e?" ":"Competitor Analysis"}</div>
      <div class="section-content">
        ${t.competitorIntelligence?`
          <div class="stats-grid">
            <div class="stat-card accent-blue">
              <div class="label">${e?" ":"Active Competitors"}</div>
              <div class="value">${t.competitorIntelligence.activeCompetitors}</div>
            </div>
            <div class="stat-card">
              <div class="label">${e?" ":"Strength Index"}</div>
              <div class="value">${t.competitorIntelligence.competitorStrengthIndex.toFixed(0)}%</div>
            </div>
            <div class="stat-card">
              <div class="label">${e?" ":"Entry Difficulty"}</div>
              <div class="value" style="font-size: 20px;">${e?n:t.competitorIntelligence.entryDifficulty}</div>
            </div>
          </div>
        `:""}
        
        <table>
          <thead>
            <tr>
              <th>${e?"":"Store"}</th>
              <th>${e?"":"Price"}</th>
              <th>${e?"":"Rating"}</th>
              <th>${e?"":"Shipping"}</th>
              <th>${e?"":"Stock"}</th>
            </tr>
          </thead>
          <tbody>
            ${t.competitors.slice(0,8).map(a=>`
              <tr>
                <td><strong>${a.storeName}</strong></td>
                <td style="color: #059669; font-weight: 700;">${a.price.toFixed(0)} ${e?".":"SAR"}</td>
                <td> ${a.rating.toFixed(1)}</td>
                <td>${a.shippingDays} ${e?"":"days"}</td>
                <td><span class="badge ${a.stockStatus==="In Stock"?"badge-success":"badge-warning"}">${a.stockStatus==="In Stock"?e?"":"In Stock":e?"":"Limited"}</span></td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        ${t.competitorIntelligence&&t.competitorIntelligence.marketGaps.length>0?`
          <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?" ":"Market Gaps"}</h3>
          <ul class="info-list">
            ${t.competitorIntelligence.marketGaps.slice(0,5).map(a=>`<li> ${a}</li>`).join("")}
          </ul>
        `:""}
      </div>
    </div>
  `},Jte=(t,e)=>{var n,r,i,o;return t.profitabilityAnalysis?`
    <div class="section page-break">
      <div class="section-header green"> ${e?" ":"Profitability Analysis"}</div>
      <div class="section-content">
        <div class="stats-grid">
          <div class="stat-card accent-green">
            <div class="label">${e?"  ":"Avg Sale Price"}</div>
            <div class="value">${t.profitabilityAnalysis.averageSalePrice.toFixed(0)}</div>
            <div class="subtext">${e?".":"SAR"}</div>
          </div>
          <div class="stat-card accent-blue">
            <div class="label">${e?" ":"Profit Margin"}</div>
            <div class="value">${t.profitabilityAnalysis.estimatedProfitMargin.toFixed(0)}%</div>
          </div>
          <div class="stat-card">
            <div class="label">${e?" ":"Break Even"}</div>
            <div class="value">${t.profitabilityAnalysis.breakEvenPoint}</div>
            <div class="subtext">${e?"":"units"}</div>
          </div>
        </div>
        
        ${t.profitabilityAnalysis.costBreakdown?`
          <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?"  ( )":"Cost Breakdown (per unit)"}</h3>
          <div class="cost-breakdown">
            <div class="cost-row">
              <span class="label">${e?" ":"Product Cost"}</span>
              <span class="value negative">-${((n=t.profitabilityAnalysis.costBreakdown.productCost)==null?void 0:n.toFixed(0))||0} ${e?".":"SAR"}</span>
            </div>
            <div class="cost-row">
              <span class="label">${e?" ":"Shipping Cost"}</span>
              <span class="value negative">-${((r=t.profitabilityAnalysis.costBreakdown.shippingCost)==null?void 0:r.toFixed(0))||0} ${e?".":"SAR"}</span>
            </div>
            <div class="cost-row">
              <span class="label">${e?" ":"Platform Fee"}</span>
              <span class="value negative">-${((i=t.profitabilityAnalysis.costBreakdown.platformFee)==null?void 0:i.toFixed(0))||0} ${e?".":"SAR"}</span>
            </div>
            <div class="cost-row">
              <span class="label">${e?"  ":"Profit per Unit"}</span>
              <span class="value positive">+${((o=t.profitabilityAnalysis.profitPerUnit)==null?void 0:o.toFixed(0))||0} ${e?".":"SAR"}</span>
            </div>
          </div>
        `:""}
        
        <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?" ":"Expected Revenue"}</h3>
        <p style="font-size: 22px; font-weight: 900; color: #059669; padding: 15px; background: #d1fae5; border-radius: 10px; text-align: center;">${t.profitabilityAnalysis.estimatedMonthlyRevenue}</p>
        
        <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?" ":"Price Sensitivity"}</h3>
        <p style="line-height: 1.8; color: #374151; padding: 15px; background: #f8fafc; border-radius: 8px;">${t.profitabilityAnalysis.priceSensitivity}</p>
      </div>
    </div>
  `:""},Qte=(t,e)=>t.decisionMetrics?`
    <div class="section page-break">
      <div class="section-header purple"> ${e?" ":"Decision Metrics"}</div>
      <div class="section-content">
        <div class="stats-grid">
          <div class="stat-card accent-green">
            <div class="label">${e?" ":"Success Score"}</div>
            <div class="value">${t.decisionMetrics.successScore}%</div>
          </div>
          <div class="stat-card" style="border-color: #ef4444; background: linear-gradient(135deg, #fee2e2, #fecaca);">
            <div class="label">${e?" ":"Risk Score"}</div>
            <div class="value" style="color: #dc2626;">${t.decisionMetrics.riskScore}%</div>
          </div>
          <div class="stat-card accent-blue">
            <div class="label">${e?" ":"Time to Profit"}</div>
            <div class="value" style="font-size: 18px;">${t.decisionMetrics.timeToProfit}</div>
          </div>
        </div>
        
        <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?"  ":"Capital Required"}</h3>
        <p style="font-size: 20px; font-weight: 900; color: #2563eb; padding: 15px; background: #dbeafe; border-radius: 10px; text-align: center;">${t.decisionMetrics.capitalRequired}</p>
        
        <div style="display: flex; gap: 20px; margin-top: 20px;">
          <div style="flex: 1; padding: 15px; background: ${t.decisionMetrics.beginnerFriendly?"#d1fae5":"#fee2e2"}; border-radius: 10px; text-align: center;">
            <p style="font-size: 12px; font-weight: 700; color: #64748b; margin-bottom: 8px;">${e?" ":"Beginner Friendly"}</p>
            <p style="font-size: 22px; font-weight: 900; color: ${t.decisionMetrics.beginnerFriendly?"#059669":"#dc2626"};">
              ${t.decisionMetrics.beginnerFriendly?e?" ":" Yes":e?" ":" No"}
            </p>
          </div>
          <div style="flex: 1; padding: 15px; background: ${t.decisionMetrics.quickWin?"#d1fae5":"#fef3c7"}; border-radius: 10px; text-align: center;">
            <p style="font-size: 12px; font-weight: 700; color: #64748b; margin-bottom: 8px;">${e?" ":"Quick Win"}</p>
            <p style="font-size: 22px; font-weight: 900; color: ${t.decisionMetrics.quickWin?"#059669":"#d97706"};">
              ${t.decisionMetrics.quickWin?e?" ":" Yes":e?" ":" No"}
            </p>
          </div>
        </div>
      </div>
    </div>
  `:"",Xte=(t,e)=>!t.opportunityFinder||t.opportunityFinder.opportunities.length===0?"":`
    <div class="section page-break">
      <div class="section-header pink"> ${e?" ":"Growth Opportunities"}</div>
      <div class="section-content">
        <ul class="info-list">
          ${t.opportunityFinder.opportunities.slice(0,5).map(n=>`
            <li>
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                <strong style="color: #0f172a; font-size: 14px;">${e&&n.titleAr?n.titleAr:n.title}</strong>
                <span class="badge badge-success" style="font-size: 13px;">${n.potentialScore}%</span>
              </div>
              <span style="color: #64748b; font-size: 12px; line-height: 1.6;">${e&&n.descriptionAr?n.descriptionAr:n.description}</span>
            </li>
          `).join("")}
        </ul>
        
        ${t.swot?`
          <h3 style="margin: 30px 0 20px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?" SWOT":"SWOT Analysis"}</h3>
          <div class="swot-grid">
            <div class="swot-card swot-strengths">
              <h4> ${e?" ":"Strengths"}</h4>
              <ul>
                ${t.swot.strengths.slice(0,4).map(n=>`<li> ${n}</li>`).join("")}
              </ul>
            </div>
            <div class="swot-card swot-weaknesses">
              <h4> ${e?" ":"Weaknesses"}</h4>
              <ul>
                ${t.swot.weaknesses.slice(0,4).map(n=>`<li> ${n}</li>`).join("")}
              </ul>
            </div>
            <div class="swot-card swot-opportunities">
              <h4> ${e?"":"Opportunities"}</h4>
              <ul>
                ${t.swot.opportunities.slice(0,4).map(n=>`<li> ${n}</li>`).join("")}
              </ul>
            </div>
            <div class="swot-card swot-threats">
              <h4> ${e?"":"Threats"}</h4>
              <ul>
                ${t.swot.threats.slice(0,4).map(n=>`<li> ${n}</li>`).join("")}
              </ul>
            </div>
          </div>
        `:""}
      </div>
    </div>
  `,Zte=(t,e)=>{if(!t.buyerIntentAnalysis)return"";const n=t.buyerIntentAnalysis,r=n.intentLevel==="High"?"":n.intentLevel==="Medium"?"":"",i=n.searchIntentType==="Transactional"?"":n.searchIntentType==="Informational"?"":"";return`
    <div class="section page-break">
      <div class="section-header" style="background: linear-gradient(135deg, #7c3aed, #8b5cf6);"> ${e?"  ":"Buyer Intent Analysis"}</div>
      <div class="section-content">
        <div class="stats-grid stats-grid-4">
          <div class="stat-card accent-purple">
            <div class="label">${e?" ":"Intent Score"}</div>
            <div class="value">${n.intentScore}%</div>
          </div>
          <div class="stat-card">
            <div class="label">${e?" ":"Intent Level"}</div>
            <div class="value" style="font-size: 20px;">${e?r:n.intentLevel}</div>
          </div>
          <div class="stat-card">
            <div class="label">${e?" ":"Search Type"}</div>
            <div class="value" style="font-size: 18px;">${e?i:n.searchIntentType}</div>
          </div>
          <div class="stat-card accent-green">
            <div class="label">${e?" ":"Conversion"}</div>
            <div class="value">${Math.round(n.conversionProbability*100)}%</div>
          </div>
        </div>
        
        <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?"  ":"Buyer Journey Stage"}</h3>
        <p style="padding: 15px; background: #ede9fe; border-${e?"right":"left"}: 4px solid #8b5cf6; border-radius: 8px; font-weight: 600;">
          ${n.buyerJourneyStage}
        </p>
        
        ${n.keywordAnalysis.transactionalKeywords.length>0?`
          <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?" ":"Transactional Keywords"}</h3>
          <div style="display: flex; flex-wrap: wrap; gap: 8px;">
            ${n.keywordAnalysis.transactionalKeywords.slice(0,6).map(o=>`<span class="badge badge-success">${o}</span>`).join("")}
          </div>
        `:""}
        
        <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?" ":"Insights"}</h3>
        <ul class="info-list">
          ${n.insights.slice(0,4).map(o=>`<li class="purple-border"> ${o}</li>`).join("")}
        </ul>
      </div>
    </div>
  `},ene=(t,e)=>{if(!t.growthScenarios)return"";const n=t.growthScenarios,r=n.recommendedScenario==="optimistic"?"":n.recommendedScenario==="moderate"?"":"",i=(o,s,a,c,u)=>{var f,p,v,w;return`
    <div style="margin-bottom: 25px; border: 2px solid ${c}; border-radius: 12px; overflow: hidden;">
      <div style="background: ${c}; color: white; padding: 12px 15px; font-weight: 900; font-size: 16px;">
        ${u} ${e?s:a}
      </div>
      <div style="padding: 15px;">
        <div class="stats-grid stats-grid-4">
          <div class="stat-card">
            <div class="label">${e?"":"Units"}</div>
            <div class="value">${((f=o.costBreakdown)==null?void 0:f.unitsSold)||0}</div>
          </div>
          <div class="stat-card">
            <div class="label">${e?"":"Revenue"}</div>
            <div class="value" style="font-size: 18px;">${o.monthlyRevenue.toLocaleString()}</div>
            <div class="subtext">${e?".":"SAR"}</div>
          </div>
          <div class="stat-card accent-green">
            <div class="label">${e?"":"Profit"}</div>
            <div class="value" style="font-size: 18px;">${o.monthlyProfit.toLocaleString()}</div>
            <div class="subtext">${e?".":"SAR"}</div>
          </div>
          <div class="stat-card">
            <div class="label">${e?"":"Growth"}</div>
            <div class="value">${o.growthRate}%</div>
            <div class="subtext">${e?"/":"/mo"}</div>
          </div>
        </div>
        ${o.costBreakdown?`
          <div class="cost-breakdown" style="margin-top: 15px;">
            <div class="cost-row">
              <span class="label">${e?" ":"Product Costs"}</span>
              <span class="value negative">-${((p=o.costBreakdown.productCosts)==null?void 0:p.toLocaleString())||0}</span>
            </div>
            <div class="cost-row">
              <span class="label">${e?"":"Marketing"}</span>
              <span class="value negative">-${((v=o.costBreakdown.marketingBudget)==null?void 0:v.toLocaleString())||0}</span>
            </div>
            <div class="cost-row">
              <span class="label">${e?"":"Operations"}</span>
              <span class="value negative">-${((w=o.costBreakdown.operationalExpenses)==null?void 0:w.toLocaleString())||0}</span>
            </div>
            <div class="cost-row">
              <span class="label">${e?" ":"Net Profit"}</span>
              <span class="value positive">+${o.monthlyProfit.toLocaleString()} ${e?".":"SAR"}</span>
            </div>
          </div>
        `:""}
      </div>
    </div>
  `};return`
    <div class="section page-break">
      <div class="section-header teal"> ${e?" ":"Growth Scenarios"}</div>
      <div class="section-content">
        
        <div style="background: linear-gradient(135deg, #dbeafe, #e0e7ff); padding: 20px; border-radius: 12px; margin-bottom: 25px; border: 2px solid #3b82f6; text-align: center;">
          <p style="font-size: 14px; font-weight: 700; color: #1e40af; margin-bottom: 8px;">${e?"  ":"Recommended Scenario"}</p>
          <p style="font-size: 28px; font-weight: 900; color: #3b82f6;"> ${e?r:n.recommendedScenario.toUpperCase()}</p>
        </div>
        
        ${i(n.optimistic," ","Optimistic Scenario","#059669","")}
        ${i(n.moderate," ","Moderate Scenario","#3b82f6","")}
        ${i(n.conservative," ","Conservative Scenario","#d97706","")}
        
        ${n.scalabilityFactors&&n.scalabilityFactors.length>0?`
          <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?" ":"Scalability Factors"}</h3>
          <ul class="info-list">
            ${n.scalabilityFactors.filter((o,s)=>e?s%2===0:s%2===1).slice(0,4).map(o=>`<li class="blue-border"> ${o}</li>`).join("")}
          </ul>
        `:""}
      </div>
    </div>
  `},tne=(t,e)=>{if(!t.executiveSummary)return"";const n=t.executiveSummary;return`
    <div class="section page-break">
      <div class="section-header" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
         ${e?" ":"Executive Summary"}
      </div>
      <div class="section-content">
        
        <div style="background: linear-gradient(135deg, #fffbeb, #fef3c7); padding: 20px; border-radius: 12px; border: 2px solid #f59e0b; margin-bottom: 25px;">
          <div style="white-space: pre-wrap; line-height: 1.9; font-size: 13px; color: #1e293b;">${n.onePageSummary}</div>
        </div>
        
        <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?" ":"Key Findings"}</h3>
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
          ${n.keyFindings.map(r=>`
            <div style="padding: 12px; background: #f8fafc; border-radius: 8px; border-${e?"right":"left"}: 4px solid #10b981; font-size: 13px;">
              ${r}
            </div>
          `).join("")}
        </div>
        
        <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?" ":"Critical Metrics"}</h3>
        <div class="stats-grid" style="grid-template-columns: repeat(5, 1fr);">
          <div class="stat-card">
            <div class="label">${e?" ":"Market"}</div>
            <div class="value" style="font-size: 16px;">${n.criticalMetrics.marketSize}</div>
          </div>
          <div class="stat-card accent-green">
            <div class="label">${e?"":"Demand"}</div>
            <div class="value" style="font-size: 20px;">${n.criticalMetrics.demandLevel}</div>
          </div>
          <div class="stat-card">
            <div class="label">${e?"":"Competition"}</div>
            <div class="value" style="font-size: 16px;">${n.criticalMetrics.competitionLevel}</div>
          </div>
          <div class="stat-card accent-blue">
            <div class="label">${e?"":"Profit"}</div>
            <div class="value" style="font-size: 18px;">${n.criticalMetrics.profitPotential}</div>
          </div>
          <div class="stat-card" style="border-color: #ef4444; background: linear-gradient(135deg, #fee2e2, #fecaca);">
            <div class="label">${e?"":"Risk"}</div>
            <div class="value" style="font-size: 20px; color: #dc2626;">${n.criticalMetrics.riskLevel}</div>
          </div>
        </div>
        
        <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?" ":"Investment Required"}</h3>
        <div class="stats-grid">
          <div class="stat-card accent-blue">
            <div class="label">${e?" ":"Initial"}</div>
            <div class="value">${n.investmentRequired.initial.toLocaleString()}</div>
            <div class="subtext">${e?".":"SAR"}</div>
          </div>
          <div class="stat-card">
            <div class="label">${e?"":"Monthly"}</div>
            <div class="value">${n.investmentRequired.monthly.toLocaleString()}</div>
            <div class="subtext">${e?".":"SAR"}</div>
          </div>
          <div class="stat-card accent-green">
            <div class="label">${e?"":"Break Even"}</div>
            <div class="value" style="font-size: 18px;">${n.investmentRequired.breakEven}</div>
          </div>
        </div>
        
        <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?" ":"Strategic Recommendation"}</h3>
        <p style="padding: 20px; background: linear-gradient(135deg, #0f172a, #1e293b); color: white; border-radius: 12px; font-weight: 600; line-height: 1.8;">
          ${n.strategicRecommendation}
        </p>
        
        <h3 style="margin: 25px 0 15px; font-size: 16px; font-weight: 900; color: #0f172a;"> ${e?" ":"Next Steps"}</h3>
        <div style="display: grid; gap: 8px;">
          ${n.nextSteps.map((r,i)=>`
            <div style="display: flex; align-items: center; gap: 12px; padding: 12px; background: #f8fafc; border-radius: 8px;">
              <div style="width: 28px; height: 28px; background: linear-gradient(135deg, #f59e0b, #d97706); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 12px;">${i+1}</div>
              <span style="font-size: 13px;">${r}</span>
            </div>
          `).join("")}
        </div>
      </div>
    </div>
  `},nne=(t,e,n)=>{const r=Q4(t,e),i=window.open("","_blank","width=1200,height=900");i?(i.document.write(r),i.document.close()):alert(e==="ar"?"   .    .":"Failed to open print window. Please allow pop-ups.")},rne=(t,e,n)=>{const r=Q4(t,e),i=e==="ar";`${t.itemName||"Tahleel-Plus-Report"}${new Date().toISOString().split("T")[0]}`;const o=r.replace("<body>",`<body>
    <div id="pdf-toolbar" style="
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: linear-gradient(135deg, #0f172a, #1e3a5f);
      color: white;
      padding: 15px 30px;
      z-index: 99999;
      font-family: Cairo, sans-serif;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      direction: ${i?"rtl":"ltr"};
    ">
      <div style="display: flex; align-items: center; gap: 15px;">
        <span style="font-size: 24px;"></span>
        <div>
          <div style="font-weight: bold; font-size: 16px;">
            ${i?"  PDF":"Download as PDF"}
          </div>
          <div style="font-size: 12px; opacity: 0.8;">
            ${i?'      "Save as PDF"   ':'Click download button, then select "Save as PDF" from printer options'}
          </div>
        </div>
      </div>
      <div style="display: flex; gap: 10px;">
        <button onclick="window.print()" style="
          background: linear-gradient(135deg, #10b981, #059669);
          color: white;
          border: none;
          padding: 12px 24px;
          border-radius: 10px;
          font-weight: bold;
          font-size: 14px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 8px;
          font-family: Cairo, sans-serif;
        ">
          <span></span>
          ${i?" PDF ":"Download PDF Now"}
        </button>
        <button onclick="document.getElementById('pdf-toolbar').style.display='none'" style="
          background: rgba(255,255,255,0.2);
          color: white;
          border: none;
          padding: 12px 16px;
          border-radius: 10px;
          font-weight: bold;
          font-size: 14px;
          cursor: pointer;
          font-family: Cairo, sans-serif;
        ">
          
        </button>
      </div>
    </div>
    <div style="padding-top: 80px;">`).replace("</body>",`</div>
    <style>
      @media print {
        #pdf-toolbar { display: none !important; }
        body > div:first-of-type { padding-top: 0 !important; }
      }
    </style>
    </body>`),s=window.open("","_blank","width=1200,height=900");s?(s.document.write(o),s.document.close(),s.focus()):alert(e==="ar"?"   .    .":"Failed to open download window. Please allow pop-ups.")};function X4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=X4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Pt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=X4(t))&&(r&&(r+=" "),r+=e);return r}var ine=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function cS(t){if(typeof t!="string")return!1;var e=ine;return e.includes(t)}var one=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],sne=new Set(one);function Z4(t){return typeof t!="string"?!1:sne.has(t)}function e5(t){return typeof t=="string"&&t.startsWith("data-")}function $o(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Z4(n)||e5(n))&&(e[n]=t[n]);return e}function Cv(t){if(t==null)return null;if(I.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return $o(e)}return typeof t=="object"&&!Array.isArray(t)?$o(t):null}function mr(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Z4(n)||e5(n)||cS(n))&&(e[n]=t[n]);return e}function ane(t){return t==null?null:I.isValidElement(t)?mr(t.props):typeof t=="object"&&!Array.isArray(t)?mr(t):null}var lne=["children","width","height","viewBox","className","style","title","desc"];function zw(){return zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zw.apply(null,arguments)}function cne(t,e){if(t==null)return{};var n,r,i=une(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function une(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var uS=I.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:o,className:s,style:a,title:c,desc:u}=t,f=cne(t,lne),p=o||{width:r,height:i,x:0,y:0},v=Pt("recharts-surface",s);return I.createElement("svg",zw({},mr(f),{className:v,width:r,height:i,style:a,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),I.createElement("title",null,c),I.createElement("desc",null,u),n)}),dne=["children","className"];function qw(){return qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qw.apply(null,arguments)}function fne(t,e){if(t==null)return{};var n,r,i=hne(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var La=I.forwardRef((t,e)=>{var{children:n,className:r}=t,i=fne(t,dne),o=Pt("recharts-layer",r);return I.createElement("g",qw({className:o},mr(i),{ref:e}),n)}),t5=I.createContext(null),pne=()=>I.useContext(t5);function Mt(t){return function(){return t}}const n5=Math.cos,Jm=Math.sin,ro=Math.sqrt,Qm=Math.PI,Iv=2*Qm,Gw=Math.PI,Hw=2*Gw,wl=1e-6,mne=Hw-wl;function r5(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function gne(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return r5;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class vne{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?r5:gne(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,c=r-e,u=i-n,f=s-e,p=a-n,v=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(v>wl)if(!(Math.abs(p*c-u*f)>wl)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let w=r-s,E=i-a,S=c*c+u*u,_=w*w+E*E,N=Math.sqrt(S),j=Math.sqrt(v),F=o*Math.tan((Gw-Math.acos((S+v-_)/(2*N*j)))/2),q=F/j,V=F/N;Math.abs(q-1)>wl&&this._append`L${e+q*f},${n+q*p}`,this._append`A${o},${o},0,0,${+(p*w>f*E)},${this._x1=e+V*c},${this._y1=n+V*u}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),c=r*Math.sin(i),u=e+a,f=n+c,p=1^s,v=s?i-o:o-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>wl||Math.abs(this._y1-f)>wl)&&this._append`L${u},${f}`,r&&(v<0&&(v=v%Hw+Hw),v>mne?this._append`A${r},${r},0,1,${p},${e-a},${n-c}A${r},${r},0,1,${p},${this._x1=u},${this._y1=f}`:v>wl&&this._append`A${r},${r},0,${+(v>=Gw)},${p},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function dS(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new vne(e)}function fS(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function i5(t){this._context=t}i5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Pv(t){return new i5(t)}function o5(t){return t[0]}function s5(t){return t[1]}function a5(t,e){var n=Mt(!0),r=null,i=Pv,o=null,s=dS(a);t=typeof t=="function"?t:t===void 0?o5:Mt(t),e=typeof e=="function"?e:e===void 0?s5:Mt(e);function a(c){var u,f=(c=fS(c)).length,p,v=!1,w;for(r==null&&(o=i(w=s())),u=0;u<=f;++u)!(u<f&&n(p=c[u],u,c))===v&&((v=!v)?o.lineStart():o.lineEnd()),v&&o.point(+t(p,u,c),+e(p,u,c));if(w)return o=null,w+""||null}return a.x=function(c){return arguments.length?(t=typeof c=="function"?c:Mt(+c),a):t},a.y=function(c){return arguments.length?(e=typeof c=="function"?c:Mt(+c),a):e},a.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Mt(!!c),a):n},a.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),a):i},a.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),a):r},a}function $p(t,e,n){var r=null,i=Mt(!0),o=null,s=Pv,a=null,c=dS(u);t=typeof t=="function"?t:t===void 0?o5:Mt(+t),e=typeof e=="function"?e:Mt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?s5:Mt(+n);function u(p){var v,w,E,S=(p=fS(p)).length,_,N=!1,j,F=new Array(S),q=new Array(S);for(o==null&&(a=s(j=c())),v=0;v<=S;++v){if(!(v<S&&i(_=p[v],v,p))===N)if(N=!N)w=v,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),E=v-1;E>=w;--E)a.point(F[E],q[E]);a.lineEnd(),a.areaEnd()}N&&(F[v]=+t(_,v,p),q[v]=+e(_,v,p),a.point(r?+r(_,v,p):F[v],n?+n(_,v,p):q[v]))}if(j)return a=null,j+""||null}function f(){return a5().defined(i).curve(s).context(o)}return u.x=function(p){return arguments.length?(t=typeof p=="function"?p:Mt(+p),r=null,u):t},u.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Mt(+p),u):t},u.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Mt(+p),u):r},u.y=function(p){return arguments.length?(e=typeof p=="function"?p:Mt(+p),n=null,u):e},u.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Mt(+p),u):e},u.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Mt(+p),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Mt(!!p),u):i},u.curve=function(p){return arguments.length?(s=p,o!=null&&(a=s(o)),u):s},u.context=function(p){return arguments.length?(p==null?o=a=null:a=s(o=p),u):o},u}class l5{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function yne(t){return new l5(t,!0)}function xne(t){return new l5(t,!1)}const hS={draw(t,e){const n=ro(e/Qm);t.moveTo(n,0),t.arc(0,0,n,0,Iv)}},bne={draw(t,e){const n=ro(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},c5=ro(1/3),wne=c5*2,_ne={draw(t,e){const n=ro(e/wne),r=n*c5;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Ene={draw(t,e){const n=ro(e),r=-n/2;t.rect(r,r,n,n)}},Sne=.8908130915292852,u5=Jm(Qm/10)/Jm(7*Qm/10),Tne=Jm(Iv/10)*u5,Ane=-n5(Iv/10)*u5,Cne={draw(t,e){const n=ro(e*Sne),r=Tne*n,i=Ane*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const s=Iv*o/5,a=n5(s),c=Jm(s);t.lineTo(c*n,-a*n),t.lineTo(a*r-c*i,c*r+a*i)}t.closePath()}},hx=ro(3),Ine={draw(t,e){const n=-ro(e/(hx*3));t.moveTo(0,n*2),t.lineTo(-hx*n,-n),t.lineTo(hx*n,-n),t.closePath()}},ci=-.5,ui=ro(3)/2,Ww=1/ro(12),Pne=(Ww/2+1)*3,Nne={draw(t,e){const n=ro(e/Pne),r=n/2,i=n*Ww,o=r,s=n*Ww+n,a=-o,c=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(a,c),t.lineTo(ci*r-ui*i,ui*r+ci*i),t.lineTo(ci*o-ui*s,ui*o+ci*s),t.lineTo(ci*a-ui*c,ui*a+ci*c),t.lineTo(ci*r+ui*i,ci*i-ui*r),t.lineTo(ci*o+ui*s,ci*s-ui*o),t.lineTo(ci*a+ui*c,ci*c-ui*a),t.closePath()}};function kne(t,e){let n=null,r=dS(i);t=typeof t=="function"?t:Mt(t||hS),e=typeof e=="function"?e:Mt(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Mt(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Mt(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Xm(){}function Zm(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function d5(t){this._context=t}d5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Zm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Zm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Rne(t){return new d5(t)}function f5(t){this._context=t}f5.prototype={areaStart:Xm,areaEnd:Xm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Zm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Mne(t){return new f5(t)}function h5(t){this._context=t}h5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Zm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Dne(t){return new h5(t)}function p5(t){this._context=t}p5.prototype={areaStart:Xm,areaEnd:Xm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function One(t){return new p5(t)}function qN(t){return t<0?-1:1}function GN(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(qN(o)+qN(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function HN(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function px(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*e,o-a,s-a*n,o,s)}function eg(t){this._context=t}eg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:px(this,this._t0,HN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,px(this,HN(this,n=GN(this,t,e)),n);break;default:px(this,this._t0,n=GN(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function m5(t){this._context=new g5(t)}(m5.prototype=Object.create(eg.prototype)).point=function(t,e){eg.prototype.point.call(this,e,t)};function g5(t){this._context=t}g5.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function Lne(t){return new eg(t)}function jne(t){return new m5(t)}function v5(t){this._context=t}v5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=WN(t),i=WN(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function WN(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function Fne(t){return new v5(t)}function Nv(t,e){this._context=t,this._t=e}Nv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Une(t){return new Nv(t,.5)}function Vne(t){return new Nv(t,0)}function $ne(t){return new Nv(t,1)}function Gl(t,e){if((s=t.length)>1)for(var n=1,r,i,o=t[e[0]],s,a=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Kw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Bne(t,e){return t[e]}function zne(t){const e=[];return e.key=t,e}function qne(){var t=Mt([]),e=Kw,n=Gl,r=Bne;function i(o){var s=Array.from(t.apply(this,arguments),zne),a,c=s.length,u=-1,f;for(const p of o)for(a=0,++u;a<c;++a)(s[a][u]=[0,+r(p,s[a].key,u,o)]).data=p;for(a=0,f=fS(e(s));a<c;++a)s[f[a]].index=a;return n(s,f),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Mt(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Mt(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?Kw:typeof o=="function"?o:Mt(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??Gl,i):n},i}function Gne(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,s;i<o;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Gl(t,e)}}function Hne(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var s=0,a=0;s<i;++s)a+=t[s][n][1]||0;r[n][1]+=r[n][0]=-a/2}Gl(t,e)}}function Wne(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,s;r<o;++r){for(var a=0,c=0,u=0;a<s;++a){for(var f=t[e[a]],p=f[r][1]||0,v=f[r-1][1]||0,w=(p-v)/2,E=0;E<a;++E){var S=t[e[E]],_=S[r][1]||0,N=S[r-1][1]||0;w+=_-N}c+=p,u+=w*p}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,Gl(t,e)}}var mx={},gx={},KN;function Kne(){return KN||(KN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(gx)),gx}var vx={},YN;function y5(){return YN||(YN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(vx)),vx}var yx={},JN;function pS(){return JN||(JN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(yx)),yx}var xx={},bx={},QN;function Yne(){return QN||(QN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(bx)),bx}var XN;function mS(){return XN||(XN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Yne(),n=pS();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const o=[],s=i.length;if(s===0)return o;let a=0,c="",u="",f=!1;for(i.charCodeAt(0)===46&&(o.push(""),a++);a<s;){const p=i[a];u?p==="\\"&&a+1<s?(a++,c+=i[a]):p===u?u="":c+=p:f?p==='"'||p==="'"?u=p:p==="]"?(f=!1,o.push(c),c=""):c+=p:p==="["?(f=!0,c&&(o.push(c),c="")):p==="."?c&&(o.push(c),c=""):c+=p,a++}return c&&o.push(c),o}t.toPath=r})(xx)),xx}var ZN;function gS(){return ZN||(ZN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Kne(),n=y5(),r=pS(),i=mS();function o(a,c,u){if(a==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const f=a[c];return f===void 0?n.isDeepKey(c)?o(a,i.toPath(c),u):u:f}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const f=a[c];return f===void 0?u:f}default:{if(Array.isArray(c))return s(a,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const f=a[c];return f===void 0?u:f}}}function s(a,c,u){if(c.length===0)return u;let f=a;for(let p=0;p<c.length;p++){if(f==null||e.isUnsafeProperty(c[p]))return u;f=f[c[p]]}return f===void 0?u:f}t.get=o})(mx)),mx}var wx,ek;function Jne(){return ek||(ek=1,wx=gS().get),wx}var Qne=Jne();const kv=Xr(Qne);var Xne=4;function _a(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xne,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Jt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,o,s)=>{var a=n[s-1];return typeof a=="string"?i+a+o:a!==void 0?i+_a(a)+o:i+o},"")}var mi=t=>t===0?0:t>0?1:-1,Bo=t=>typeof t=="number"&&t!=+t,Is=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,We=t=>(typeof t=="number"||t instanceof Number)&&!Bo(t),zo=t=>We(t)||typeof t=="string",Zne=0,Nf=t=>{var e=++Zne;return"".concat(t||"").concat(e)},ja=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!We(e)&&typeof e!="string")return r;var o;if(Is(e)){if(n==null)return r;var s=e.indexOf("%");o=n*parseFloat(e.slice(0,s))/100}else o=+e;return Bo(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},x5=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function Nr(t,e,n){return We(t)&&We(e)?_a(t+n*(e-t)):e}function b5(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):kv(r,e))===n)}var Nn=t=>t===null||typeof t>"u",ih=t=>Nn(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function ere(t){return t!=null}function oh(){}var tre=["type","size","sizeType"];function Yw(){return Yw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yw.apply(null,arguments)}function tk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tk(Object(n),!0).forEach(function(r){nre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nre(t,e,n){return(e=rre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rre(t){var e=ire(t,"string");return typeof e=="symbol"?e:e+""}function ire(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ore(t,e){if(t==null)return{};var n,r,i=sre(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var w5={symbolCircle:hS,symbolCross:bne,symbolDiamond:_ne,symbolSquare:Ene,symbolStar:Cne,symbolTriangle:Ine,symbolWye:Nne},are=Math.PI/180,lre=t=>{var e="symbol".concat(ih(t));return w5[e]||hS},cre=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*are;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},ure=(t,e)=>{w5["symbol".concat(ih(t))]=e},vS=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=ore(t,tre),o=nk(nk({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var a=()=>{var v=lre(s),w=kne().type(v).size(cre(n,r,s)),E=w();if(E!==null)return E},{className:c,cx:u,cy:f}=o,p=mr(o);return We(u)&&We(f)&&We(n)?I.createElement("path",Yw({},p,{className:Pt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(f,")"),d:a()})):null};vS.registerSymbol=ure;var _5=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,yS=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(I.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{cS(i)&&(r[i]=(o=>n[i](n,o)))}),r},dre=(t,e,n)=>r=>(t(e,n,r),null),E5=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var o=t[i];cS(i)&&typeof o=="function"&&(r||(r={}),r[i]=dre(o,e,n))}),r};function rk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fre(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rk(Object(n),!0).forEach(function(r){hre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hre(t,e,n){return(e=pre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pre(t){var e=mre(t,"string");return typeof e=="symbol"?e:e+""}function mre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sr(t,e){var n=fre({},t),r=e,i=Object.keys(e),o=i.reduce((s,a)=>(s[a]===void 0&&r[a]!==void 0&&(s[a]=r[a]),s),n);return o}function tg(){return tg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tg.apply(null,arguments)}function ik(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gre(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ik(Object(n),!0).forEach(function(r){vre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ik(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vre(t,e,n){return(e=yre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yre(t){var e=xre(t,"string");return typeof e=="symbol"?e:e+""}function xre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fi=32,bre={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function wre(t){var{data:e,iconType:n,inactiveColor:r}=t,i=fi/2,o=fi/6,s=fi/3,a=e.inactive?r:e.color,c=n??e.type;if(c==="none")return null;if(c==="plainline"){var u;return I.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:i,x2:fi,y2:i,className:"recharts-legend-icon"})}if(c==="line")return I.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(fi,"M").concat(2*s,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return I.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(fi/8,"h").concat(fi,"v").concat(fi*3/4,"h").concat(-fi,"z"),className:"recharts-legend-icon"});if(I.isValidElement(e.legendIcon)){var f=gre({},e);return delete f.legendIcon,I.cloneElement(e.legendIcon,f)}return I.createElement(vS,{fill:a,cx:i,cy:i,size:fi,sizeType:"diameter",type:c})}function _re(t){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:o,iconType:s}=t,a={x:0,y:0,width:fi,height:fi},c={display:r==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((f,p)=>{var v=f.formatter||i,w=Pt({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:f.inactive});if(f.type==="none")return null;var E=f.inactive?o:f.color,S=v?v(f.value,f,p):f.value;return I.createElement("li",tg({className:w,style:c,key:"legend-item-".concat(p)},E5(t,f,p)),I.createElement(uS,{width:n,height:n,viewBox:a,style:u,"aria-label":"".concat(S," legend icon")},I.createElement(wre,{data:f,iconType:s,inactiveColor:o})),I.createElement("span",{className:"recharts-legend-item-text",style:{color:E}},S))})}var Ere=t=>{var e=sr(t,bre),{payload:n,layout:r,align:i}=e;if(!n||!n.length)return null;var o={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return I.createElement("ul",{className:"recharts-default-legend",style:o},I.createElement(_re,tg({},e,{payload:n})))},_x={},Ex={},ok;function Sre(){return ok||(ok=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let o=0;o<n.length;o++){const s=n[o],a=r(s,o,n);i.has(a)||i.set(a,s)}return Array.from(i.values())}t.uniqBy=e})(Ex)),Ex}var Sx={},sk;function Tre(){return sk||(sk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}t.ary=e})(Sx)),Sx}var Tx={},ak;function S5(){return ak||(ak=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(Tx)),Tx}var Ax={},Cx={},Ix={},lk;function Are(){return lk||(lk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(Ix)),Ix}var ck;function xS(){return ck||(ck=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Are();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(Cx)),Cx}var Px={},uk;function Cre(){return uk||(uk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(Px)),Px}var dk;function Ire(){return dk||(dk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xS(),n=Cre();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(Ax)),Ax}var Nx={},kx={},fk;function Pre(){return fk||(fk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gS();function n(r){return function(i){return e.get(i,r)}}t.property=n})(kx)),kx}var Rx={},Mx={},Dx={},Ox={},hk;function T5(){return hk||(hk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Ox)),Ox}var Lx={},pk;function A5(){return pk||(pk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Lx)),Lx}var jx={},mk;function C5(){return mk||(mk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(jx)),jx}var gk;function Nre(){return gk||(gk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=T5(),n=A5(),r=C5();function i(f,p,v){return typeof v!="function"?i(f,p,()=>{}):o(f,p,function w(E,S,_,N,j,F){const q=v(E,S,_,N,j,F);return q!==void 0?!!q:o(E,S,w,F)},new Map)}function o(f,p,v,w){if(p===f)return!0;switch(typeof p){case"object":return s(f,p,v,w);case"function":return Object.keys(p).length>0?o(f,{...p},v,w):r.isEqualsSameValueZero(f,p);default:return e.isObject(f)?typeof p=="string"?p==="":!0:r.isEqualsSameValueZero(f,p)}}function s(f,p,v,w){if(p==null)return!0;if(Array.isArray(p))return c(f,p,v,w);if(p instanceof Map)return a(f,p,v,w);if(p instanceof Set)return u(f,p,v,w);const E=Object.keys(p);if(f==null||n.isPrimitive(f))return E.length===0;if(E.length===0)return!0;if(w!=null&&w.has(p))return w.get(p)===f;w==null||w.set(p,f);try{for(let S=0;S<E.length;S++){const _=E[S];if(!n.isPrimitive(f)&&!(_ in f)||p[_]===void 0&&f[_]!==void 0||p[_]===null&&f[_]!==null||!v(f[_],p[_],_,f,p,w))return!1}return!0}finally{w==null||w.delete(p)}}function a(f,p,v,w){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[E,S]of p.entries()){const _=f.get(E);if(v(_,S,E,f,p,w)===!1)return!1}return!0}function c(f,p,v,w){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const E=new Set;for(let S=0;S<p.length;S++){const _=p[S];let N=!1;for(let j=0;j<f.length;j++){if(E.has(j))continue;const F=f[j];let q=!1;if(v(F,_,S,f,p,w)&&(q=!0),q){E.add(j),N=!0;break}}if(!N)return!1}return!0}function u(f,p,v,w){return p.size===0?!0:f instanceof Set?c([...f],[...p],v,w):!1}t.isMatchWith=i,t.isSetMatch=u})(Dx)),Dx}var vk;function I5(){return vk||(vk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nre();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(Mx)),Mx}var Fx={},Ux={},Vx={},yk;function kre(){return yk||(yk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Vx)),Vx}var $x={},xk;function bS(){return xk||(xk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})($x)),$x}var Bx={},bk;function P5(){return bk||(bk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",s="[object Symbol]",a="[object Date]",c="[object Map]",u="[object Set]",f="[object Array]",p="[object Function]",v="[object ArrayBuffer]",w="[object Object]",E="[object Error]",S="[object DataView]",_="[object Uint8Array]",N="[object Uint8ClampedArray]",j="[object Uint16Array]",F="[object Uint32Array]",q="[object BigUint64Array]",V="[object Int8Array]",$="[object Int16Array]",k="[object Int32Array]",D="[object BigInt64Array]",O="[object Float32Array]",z="[object Float64Array]";t.argumentsTag=o,t.arrayBufferTag=v,t.arrayTag=f,t.bigInt64ArrayTag=D,t.bigUint64ArrayTag=q,t.booleanTag=i,t.dataViewTag=S,t.dateTag=a,t.errorTag=E,t.float32ArrayTag=O,t.float64ArrayTag=z,t.functionTag=p,t.int16ArrayTag=$,t.int32ArrayTag=k,t.int8ArrayTag=V,t.mapTag=c,t.numberTag=r,t.objectTag=w,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=j,t.uint32ArrayTag=F,t.uint8ArrayTag=_,t.uint8ClampedArrayTag=N})(Bx)),Bx}var zx={},wk;function Rre(){return wk||(wk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(zx)),zx}var _k;function N5(){return _k||(_k=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kre(),n=bS(),r=P5(),i=A5(),o=Rre();function s(f,p){return a(f,void 0,f,new Map,p)}function a(f,p,v,w=new Map,E=void 0){const S=E==null?void 0:E(f,p,v,w);if(S!==void 0)return S;if(i.isPrimitive(f))return f;if(w.has(f))return w.get(f);if(Array.isArray(f)){const _=new Array(f.length);w.set(f,_);for(let N=0;N<f.length;N++)_[N]=a(f[N],N,v,w,E);return Object.hasOwn(f,"index")&&(_.index=f.index),Object.hasOwn(f,"input")&&(_.input=f.input),_}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const _=new RegExp(f.source,f.flags);return _.lastIndex=f.lastIndex,_}if(f instanceof Map){const _=new Map;w.set(f,_);for(const[N,j]of f)_.set(N,a(j,N,v,w,E));return _}if(f instanceof Set){const _=new Set;w.set(f,_);for(const N of f)_.add(a(N,void 0,v,w,E));return _}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(o.isTypedArray(f)){const _=new(Object.getPrototypeOf(f)).constructor(f.length);w.set(f,_);for(let N=0;N<f.length;N++)_[N]=a(f[N],N,v,w,E);return _}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const _=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return w.set(f,_),c(_,f,v,w,E),_}if(typeof File<"u"&&f instanceof File){const _=new File([f],f.name,{type:f.type});return w.set(f,_),c(_,f,v,w,E),_}if(typeof Blob<"u"&&f instanceof Blob){const _=new Blob([f],{type:f.type});return w.set(f,_),c(_,f,v,w,E),_}if(f instanceof Error){const _=new f.constructor;return w.set(f,_),_.message=f.message,_.name=f.name,_.stack=f.stack,_.cause=f.cause,c(_,f,v,w,E),_}if(f instanceof Boolean){const _=new Boolean(f.valueOf());return w.set(f,_),c(_,f,v,w,E),_}if(f instanceof Number){const _=new Number(f.valueOf());return w.set(f,_),c(_,f,v,w,E),_}if(f instanceof String){const _=new String(f.valueOf());return w.set(f,_),c(_,f,v,w,E),_}if(typeof f=="object"&&u(f)){const _=Object.create(Object.getPrototypeOf(f));return w.set(f,_),c(_,f,v,w,E),_}return f}function c(f,p,v=f,w,E){const S=[...Object.keys(p),...e.getSymbols(p)];for(let _=0;_<S.length;_++){const N=S[_],j=Object.getOwnPropertyDescriptor(f,N);(j==null||j.writable)&&(f[N]=a(p[N],N,v,w,E))}}function u(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=a,t.copyProperties=c})(Ux)),Ux}var Ek;function Mre(){return Ek||(Ek=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=N5();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(Fx)),Fx}var Sk;function Dre(){return Sk||(Sk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I5(),n=Mre();function r(i){return i=n.cloneDeep(i),o=>e.isMatch(o,i)}t.matches=r})(Rx)),Rx}var qx={},Gx={},Hx={},Tk;function Ore(){return Tk||(Tk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=N5(),n=bS(),r=P5();function i(o,s){return e.cloneDeepWith(o,(a,c,u,f)=>{const p=s==null?void 0:s(a,c,u,f);if(p!==void 0)return p;if(typeof o=="object"){if(n.getTag(o)===r.objectTag&&typeof o.constructor!="function"){const v={};return f.set(o,v),e.copyProperties(v,o,u,f),v}switch(Object.prototype.toString.call(o)){case r.numberTag:case r.stringTag:case r.booleanTag:{const v=new o.constructor(o==null?void 0:o.valueOf());return e.copyProperties(v,o),v}case r.argumentsTag:{const v={};return e.copyProperties(v,o),v.length=o.length,v[Symbol.iterator]=o[Symbol.iterator],v}default:return}}})}t.cloneDeepWith=i})(Hx)),Hx}var Ak;function Lre(){return Ak||(Ak=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ore();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(Gx)),Gx}var Wx={},Kx={},Ck;function k5(){return Ck||(Ck=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(Kx)),Kx}var Yx={},Ik;function jre(){return Ik||(Ik=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bS();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(Yx)),Yx}var Pk;function Fre(){return Pk||(Pk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=y5(),n=k5(),r=jre(),i=mS();function o(s,a){let c;if(Array.isArray(a)?c=a:typeof a=="string"&&e.isDeepKey(a)&&(s==null?void 0:s[a])==null?c=i.toPath(a):c=[a],c.length===0)return!1;let u=s;for(let f=0;f<c.length;f++){const p=c[f];if((u==null||!Object.hasOwn(u,p))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(p)&&p<u.length))return!1;u=u[p]}return!0}t.has=o})(Wx)),Wx}var Nk;function Ure(){return Nk||(Nk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I5(),n=pS(),r=Lre(),i=gS(),o=Fre();function s(a,c){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return c=r.cloneDeep(c),function(u){const f=i.get(u,a);return f===void 0?o.has(u,a):c===void 0?f===void 0:e.isMatch(f,c)}}t.matchesProperty=s})(qx)),qx}var kk;function Vre(){return kk||(kk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S5(),n=Pre(),r=Dre(),i=Ure();function o(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=o})(Nx)),Nx}var Rk;function $re(){return Rk||(Rk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Sre(),n=Tre(),r=S5(),i=Ire(),o=Vre();function s(a,c=r.identity){return i.isArrayLikeObject(a)?e.uniqBy(Array.from(a),n.ary(o.iteratee(c),1)):[]}t.uniqBy=s})(_x)),_x}var Jx,Mk;function Bre(){return Mk||(Mk=1,Jx=$re().uniqBy),Jx}var zre=Bre();const Dk=Xr(zre);function R5(t,e,n){return e===!0?Dk(t,n):typeof e=="function"?Dk(t,e):t}var Qx={exports:{}},Xx={},Zx={exports:{}},eb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ok;function qre(){if(Ok)return eb;Ok=1;var t=Lu();function e(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function a(p,v){var w=v(),E=r({inst:{value:w,getSnapshot:v}}),S=E[0].inst,_=E[1];return o(function(){S.value=w,S.getSnapshot=v,c(S)&&_({inst:S})},[p,w,v]),i(function(){return c(S)&&_({inst:S}),p(function(){c(S)&&_({inst:S})})},[p]),s(w),w}function c(p){var v=p.getSnapshot;p=p.value;try{var w=v();return!n(p,w)}catch{return!0}}function u(p,v){return v()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return eb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,eb}var Lk;function Gre(){return Lk||(Lk=1,Zx.exports=qre()),Zx.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jk;function Hre(){if(jk)return Xx;jk=1;var t=Lu(),e=Gre();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,a=t.useMemo,c=t.useDebugValue;return Xx.useSyncExternalStoreWithSelector=function(u,f,p,v,w){var E=o(null);if(E.current===null){var S={hasValue:!1,value:null};E.current=S}else S=E.current;E=a(function(){function N($){if(!j){if(j=!0,F=$,$=v($),w!==void 0&&S.hasValue){var k=S.value;if(w(k,$))return q=k}return q=$}if(k=q,r(F,$))return k;var D=v($);return w!==void 0&&w(k,D)?(F=$,k):(F=$,q=D)}var j=!1,F,q,V=p===void 0?null:p;return[function(){return N(f())},V===null?void 0:function(){return N(V())}]},[f,p,v,w]);var _=i(u,E[0],E[1]);return s(function(){S.hasValue=!0,S.value=_},[_]),c(_),_},Xx}var Fk;function Wre(){return Fk||(Fk=1,Qx.exports=Hre()),Qx.exports}var Kre=Wre(),wS=I.createContext(null),Yre=t=>t,hn=()=>{var t=I.useContext(wS);return t?t.store.dispatch:Yre},ym=()=>{},Jre=()=>ym,Qre=(t,e)=>t===e;function Qe(t){var e=I.useContext(wS);return Kre.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Jre,e?e.store.getState:ym,e?e.store.getState:ym,e?t:ym,Qre)}function Xre(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function Zre(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function eie(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var Uk=t=>Array.isArray(t)?t:[t];function tie(t){const e=Array.isArray(t[0])?t[0]:t;return eie(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function nie(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var rie=class{constructor(t){this.value=t}deref(){return this.value}},iie=typeof WeakRef<"u"?WeakRef:rie,oie=0,Vk=1;function Bp(){return{s:oie,v:void 0,o:null,p:null}}function M5(t,e={}){let n=Bp();const{resultEqualityCheck:r}=e;let i,o=0;function s(){var p;let a=n;const{length:c}=arguments;for(let v=0,w=c;v<w;v++){const E=arguments[v];if(typeof E=="function"||typeof E=="object"&&E!==null){let S=a.o;S===null&&(a.o=S=new WeakMap);const _=S.get(E);_===void 0?(a=Bp(),S.set(E,a)):a=_}else{let S=a.p;S===null&&(a.p=S=new Map);const _=S.get(E);_===void 0?(a=Bp(),S.set(E,a)):a=_}}const u=a;let f;if(a.s===Vk)f=a.v;else if(f=t.apply(null,arguments),o++,r){const v=((p=i==null?void 0:i.deref)==null?void 0:p.call(i))??i;v!=null&&r(v,f)&&(f=v,o!==0&&o--),i=typeof f=="object"&&f!==null||typeof f=="function"?new iie(f):f}return u.s=Vk,u.v=f,f}return s.clearCache=()=>{n=Bp(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function sie(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let o=0,s=0,a,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),Xre(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...n,...c},{memoize:p,memoizeOptions:v=[],argsMemoize:w=M5,argsMemoizeOptions:E=[]}=f,S=Uk(v),_=Uk(E),N=tie(i),j=p(function(){return o++,u.apply(null,arguments)},...S),F=w(function(){s++;const V=nie(N,arguments);return a=j.apply(null,V),a},..._);return Object.assign(F,{resultFunc:u,memoizedResultFunc:j,dependencies:N,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>a,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:p,argsMemoize:w})};return Object.assign(r,{withTypes:()=>r}),r}var se=sie(M5),aie=Object.assign((t,e=se)=>{Zre(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(o=>t[o]);return e(r,(...o)=>o.reduce((s,a,c)=>(s[n[c]]=a,s),{}))},{withTypes:()=>aie}),tb={},nb={},rb={},$k;function lie(){return $k||($k=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const s=e(r),a=e(i);if(s===a&&s===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?a-s:s-a}return 0};t.compareValues=n})(rb)),rb}var ib={},ob={},Bk;function D5(){return Bk||(Bk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(ob)),ob}var zk;function cie(){return zk||(zk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=D5(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,s){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||e.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||s!=null&&Object.hasOwn(s,o)}t.isKey=i})(ib)),ib}var qk;function uie(){return qk||(qk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lie(),n=cie(),r=mS();function i(o,s,a,c){if(o==null)return[];a=c?void 0:a,Array.isArray(o)||(o=Object.values(o)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(w=>String(w));const u=(w,E)=>{let S=w;for(let _=0;_<E.length&&S!=null;++_)S=S[E[_]];return S},f=(w,E)=>E==null||w==null?E:typeof w=="object"&&"key"in w?Object.hasOwn(E,w.key)?E[w.key]:u(E,w.path):typeof w=="function"?w(E):Array.isArray(w)?u(E,w):typeof E=="object"?E[w]:E,p=s.map(w=>(Array.isArray(w)&&w.length===1&&(w=w[0]),w==null||typeof w=="function"||Array.isArray(w)||n.isKey(w)?w:{key:w,path:r.toPath(w)}));return o.map(w=>({original:w,criteria:p.map(E=>f(E,w))})).slice().sort((w,E)=>{for(let S=0;S<p.length;S++){const _=e.compareValues(w.criteria[S],E.criteria[S],a[S]);if(_!==0)return _}return 0}).map(w=>w.original)}t.orderBy=i})(nb)),nb}var sb={},Gk;function die(){return Gk||(Gk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],o=Math.floor(r),s=(a,c)=>{for(let u=0;u<a.length;u++){const f=a[u];Array.isArray(f)&&c<o?s(f,c+1):i.push(f)}};return s(n,0),i}t.flatten=e})(sb)),sb}var ab={},Hk;function O5(){return Hk||(Hk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=k5(),n=xS(),r=T5(),i=C5();function o(s,a,c){return r.isObject(c)&&(typeof a=="number"&&n.isArrayLike(c)&&e.isIndex(a)&&a<c.length||typeof a=="string"&&a in c)?i.isEqualsSameValueZero(c[a],s):!1}t.isIterateeCall=o})(ab)),ab}var Wk;function fie(){return Wk||(Wk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uie(),n=die(),r=O5();function i(o,...s){const a=s.length;return a>1&&r.isIterateeCall(o,s[0],s[1])?s=[]:a>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(o,n.flatten(s),["asc"])}t.sortBy=i})(tb)),tb}var lb,Kk;function hie(){return Kk||(Kk=1,lb=fie().sortBy),lb}var pie=hie();const Rv=Xr(pie);var L5=t=>t.legend.settings,mie=t=>t.legend.size,gie=t=>t.legend.payload,vie=se([gie,L5],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?Rv(r,n):r});function yie(){return Qe(vie)}var zp=1;function j5(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=I.useState({height:0,left:0,top:0,width:0}),r=I.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),s={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(s.height-e.height)>zp||Math.abs(s.left-e.left)>zp||Math.abs(s.top-e.top)>zp||Math.abs(s.width-e.width)>zp)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Un(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var xie=typeof Symbol=="function"&&Symbol.observable||"@@observable",Yk=xie,cb=()=>Math.random().toString(36).substring(7).split("").join("."),bie={INIT:`@@redux/INIT${cb()}`,REPLACE:`@@redux/REPLACE${cb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${cb()}`},ng=bie;function _S(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function F5(t,e,n){if(typeof t!="function")throw new Error(Un(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Un(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Un(1));return n(F5)(t,e)}let r=t,i=e,o=new Map,s=o,a=0,c=!1;function u(){s===o&&(s=new Map,o.forEach((_,N)=>{s.set(N,_)}))}function f(){if(c)throw new Error(Un(3));return i}function p(_){if(typeof _!="function")throw new Error(Un(4));if(c)throw new Error(Un(5));let N=!0;u();const j=a++;return s.set(j,_),function(){if(N){if(c)throw new Error(Un(6));N=!1,u(),s.delete(j),o=null}}}function v(_){if(!_S(_))throw new Error(Un(7));if(typeof _.type>"u")throw new Error(Un(8));if(typeof _.type!="string")throw new Error(Un(17));if(c)throw new Error(Un(9));try{c=!0,i=r(i,_)}finally{c=!1}return(o=s).forEach(j=>{j()}),_}function w(_){if(typeof _!="function")throw new Error(Un(10));r=_,v({type:ng.REPLACE})}function E(){const _=p;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(Un(11));function j(){const q=N;q.next&&q.next(f())}return j(),{unsubscribe:_(j)}},[Yk](){return this}}}return v({type:ng.INIT}),{dispatch:v,subscribe:p,getState:f,replaceReducer:w,[Yk]:E}}function wie(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:ng.INIT})>"u")throw new Error(Un(12));if(typeof n(void 0,{type:ng.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Un(13))})}function U5(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const s=e[o];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{wie(n)}catch(o){i=o}return function(s={},a){if(i)throw i;let c=!1;const u={};for(let f=0;f<r.length;f++){const p=r[f],v=n[p],w=s[p],E=v(w,a);if(typeof E>"u")throw a&&a.type,new Error(Un(14));u[p]=E,c=c||E!==w}return c=c||r.length!==Object.keys(s).length,c?u:s}}function rg(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function _ie(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(Un(15))};const s={getState:i.getState,dispatch:(c,...u)=>o(c,...u)},a=t.map(c=>c(s));return o=rg(...a)(i.dispatch),{...i,dispatch:o}}}function V5(t){return _S(t)&&"type"in t&&typeof t.type=="string"}var $5=Symbol.for("immer-nothing"),Jk=Symbol.for("immer-draftable"),gr=Symbol.for("immer-state");function ji(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Kr=Object,Nu=Kr.getPrototypeOf,ig="constructor",Mv="prototype",Jw="configurable",og="enumerable",xm="writable",kf="value",Ps=t=>!!t&&!!t[gr];function eo(t){var e;return t?B5(t)||Ov(t)||!!t[Jk]||!!((e=t[ig])!=null&&e[Jk])||Lv(t)||jv(t):!1}var Eie=Kr[Mv][ig].toString(),Qk=new WeakMap;function B5(t){if(!t||!ES(t))return!1;const e=Nu(t);if(e===null||e===Kr[Mv])return!0;const n=Kr.hasOwnProperty.call(e,ig)&&e[ig];if(n===Object)return!0;if(!nu(n))return!1;let r=Qk.get(n);return r===void 0&&(r=Function.toString.call(n),Qk.set(n,r)),r===Eie}function Dv(t,e,n=!0){sh(t)===0?(n?Reflect.ownKeys(t):Kr.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function sh(t){const e=t[gr];return e?e.type_:Ov(t)?1:Lv(t)?2:jv(t)?3:0}var Xk=(t,e,n=sh(t))=>n===2?t.has(e):Kr[Mv].hasOwnProperty.call(t,e),Qw=(t,e,n=sh(t))=>n===2?t.get(e):t[e],sg=(t,e,n,r=sh(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function Sie(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Ov=Array.isArray,Lv=t=>t instanceof Map,jv=t=>t instanceof Set,ES=t=>typeof t=="object",nu=t=>typeof t=="function",ub=t=>typeof t=="boolean";function Tie(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var fs=t=>t.copy_||t.base_,SS=t=>t.modified_?t.copy_:t.base_;function Xw(t,e){if(Lv(t))return new Map(t);if(jv(t))return new Set(t);if(Ov(t))return Array[Mv].slice.call(t);const n=B5(t);if(e===!0||e==="class_only"&&!n){const r=Kr.getOwnPropertyDescriptors(t);delete r[gr];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a[xm]===!1&&(a[xm]=!0,a[Jw]=!0),(a.get||a.set)&&(r[s]={[Jw]:!0,[xm]:!0,[og]:a[og],[kf]:t[s]})}return Kr.create(Nu(t),r)}else{const r=Nu(t);if(r!==null&&n)return{...t};const i=Kr.create(r);return Kr.assign(i,t)}}function TS(t,e=!1){return Fv(t)||Ps(t)||!eo(t)||(sh(t)>1&&Kr.defineProperties(t,{set:qp,add:qp,clear:qp,delete:qp}),Kr.freeze(t),e&&Dv(t,(n,r)=>{TS(r,!0)},!1)),t}function Aie(){ji(2)}var qp={[kf]:Aie};function Fv(t){return t===null||!ES(t)?!0:Kr.isFrozen(t)}var ag="MapSet",Zw="Patches",Zk="ArrayMethods",z5={};function Hl(t){const e=z5[t];return e||ji(0,t),e}var e2=t=>!!z5[t],Rf,q5=()=>Rf,Cie=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:e2(ag)?Hl(ag):void 0,arrayMethodsPlugin_:e2(Zk)?Hl(Zk):void 0});function t2(t,e){e&&(t.patchPlugin_=Hl(Zw),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function e_(t){t_(t),t.drafts_.forEach(Iie),t.drafts_=null}function t_(t){t===Rf&&(Rf=t.parent_)}var n2=t=>Rf=Cie(Rf,t);function Iie(t){const e=t[gr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function r2(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[gr].modified_&&(e_(e),ji(4)),eo(t)&&(t=i2(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[gr].base_,t,e)}else t=i2(e,n);return Pie(e,t,!0),e_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==$5?t:void 0}function i2(t,e){if(Fv(e))return e;const n=e[gr];if(!n)return lg(e,t.handledSet_,t);if(!Uv(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);W5(n,t)}return n.copy_}function Pie(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&TS(e,n)}function G5(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var Uv=(t,e)=>t.scope_===e,Nie=[];function H5(t,e,n,r){const i=fs(t),o=t.type_;if(r!==void 0&&Qw(i,r,o)===e){sg(i,r,n,o);return}if(!t.draftLocations_){const a=t.draftLocations_=new Map;Dv(i,(c,u)=>{if(Ps(u)){const f=a.get(u)||[];f.push(c),a.set(u,f)}})}const s=t.draftLocations_.get(e)??Nie;for(const a of s)sg(i,a,n,o)}function kie(t,e,n){t.callbacks_.push(function(i){var a;const o=e;if(!o||!Uv(o,i))return;(a=i.mapSetPlugin_)==null||a.fixSetContents(o);const s=SS(o);H5(t,o.draft_??o,s,n),W5(o,i)})}function W5(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const o=i.getPath(t);o&&i.generatePatches_(t,o,e)}G5(t)}}function Rie(t,e,n){const{scope_:r}=t;if(Ps(n)){const i=n[gr];Uv(i,r)&&i.callbacks_.push(function(){bm(t);const s=SS(i);H5(t,n,s,e)})}else eo(n)&&t.callbacks_.push(function(){const o=fs(t);t.type_===3?o.has(n)&&lg(n,r.handledSet_,r):Qw(o,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&lg(Qw(t.copy_,e,t.type_),r.handledSet_,r)})}function lg(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ps(t)||e.has(t)||!eo(t)||Fv(t)||(e.add(t),Dv(t,(r,i)=>{if(Ps(i)){const o=i[gr];if(Uv(o,n)){const s=SS(o);sg(t,r,s,t.type_),G5(o)}}else eo(i)&&lg(i,e,n)})),t}function Mie(t,e){const n=Ov(t),r={type_:n?1:0,scope_:e?e.scope_:q5(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,o=cg;n&&(i=[r],o=Mf);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,[a,r]}var cg={get(t,e){if(e===gr)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n!=null&&n.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=fs(t);if(!Xk(i,e,t.type_))return Die(t,i,e);const o=i[e];if(t.finalized_||!eo(o)||r&&t.operationMethod&&(n!=null&&n.isMutatingArrayMethod(t.operationMethod))&&Tie(e))return o;if(o===db(t.base_,e)){bm(t);const s=t.type_===1?+e:e,a=r_(t.scope_,o,t,s);return t.copy_[s]=a}return o},has(t,e){return e in fs(t)},ownKeys(t){return Reflect.ownKeys(fs(t))},set(t,e,n){const r=K5(fs(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=db(fs(t),e),o=i==null?void 0:i[gr];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(Sie(n,i)&&(n!==void 0||Xk(t.base_,e,t.type_)))return!0;bm(t),n_(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),Rie(t,e,n)),!0},deleteProperty(t,e){return bm(t),db(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),n_(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=fs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[xm]:!0,[Jw]:t.type_!==1||e!=="length",[og]:r[og],[kf]:n[e]}},defineProperty(){ji(11)},getPrototypeOf(t){return Nu(t.base_)},setPrototypeOf(){ji(12)}},Mf={};for(let t in cg){let e=cg[t];Mf[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}Mf.deleteProperty=function(t,e){return Mf.set.call(this,t,e,void 0)};Mf.set=function(t,e,n){return cg.set.call(this,t[0],e,n,t[0])};function db(t,e){const n=t[gr];return(n?fs(n):t)[e]}function Die(t,e,n){var i;const r=K5(e,n);return r?kf in r?r[kf]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function K5(t,e){if(!(e in t))return;let n=Nu(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Nu(n)}}function n_(t){t.modified_||(t.modified_=!0,t.parent_&&n_(t.parent_))}function bm(t){t.copy_||(t.assigned_=new Map,t.copy_=Xw(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Oie=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(nu(n)&&!nu(r)){const s=r;r=n;const a=this;return function(u=s,...f){return a.produce(u,p=>r.call(this,p,...f))}}nu(r)||ji(6),i!==void 0&&!nu(i)&&ji(7);let o;if(eo(n)){const s=n2(this),a=r_(s,n,void 0);let c=!0;try{o=r(a),c=!1}finally{c?e_(s):t_(s)}return t2(s,i),r2(o,s)}else if(!n||!ES(n)){if(o=r(n),o===void 0&&(o=n),o===$5&&(o=void 0),this.autoFreeze_&&TS(o,!0),i){const s=[],a=[];Hl(Zw).generateReplacementPatches_(n,o,{patches_:s,inversePatches_:a}),i(s,a)}return o}else ji(1,n)},this.produceWithPatches=(n,r)=>{if(nu(n))return(a,...c)=>this.produceWithPatches(a,u=>n(u,...c));let i,o;return[this.produce(n,r,(a,c)=>{i=a,o=c}),i,o]},ub(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),ub(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),ub(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){eo(e)||ji(8),Ps(e)&&(e=Yi(e));const n=n2(this),r=r_(n,e,void 0);return r[gr].isManual_=!0,t_(n),r}finishDraft(e,n){const r=e&&e[gr];(!r||!r.isManual_)&&ji(9);const{scope_:i}=r;return t2(i,n),r2(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const o=n[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(n=n.slice(r+1));const i=Hl(Zw).applyPatches_;return Ps(e)?i(e,n):this.produce(e,o=>i(o,n))}};function r_(t,e,n,r){const[i,o]=Lv(e)?Hl(ag).proxyMap_(e,n):jv(e)?Hl(ag).proxySet_(e,n):Mie(e,n);return((n==null?void 0:n.scope_)??q5()).drafts_.push(i),o.callbacks_=(n==null?void 0:n.callbacks_)??[],o.key_=r,n&&r!==void 0?kie(n,o,r):o.callbacks_.push(function(c){var f;(f=c.mapSetPlugin_)==null||f.fixSetContents(o);const{patchPlugin_:u}=c;o.modified_&&u&&u.generatePatches_(o,[],c)}),i}function Yi(t){return Ps(t)||ji(10,t),Y5(t)}function Y5(t){if(!eo(t)||Fv(t))return t;const e=t[gr];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Xw(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=Xw(t,!0);return Dv(n,(i,o)=>{sg(n,i,Y5(o))},r),e&&(e.finalized_=!1),n}var Lie=new Oie,J5=Lie.produce;function Q5(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var jie=Q5(),Fie=Q5,Uie=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?rg:rg.apply(null,arguments)};function _i(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Jr(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>V5(r)&&r.type===t,n}var X5=class cf extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,cf.prototype)}static get[Symbol.species](){return cf}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new cf(...e[0].concat(this)):new cf(...e.concat(this))}};function o2(t){return eo(t)?J5(t,()=>{}):t}function Gp(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Vie(t){return typeof t=="boolean"}var $ie=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let s=new X5;return n&&(Vie(n)?s.push(jie):s.push(Fie(n.extraArgument))),s},Z5="RTK_autoBatch",qt=()=>t=>({payload:t,meta:{[Z5]:!0}}),s2=t=>e=>{setTimeout(e,t)},e6=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,s=!1;const a=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:s2(10):t.type==="callback"?t.queueNotification:s2(t.timeout),u=()=>{s=!1,o&&(o=!1,a.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const p=()=>i&&f(),v=r.subscribe(p);return a.add(f),()=>{v(),a.delete(f)}},dispatch(f){var p;try{return i=!((p=f==null?void 0:f.meta)!=null&&p[Z5]),o=!i,o&&(s||(s=!0,c(u))),r.dispatch(f)}finally{i=!0}}})},Bie=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new X5(t);return r&&i.push(e6(typeof r=="object"?r:void 0)),i};function zie(t){const e=$ie(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(_S(n))a=U5(n);else throw new Error(Jr(1));let c;typeof r=="function"?c=r(e):c=e();let u=rg;i&&(u=Uie({trace:!1,...typeof i=="object"&&i}));const f=_ie(...c),p=Bie(f);let v=typeof s=="function"?s(p):p();const w=u(...v);return F5(a,o,w)}function t6(t){const e={},n=[];let r;const i={addCase(o,s){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(Jr(28));if(a in e)throw new Error(Jr(29));return e[a]=s,i},addAsyncThunk(o,s){return s.pending&&(e[o.pending.type]=s.pending),s.rejected&&(e[o.rejected.type]=s.rejected),s.fulfilled&&(e[o.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:o.settled,reducer:s.settled}),i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function qie(t){return typeof t=="function"}function Gie(t,e){let[n,r,i]=t6(e),o;if(qie(t))o=()=>o2(t());else{const a=o2(t);o=()=>a}function s(a=o(),c){let u=[n[c.type],...r.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,p)=>{if(p)if(Ps(f)){const w=p(f,c);return w===void 0?f:w}else{if(eo(f))return J5(f,v=>p(v,c));{const v=p(f,c);if(v===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return f},a)}return s.getInitialState=o,s}var Hie="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Wie=(t=21)=>{let e="",n=t;for(;n--;)e+=Hie[Math.random()*64|0];return e},Kie=Symbol.for("rtk-slice-createasyncthunk");function Yie(t,e){return`${t}/${e}`}function Jie({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Kie];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(Jr(11));const a=(typeof i.reducers=="function"?i.reducers(Xie()):i.reducers)||{},c=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(q,V){const $=typeof q=="string"?q:q.type;if(!$)throw new Error(Jr(12));if($ in u.sliceCaseReducersByType)throw new Error(Jr(13));return u.sliceCaseReducersByType[$]=V,f},addMatcher(q,V){return u.sliceMatchers.push({matcher:q,reducer:V}),f},exposeAction(q,V){return u.actionCreators[q]=V,f},exposeCaseReducer(q,V){return u.sliceCaseReducersByName[q]=V,f}};c.forEach(q=>{const V=a[q],$={reducerName:q,type:Yie(o,q),createNotation:typeof i.reducers=="function"};eoe(V)?noe($,V,f,e):Zie($,V,f)});function p(){const[q={},V=[],$=void 0]=typeof i.extraReducers=="function"?t6(i.extraReducers):[i.extraReducers],k={...q,...u.sliceCaseReducersByType};return Gie(i.initialState,D=>{for(let O in k)D.addCase(O,k[O]);for(let O of u.sliceMatchers)D.addMatcher(O.matcher,O.reducer);for(let O of V)D.addMatcher(O.matcher,O.reducer);$&&D.addDefaultCase($)})}const v=q=>q,w=new Map,E=new WeakMap;let S;function _(q,V){return S||(S=p()),S(q,V)}function N(){return S||(S=p()),S.getInitialState()}function j(q,V=!1){function $(D){let O=D[q];return typeof O>"u"&&V&&(O=Gp(E,$,N)),O}function k(D=v){const O=Gp(w,V,()=>new WeakMap);return Gp(O,D,()=>{const z={};for(const[U,M]of Object.entries(i.selectors??{}))z[U]=Qie(M,D,()=>Gp(E,D,N),V);return z})}return{reducerPath:q,getSelectors:k,get selectors(){return k($)},selectSlice:$}}const F={name:o,reducer:_,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:N,...j(s),injectInto(q,{reducerPath:V,...$}={}){const k=V??s;return q.inject({reducerPath:k,reducer:_},$),{...F,...j(k,!0)}}};return F}}function Qie(t,e,n,r){function i(o,...s){let a=e(o);return typeof a>"u"&&r&&(a=n()),t(a,...s)}return i.unwrapped=t,i}var Rr=Jie();function Xie(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Zie({type:t,reducerName:e,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!toe(r))throw new Error(Jr(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,s?_i(t,s):_i(t))}function eoe(t){return t._reducerDefinitionType==="asyncThunk"}function toe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function noe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Jr(18));const{payloadCreator:o,fulfilled:s,pending:a,rejected:c,settled:u,options:f}=n,p=i(t,o,f);r.exposeAction(e,p),s&&r.addCase(p.fulfilled,s),a&&r.addCase(p.pending,a),c&&r.addCase(p.rejected,c),u&&r.addMatcher(p.settled,u),r.exposeCaseReducer(e,{fulfilled:s||Hp,pending:a||Hp,rejected:c||Hp,settled:u||Hp})}function Hp(){}var roe="task",n6="listener",r6="completed",AS="cancelled",ioe=`task-${AS}`,ooe=`task-${r6}`,i_=`${n6}-${AS}`,soe=`${n6}-${r6}`,Vv=class{constructor(t){Oi(this,"name","TaskAbortError");Oi(this,"message");this.code=t,this.message=`${roe} ${AS} (reason: ${t})`}},CS=(t,e)=>{if(typeof t!="function")throw new TypeError(Jr(32))},ug=()=>{},i6=(t,e=ug)=>(t.catch(e),t),o6=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Dl=t=>{if(t.aborted)throw new Vv(t.reason)};function s6(t,e){let n=ug;return new Promise((r,i)=>{const o=()=>i(new Vv(t.reason));if(t.aborted){o();return}n=o6(t,o),e.finally(()=>n()).then(r,i)}).finally(()=>{n=ug})}var aoe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof Vv?"cancelled":"rejected",error:n}}finally{e==null||e()}},dg=t=>e=>i6(s6(t,e).then(n=>(Dl(t),n))),a6=t=>{const e=dg(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:bu}=Object,a2={},$v="listenerMiddleware",loe=(t,e)=>{const n=r=>o6(t,()=>r.abort(t.reason));return(r,i)=>{CS(r);const o=new AbortController;n(o);const s=aoe(async()=>{Dl(t),Dl(o.signal);const a=await r({pause:dg(o.signal),delay:a6(o.signal),signal:o.signal});return Dl(o.signal),a},()=>o.abort(ooe));return i!=null&&i.autoJoin&&e.push(s.catch(ug)),{result:dg(t)(s),cancel(){o.abort(ioe)}}}},coe=(t,e)=>{const n=async(r,i)=>{Dl(e);let o=()=>{};const a=[new Promise((c,u)=>{let f=t({predicate:r,effect:(p,v)=>{v.unsubscribe(),c([p,v.getState(),v.getOriginalState()])}});o=()=>{f(),u()}})];i!=null&&a.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await s6(e,Promise.race(a));return Dl(e),c}finally{o()}};return(r,i)=>i6(n(r,i))},l6=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:o}=t;if(e)i=_i(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Jr(21));return CS(o),{predicate:i,type:e,effect:o}},c6=bu(t=>{const{type:e,predicate:n,effect:r}=l6(t);return{id:Wie(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Jr(22))}}},{withTypes:()=>c6}),l2=(t,e)=>{const{type:n,effect:r,predicate:i}=l6(e);return Array.from(t.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},o_=t=>{t.pending.forEach(e=>{e.abort(i_)})},uoe=(t,e)=>()=>{for(const n of e.keys())o_(n);t.clear()},c2=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},u6=bu(_i(`${$v}/add`),{withTypes:()=>u6}),doe=_i(`${$v}/removeAll`),d6=bu(_i(`${$v}/remove`),{withTypes:()=>d6}),foe=(...t)=>{console.error(`${$v}/error`,...t)},ah=(t={})=>{const e=new Map,n=new Map,r=w=>{const E=n.get(w)??0;n.set(w,E+1)},i=w=>{const E=n.get(w)??1;E===1?n.delete(w):n.set(w,E-1)},{extra:o,onError:s=foe}=t;CS(s);const a=w=>(w.unsubscribe=()=>e.delete(w.id),e.set(w.id,w),E=>{w.unsubscribe(),E!=null&&E.cancelActive&&o_(w)}),c=w=>{const E=l2(e,w)??c6(w);return a(E)};bu(c,{withTypes:()=>c});const u=w=>{const E=l2(e,w);return E&&(E.unsubscribe(),w.cancelActive&&o_(E)),!!E};bu(u,{withTypes:()=>u});const f=async(w,E,S,_)=>{const N=new AbortController,j=coe(c,N.signal),F=[];try{w.pending.add(N),r(w),await Promise.resolve(w.effect(E,bu({},S,{getOriginalState:_,condition:(q,V)=>j(q,V).then(Boolean),take:j,delay:a6(N.signal),pause:dg(N.signal),extra:o,signal:N.signal,fork:loe(N.signal,F),unsubscribe:w.unsubscribe,subscribe:()=>{e.set(w.id,w)},cancelActiveListeners:()=>{w.pending.forEach((q,V,$)=>{q!==N&&(q.abort(i_),$.delete(q))})},cancel:()=>{N.abort(i_),w.pending.delete(N)},throwIfCancelled:()=>{Dl(N.signal)}})))}catch(q){q instanceof Vv||c2(s,q,{raisedBy:"effect"})}finally{await Promise.all(F),N.abort(soe),i(w),w.pending.delete(N)}},p=uoe(e,n);return{middleware:w=>E=>S=>{if(!V5(S))return E(S);if(u6.match(S))return c(S.payload);if(doe.match(S)){p();return}if(d6.match(S))return u(S.payload);let _=w.getState();const N=()=>{if(_===a2)throw new Error(Jr(23));return _};let j;try{if(j=E(S),e.size>0){const F=w.getState(),q=Array.from(e.values());for(const V of q){let $=!1;try{$=V.predicate(S,F,_)}catch(k){$=!1,c2(s,k,{raisedBy:"predicate"})}$&&f(V,S,w,N)}}}finally{_=a2}return j},startListening:c,stopListening:u,clearListeners:p}};function Jr(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var hoe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},f6=Rr({name:"chartLayout",initialState:hoe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,o;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(o=e.payload.left)!==null&&o!==void 0?o:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:poe,setLayout:moe,setChartSize:goe,setScale:voe}=f6.actions,yoe=f6.reducer;function h6(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function fn(t){return Number.isFinite(t)}function qo(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function u2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function su(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u2(Object(n),!0).forEach(function(r){xoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xoe(t,e,n){return(e=boe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function boe(t){var e=woe(t,"string");return typeof e=="symbol"?e:e+""}function woe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qn(t,e,n){return Nn(t)||Nn(e)?n:zo(e)?kv(t,e,n):typeof e=="function"?e(t):n}var _oe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:o,verticalAlign:s,layout:a}=e;if((a==="vertical"||a==="horizontal"&&s==="middle")&&o!=="center"&&We(t[o]))return su(su({},t),{},{[o]:t[o]+(r||0)});if((a==="horizontal"||a==="vertical"&&o==="center")&&s!=="middle"&&We(t[s]))return su(su({},t),{},{[s]:t[s]+(i||0)})}return t},qa=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",p6=(t,e,n,r)=>{if(r)return t.map(a=>a.coordinate);var i,o,s=t.map(a=>(a.coordinate===e&&(i=!0),a.coordinate===n&&(o=!0),a.coordinate));return i||s.push(e),o||s.push(n),s},m6=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:o,scale:s,realScaleType:a,isCategorical:c,categoricalDomain:u,tickCount:f,ticks:p,niceTicks:v,axisType:w}=t;if(!s)return null;var E=a==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,S=i==="category"&&s.bandwidth?s.bandwidth()/E:0;if(S=w==="angleAxis"&&o&&o.length>=2?mi(o[0]-o[1])*2*S:S,p||v){var _=(p||v||[]).map((N,j)=>{var F=r?r.indexOf(N):N;return{coordinate:s(F)+S,value:N,offset:S,index:j}});return _.filter(N=>!Bo(N.coordinate))}return c&&u?u.map((N,j)=>({coordinate:s(N)+S,value:N,index:j,offset:S})):s.ticks&&f!=null?s.ticks(f).map((N,j)=>({coordinate:s(N)+S,value:N,offset:S,index:j})):s.domain().map((N,j)=>({coordinate:s(N)+S,value:r?r[N]:N,index:j,offset:S}))},d2=1e-4,Eoe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-d2,o=Math.max(r[0],r[1])+d2,s=t(e[0]),a=t(e[n-1]);(s<i||s>o||a<i||a>o)&&t.domain([e[0],e[n-1]])}},Soe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var o=0,s=0,a=0;a<n;++a){var c=t[a],u=c==null?void 0:c[i];if(u!=null){var f=u[1],p=u[0],v=Bo(f)?p:f;v>=0?(u[0]=o,u[1]=o+v,o=f):(u[0]=s,u[1]=s+v,s=f)}}}},Toe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var o=0,s=0;s<n;++s){var a=t[s],c=a==null?void 0:a[i];if(c!=null){var u=Bo(c[1])?c[0]:c[1];u>=0?(c[0]=o,c[1]=o+u,o=c[1]):(c[0]=0,c[1]=0)}}}},Aoe={sign:Soe,expand:Gne,none:Gl,silhouette:Hne,wiggle:Wne,positive:Toe},Coe=(t,e,n)=>{var r,i=(r=Aoe[n])!==null&&r!==void 0?r:Gl,o=qne().keys(e).value((a,c)=>Number(qn(a,c,0))).order(Kw).offset(i),s=o(t);return s.forEach((a,c)=>{a.forEach((u,f)=>{var p=qn(t[f],e[c],0);Array.isArray(p)&&p.length===2&&We(p[0])&&We(p[1])&&(u[0]=p[0],u[1]=p[1])})}),s};function f2(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:o,dataKey:s}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Nn(i[e.dataKey])){var a=b5(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var c=qn(i,Nn(s)?e.dataKey:s);return Nn(c)?null:e.scale(c)}var Ioe=t=>{var e=t.flat(2).filter(We);return[Math.min(...e),Math.max(...e)]},Poe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Noe=(t,e,n)=>{if(t!=null)return Poe(Object.keys(t).reduce((r,i)=>{var o=t[i];if(!o)return r;var{stackedData:s}=o,a=s.reduce((c,u)=>{var f=h6(u,e,n),p=Ioe(f);return!fn(p[0])||!fn(p[1])?c:[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]},[1/0,-1/0]))},h2=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,p2=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fg=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=Rv(e,f=>f.coordinate),o=1/0,s=1,a=i.length;s<a;s++){var c=i[s],u=i[s-1];o=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),o)}return o===1/0?0:o}return n?void 0:0};function m2(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:o}=t;return su(su({},e),{},{dataKey:n,payload:r,value:i,name:o})}function g6(t,e){if(t)return String(t);if(typeof e=="string")return e}var koe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},Roe=(t,e)=>e==="centric"?t.angle:t.radius,js=t=>t.layout.width,Fs=t=>t.layout.height,Moe=t=>t.layout.scale,v6=t=>t.layout.margin,Bv=se(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),zv=se(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Doe="data-recharts-item-index",Ooe="data-recharts-item-id",lh=60;function g2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g2(Object(n),!0).forEach(function(r){Loe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Loe(t,e,n){return(e=joe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function joe(t){var e=Foe(t,"string");return typeof e=="symbol"?e:e+""}function Foe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uoe=t=>t.brush.height;function Voe(t){var e=zv(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:lh;return n+i}return n},0)}function $oe(t){var e=zv(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:lh;return n+i}return n},0)}function Boe(t){var e=Bv(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function zoe(t){var e=Bv(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Hn=se([js,Fs,v6,Uoe,Voe,$oe,Boe,zoe,L5,mie],(t,e,n,r,i,o,s,a,c,u)=>{var f={left:(n.left||0)+i,right:(n.right||0)+o},p={top:(n.top||0)+s,bottom:(n.bottom||0)+a},v=Wp(Wp({},p),f),w=v.bottom;v.bottom+=r,v=_oe(v,c,u);var E=t-v.left-v.right,S=e-v.top-v.bottom;return Wp(Wp({brushBottom:w},v),{},{width:Math.max(E,0),height:Math.max(S,0)})}),qoe=se(Hn,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),y6=se(js,Fs,(t,e)=>({x:0,y:0,width:t,height:e})),Goe=I.createContext(null),Mr=()=>I.useContext(Goe)!=null,qv=t=>t.brush,Gv=se([qv,Hn,v6],(t,e,n)=>({height:t.height,x:We(t.x)?t.x:e.left,y:We(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:We(t.width)?t.width:e.width})),fb={},hb={},pb={},v2;function Hoe(){return v2||(v2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:o}={}){let s,a=null;const c=o!=null&&o.includes("leading"),u=o==null||o.includes("trailing"),f=()=>{a!==null&&(n.apply(s,a),s=void 0,a=null)},p=()=>{u&&f(),S()};let v=null;const w=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,p()},r)},E=()=>{v!==null&&(clearTimeout(v),v=null)},S=()=>{E(),s=void 0,a=null},_=()=>{f()},N=function(...j){if(i!=null&&i.aborted)return;s=this,a=j;const F=v==null;w(),c&&F&&f()};return N.schedule=w,N.cancel=S,N.flush=_,i==null||i.addEventListener("abort",S,{once:!0}),N}t.debounce=e})(pb)),pb}var y2;function Woe(){return y2||(y2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hoe();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:s=!1,trailing:a=!0,maxWait:c}=o,u=Array(2);s&&(u[0]="leading"),a&&(u[1]="trailing");let f,p=null;const v=e.debounce(function(...S){f=r.apply(this,S),p=null},i,{edges:u}),w=function(...S){return c!=null&&(p===null&&(p=Date.now()),Date.now()-p>=c)?(f=r.apply(this,S),p=Date.now(),v.cancel(),v.schedule(),f):(v.apply(this,S),f)},E=()=>(v.flush(),f);return w.cancel=v.cancel,w.flush=E,w}t.debounce=n})(hb)),hb}var x2;function Koe(){return x2||(x2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Woe();function n(r,i=0,o={}){const{leading:s=!0,trailing:a=!0}=o;return e.debounce(r,i,{leading:s,maxWait:i,trailing:a})}t.throttle=n})(fb)),fb}var mb,b2;function Yoe(){return b2||(b2=1,mb=Koe().throttle),mb}var Joe=Yoe();const Qoe=Xr(Joe);var hg=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>i[s++]))}},x6=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:o,maxHeight:s}=n,a=Is(r)?t:Number(r),c=Is(i)?e:Number(i);return o&&o>0&&(a?c=a/o:c&&(a=c*o),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:a,calculatedHeight:c}},Xoe={width:0,height:0,overflow:"visible"},Zoe={width:0,overflowX:"visible"},ese={height:0,overflowY:"visible"},tse={},nse=t=>{var{width:e,height:n}=t,r=Is(e),i=Is(n);return r&&i?Xoe:r?Zoe:i?ese:tse};function rse(t){var{width:e,height:n,aspect:r}=t,i=e,o=n;return i===void 0&&o===void 0?(i="100%",o="100%"):i===void 0?i=r&&r>0?void 0:"100%":o===void 0&&(o=r&&r>0?void 0:"100%"),{width:i,height:o}}function s_(){return s_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s_.apply(null,arguments)}function w2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w2(Object(n),!0).forEach(function(r){ise(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ise(t,e,n){return(e=ose(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ose(t){var e=sse(t,"string");return typeof e=="symbol"?e:e+""}function sse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var b6=I.createContext({width:-1,height:-1});function ase(t){return qo(t.width)&&qo(t.height)}function w6(t){var{children:e,width:n,height:r}=t,i=I.useMemo(()=>({width:n,height:r}),[n,r]);return ase(i)?I.createElement(b6.Provider,{value:i},e):null}var IS=()=>I.useContext(b6),lse=I.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:o,minWidth:s=0,minHeight:a,maxHeight:c,children:u,debounce:f=0,id:p,className:v,onResize:w,style:E={}}=t,S=I.useRef(null),_=I.useRef();_.current=w,I.useImperativeHandle(e,()=>S.current);var[N,j]=I.useState({containerWidth:r.width,containerHeight:r.height}),F=I.useCallback((D,O)=>{j(z=>{var U=Math.round(D),M=Math.round(O);return z.containerWidth===U&&z.containerHeight===M?z:{containerWidth:U,containerHeight:M}})},[]);I.useEffect(()=>{if(S.current==null||typeof ResizeObserver>"u")return oh;var D=M=>{var P,{width:me,height:ce}=M[0].contentRect;F(me,ce),(P=_.current)===null||P===void 0||P.call(_,me,ce)};f>0&&(D=Qoe(D,f,{trailing:!0,leading:!1}));var O=new ResizeObserver(D),{width:z,height:U}=S.current.getBoundingClientRect();return F(z,U),O.observe(S.current),()=>{O.disconnect()}},[F,f]);var{containerWidth:q,containerHeight:V}=N;hg(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:$,calculatedHeight:k}=x6(q,V,{width:i,height:o,aspect:n,maxHeight:c});return hg($!=null&&$>0||k!=null&&k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,$,k,i,o,s,a,n),I.createElement("div",{id:p?"".concat(p):void 0,className:Pt("recharts-responsive-container",v),style:_2(_2({},E),{},{width:i,height:o,minWidth:s,minHeight:a,maxHeight:c}),ref:S},I.createElement("div",{style:nse({width:i,height:o})},I.createElement(w6,{width:$,height:k},u)))}),cse=I.forwardRef((t,e)=>{var n=IS();if(qo(n.width)&&qo(n.height))return t.children;var{width:r,height:i}=rse({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:o,calculatedHeight:s}=x6(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return We(o)&&We(s)?I.createElement(w6,{width:o,height:s},t.children):I.createElement(lse,s_({},t,{width:r,height:i,ref:e}))});function _6(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var Hv=()=>{var t,e=Mr(),n=Qe(qoe),r=Qe(Gv),i=(t=Qe(qv))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},use={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},E6=()=>{var t;return(t=Qe(Hn))!==null&&t!==void 0?t:use},PS=()=>Qe(js),NS=()=>Qe(Fs),dse=()=>Qe(t=>t.layout.margin),$t=t=>t.layout.layoutType,ch=()=>Qe($t),fse=()=>{var t=ch();return t!==void 0},Wv=t=>{var e=hn(),n=Mr(),{width:r,height:i}=t,o=IS(),s=r,a=i;return o&&(s=o.width>0?o.width:r,a=o.height>0?o.height:i),I.useEffect(()=>{!n&&qo(s)&&qo(a)&&e(goe({width:s,height:a}))},[e,n,s,a]),null},S6=Symbol.for("immer-nothing"),E2=Symbol.for("immer-draftable"),Qr=Symbol.for("immer-state");function Fi(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Df=Object.getPrototypeOf;function ku(t){return!!t&&!!t[Qr]}function Wl(t){var e;return t?T6(t)||Array.isArray(t)||!!t[E2]||!!((e=t.constructor)!=null&&e[E2])||uh(t)||Yv(t):!1}var hse=Object.prototype.constructor.toString(),S2=new WeakMap;function T6(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=S2.get(n);return r===void 0&&(r=Function.toString.call(n),S2.set(n,r)),r===hse}function pg(t,e,n=!0){Kv(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function Kv(t){const e=t[Qr];return e?e.type_:Array.isArray(t)?1:uh(t)?2:Yv(t)?3:0}function a_(t,e){return Kv(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function A6(t,e,n){const r=Kv(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function pse(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function uh(t){return t instanceof Map}function Yv(t){return t instanceof Set}function _l(t){return t.copy_||t.base_}function l_(t,e){if(uh(t))return new Map(t);if(Yv(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=T6(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Qr];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[s]})}return Object.create(Df(t),r)}else{const r=Df(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function kS(t,e=!1){return Jv(t)||ku(t)||!Wl(t)||(Kv(t)>1&&Object.defineProperties(t,{set:Kp,add:Kp,clear:Kp,delete:Kp}),Object.freeze(t),e&&Object.values(t).forEach(n=>kS(n,!0))),t}function mse(){Fi(2)}var Kp={value:mse};function Jv(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var gse={};function Kl(t){const e=gse[t];return e||Fi(0,t),e}var Of;function C6(){return Of}function vse(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function T2(t,e){e&&(Kl("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function c_(t){u_(t),t.drafts_.forEach(yse),t.drafts_=null}function u_(t){t===Of&&(Of=t.parent_)}function A2(t){return Of=vse(Of,t)}function yse(t){const e=t[Qr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function C2(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Qr].modified_&&(c_(e),Fi(4)),Wl(t)&&(t=mg(e,t),e.parent_||gg(e,t)),e.patches_&&Kl("Patches").generateReplacementPatches_(n[Qr].base_,t,e.patches_,e.inversePatches_)):t=mg(e,n,[]),c_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==S6?t:void 0}function mg(t,e,n){if(Jv(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[Qr];if(!i)return pg(e,(o,s)=>I2(t,i,e,o,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return gg(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let s=o,a=!1;i.type_===3&&(s=new Set(o),o.clear(),a=!0),pg(s,(c,u)=>I2(t,i,o,c,u,n,a),r),gg(t,o,!1),n&&t.patches_&&Kl("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function I2(t,e,n,r,i,o,s){if(i==null||typeof i!="object"&&!s)return;const a=Jv(i);if(!(a&&!s)){if(ku(i)){const c=o&&e&&e.type_!==3&&!a_(e.assigned_,r)?o.concat(r):void 0,u=mg(t,i,c);if(A6(n,r,u),ku(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Wl(i)&&!a){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&a)return;mg(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(uh(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&gg(t,i)}}}function gg(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&kS(e,n)}function xse(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:C6(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=RS;n&&(i=[r],o=Lf);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var RS={get(t,e){if(e===Qr)return t;const n=_l(t);if(!a_(n,e))return bse(t,n,e);const r=n[e];return t.finalized_||!Wl(r)?r:r===gb(t.base_,e)?(vb(t),t.copy_[e]=f_(r,t)):r},has(t,e){return e in _l(t)},ownKeys(t){return Reflect.ownKeys(_l(t))},set(t,e,n){const r=I6(_l(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=gb(_l(t),e),o=i==null?void 0:i[Qr];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(pse(n,i)&&(n!==void 0||a_(t.base_,e)))return!0;vb(t),d_(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return gb(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,vb(t),d_(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=_l(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Fi(11)},getPrototypeOf(t){return Df(t.base_)},setPrototypeOf(){Fi(12)}},Lf={};pg(RS,(t,e)=>{Lf[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Lf.deleteProperty=function(t,e){return Lf.set.call(this,t,e,void 0)};Lf.set=function(t,e,n){return RS.set.call(this,t[0],e,n,t[0])};function gb(t,e){const n=t[Qr];return(n?_l(n):t)[e]}function bse(t,e,n){var i;const r=I6(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function I6(t,e){if(!(e in t))return;let n=Df(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Df(n)}}function d_(t){t.modified_||(t.modified_=!0,t.parent_&&d_(t.parent_))}function vb(t){t.copy_||(t.copy_=l_(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var wse=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(c=o,...u){return s.produce(c,f=>n.call(this,f,...u))}}typeof n!="function"&&Fi(6),r!==void 0&&typeof r!="function"&&Fi(7);let i;if(Wl(e)){const o=A2(this),s=f_(e,void 0);let a=!0;try{i=n(s),a=!1}finally{a?c_(o):u_(o)}return T2(o,r),C2(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===S6&&(i=void 0),this.autoFreeze_&&kS(i,!0),r){const o=[],s=[];Kl("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else Fi(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...a)=>this.produceWithPatches(s,c=>e(c,...a));let r,i;return[this.produce(e,n,(s,a)=>{r=s,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Wl(t)||Fi(8),ku(t)&&(t=_se(t));const e=A2(this),n=f_(t,void 0);return n[Qr].isManual_=!0,u_(e),n}finishDraft(t,e){const n=t&&t[Qr];(!n||!n.isManual_)&&Fi(9);const{scope_:r}=n;return T2(r,e),C2(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Kl("Patches").applyPatches_;return ku(t)?r(t,e):this.produce(t,i=>r(i,e))}};function f_(t,e){const n=uh(t)?Kl("MapSet").proxyMap_(t,e):Yv(t)?Kl("MapSet").proxySet_(t,e):xse(t,e);return(e?e.scope_:C6()).drafts_.push(n),n}function _se(t){return ku(t)||Fi(10,t),P6(t)}function P6(t){if(!Wl(t)||Jv(t))return t;const e=t[Qr];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=l_(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=l_(t,!0);return pg(n,(i,o)=>{A6(n,i,P6(o))},r),e&&(e.finalized_=!1),n}var Ese=new wse;Ese.produce;var Sse={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},N6=Rr({name:"legend",initialState:Sse,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:qt()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Yi(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:qt()},removeLegendPayload:{reducer(t,e){var n=Yi(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:qt()}}}),{setLegendSize:P2,setLegendSettings:Tse,addLegendPayload:Ase,replaceLegendPayload:Cse,removeLegendPayload:Ise}=N6.actions,Pse=N6.reducer,Nse=["contextPayload"];function h_(){return h_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h_.apply(null,arguments)}function N2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ru(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N2(Object(n),!0).forEach(function(r){kse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kse(t,e,n){return(e=Rse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rse(t){var e=Mse(t,"string");return typeof e=="symbol"?e:e+""}function Mse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dse(t,e){if(t==null)return{};var n,r,i=Ose(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ose(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Lse(t){return t.value}function jse(t){var{contextPayload:e}=t,n=Dse(t,Nse),r=R5(e,t.payloadUniqBy,Lse),i=Ru(Ru({},n),{},{payload:r});return I.isValidElement(t.content)?I.cloneElement(t.content,i):typeof t.content=="function"?I.createElement(t.content,i):I.createElement(Ere,i)}function Fse(t,e,n,r,i,o){var{layout:s,align:a,verticalAlign:c}=e,u,f;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(a==="center"&&s==="vertical"?u={left:((r||0)-o.width)/2}:u=a==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?f={top:((i||0)-o.height)/2}:f=c==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Ru(Ru({},u),f)}function Use(t){var e=hn();return I.useEffect(()=>{e(Tse(t))},[e,t]),null}function Vse(t){var e=hn();return I.useEffect(()=>(e(P2(t)),()=>{e(P2({width:0,height:0}))}),[e,t]),null}function $se(t,e,n,r){return t==="vertical"&&We(e)?{height:e}:t==="horizontal"?{width:n||r}:null}var Bse={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function k6(t){var e=sr(t,Bse),n=yie(),r=pne(),i=dse(),{width:o,height:s,wrapperStyle:a,portal:c}=e,[u,f]=j5([n]),p=PS(),v=NS();if(p==null||v==null)return null;var w=p-((i==null?void 0:i.left)||0)-((i==null?void 0:i.right)||0),E=$se(e.layout,s,o,w),S=c?a:Ru(Ru({position:"absolute",width:(E==null?void 0:E.width)||o||"auto",height:(E==null?void 0:E.height)||s||"auto"},Fse(a,e,i,p,v,u)),a),_=c??r;if(_==null||n==null)return null;var N=I.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:f},I.createElement(Use,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&I.createElement(Vse,{width:u.width,height:u.height}),I.createElement(jse,h_({},e,E,{margin:i,chartWidth:p,chartHeight:v,contextPayload:n})));return z_.createPortal(N,_)}k6.displayName="Legend";function p_(){return p_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p_.apply(null,arguments)}function k2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k2(Object(n),!0).forEach(function(r){zse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zse(t,e,n){return(e=qse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qse(t){var e=Gse(t,"string");return typeof e=="symbol"?e:e+""}function Gse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hse(t){return Array.isArray(t)&&zo(t[0])&&zo(t[1])?t.join(" ~ "):t}var Wse=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:s,itemSorter:a,wrapperClassName:c,labelClassName:u,label:f,labelFormatter:p,accessibilityLayer:v=!1}=t,w=()=>{if(o&&o.length){var V={padding:0,margin:0},$=(a?Rv(o,a):o).map((k,D)=>{if(k.type==="none")return null;var O=k.formatter||s||Hse,{value:z,name:U}=k,M=z,P=U;if(O){var me=O(z,U,k,D,o);if(Array.isArray(me))[M,P]=me;else if(me!=null)M=me;else return null}var ce=yb({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},r);return I.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:ce},zo(P)?I.createElement("span",{className:"recharts-tooltip-item-name"},P):null,zo(P)?I.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,I.createElement("span",{className:"recharts-tooltip-item-value"},M),I.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return I.createElement("ul",{className:"recharts-tooltip-item-list",style:V},$)}return null},E=yb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),S=yb({margin:0},i),_=!Nn(f),N=_?f:"",j=Pt("recharts-default-tooltip",c),F=Pt("recharts-tooltip-label",u);_&&p&&o!==void 0&&o!==null&&(N=p(f,o));var q=v?{role:"status","aria-live":"assertive"}:{};return I.createElement("div",p_({className:j,style:E},q),I.createElement("p",{className:F,style:S},I.isValidElement(N)?N:"".concat(N)),w())},Wd="recharts-tooltip-wrapper",Kse={visibility:"hidden"};function Yse(t){var{coordinate:e,translateX:n,translateY:r}=t;return Pt(Wd,{["".concat(Wd,"-right")]:We(n)&&e&&We(e.x)&&n>=e.x,["".concat(Wd,"-left")]:We(n)&&e&&We(e.x)&&n<e.x,["".concat(Wd,"-bottom")]:We(r)&&e&&We(e.y)&&r>=e.y,["".concat(Wd,"-top")]:We(r)&&e&&We(e.y)&&r<e.y})}function R2(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:s,tooltipDimension:a,viewBox:c,viewBoxDimension:u}=t;if(o&&We(o[r]))return o[r];var f=n[r]-a-(i>0?i:0),p=n[r]+i;if(e[r])return s[r]?f:p;var v=c[r];if(v==null)return 0;if(s[r]){var w=f,E=v;return w<E?Math.max(p,v):Math.max(f,v)}if(u==null)return 0;var S=p+a,_=v+u;return S>_?Math.max(f,v):Math.max(p,v)}function Jse(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Qse(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:s,useTranslate3d:a,viewBox:c}=t,u,f,p;return s.height>0&&s.width>0&&n?(f=R2({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),p=R2({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=Jse({translateX:f,translateY:p,useTranslate3d:a})):u=Kse,{cssProperties:u,cssClasses:Yse({translateX:f,translateY:p,coordinate:n})}}function M2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M2(Object(n),!0).forEach(function(r){m_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m_(t,e,n){return(e=Xse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xse(t){var e=Zse(t,"string");return typeof e=="symbol"?e:e+""}function Zse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class eae extends I.PureComponent{constructor(){super(...arguments),m_(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),m_(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:s,hasPayload:a,isAnimationActive:c,offset:u,position:f,reverseDirection:p,useTranslate3d:v,viewBox:w,wrapperStyle:E,lastBoundingBox:S,innerRef:_,hasPortalFromProps:N}=this.props,{cssClasses:j,cssProperties:F}=Qse({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:u,position:f,reverseDirection:p,tooltipBox:{height:S.height,width:S.width},useTranslate3d:v,viewBox:w}),q=N?{}:Yp(Yp({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},F),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),V=Yp(Yp({},q),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},E);return I.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:j,style:V,ref:_},o)}}var R6=()=>{var t;return(t=Qe(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function g_(){return g_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g_.apply(null,arguments)}function D2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D2(Object(n),!0).forEach(function(r){tae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tae(t,e,n){return(e=nae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nae(t){var e=rae(t,"string");return typeof e=="symbol"?e:e+""}function rae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var L2={curveBasisClosed:Mne,curveBasisOpen:Dne,curveBasis:Rne,curveBumpX:yne,curveBumpY:xne,curveLinearClosed:One,curveLinear:Pv,curveMonotoneX:Lne,curveMonotoneY:jne,curveNatural:Fne,curveStep:Une,curveStepAfter:$ne,curveStepBefore:Vne},vg=t=>fn(t.x)&&fn(t.y),j2=t=>t.base!=null&&vg(t.base)&&vg(t),Kd=t=>t.x,Yd=t=>t.y,iae=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(ih(t));return(n==="curveMonotone"||n==="curveBump")&&e?L2["".concat(n).concat(e==="vertical"?"Y":"X")]:L2[n]||Pv},oae=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=t,s=iae(e,i),a=o?n.filter(vg):n,c;if(Array.isArray(r)){var u=n.map((w,E)=>O2(O2({},w),{},{base:r[E]}));i==="vertical"?c=$p().y(Yd).x1(Kd).x0(w=>w.base.x):c=$p().x(Kd).y1(Yd).y0(w=>w.base.y);var f=c.defined(j2).curve(s),p=o?u.filter(j2):u;return f(p)}i==="vertical"&&We(r)?c=$p().y(Yd).x1(Kd).x0(r):We(r)?c=$p().x(Kd).y1(Yd).y0(r):c=a5().x(Kd).y(Yd);var v=c.defined(vg).curve(s);return v(a)},M6=t=>{var{className:e,points:n,path:r,pathRef:i}=t,o=ch();if((!n||!n.length)&&!r)return null;var s={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||o,connectNulls:t.connectNulls},a=n&&n.length?oae(s):r;return I.createElement("path",g_({},$o(t),yS(t),{className:Pt("recharts-curve",e),d:a===null?void 0:a,ref:i}))},sae=["x","y","top","left","width","height","className"];function v_(){return v_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v_.apply(null,arguments)}function F2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F2(Object(n),!0).forEach(function(r){lae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lae(t,e,n){return(e=cae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cae(t){var e=uae(t,"string");return typeof e=="symbol"?e:e+""}function uae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dae(t,e){if(t==null)return{};var n,r,i=fae(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function fae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var hae=(t,e,n,r,i,o)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(o,",").concat(e,"h").concat(n),pae=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:o=0,height:s=0,className:a}=t,c=dae(t,sae),u=aae({x:e,y:n,top:r,left:i,width:o,height:s},c);return!We(e)||!We(n)||!We(o)||!We(s)||!We(r)||!We(i)?null:I.createElement("path",v_({},mr(u),{className:Pt("recharts-cross",a),d:hae(e,n,o,s,r,i)}))};function mae(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function U2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U2(Object(n),!0).forEach(function(r){gae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gae(t,e,n){return(e=vae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vae(t){var e=yae(t,"string");return typeof e=="symbol"?e:e+""}function yae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xae=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),D6=(t,e,n)=>t.map(r=>"".concat(xae(r)," ").concat(e,"ms ").concat(n)).join(","),bae=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),jf=(t,e)=>Object.keys(e).reduce((n,r)=>V2(V2({},n),{},{[r]:t(r,e[r])}),{});function $2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$2(Object(n),!0).forEach(function(r){wae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wae(t,e,n){return(e=_ae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ae(t){var e=Eae(t,"string");return typeof e=="symbol"?e:e+""}function Eae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yg=(t,e,n)=>t+(e-t)*n,y_=t=>{var{from:e,to:n}=t;return e!==n},O6=(t,e,n)=>{var r=jf((i,o)=>{if(y_(o)){var[s,a]=t(o.from,o.to,o.velocity);return gn(gn({},o),{},{from:s,velocity:a})}return o},e);return n<1?jf((i,o)=>y_(o)&&r[i]!=null?gn(gn({},o),{},{velocity:yg(o.velocity,r[i].velocity,n),from:yg(o.from,r[i].from,n)}):o,e):O6(t,r,n-1)};function Sae(t,e,n,r,i,o){var s,a=r.reduce((v,w)=>gn(gn({},v),{},{[w]:{from:t[w],velocity:0,to:e[w]}}),{}),c=()=>jf((v,w)=>w.from,a),u=()=>!Object.values(a).filter(y_).length,f=null,p=v=>{s||(s=v);var w=v-s,E=w/n.dt;a=O6(n,a,E),i(gn(gn(gn({},t),e),c())),s=v,u()||(f=o.setTimeout(p))};return()=>(f=o.setTimeout(p),()=>{var v;(v=f)===null||v===void 0||v()})}function Tae(t,e,n,r,i,o,s){var a=null,c=i.reduce((p,v)=>{var w=t[v],E=e[v];return w==null||E==null?p:gn(gn({},p),{},{[v]:[w,E]})},{}),u,f=p=>{u||(u=p);var v=(p-u)/r,w=jf((S,_)=>yg(..._,n(v)),c);if(o(gn(gn(gn({},t),e),w)),v<1)a=s.setTimeout(f);else{var E=jf((S,_)=>yg(..._,n(1)),c);o(gn(gn(gn({},t),e),E))}};return()=>(a=s.setTimeout(f),()=>{var p;(p=a)===null||p===void 0||p()})}const Aae=(t,e,n,r,i,o)=>{var s=bae(t,e);return n==null?()=>(i(gn(gn({},t),e)),()=>{}):n.isStepper===!0?Sae(t,e,n,s,i,o):Tae(t,e,n,r,s,i,o)};var xg=1e-4,L6=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],j6=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),B2=(t,e)=>n=>{var r=L6(t,e);return j6(r,n)},Cae=(t,e)=>n=>{var r=L6(t,e),i=[...r.map((o,s)=>o*s).slice(1),0];return j6(i,n)},Iae=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(o=>parseFloat(o));return[i[0],i[1],i[2],i[3]]},Pae=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=Iae(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},Nae=(t,e,n,r)=>{var i=B2(t,n),o=B2(e,r),s=Cae(t,n),a=u=>u>1?1:u<0?0:u,c=u=>{for(var f=u>1?1:u,p=f,v=0;v<8;++v){var w=i(p)-f,E=s(p);if(Math.abs(w-f)<xg||E<xg)return o(p);p=a(p-w/E)}return o(p)};return c.isStepper=!1,c},z2=function(){return Nae(...Pae(...arguments))},kae=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,o=(s,a,c)=>{var u=-(s-a)*n,f=c*r,p=c+(u-f)*i/1e3,v=c*i/1e3+s;return Math.abs(v-a)<xg&&Math.abs(p)<xg?[a,0]:[v,p]};return o.isStepper=!0,o.dt=i,o},Rae=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return z2(t);case"spring":return kae();default:if(t.split("(")[0]==="cubic-bezier")return z2(t)}return typeof t=="function"?t:null};function Mae(t){var e,n=()=>null,r=!1,i=null,o=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var a=s,[c,...u]=a;if(typeof c=="number"){i=t.setTimeout(o.bind(null,u),c);return}o(c),i=t.setTimeout(o.bind(null,u));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),o(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class Dae{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{i!=null&&cancelAnimationFrame(i)}}}function Oae(){return Mae(new Dae)}var Lae=I.createContext(Oae);function jae(t,e){var n=I.useContext(Lae);return I.useMemo(()=>e??n(t),[t,e,n])}var Fae=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Qv={isSsr:Fae()},Uae={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},q2={t:0},xb={t:1};function MS(t){var e=sr(t,Uae),{isActive:n,canBegin:r,duration:i,easing:o,begin:s,onAnimationEnd:a,onAnimationStart:c,children:u}=e,f=n==="auto"?!Qv.isSsr:n,p=jae(e.animationId,e.animationManager),[v,w]=I.useState(f?q2:xb),E=I.useRef(null);return I.useEffect(()=>{f||w(xb)},[f]),I.useEffect(()=>{if(!f||!r)return oh;var S=Aae(q2,xb,Rae(o),i,w,p.getTimeoutController()),_=()=>{E.current=S()};return p.start([c,s,_,i,a]),()=>{p.stop(),E.current&&E.current(),a()}},[f,r,i,o,s,c,a,p]),u(v.t)}function DS(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=I.useRef(Nf(e)),r=I.useRef(t);return r.current!==t&&(n.current=Nf(e),r.current=t),n.current}var Vae=["radius"],$ae=["radius"],G2,H2,W2,K2,Y2,J2,Q2,X2,Z2,eR;function tR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tR(Object(n),!0).forEach(function(r){Bae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bae(t,e,n){return(e=zae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zae(t){var e=qae(t,"string");return typeof e=="symbol"?e:e+""}function qae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bg(){return bg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bg.apply(null,arguments)}function rR(t,e){if(t==null)return{};var n,r,i=Gae(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Gae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ao(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var iR=(t,e,n,r,i)=>{var o=_a(n),s=_a(r),a=Math.min(Math.abs(o)/2,Math.abs(s)/2),c=s>=0?1:-1,u=o>=0?1:-1,f=s>=0&&o>=0||s<0&&o<0?1:0,p;if(a>0&&i instanceof Array){for(var v=[0,0,0,0],w=0,E=4;w<E;w++)v[w]=i[w]>a?a:i[w];p=Jt(G2||(G2=Ao(["M",",",""])),t,e+c*v[0]),v[0]>0&&(p+=Jt(H2||(H2=Ao(["A ",",",",0,0,",",",",",""])),v[0],v[0],f,t+u*v[0],e)),p+=Jt(W2||(W2=Ao(["L ",",",""])),t+n-u*v[1],e),v[1]>0&&(p+=Jt(K2||(K2=Ao(["A ",",",",0,0,",`,
        `,",",""])),v[1],v[1],f,t+n,e+c*v[1])),p+=Jt(Y2||(Y2=Ao(["L ",",",""])),t+n,e+r-c*v[2]),v[2]>0&&(p+=Jt(J2||(J2=Ao(["A ",",",",0,0,",`,
        `,",",""])),v[2],v[2],f,t+n-u*v[2],e+r)),p+=Jt(Q2||(Q2=Ao(["L ",",",""])),t+u*v[3],e+r),v[3]>0&&(p+=Jt(X2||(X2=Ao(["A ",",",",0,0,",`,
        `,",",""])),v[3],v[3],f,t,e+r-c*v[3])),p+="Z"}else if(a>0&&i===+i&&i>0){var S=Math.min(a,i);p=Jt(Z2||(Z2=Ao(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*S,S,S,f,t+u*S,e,t+n-u*S,e,S,S,f,t+n,e+c*S,t+n,e+r-c*S,S,S,f,t+n-u*S,e+r,t+u*S,e+r,S,S,f,t,e+r-c*S)}else p=Jt(eR||(eR=Ao(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return p},oR={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},F6=t=>{var e=sr(t,oR),n=I.useRef(null),[r,i]=I.useState(-1);I.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var xe=n.current.getTotalLength();xe&&i(xe)}catch{}},[]);var{x:o,y:s,width:a,height:c,radius:u,className:f}=e,{animationEasing:p,animationDuration:v,animationBegin:w,isAnimationActive:E,isUpdateAnimationActive:S}=e,_=I.useRef(a),N=I.useRef(c),j=I.useRef(o),F=I.useRef(s),q=I.useMemo(()=>({x:o,y:s,width:a,height:c,radius:u}),[o,s,a,c,u]),V=DS(q,"rectangle-");if(o!==+o||s!==+s||a!==+a||c!==+c||a===0||c===0)return null;var $=Pt("recharts-rectangle",f);if(!S){var k=mr(e),{radius:D}=k,O=rR(k,Vae);return I.createElement("path",bg({},O,{x:_a(o),y:_a(s),width:_a(a),height:_a(c),radius:typeof u=="number"?u:void 0,className:$,d:iR(o,s,a,c,u)}))}var z=_.current,U=N.current,M=j.current,P=F.current,me="0px ".concat(r===-1?1:r,"px"),ce="".concat(r,"px 0px"),ge=D6(["strokeDasharray"],v,typeof p=="string"?p:oR.animationEasing);return I.createElement(MS,{animationId:V,key:V,canBegin:r>0,duration:v,easing:p,isActive:S,begin:w},xe=>{var le=Nr(z,a,xe),ne=Nr(U,c,xe),de=Nr(M,o,xe),Y=Nr(P,s,xe);n.current&&(_.current=le,N.current=ne,j.current=de,F.current=Y);var ie;E?xe>0?ie={transition:ge,strokeDasharray:ce}:ie={strokeDasharray:me}:ie={strokeDasharray:ce};var fe=mr(e),{radius:_e}=fe,$e=rR(fe,$ae);return I.createElement("path",bg({},$e,{radius:typeof u=="number"?u:void 0,className:$,d:iR(de,Y,le,ne,u),ref:n,style:nR(nR({},ie),e.style)}))})};function sR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sR(Object(n),!0).forEach(function(r){Hae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hae(t,e,n){return(e=Wae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wae(t){var e=Kae(t,"string");return typeof e=="symbol"?e:e+""}function Kae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wg=Math.PI/180,Yae=t=>t*180/Math.PI,zn=(t,e,n,r)=>({x:t+Math.cos(-wg*r)*n,y:e+Math.sin(-wg*r)*n}),Jae=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Qae=(t,e)=>{var{x:n,y:r}=t,{x:i,y:o}=e;return Math.sqrt((n-i)**2+(r-o)**2)},Xae=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:o}=e,s=Qae({x:n,y:r},{x:i,y:o});if(s<=0)return{radius:s,angle:0};var a=(n-i)/s,c=Math.acos(a);return r>o&&(c=2*Math.PI-c),{radius:s,angle:Yae(c),angleInRadian:c}},Zae=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:e-o*360,endAngle:n-o*360}},ele=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),o=Math.floor(r/360),s=Math.min(i,o);return t+s*360},tle=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:o}=Xae({x:n,y:r},e),{innerRadius:s,outerRadius:a}=e;if(i<s||i>a||i===0)return null;var{startAngle:c,endAngle:u}=Zae(e),f=o,p;if(c<=u){for(;f>u;)f-=360;for(;f<c;)f+=360;p=f>=c&&f<=u}else{for(;f>c;)f-=360;for(;f<u;)f+=360;p=f>=u&&f<=c}return p?aR(aR({},e),{},{radius:i,angle:ele(f,e)}):null};function U6(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:o}=t,s=zn(e,n,r,i),a=zn(e,n,r,o);return{points:[s,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}var lR,cR,uR,dR,fR,hR,pR;function x_(){return x_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x_.apply(null,arguments)}function Il(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var nle=(t,e)=>{var n=mi(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Jp=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:o,isExternal:s,cornerRadius:a,cornerIsExternal:c}=t,u=a*(s?1:-1)+r,f=Math.asin(a/u)/wg,p=c?i:i+o*f,v=zn(e,n,u,p),w=zn(e,n,r,p),E=c?i-o*f:i,S=zn(e,n,u*Math.cos(f*wg),E);return{center:v,circleTangency:w,lineTangency:S,theta:f}},V6=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:s}=t,a=nle(o,s),c=o+a,u=zn(e,n,i,o),f=zn(e,n,i,c),p=Jt(lR||(lR=Il(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(a)>180),+(o>c),f.x,f.y);if(r>0){var v=zn(e,n,r,o),w=zn(e,n,r,c);p+=Jt(cR||(cR=Il(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),w.x,w.y,r,r,+(Math.abs(a)>180),+(o<=c),v.x,v.y)}else p+=Jt(uR||(uR=Il(["L ",","," Z"])),e,n);return p},rle=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:a,startAngle:c,endAngle:u}=t,f=mi(u-c),{circleTangency:p,lineTangency:v,theta:w}=Jp({cx:e,cy:n,radius:i,angle:c,sign:f,cornerRadius:o,cornerIsExternal:a}),{circleTangency:E,lineTangency:S,theta:_}=Jp({cx:e,cy:n,radius:i,angle:u,sign:-f,cornerRadius:o,cornerIsExternal:a}),N=a?Math.abs(c-u):Math.abs(c-u)-w-_;if(N<0)return s?Jt(dR||(dR=Il(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),v.x,v.y,o,o,o*2,o,o,-o*2):V6({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:u});var j=Jt(fR||(fR=Il(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),v.x,v.y,o,o,+(f<0),p.x,p.y,i,i,+(N>180),+(f<0),E.x,E.y,o,o,+(f<0),S.x,S.y);if(r>0){var{circleTangency:F,lineTangency:q,theta:V}=Jp({cx:e,cy:n,radius:r,angle:c,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:a}),{circleTangency:$,lineTangency:k,theta:D}=Jp({cx:e,cy:n,radius:r,angle:u,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:a}),O=a?Math.abs(c-u):Math.abs(c-u)-V-D;if(O<0&&o===0)return"".concat(j,"L").concat(e,",").concat(n,"Z");j+=Jt(hR||(hR=Il(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),k.x,k.y,o,o,+(f<0),$.x,$.y,r,r,+(O>180),+(f>0),F.x,F.y,o,o,+(f<0),q.x,q.y)}else j+=Jt(pR||(pR=Il(["L",",","Z"])),e,n);return j},ile={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},$6=t=>{var e=sr(t,ile),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:c,startAngle:u,endAngle:f,className:p}=e;if(o<i||u===f)return null;var v=Pt("recharts-sector",p),w=o-i,E=ja(s,w,0,!0),S;return E>0&&Math.abs(u-f)<360?S=rle({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(E,w/2),forceCornerRadius:a,cornerIsExternal:c,startAngle:u,endAngle:f}):S=V6({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:u,endAngle:f}),I.createElement("path",x_({},mr(e),{className:v,d:S}))};function ole(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(_5(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:o,outerRadius:s,angle:a}=e,c=zn(r,i,o,a),u=zn(r,i,s,a);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return U6(e)}}var bb={},wb={},_b={},mR;function sle(){return mR||(mR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=D5();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(_b)),_b}var gR;function ale(){return gR||(gR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sle();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(wb)),wb}var vR;function lle(){return vR||(vR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=O5(),n=ale();function r(i,o,s){s&&typeof s!="number"&&e.isIterateeCall(i,o,s)&&(o=s=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),s=s===void 0?i<o?1:-1:n.toFinite(s);const a=Math.max(Math.ceil((o-i)/(s||1)),0),c=new Array(a);for(let u=0;u<a;u++)c[u]=i,i+=s;return c}t.range=r})(bb)),bb}var Eb,yR;function cle(){return yR||(yR=1,Eb=lle().range),Eb}var ule=cle();const B6=Xr(ule);function Ia(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dle(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function OS(t){let e,n,r;t.length!==2?(e=Ia,n=(a,c)=>Ia(t(a),c),r=(a,c)=>t(a)-c):(e=t===Ia||t===dle?t:fle,n=t,r=t);function i(a,c,u=0,f=a.length){if(u<f){if(e(c,c)!==0)return f;do{const p=u+f>>>1;n(a[p],c)<0?u=p+1:f=p}while(u<f)}return u}function o(a,c,u=0,f=a.length){if(u<f){if(e(c,c)!==0)return f;do{const p=u+f>>>1;n(a[p],c)<=0?u=p+1:f=p}while(u<f)}return u}function s(a,c,u=0,f=a.length){const p=i(a,c,u,f-1);return p>u&&r(a[p-1],c)>-r(a[p],c)?p-1:p}return{left:i,center:s,right:o}}function fle(){return 0}function z6(t){return t===null?NaN:+t}function*hle(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const ple=OS(Ia),dh=ple.right;OS(z6).center;class xR extends Map{constructor(e,n=vle){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(bR(this,e))}has(e){return super.has(bR(this,e))}set(e,n){return super.set(mle(this,e),n)}delete(e){return super.delete(gle(this,e))}}function bR({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function mle({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function gle({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function vle(t){return t!==null&&typeof t=="object"?t.valueOf():t}function yle(t=Ia){if(t===Ia)return q6;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function q6(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const xle=Math.sqrt(50),ble=Math.sqrt(10),wle=Math.sqrt(2);function _g(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=xle?10:o>=ble?5:o>=wle?2:1;let a,c,u;return i<0?(u=Math.pow(10,-i)/s,a=Math.round(t*u),c=Math.round(e*u),a/u<t&&++a,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,a=Math.round(t/u),c=Math.round(e/u),a*u<t&&++a,c*u>e&&--c),c<a&&.5<=n&&n<2?_g(t,e,n*2):[a,c,u]}function b_(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?_g(e,t,n):_g(t,e,n);if(!(o>=i))return[];const a=o-i+1,c=new Array(a);if(r)if(s<0)for(let u=0;u<a;++u)c[u]=(o-u)/-s;else for(let u=0;u<a;++u)c[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)c[u]=(i+u)/-s;else for(let u=0;u<a;++u)c[u]=(i+u)*s;return c}function w_(t,e,n){return e=+e,t=+t,n=+n,_g(t,e,n)[2]}function __(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?w_(e,t,n):w_(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function wR(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function _R(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function G6(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?q6:yle(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,f=Math.log(c),p=.5*Math.exp(2*f/3),v=.5*Math.sqrt(f*p*(c-p)/c)*(u-c/2<0?-1:1),w=Math.max(n,Math.floor(e-u*p/c+v)),E=Math.min(r,Math.floor(e+(c-u)*p/c+v));G6(t,e,w,E,i)}const o=t[e];let s=n,a=r;for(Jd(t,n,e),i(t[r],o)>0&&Jd(t,n,r);s<a;){for(Jd(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}i(t[n],o)===0?Jd(t,n,a):(++a,Jd(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Jd(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function _le(t,e,n){if(t=Float64Array.from(hle(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return _R(t);if(e>=1)return wR(t);var r,i=(r-1)*e,o=Math.floor(i),s=wR(G6(t,o).subarray(0,o+1)),a=_R(t.subarray(o+1));return s+(a-s)*(i-o)}}function Ele(t,e,n=z6){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),a=+n(t[o+1],o+1,t);return s+(a-s)*(i-o)}}function Sle(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Si(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Us(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const E_=Symbol("implicit");function LS(){var t=new xR,e=[],n=[],r=E_;function i(o){let s=t.get(o);if(s===void 0){if(r!==E_)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new xR;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return LS(e,n).unknown(r)},Si.apply(i,arguments),i}function jS(){var t=LS().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,a=!1,c=0,u=0,f=.5;delete t.unknown;function p(){var v=e().length,w=i<r,E=w?i:r,S=w?r:i;o=(S-E)/Math.max(1,v-c+u*2),a&&(o=Math.floor(o)),E+=(S-E-o*(v-c))*f,s=o*(1-c),a&&(E=Math.round(E),s=Math.round(s));var _=Sle(v).map(function(N){return E+o*N});return n(w?_.reverse():_)}return t.domain=function(v){return arguments.length?(e(v),p()):e()},t.range=function(v){return arguments.length?([r,i]=v,r=+r,i=+i,p()):[r,i]},t.rangeRound=function(v){return[r,i]=v,r=+r,i=+i,a=!0,p()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(v){return arguments.length?(a=!!v,p()):a},t.padding=function(v){return arguments.length?(c=Math.min(1,u=+v),p()):c},t.paddingInner=function(v){return arguments.length?(c=Math.min(1,v),p()):c},t.paddingOuter=function(v){return arguments.length?(u=+v,p()):u},t.align=function(v){return arguments.length?(f=Math.max(0,Math.min(1,v)),p()):f},t.copy=function(){return jS(e(),[r,i]).round(a).paddingInner(c).paddingOuter(u).align(f)},Si.apply(p(),arguments)}function H6(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return H6(e())},t}function Tle(){return H6(jS.apply(null,arguments).paddingInner(1))}function FS(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function W6(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function fh(){}var Ff=.7,Eg=1/Ff,wu="\\s*([+-]?\\d+)\\s*",Uf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ale=/^#([0-9a-f]{3,8})$/,Cle=new RegExp(`^rgb\\(${wu},${wu},${wu}\\)$`),Ile=new RegExp(`^rgb\\(${jo},${jo},${jo}\\)$`),Ple=new RegExp(`^rgba\\(${wu},${wu},${wu},${Uf}\\)$`),Nle=new RegExp(`^rgba\\(${jo},${jo},${jo},${Uf}\\)$`),kle=new RegExp(`^hsl\\(${Uf},${jo},${jo}\\)$`),Rle=new RegExp(`^hsla\\(${Uf},${jo},${jo},${Uf}\\)$`),ER={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};FS(fh,Vf,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:SR,formatHex:SR,formatHex8:Mle,formatHsl:Dle,formatRgb:TR,toString:TR});function SR(){return this.rgb().formatHex()}function Mle(){return this.rgb().formatHex8()}function Dle(){return K6(this).formatHsl()}function TR(){return this.rgb().formatRgb()}function Vf(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ale.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?AR(e):n===3?new kr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Qp(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Qp(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Cle.exec(t))?new kr(e[1],e[2],e[3],1):(e=Ile.exec(t))?new kr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ple.exec(t))?Qp(e[1],e[2],e[3],e[4]):(e=Nle.exec(t))?Qp(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=kle.exec(t))?PR(e[1],e[2]/100,e[3]/100,1):(e=Rle.exec(t))?PR(e[1],e[2]/100,e[3]/100,e[4]):ER.hasOwnProperty(t)?AR(ER[t]):t==="transparent"?new kr(NaN,NaN,NaN,0):null}function AR(t){return new kr(t>>16&255,t>>8&255,t&255,1)}function Qp(t,e,n,r){return r<=0&&(t=e=n=NaN),new kr(t,e,n,r)}function Ole(t){return t instanceof fh||(t=Vf(t)),t?(t=t.rgb(),new kr(t.r,t.g,t.b,t.opacity)):new kr}function S_(t,e,n,r){return arguments.length===1?Ole(t):new kr(t,e,n,r??1)}function kr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}FS(kr,S_,W6(fh,{brighter(t){return t=t==null?Eg:Math.pow(Eg,t),new kr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ff:Math.pow(Ff,t),new kr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new kr(Ol(this.r),Ol(this.g),Ol(this.b),Sg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:CR,formatHex:CR,formatHex8:Lle,formatRgb:IR,toString:IR}));function CR(){return`#${Pl(this.r)}${Pl(this.g)}${Pl(this.b)}`}function Lle(){return`#${Pl(this.r)}${Pl(this.g)}${Pl(this.b)}${Pl((isNaN(this.opacity)?1:this.opacity)*255)}`}function IR(){const t=Sg(this.opacity);return`${t===1?"rgb(":"rgba("}${Ol(this.r)}, ${Ol(this.g)}, ${Ol(this.b)}${t===1?")":`, ${t})`}`}function Sg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ol(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Pl(t){return t=Ol(t),(t<16?"0":"")+t.toString(16)}function PR(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ui(t,e,n,r)}function K6(t){if(t instanceof Ui)return new Ui(t.h,t.s,t.l,t.opacity);if(t instanceof fh||(t=Vf(t)),!t)return new Ui;if(t instanceof Ui)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new Ui(s,a,c,t.opacity)}function jle(t,e,n,r){return arguments.length===1?K6(t):new Ui(t,e,n,r??1)}function Ui(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}FS(Ui,jle,W6(fh,{brighter(t){return t=t==null?Eg:Math.pow(Eg,t),new Ui(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ff:Math.pow(Ff,t),new Ui(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new kr(Sb(t>=240?t-240:t+120,i,r),Sb(t,i,r),Sb(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ui(NR(this.h),Xp(this.s),Xp(this.l),Sg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Sg(this.opacity);return`${t===1?"hsl(":"hsla("}${NR(this.h)}, ${Xp(this.s)*100}%, ${Xp(this.l)*100}%${t===1?")":`, ${t})`}`}}));function NR(t){return t=(t||0)%360,t<0?t+360:t}function Xp(t){return Math.max(0,Math.min(1,t||0))}function Sb(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const US=t=>()=>t;function Fle(t,e){return function(n){return t+n*e}}function Ule(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Vle(t){return(t=+t)==1?Y6:function(e,n){return n-e?Ule(e,n,t):US(isNaN(e)?n:e)}}function Y6(t,e){var n=e-t;return n?Fle(t,n):US(isNaN(t)?e:t)}const kR=(function t(e){var n=Vle(e);function r(i,o){var s=n((i=S_(i)).r,(o=S_(o)).r),a=n(i.g,o.g),c=n(i.b,o.b),u=Y6(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function $le(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Ble(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function zle(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Ku(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function qle(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Tg(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Gle(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ku(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var T_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tb=new RegExp(T_.source,"g");function Hle(t){return function(){return t}}function Wle(t){return function(e){return t(e)+""}}function Kle(t,e){var n=T_.lastIndex=Tb.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(t=t+"",e=e+"";(r=T_.exec(t))&&(i=Tb.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:Tg(r,i)})),n=Tb.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?Wle(c[0].x):Hle(e):(e=c.length,function(u){for(var f=0,p;f<e;++f)a[(p=c[f]).i]=p.x(u);return a.join("")})}function Ku(t,e){var n=typeof e,r;return e==null||n==="boolean"?US(e):(n==="number"?Tg:n==="string"?(r=Vf(e))?(e=r,kR):Kle:e instanceof Vf?kR:e instanceof Date?qle:Ble(e)?$le:Array.isArray(e)?zle:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Gle:Tg)(t,e)}function VS(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Yle(t,e){e===void 0&&(e=t,t=Ku);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function Jle(t){return function(){return t}}function Ag(t){return+t}var RR=[0,1];function ur(t){return t}function A_(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Jle(isNaN(e)?NaN:.5)}function Qle(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Xle(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=A_(i,r),o=n(s,o)):(r=A_(r,i),o=n(o,s)),function(a){return o(r(a))}}function Zle(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=A_(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var c=dh(t,a,1,r)-1;return o[c](i[c](a))}}function hh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Xv(){var t=RR,e=RR,n=Ku,r,i,o,s=ur,a,c,u;function f(){var v=Math.min(t.length,e.length);return s!==ur&&(s=Qle(t[0],t[v-1])),a=v>2?Zle:Xle,c=u=null,p}function p(v){return v==null||isNaN(v=+v)?o:(c||(c=a(t.map(r),e,n)))(r(s(v)))}return p.invert=function(v){return s(i((u||(u=a(e,t.map(r),Tg)))(v)))},p.domain=function(v){return arguments.length?(t=Array.from(v,Ag),f()):t.slice()},p.range=function(v){return arguments.length?(e=Array.from(v),f()):e.slice()},p.rangeRound=function(v){return e=Array.from(v),n=VS,f()},p.clamp=function(v){return arguments.length?(s=v?!0:ur,f()):s!==ur},p.interpolate=function(v){return arguments.length?(n=v,f()):n},p.unknown=function(v){return arguments.length?(o=v,p):o},function(v,w){return r=v,i=w,f()}}function $S(){return Xv()(ur,ur)}function ece(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Cg(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Mu(t){return t=Cg(Math.abs(t)),t?t[1]:NaN}function tce(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),o.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function nce(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var rce=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $f(t){if(!(e=rce.exec(t)))throw new Error("invalid format: "+t);var e;return new BS({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}$f.prototype=BS.prototype;function BS(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}BS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ice(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Ig;function oce(t,e){var n=Cg(t,e);if(!n)return Ig=void 0,t.toPrecision(e);var r=n[0],i=n[1],o=i-(Ig=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Cg(t,Math.max(0,e+o-1))[0]}function MR(t,e){var n=Cg(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const DR={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ece,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>MR(t*100,e),r:MR,s:oce,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function OR(t){return t}var LR=Array.prototype.map,jR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function sce(t){var e=t.grouping===void 0||t.thousands===void 0?OR:tce(LR.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?OR:nce(LR.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(p,v){p=$f(p);var w=p.fill,E=p.align,S=p.sign,_=p.symbol,N=p.zero,j=p.width,F=p.comma,q=p.precision,V=p.trim,$=p.type;$==="n"?(F=!0,$="g"):DR[$]||(q===void 0&&(q=12),V=!0,$="g"),(N||w==="0"&&E==="=")&&(N=!0,w="0",E="=");var k=(v&&v.prefix!==void 0?v.prefix:"")+(_==="$"?n:_==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():""),D=(_==="$"?r:/[%p]/.test($)?s:"")+(v&&v.suffix!==void 0?v.suffix:""),O=DR[$],z=/[defgprs%]/.test($);q=q===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,q)):Math.max(0,Math.min(20,q));function U(M){var P=k,me=D,ce,ge,xe;if($==="c")me=O(M)+me,M="";else{M=+M;var le=M<0||1/M<0;if(M=isNaN(M)?c:O(Math.abs(M),q),V&&(M=ice(M)),le&&+M==0&&S!=="+"&&(le=!1),P=(le?S==="("?S:a:S==="-"||S==="("?"":S)+P,me=($==="s"&&!isNaN(M)&&Ig!==void 0?jR[8+Ig/3]:"")+me+(le&&S==="("?")":""),z){for(ce=-1,ge=M.length;++ce<ge;)if(xe=M.charCodeAt(ce),48>xe||xe>57){me=(xe===46?i+M.slice(ce+1):M.slice(ce))+me,M=M.slice(0,ce);break}}}F&&!N&&(M=e(M,1/0));var ne=P.length+M.length+me.length,de=ne<j?new Array(j-ne+1).join(w):"";switch(F&&N&&(M=e(de+M,de.length?j-me.length:1/0),de=""),E){case"<":M=P+M+me+de;break;case"=":M=P+de+M+me;break;case"^":M=de.slice(0,ne=de.length>>1)+P+M+me+de.slice(ne);break;default:M=de+P+M+me;break}return o(M)}return U.toString=function(){return p+""},U}function f(p,v){var w=Math.max(-8,Math.min(8,Math.floor(Mu(v)/3)))*3,E=Math.pow(10,-w),S=u((p=$f(p),p.type="f",p),{suffix:jR[8+w/3]});return function(_){return S(E*_)}}return{format:u,formatPrefix:f}}var Zp,zS,J6;ace({thousands:",",grouping:[3],currency:["$",""]});function ace(t){return Zp=sce(t),zS=Zp.format,J6=Zp.formatPrefix,Zp}function lce(t){return Math.max(0,-Mu(Math.abs(t)))}function cce(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mu(e)/3)))*3-Mu(Math.abs(t)))}function uce(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Mu(e)-Mu(t))+1}function Q6(t,e,n,r){var i=__(t,e,n),o;switch(r=$f(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=cce(i,s))&&(r.precision=o),J6(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=uce(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=lce(i))&&(r.precision=o-(r.type==="%")*2);break}}return zS(r)}function Ga(t){var e=t.domain;return t.ticks=function(n){var r=e();return b_(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Q6(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],c,u,f=10;for(a<s&&(u=s,s=a,a=u,u=i,i=o,o=u);f-- >0;){if(u=w_(s,a,n),u===c)return r[i]=s,r[o]=a,e(r);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;c=u}return t},t}function X6(){var t=$S();return t.copy=function(){return hh(t,X6())},Si.apply(t,arguments),Ga(t)}function Z6(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Ag),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Z6(t).unknown(e)},t=arguments.length?Array.from(t,Ag):[0,1],Ga(n)}function e3(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}function FR(t){return Math.log(t)}function UR(t){return Math.exp(t)}function dce(t){return-Math.log(-t)}function fce(t){return-Math.exp(-t)}function hce(t){return isFinite(t)?+("1e"+t):t<0?0:t}function pce(t){return t===10?hce:t===Math.E?Math.exp:e=>Math.pow(t,e)}function mce(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function VR(t){return(e,n)=>-t(-e,n)}function qS(t){const e=t(FR,UR),n=e.domain;let r=10,i,o;function s(){return i=mce(r),o=pce(r),n()[0]<0?(i=VR(i),o=VR(o),t(dce,fce)):t(FR,UR),e}return e.base=function(a){return arguments.length?(r=+a,s()):r},e.domain=function(a){return arguments.length?(n(a),s()):n()},e.ticks=a=>{const c=n();let u=c[0],f=c[c.length-1];const p=f<u;p&&([u,f]=[f,u]);let v=i(u),w=i(f),E,S;const _=a==null?10:+a;let N=[];if(!(r%1)&&w-v<_){if(v=Math.floor(v),w=Math.ceil(w),u>0){for(;v<=w;++v)for(E=1;E<r;++E)if(S=v<0?E/o(-v):E*o(v),!(S<u)){if(S>f)break;N.push(S)}}else for(;v<=w;++v)for(E=r-1;E>=1;--E)if(S=v>0?E/o(-v):E*o(v),!(S<u)){if(S>f)break;N.push(S)}N.length*2<_&&(N=b_(u,f,_))}else N=b_(v,w,Math.min(w-v,_)).map(o);return p?N.reverse():N},e.tickFormat=(a,c)=>{if(a==null&&(a=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=$f(c)).precision==null&&(c.trim=!0),c=zS(c)),a===1/0)return c;const u=Math.max(1,r*a/e.ticks().length);return f=>{let p=f/o(Math.round(i(f)));return p*r<r-.5&&(p*=r),p<=u?c(f):""}},e.nice=()=>n(e3(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function t3(){const t=qS(Xv()).domain([1,10]);return t.copy=()=>hh(t,t3()).base(t.base()),Si.apply(t,arguments),t}function $R(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function BR(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function GS(t){var e=1,n=t($R(e),BR(e));return n.constant=function(r){return arguments.length?t($R(e=+r),BR(e)):e},Ga(n)}function n3(){var t=GS(Xv());return t.copy=function(){return hh(t,n3()).constant(t.constant())},Si.apply(t,arguments)}function zR(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function gce(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function vce(t){return t<0?-t*t:t*t}function HS(t){var e=t(ur,ur),n=1;function r(){return n===1?t(ur,ur):n===.5?t(gce,vce):t(zR(n),zR(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Ga(e)}function WS(){var t=HS(Xv());return t.copy=function(){return hh(t,WS()).exponent(t.exponent())},Si.apply(t,arguments),t}function yce(){return WS.apply(null,arguments).exponent(.5)}function qR(t){return Math.sign(t)*t*t}function xce(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function r3(){var t=$S(),e=[0,1],n=!1,r;function i(o){var s=xce(t(o));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(o){return t.invert(qR(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,Ag)).map(qR)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return r3(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Si.apply(i,arguments),Ga(i)}function i3(){var t=[],e=[],n=[],r;function i(){var s=0,a=Math.max(1,e.length);for(n=new Array(a-1);++s<a;)n[s-1]=Ele(t,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:e[dh(n,s)]}return o.invertExtent=function(s){var a=e.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ia),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return i3().domain(t).range(e).unknown(r)},Si.apply(o,arguments)}function o3(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function s(c){return c!=null&&c<=c?i[dh(r,c,0,n)]:o}function a(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,a()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,a()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(o=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return o3().domain([t,e]).range(i).unknown(o)},Si.apply(Ga(s),arguments)}function s3(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[dh(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return s3().domain(t).range(e).unknown(n)},Si.apply(i,arguments)}const Ab=new Date,Cb=new Date;function yn(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const c=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return c;let u;do c.push(u=new Date(+o)),e(o,a),t(o);while(u<o&&o<s);return c},i.filter=o=>yn(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(Ab.setTime(+o),Cb.setTime(+s),t(Ab),t(Cb),Math.floor(n(Ab,Cb))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const Pg=yn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Pg.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?yn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Pg);Pg.range;const ys=1e3,gi=ys*60,xs=gi*60,Ns=xs*24,KS=Ns*7,GR=Ns*30,Ib=Ns*365,Nl=yn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ys)},(t,e)=>(e-t)/ys,t=>t.getUTCSeconds());Nl.range;const YS=yn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ys)},(t,e)=>{t.setTime(+t+e*gi)},(t,e)=>(e-t)/gi,t=>t.getMinutes());YS.range;const JS=yn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*gi)},(t,e)=>(e-t)/gi,t=>t.getUTCMinutes());JS.range;const QS=yn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ys-t.getMinutes()*gi)},(t,e)=>{t.setTime(+t+e*xs)},(t,e)=>(e-t)/xs,t=>t.getHours());QS.range;const XS=yn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*xs)},(t,e)=>(e-t)/xs,t=>t.getUTCHours());XS.range;const ph=yn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*gi)/Ns,t=>t.getDate()-1);ph.range;const Zv=yn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ns,t=>t.getUTCDate()-1);Zv.range;const a3=yn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ns,t=>Math.floor(t/Ns));a3.range;function sc(t){return yn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*gi)/KS)}const ey=sc(0),Ng=sc(1),bce=sc(2),wce=sc(3),Du=sc(4),_ce=sc(5),Ece=sc(6);ey.range;Ng.range;bce.range;wce.range;Du.range;_ce.range;Ece.range;function ac(t){return yn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/KS)}const ty=ac(0),kg=ac(1),Sce=ac(2),Tce=ac(3),Ou=ac(4),Ace=ac(5),Cce=ac(6);ty.range;kg.range;Sce.range;Tce.range;Ou.range;Ace.range;Cce.range;const ZS=yn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());ZS.range;const eT=yn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());eT.range;const ks=yn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ks.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:yn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ks.range;const Rs=yn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Rs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:yn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Rs.range;function l3(t,e,n,r,i,o){const s=[[Nl,1,ys],[Nl,5,5*ys],[Nl,15,15*ys],[Nl,30,30*ys],[o,1,gi],[o,5,5*gi],[o,15,15*gi],[o,30,30*gi],[i,1,xs],[i,3,3*xs],[i,6,6*xs],[i,12,12*xs],[r,1,Ns],[r,2,2*Ns],[n,1,KS],[e,1,GR],[e,3,3*GR],[t,1,Ib]];function a(u,f,p){const v=f<u;v&&([u,f]=[f,u]);const w=p&&typeof p.range=="function"?p:c(u,f,p),E=w?w.range(u,+f+1):[];return v?E.reverse():E}function c(u,f,p){const v=Math.abs(f-u)/p,w=OS(([,,_])=>_).right(s,v);if(w===s.length)return t.every(__(u/Ib,f/Ib,p));if(w===0)return Pg.every(Math.max(__(u,f,p),1));const[E,S]=s[v/s[w-1][2]<s[w][2]/v?w-1:w];return E.every(S)}return[a,c]}const[Ice,Pce]=l3(Rs,eT,ty,a3,XS,JS),[Nce,kce]=l3(ks,ZS,ey,ph,QS,YS);function Pb(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Nb(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qd(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Rce(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,c=t.shortMonths,u=Xd(i),f=Zd(i),p=Xd(o),v=Zd(o),w=Xd(s),E=Zd(s),S=Xd(a),_=Zd(a),N=Xd(c),j=Zd(c),F={a:xe,A:le,b:ne,B:de,c:null,d:QR,e:QR,f:tue,g:due,G:hue,H:Xce,I:Zce,j:eue,L:c3,m:nue,M:rue,p:Y,q:ie,Q:eM,s:tM,S:iue,u:oue,U:sue,V:aue,w:lue,W:cue,x:null,X:null,y:uue,Y:fue,Z:pue,"%":ZR},q={a:fe,A:_e,b:$e,B:Ge,c:null,d:XR,e:XR,f:yue,g:Iue,G:Nue,H:mue,I:gue,j:vue,L:d3,m:xue,M:bue,p:Ue,q:ze,Q:eM,s:tM,S:wue,u:_ue,U:Eue,V:Sue,w:Tue,W:Aue,x:null,X:null,y:Cue,Y:Pue,Z:kue,"%":ZR},V={a:z,A:U,b:M,B:P,c:me,d:YR,e:YR,f:Kce,g:KR,G:WR,H:JR,I:JR,j:qce,L:Wce,m:zce,M:Gce,p:O,q:Bce,Q:Jce,s:Qce,S:Hce,u:jce,U:Fce,V:Uce,w:Lce,W:Vce,x:ce,X:ge,y:KR,Y:WR,Z:$ce,"%":Yce};F.x=$(n,F),F.X=$(r,F),F.c=$(e,F),q.x=$(n,q),q.X=$(r,q),q.c=$(e,q);function $(H,oe){return function(ve){var ae=[],Xe=-1,Be=0,He=H.length,rt,Ye,Ne;for(ve instanceof Date||(ve=new Date(+ve));++Xe<He;)H.charCodeAt(Xe)===37&&(ae.push(H.slice(Be,Xe)),(Ye=HR[rt=H.charAt(++Xe)])!=null?rt=H.charAt(++Xe):Ye=rt==="e"?" ":"0",(Ne=oe[rt])&&(rt=Ne(ve,Ye)),ae.push(rt),Be=Xe+1);return ae.push(H.slice(Be,Xe)),ae.join("")}}function k(H,oe){return function(ve){var ae=Qd(1900,void 0,1),Xe=D(ae,H,ve+="",0),Be,He;if(Xe!=ve.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(oe&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(Be=Nb(Qd(ae.y,0,1)),He=Be.getUTCDay(),Be=He>4||He===0?kg.ceil(Be):kg(Be),Be=Zv.offset(Be,(ae.V-1)*7),ae.y=Be.getUTCFullYear(),ae.m=Be.getUTCMonth(),ae.d=Be.getUTCDate()+(ae.w+6)%7):(Be=Pb(Qd(ae.y,0,1)),He=Be.getDay(),Be=He>4||He===0?Ng.ceil(Be):Ng(Be),Be=ph.offset(Be,(ae.V-1)*7),ae.y=Be.getFullYear(),ae.m=Be.getMonth(),ae.d=Be.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),He="Z"in ae?Nb(Qd(ae.y,0,1)).getUTCDay():Pb(Qd(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(He+5)%7:ae.w+ae.U*7-(He+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,Nb(ae)):Pb(ae)}}function D(H,oe,ve,ae){for(var Xe=0,Be=oe.length,He=ve.length,rt,Ye;Xe<Be;){if(ae>=He)return-1;if(rt=oe.charCodeAt(Xe++),rt===37){if(rt=oe.charAt(Xe++),Ye=V[rt in HR?oe.charAt(Xe++):rt],!Ye||(ae=Ye(H,ve,ae))<0)return-1}else if(rt!=ve.charCodeAt(ae++))return-1}return ae}function O(H,oe,ve){var ae=u.exec(oe.slice(ve));return ae?(H.p=f.get(ae[0].toLowerCase()),ve+ae[0].length):-1}function z(H,oe,ve){var ae=w.exec(oe.slice(ve));return ae?(H.w=E.get(ae[0].toLowerCase()),ve+ae[0].length):-1}function U(H,oe,ve){var ae=p.exec(oe.slice(ve));return ae?(H.w=v.get(ae[0].toLowerCase()),ve+ae[0].length):-1}function M(H,oe,ve){var ae=N.exec(oe.slice(ve));return ae?(H.m=j.get(ae[0].toLowerCase()),ve+ae[0].length):-1}function P(H,oe,ve){var ae=S.exec(oe.slice(ve));return ae?(H.m=_.get(ae[0].toLowerCase()),ve+ae[0].length):-1}function me(H,oe,ve){return D(H,e,oe,ve)}function ce(H,oe,ve){return D(H,n,oe,ve)}function ge(H,oe,ve){return D(H,r,oe,ve)}function xe(H){return s[H.getDay()]}function le(H){return o[H.getDay()]}function ne(H){return c[H.getMonth()]}function de(H){return a[H.getMonth()]}function Y(H){return i[+(H.getHours()>=12)]}function ie(H){return 1+~~(H.getMonth()/3)}function fe(H){return s[H.getUTCDay()]}function _e(H){return o[H.getUTCDay()]}function $e(H){return c[H.getUTCMonth()]}function Ge(H){return a[H.getUTCMonth()]}function Ue(H){return i[+(H.getUTCHours()>=12)]}function ze(H){return 1+~~(H.getUTCMonth()/3)}return{format:function(H){var oe=$(H+="",F);return oe.toString=function(){return H},oe},parse:function(H){var oe=k(H+="",!1);return oe.toString=function(){return H},oe},utcFormat:function(H){var oe=$(H+="",q);return oe.toString=function(){return H},oe},utcParse:function(H){var oe=k(H+="",!0);return oe.toString=function(){return H},oe}}}var HR={"-":"",_:" ",0:"0"},Rn=/^\s*\d+/,Mce=/^%/,Dce=/[\\^$*+?|[\]().{}]/g;function _t(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Oce(t){return t.replace(Dce,"\\$&")}function Xd(t){return new RegExp("^(?:"+t.map(Oce).join("|")+")","i")}function Zd(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Lce(t,e,n){var r=Rn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function jce(t,e,n){var r=Rn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Fce(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Uce(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Vce(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function WR(t,e,n){var r=Rn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function KR(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function $ce(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Bce(t,e,n){var r=Rn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function zce(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function YR(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function qce(t,e,n){var r=Rn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function JR(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Gce(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Hce(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Wce(t,e,n){var r=Rn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Kce(t,e,n){var r=Rn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Yce(t,e,n){var r=Mce.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Jce(t,e,n){var r=Rn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Qce(t,e,n){var r=Rn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function QR(t,e){return _t(t.getDate(),e,2)}function Xce(t,e){return _t(t.getHours(),e,2)}function Zce(t,e){return _t(t.getHours()%12||12,e,2)}function eue(t,e){return _t(1+ph.count(ks(t),t),e,3)}function c3(t,e){return _t(t.getMilliseconds(),e,3)}function tue(t,e){return c3(t,e)+"000"}function nue(t,e){return _t(t.getMonth()+1,e,2)}function rue(t,e){return _t(t.getMinutes(),e,2)}function iue(t,e){return _t(t.getSeconds(),e,2)}function oue(t){var e=t.getDay();return e===0?7:e}function sue(t,e){return _t(ey.count(ks(t)-1,t),e,2)}function u3(t){var e=t.getDay();return e>=4||e===0?Du(t):Du.ceil(t)}function aue(t,e){return t=u3(t),_t(Du.count(ks(t),t)+(ks(t).getDay()===4),e,2)}function lue(t){return t.getDay()}function cue(t,e){return _t(Ng.count(ks(t)-1,t),e,2)}function uue(t,e){return _t(t.getFullYear()%100,e,2)}function due(t,e){return t=u3(t),_t(t.getFullYear()%100,e,2)}function fue(t,e){return _t(t.getFullYear()%1e4,e,4)}function hue(t,e){var n=t.getDay();return t=n>=4||n===0?Du(t):Du.ceil(t),_t(t.getFullYear()%1e4,e,4)}function pue(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+_t(e/60|0,"0",2)+_t(e%60,"0",2)}function XR(t,e){return _t(t.getUTCDate(),e,2)}function mue(t,e){return _t(t.getUTCHours(),e,2)}function gue(t,e){return _t(t.getUTCHours()%12||12,e,2)}function vue(t,e){return _t(1+Zv.count(Rs(t),t),e,3)}function d3(t,e){return _t(t.getUTCMilliseconds(),e,3)}function yue(t,e){return d3(t,e)+"000"}function xue(t,e){return _t(t.getUTCMonth()+1,e,2)}function bue(t,e){return _t(t.getUTCMinutes(),e,2)}function wue(t,e){return _t(t.getUTCSeconds(),e,2)}function _ue(t){var e=t.getUTCDay();return e===0?7:e}function Eue(t,e){return _t(ty.count(Rs(t)-1,t),e,2)}function f3(t){var e=t.getUTCDay();return e>=4||e===0?Ou(t):Ou.ceil(t)}function Sue(t,e){return t=f3(t),_t(Ou.count(Rs(t),t)+(Rs(t).getUTCDay()===4),e,2)}function Tue(t){return t.getUTCDay()}function Aue(t,e){return _t(kg.count(Rs(t)-1,t),e,2)}function Cue(t,e){return _t(t.getUTCFullYear()%100,e,2)}function Iue(t,e){return t=f3(t),_t(t.getUTCFullYear()%100,e,2)}function Pue(t,e){return _t(t.getUTCFullYear()%1e4,e,4)}function Nue(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ou(t):Ou.ceil(t),_t(t.getUTCFullYear()%1e4,e,4)}function kue(){return"+0000"}function ZR(){return"%"}function eM(t){return+t}function tM(t){return Math.floor(+t/1e3)}var Kc,h3,p3;Rue({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Rue(t){return Kc=Rce(t),h3=Kc.format,Kc.parse,p3=Kc.utcFormat,Kc.utcParse,Kc}function Mue(t){return new Date(t)}function Due(t){return t instanceof Date?+t:+new Date(+t)}function tT(t,e,n,r,i,o,s,a,c,u){var f=$S(),p=f.invert,v=f.domain,w=u(".%L"),E=u(":%S"),S=u("%I:%M"),_=u("%I %p"),N=u("%a %d"),j=u("%b %d"),F=u("%B"),q=u("%Y");function V($){return(c($)<$?w:a($)<$?E:s($)<$?S:o($)<$?_:r($)<$?i($)<$?N:j:n($)<$?F:q)($)}return f.invert=function($){return new Date(p($))},f.domain=function($){return arguments.length?v(Array.from($,Due)):v().map(Mue)},f.ticks=function($){var k=v();return t(k[0],k[k.length-1],$??10)},f.tickFormat=function($,k){return k==null?V:u(k)},f.nice=function($){var k=v();return(!$||typeof $.range!="function")&&($=e(k[0],k[k.length-1],$??10)),$?v(e3(k,$)):f},f.copy=function(){return hh(f,tT(t,e,n,r,i,o,s,a,c,u))},f}function Oue(){return Si.apply(tT(Nce,kce,ks,ZS,ey,ph,QS,YS,Nl,h3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Lue(){return Si.apply(tT(Ice,Pce,Rs,eT,ty,Zv,XS,JS,Nl,p3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ny(){var t=0,e=1,n,r,i,o,s=ur,a=!1,c;function u(p){return p==null||isNaN(p=+p)?c:s(i===0?.5:(p=(o(p)-n)*i,a?Math.max(0,Math.min(1,p)):p))}u.domain=function(p){return arguments.length?([t,e]=p,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(p){return arguments.length?(a=!!p,u):a},u.interpolator=function(p){return arguments.length?(s=p,u):s};function f(p){return function(v){var w,E;return arguments.length?([w,E]=v,s=p(w,E),u):[s(0),s(1)]}}return u.range=f(Ku),u.rangeRound=f(VS),u.unknown=function(p){return arguments.length?(c=p,u):c},function(p){return o=p,n=p(t),r=p(e),i=n===r?0:1/(r-n),u}}function Ha(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function m3(){var t=Ga(ny()(ur));return t.copy=function(){return Ha(t,m3())},Us.apply(t,arguments)}function g3(){var t=qS(ny()).domain([1,10]);return t.copy=function(){return Ha(t,g3()).base(t.base())},Us.apply(t,arguments)}function v3(){var t=GS(ny());return t.copy=function(){return Ha(t,v3()).constant(t.constant())},Us.apply(t,arguments)}function nT(){var t=HS(ny());return t.copy=function(){return Ha(t,nT()).exponent(t.exponent())},Us.apply(t,arguments)}function jue(){return nT.apply(null,arguments).exponent(.5)}function y3(){var t=[],e=ur;function n(r){if(r!=null&&!isNaN(r=+r))return e((dh(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ia),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>_le(t,o/r))},n.copy=function(){return y3(e).domain(t)},Us.apply(n,arguments)}function ry(){var t=0,e=.5,n=1,r=1,i,o,s,a,c,u=ur,f,p=!1,v;function w(S){return isNaN(S=+S)?v:(S=.5+((S=+f(S))-o)*(r*S<r*o?a:c),u(p?Math.max(0,Math.min(1,S)):S))}w.domain=function(S){return arguments.length?([t,e,n]=S,i=f(t=+t),o=f(e=+e),s=f(n=+n),a=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,w):[t,e,n]},w.clamp=function(S){return arguments.length?(p=!!S,w):p},w.interpolator=function(S){return arguments.length?(u=S,w):u};function E(S){return function(_){var N,j,F;return arguments.length?([N,j,F]=_,u=Yle(S,[N,j,F]),w):[u(0),u(.5),u(1)]}}return w.range=E(Ku),w.rangeRound=E(VS),w.unknown=function(S){return arguments.length?(v=S,w):v},function(S){return f=S,i=S(t),o=S(e),s=S(n),a=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,w}}function x3(){var t=Ga(ry()(ur));return t.copy=function(){return Ha(t,x3())},Us.apply(t,arguments)}function b3(){var t=qS(ry()).domain([.1,1,10]);return t.copy=function(){return Ha(t,b3()).base(t.base())},Us.apply(t,arguments)}function w3(){var t=GS(ry());return t.copy=function(){return Ha(t,w3()).constant(t.constant())},Us.apply(t,arguments)}function rT(){var t=HS(ry());return t.copy=function(){return Ha(t,rT()).exponent(t.exponent())},Us.apply(t,arguments)}function Fue(){return rT.apply(null,arguments).exponent(.5)}const uf=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:jS,scaleDiverging:x3,scaleDivergingLog:b3,scaleDivergingPow:rT,scaleDivergingSqrt:Fue,scaleDivergingSymlog:w3,scaleIdentity:Z6,scaleImplicit:E_,scaleLinear:X6,scaleLog:t3,scaleOrdinal:LS,scalePoint:Tle,scalePow:WS,scaleQuantile:i3,scaleQuantize:o3,scaleRadial:r3,scaleSequential:m3,scaleSequentialLog:g3,scaleSequentialPow:nT,scaleSequentialQuantile:y3,scaleSequentialSqrt:jue,scaleSequentialSymlog:v3,scaleSqrt:yce,scaleSymlog:n3,scaleThreshold:s3,scaleTime:Oue,scaleUtc:Lue,tickFormat:Q6},Symbol.toStringTag,{value:"Module"}));var Wa=t=>t.chartData,Uue=se([Wa],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),iT=(t,e,n,r)=>r?Uue(t):Wa(t);function Fa(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(fn(e)&&fn(n))return!0}return!1}function nM(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function _3(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,o;if(fn(n))i=n;else if(typeof n=="function")return;if(fn(r))o=r;else if(typeof r=="function")return;var s=[i,o];if(Fa(s))return s}}function Vue(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Fa(r))return nM(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,o]=t,s,a;if(i==="auto")e!=null&&(s=Math.min(...e));else if(We(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&h2.test(i)){var c=h2.exec(i);if(c==null||c[1]==null||e==null)s=void 0;else{var u=+c[1];s=e[0]-u}}else s=e==null?void 0:e[0];if(o==="auto")e!=null&&(a=Math.max(...e));else if(We(o))a=o;else if(typeof o=="function")try{e!=null&&(a=o(e==null?void 0:e[1]))}catch{}else if(typeof o=="string"&&p2.test(o)){var f=p2.exec(o);if(f==null||f[1]==null||e==null)a=void 0;else{var p=+f[1];a=e[1]+p}}else a=e==null?void 0:e[1];var v=[s,a];if(Fa(v))return e==null?v:nM(v,e,n)}}}var Yu=1e9,$ue={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},sT,Gt=!0,Ei="[DecimalError] ",Ll=Ei+"Invalid argument: ",oT=Ei+"Exponent out of range: ",Ju=Math.floor,El=Math.pow,Bue=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Hr,In=1e7,Ft=7,E3=9007199254740991,Rg=Ju(E3/Ft),Le={};Le.absoluteValue=Le.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Le.comparedTo=Le.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Le.decimalPlaces=Le.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Ft;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Le.dividedBy=Le.div=function(t){return ws(this,new this.constructor(t))};Le.dividedToIntegerBy=Le.idiv=function(t){var e=this,n=e.constructor;return kt(ws(e,new n(t),0,1),n.precision)};Le.equals=Le.eq=function(t){return!this.cmp(t)};Le.exponent=function(){return dn(this)};Le.greaterThan=Le.gt=function(t){return this.cmp(t)>0};Le.greaterThanOrEqualTo=Le.gte=function(t){return this.cmp(t)>=0};Le.isInteger=Le.isint=function(){return this.e>this.d.length-2};Le.isNegative=Le.isneg=function(){return this.s<0};Le.isPositive=Le.ispos=function(){return this.s>0};Le.isZero=function(){return this.s===0};Le.lessThan=Le.lt=function(t){return this.cmp(t)<0};Le.lessThanOrEqualTo=Le.lte=function(t){return this.cmp(t)<1};Le.logarithm=Le.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Hr))throw Error(Ei+"NaN");if(n.s<1)throw Error(Ei+(n.s?"NaN":"-Infinity"));return n.eq(Hr)?new r(0):(Gt=!1,e=ws(Bf(n,o),Bf(t,o),o),Gt=!0,kt(e,i))};Le.minus=Le.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?A3(e,t):S3(e,(t.s=-t.s,t))};Le.modulo=Le.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ei+"NaN");return n.s?(Gt=!1,e=ws(n,t,0,1).times(t),Gt=!0,n.minus(e)):kt(new r(n),i)};Le.naturalExponential=Le.exp=function(){return T3(this)};Le.naturalLogarithm=Le.ln=function(){return Bf(this)};Le.negated=Le.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Le.plus=Le.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?S3(e,t):A3(e,(t.s=-t.s,t))};Le.precision=Le.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ll+t);if(e=dn(i)+1,r=i.d.length-1,n=r*Ft+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Le.squareRoot=Le.sqrt=function(){var t,e,n,r,i,o,s,a=this,c=a.constructor;if(a.s<1){if(!a.s)return new c(0);throw Error(Ei+"NaN")}for(t=dn(a),Gt=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=No(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Ju((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(o=r,r=o.plus(ws(a,o,s+2)).times(.5),No(o.d).slice(0,s)===(e=No(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(kt(o,n+1,0),o.times(o).eq(a)){r=o;break}}else if(e!="9999")break;s+=4}return Gt=!0,kt(r,n)};Le.times=Le.mul=function(t){var e,n,r,i,o,s,a,c,u,f=this,p=f.constructor,v=f.d,w=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,n=f.e+t.e,c=v.length,u=w.length,c<u&&(o=v,v=w,w=o,s=c,c=u,u=s),o=[],s=c+u,r=s;r--;)o.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)a=o[i]+w[r]*v[i-r-1]+e,o[i--]=a%In|0,e=a/In|0;o[i]=(o[i]+e)%In|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,Gt?kt(t,p.precision):t};Le.toDecimalPlaces=Le.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Go(t,0,Yu),e===void 0?e=r.rounding:Go(e,0,8),kt(n,t+dn(n)+1,e))};Le.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Yl(r,!0):(Go(t,0,Yu),e===void 0?e=i.rounding:Go(e,0,8),r=kt(new i(r),t+1,e),n=Yl(r,!0,t+1)),n};Le.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?Yl(i):(Go(t,0,Yu),e===void 0?e=o.rounding:Go(e,0,8),r=kt(new o(i),t+dn(i)+1,e),n=Yl(r.abs(),!1,t+dn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Le.toInteger=Le.toint=function(){var t=this,e=t.constructor;return kt(new e(t),dn(t)+1,e.rounding)};Le.toNumber=function(){return+this};Le.toPower=Le.pow=function(t){var e,n,r,i,o,s,a=this,c=a.constructor,u=12,f=+(t=new c(t));if(!t.s)return new c(Hr);if(a=new c(a),!a.s){if(t.s<1)throw Error(Ei+"Infinity");return a}if(a.eq(Hr))return a;if(r=c.precision,t.eq(Hr))return kt(a,r);if(e=t.e,n=t.d.length-1,s=e>=n,o=a.s,s){if((n=f<0?-f:f)<=E3){for(i=new c(Hr),e=Math.ceil(r/Ft+4),Gt=!1;n%2&&(i=i.times(a),iM(i.d,e)),n=Ju(n/2),n!==0;)a=a.times(a),iM(a.d,e);return Gt=!0,t.s<0?new c(Hr).div(i):kt(i,r)}}else if(o<0)throw Error(Ei+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Gt=!1,i=t.times(Bf(a,r+u)),Gt=!0,i=T3(i),i.s=o,i};Le.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=dn(i),r=Yl(i,n<=o.toExpNeg||n>=o.toExpPos)):(Go(t,1,Yu),e===void 0?e=o.rounding:Go(e,0,8),i=kt(new o(i),t,e),n=dn(i),r=Yl(i,t<=n||n<=o.toExpNeg,t)),r};Le.toSignificantDigits=Le.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Go(t,1,Yu),e===void 0?e=r.rounding:Go(e,0,8)),kt(new r(n),t,e)};Le.toString=Le.valueOf=Le.val=Le.toJSON=Le[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=dn(t),n=t.constructor;return Yl(t,e<=n.toExpNeg||e>=n.toExpPos)};function S3(t,e){var n,r,i,o,s,a,c,u,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),Gt?kt(e,p):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),o=s-i,o){for(o<0?(r=c,o=-o,a=u.length):(r=u,i=s,a=c.length),s=Math.ceil(p/Ft),a=s>a?s+1:a+1,o>a&&(o=a,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(a=c.length,o=u.length,a-o<0&&(o=a,r=u,u=c,c=r),n=0;o;)n=(c[--o]=c[o]+u[o]+n)/In|0,c[o]%=In;for(n&&(c.unshift(n),++i),a=c.length;c[--a]==0;)c.pop();return e.d=c,e.e=i,Gt?kt(e,p):e}function Go(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ll+t)}function No(t){var e,n,r,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)r=t[e]+"",n=Ft-r.length,n&&(o+=ma(n)),o+=r;s=t[e],r=s+"",n=Ft-r.length,n&&(o+=ma(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var ws=(function(){function t(r,i){var o,s=0,a=r.length;for(r=r.slice();a--;)o=r[a]*i+s,r[a]=o%In|0,s=o/In|0;return s&&r.unshift(s),r}function e(r,i,o,s){var a,c;if(o!=s)c=o>s?1:-1;else for(a=c=0;a<o;a++)if(r[a]!=i[a]){c=r[a]>i[a]?1:-1;break}return c}function n(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*In+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var a,c,u,f,p,v,w,E,S,_,N,j,F,q,V,$,k,D,O=r.constructor,z=r.s==i.s?1:-1,U=r.d,M=i.d;if(!r.s)return new O(r);if(!i.s)throw Error(Ei+"Division by zero");for(c=r.e-i.e,k=M.length,V=U.length,w=new O(z),E=w.d=[],u=0;M[u]==(U[u]||0);)++u;if(M[u]>(U[u]||0)&&--c,o==null?j=o=O.precision:s?j=o+(dn(r)-dn(i))+1:j=o,j<0)return new O(0);if(j=j/Ft+2|0,u=0,k==1)for(f=0,M=M[0],j++;(u<V||f)&&j--;u++)F=f*In+(U[u]||0),E[u]=F/M|0,f=F%M|0;else{for(f=In/(M[0]+1)|0,f>1&&(M=t(M,f),U=t(U,f),k=M.length,V=U.length),q=k,S=U.slice(0,k),_=S.length;_<k;)S[_++]=0;D=M.slice(),D.unshift(0),$=M[0],M[1]>=In/2&&++$;do f=0,a=e(M,S,k,_),a<0?(N=S[0],k!=_&&(N=N*In+(S[1]||0)),f=N/$|0,f>1?(f>=In&&(f=In-1),p=t(M,f),v=p.length,_=S.length,a=e(p,S,v,_),a==1&&(f--,n(p,k<v?D:M,v))):(f==0&&(a=f=1),p=M.slice()),v=p.length,v<_&&p.unshift(0),n(S,p,_),a==-1&&(_=S.length,a=e(M,S,k,_),a<1&&(f++,n(S,k<_?D:M,_))),_=S.length):a===0&&(f++,S=[0]),E[u++]=f,a&&S[0]?S[_++]=U[q]||0:(S=[U[q]],_=1);while((q++<V||S[0]!==void 0)&&j--)}return E[0]||E.shift(),w.e=c,kt(w,s?o+dn(w)+1:o)}})();function T3(t,e){var n,r,i,o,s,a,c=0,u=0,f=t.constructor,p=f.precision;if(dn(t)>16)throw Error(oT+dn(t));if(!t.s)return new f(Hr);for(Gt=!1,a=p,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(El(2,u))/Math.LN10*2+5|0,a+=r,n=i=o=new f(Hr),f.precision=a;;){if(i=kt(i.times(t),a),n=n.times(++c),s=o.plus(ws(i,n,a)),No(s.d).slice(0,a)===No(o.d).slice(0,a)){for(;u--;)o=kt(o.times(o),a);return f.precision=p,e==null?(Gt=!0,kt(o,p)):o}o=s}}function dn(t){for(var e=t.e*Ft,n=t.d[0];n>=10;n/=10)e++;return e}function kb(t,e,n){if(e>t.LN10.sd())throw Gt=!0,n&&(t.precision=n),Error(Ei+"LN10 precision limit exceeded");return kt(new t(t.LN10),e)}function ma(t){for(var e="";t--;)e+="0";return e}function Bf(t,e){var n,r,i,o,s,a,c,u,f,p=1,v=10,w=t,E=w.d,S=w.constructor,_=S.precision;if(w.s<1)throw Error(Ei+(w.s?"NaN":"-Infinity"));if(w.eq(Hr))return new S(0);if(e==null?(Gt=!1,u=_):u=e,w.eq(10))return e==null&&(Gt=!0),kb(S,u);if(u+=v,S.precision=u,n=No(E),r=n.charAt(0),o=dn(w),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)w=w.times(t),n=No(w.d),r=n.charAt(0),p++;o=dn(w),r>1?(w=new S("0."+n),o++):w=new S(r+"."+n.slice(1))}else return c=kb(S,u+2,_).times(o+""),w=Bf(new S(r+"."+n.slice(1)),u-v).plus(c),S.precision=_,e==null?(Gt=!0,kt(w,_)):w;for(a=s=w=ws(w.minus(Hr),w.plus(Hr),u),f=kt(w.times(w),u),i=3;;){if(s=kt(s.times(f),u),c=a.plus(ws(s,new S(i),u)),No(c.d).slice(0,u)===No(a.d).slice(0,u))return a=a.times(2),o!==0&&(a=a.plus(kb(S,u+2,_).times(o+""))),a=ws(a,new S(p),u),S.precision=_,e==null?(Gt=!0,kt(a,_)):a;a=c,i+=2}}function rM(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Ju(n/Ft),t.d=[],r=(n+1)%Ft,n<0&&(r+=Ft),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Ft;r<i;)t.d.push(+e.slice(r,r+=Ft));e=e.slice(r),r=Ft-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Gt&&(t.e>Rg||t.e<-Rg))throw Error(oT+n)}else t.s=0,t.e=0,t.d=[0];return t}function kt(t,e,n){var r,i,o,s,a,c,u,f,p=t.d;for(s=1,o=p[0];o>=10;o/=10)s++;if(r=e-s,r<0)r+=Ft,i=e,u=p[f=0];else{if(f=Math.ceil((r+1)/Ft),o=p.length,f>=o)return t;for(u=o=p[f],s=1;o>=10;o/=10)s++;r%=Ft,i=r-Ft+s}if(n!==void 0&&(o=El(10,s-i-1),a=u/o%10|0,c=e<0||p[f+1]!==void 0||u%o,c=n<4?(a||c)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||c||n==6&&(r>0?i>0?u/El(10,s-i):0:p[f-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return c?(o=dn(t),p.length=1,e=e-o-1,p[0]=El(10,(Ft-e%Ft)%Ft),t.e=Ju(-e/Ft)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(r==0?(p.length=f,o=1,f--):(p.length=f+1,o=El(10,Ft-r),p[f]=i>0?(u/El(10,s-i)%El(10,i)|0)*o:0),c)for(;;)if(f==0){(p[0]+=o)==In&&(p[0]=1,++t.e);break}else{if(p[f]+=o,p[f]!=In)break;p[f--]=0,o=1}for(r=p.length;p[--r]===0;)p.pop();if(Gt&&(t.e>Rg||t.e<-Rg))throw Error(oT+dn(t));return t}function A3(t,e){var n,r,i,o,s,a,c,u,f,p,v=t.constructor,w=v.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new v(t),Gt?kt(e,w):e;if(c=t.d,p=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(f=s<0,f?(n=c,s=-s,a=p.length):(n=p,r=u,a=c.length),i=Math.max(Math.ceil(w/Ft),a)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,a=p.length,f=i<a,f&&(a=i),i=0;i<a;i++)if(c[i]!=p[i]){f=c[i]<p[i];break}s=0}for(f&&(n=c,c=p,p=n,e.s=-e.s),a=c.length,i=p.length-a;i>0;--i)c[a++]=0;for(i=p.length;i>s;){if(c[--i]<p[i]){for(o=i;o&&c[--o]===0;)c[o]=In-1;--c[o],c[i]+=In}c[i]-=p[i]}for(;c[--a]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Gt?kt(e,w):e):new v(0)}function Yl(t,e,n){var r,i=dn(t),o=No(t.d),s=o.length;return e?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+ma(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+ma(-i-1)+o,n&&(r=n-s)>0&&(o+=ma(r))):i>=s?(o+=ma(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+ma(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=ma(r))),t.s<0?"-"+o:o}function iM(t,e){if(t.length>e)return t.length=e,!0}function C3(t){var e,n,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Ll+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return rM(s,o.toString())}else if(typeof o!="string")throw Error(Ll+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,Bue.test(o))rM(s,o);else throw Error(Ll+o)}if(i.prototype=Le,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=C3,i.config=i.set=zue,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function zue(t){if(!t||typeof t!="object")throw Error(Ei+"Object expected");var e,n,r,i=["precision",1,Yu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Ju(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Ll+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ll+n+": "+r);return this}var sT=C3($ue);Hr=new sT(1);const It=sT;var que=t=>t,I3={},P3=t=>t===I3,oM=t=>function e(){return arguments.length===0||arguments.length===1&&P3(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},N3=(t,e)=>t===1?e:oM(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(s=>s!==I3).length;return o>=t?e(...r):N3(t-o,oM(function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];var u=r.map(f=>P3(f)?a.shift():f);return e(...u,...a)}))}),Gue=t=>N3(t.length,t),C_=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},Hue=Gue((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),Wue=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return que;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce((a,c)=>c(a),o(...arguments))}};function k3(t){var e;return t===0?e=1:e=Math.floor(new It(t).abs().log(10).toNumber())+1,e}function R3(t,e,n){for(var r=new It(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var M3=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},D3=(t,e,n)=>{if(t.lte(0))return new It(0);var r=k3(t.toNumber()),i=new It(10).pow(r),o=t.div(i),s=r!==1?.05:.1,a=new It(Math.ceil(o.div(s).toNumber())).add(n).mul(s),c=a.mul(i);return e?new It(c.toNumber()):new It(Math.ceil(c.toNumber()))},Kue=(t,e,n)=>{var r=new It(1),i=new It(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new It(10).pow(k3(t)-1),i=new It(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new It(Math.floor(t)))}else t===0?i=new It(Math.floor((e-1)/2)):n||(i=new It(Math.floor(t)));var s=Math.floor((e-1)/2),a=Wue(Hue(c=>i.add(new It(c-s).mul(r)).toNumber()),C_);return a(0,e)},O3=function(e,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new It(0),tickMin:new It(0),tickMax:new It(0)};var s=D3(new It(n).sub(e).div(r-1),i,o),a;e<=0&&n>=0?a=new It(0):(a=new It(e).add(n).div(2),a=a.sub(new It(a).mod(s)));var c=Math.ceil(a.sub(e).div(s).toNumber()),u=Math.ceil(new It(n).sub(a).div(s).toNumber()),f=c+u+1;return f>r?O3(e,n,r,i,o+1):(f<r&&(u=n>0?u+(r-f):u,c=n>0?c:c+(r-f)),{step:s,tickMin:a.sub(new It(c).mul(s)),tickMax:a.add(new It(u).mul(s))})},Yue=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[a,c]=M3([n,r]);if(a===-1/0||c===1/0){var u=c===1/0?[a,...C_(0,i-1).map(()=>1/0)]:[...C_(0,i-1).map(()=>-1/0),c];return n>r?u.reverse():u}if(a===c)return Kue(a,i,o);var{step:f,tickMin:p,tickMax:v}=O3(a,c,s,o,0),w=R3(p,v.add(new It(.1).mul(f)),f);return n>r?w.reverse():w},Jue=function(e,n){var[r,i]=e,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,a]=M3([r,i]);if(s===-1/0||a===1/0)return[r,i];if(s===a)return[s];var c=Math.max(n,2),u=D3(new It(a).sub(s).div(c-1),o,0),f=[...R3(new It(s),new It(a),u),a];return o===!1&&(f=f.map(p=>Math.round(p))),r>i?f.reverse():f},Que=t=>t.rootProps.barCategoryGap,iy=t=>t.rootProps.stackOffset,L3=t=>t.rootProps.reverseStackOrder,aT=t=>t.options.chartName,lT=t=>t.rootProps.syncId,j3=t=>t.rootProps.syncMethod,cT=t=>t.options.eventEmitter,dr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ps={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Gr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},oy=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Xue={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ps.angleAxisId,includeHidden:!1,name:void 0,reversed:ps.reversed,scale:ps.scale,tick:ps.tick,tickCount:void 0,ticks:void 0,type:ps.type,unit:void 0},Zue={allowDataOverflow:Gr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gr.scale,tick:Gr.tick,tickCount:Gr.tickCount,ticks:void 0,type:Gr.type,unit:void 0},ede={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ps.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ps.scale,tick:ps.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},tde={allowDataOverflow:Gr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gr.scale,tick:Gr.tick,tickCount:Gr.tickCount,ticks:void 0,type:"category",unit:void 0},uT=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?ede:Xue,dT=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?tde:Zue,sy=t=>t.polarOptions,fT=se([js,Fs,Hn],Jae),F3=se([sy,fT],(t,e)=>{if(t!=null)return ja(t.innerRadius,e,0)}),U3=se([sy,fT],(t,e)=>{if(t!=null)return ja(t.outerRadius,e,e*.8)}),nde=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},V3=se([sy],nde);se([uT,V3],oy);var $3=se([fT,F3,U3],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});se([dT,$3],oy);var B3=se([$t,sy,F3,U3,js,Fs],(t,e,n,r,i,o)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:a,startAngle:c,endAngle:u}=e;return{cx:ja(s,i,i/2),cy:ja(a,o,o/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:u,clockWise:!1}}}),xn=(t,e)=>e,ay=(t,e,n)=>n;function z3(t){return t==null?void 0:t.id}function q3(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:o}=n,s=new Map;return t.forEach(a=>{var c,u=(c=a.data)!==null&&c!==void 0?c:r;if(!(u==null||u.length===0)){var f=z3(a);u.forEach((p,v)=>{var w=o==null||i?v:String(qn(p,o,null)),E=qn(p,a.dataKey,0),S;s.has(w)?S=s.get(w):S={},Object.assign(S,{[f]:E}),s.set(w,S)})}}),Array.from(s.values())}function hT(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var ly=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function cy(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function rde(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var bn=t=>{var e=$t(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Qu=t=>t.tooltip.settings.axisId;function sM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sM(Object(n),!0).forEach(function(r){ide(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ide(t,e,n){return(e=ode(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ode(t){var e=sde(t,"string");return typeof e=="symbol"?e:e+""}function sde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var I_=[0,"auto"],Tn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},G3=(t,e)=>t.cartesianAxis.xAxis[e],Vs=(t,e)=>{var n=G3(t,e);return n??Tn},An={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:I_,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:lh},H3=(t,e)=>t.cartesianAxis.yAxis[e],$s=(t,e)=>{var n=H3(t,e);return n??An},ade={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},pT=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??ade},vr=(t,e,n)=>{switch(e){case"xAxis":return Vs(t,n);case"yAxis":return $s(t,n);case"zAxis":return pT(t,n);case"angleAxis":return uT(t,n);case"radiusAxis":return dT(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},lde=(t,e,n)=>{switch(e){case"xAxis":return Vs(t,n);case"yAxis":return $s(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},mh=(t,e,n)=>{switch(e){case"xAxis":return Vs(t,n);case"yAxis":return $s(t,n);case"angleAxis":return uT(t,n);case"radiusAxis":return dT(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},W3=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function K3(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var Y3=t=>t.graphicalItems.cartesianItems,cde=se([xn,ay],K3),J3=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),gh=se([Y3,vr,cde],J3,{memoizeOptions:{resultEqualityCheck:cy}}),Q3=se([gh],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(hT)),X3=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),ude=se([gh],X3),Z3=t=>t.map(e=>e.data).filter(Boolean).flat(1),dde=se([gh],Z3,{memoizeOptions:{resultEqualityCheck:cy}}),eF=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},mT=se([dde,iT],eF),tF=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:qn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:qn(i,r)}))):t.map(r=>({value:r})),uy=se([mT,vr,gh],tF);function nF(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function wm(t){if(zo(t)||t instanceof Date){var e=Number(t);if(fn(e))return e}}function aM(t){if(Array.isArray(t)){var e=[wm(t[0]),wm(t[1])];return Fa(e)?e:void 0}var n=wm(t);if(n!=null)return[n,n]}function Ms(t){return t.map(wm).filter(ere)}function fde(t,e,n){return!n||typeof e!="number"||Bo(e)?[]:n.length?Ms(n.flatMap(r=>{var i=qn(t,r.dataKey),o,s;if(Array.isArray(i)?[o,s]=i:o=s=i,!(!fn(o)||!fn(s)))return[e-o,e+s]})):[]}var wn=t=>{var e=bn(t),n=Qu(t);return mh(t,e,n)},vh=se([wn],t=>t==null?void 0:t.dataKey),hde=se([Q3,iT,wn],q3),rF=(t,e,n,r)=>{var i={},o=e.reduce((s,a)=>{if(a.stackId==null)return s;var c=s[a.stackId];return c==null&&(c=[]),c.push(a),s[a.stackId]=c,s},i);return Object.fromEntries(Object.entries(o).map(s=>{var[a,c]=s,u=r?[...c].reverse():c,f=u.map(z3);return[a,{stackedData:Coe(t,f,n),graphicalItems:u}]}))},pde=se([hde,Q3,iy,L3],rF),iF=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:o}=e;if(r==null&&n!=="zAxis"){var s=Noe(t,i,o);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},mde=se([vr],t=>t.allowDataOverflow),gT=t=>{var e;if(t==null||!("domain"in t))return I_;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Ms(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:I_},oF=se([vr],gT),sF=se([oF,mde],_3),gde=se([pde,Wa,xn,sF],iF,{memoizeOptions:{resultEqualityCheck:ly}}),vT=t=>t.errorBars,vde=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>nF(n,r)),Dg=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),s=Math.min(...o),a=Math.max(...o);return[s,a]}},aF=(t,e,n,r,i)=>{var o,s;if(n.length>0&&t.forEach(a=>{n.forEach(c=>{var u,f,p=(u=r[c.id])===null||u===void 0?void 0:u.filter(N=>nF(i,N)),v=qn(a,(f=e.dataKey)!==null&&f!==void 0?f:c.dataKey),w=fde(a,v,p);if(w.length>=2){var E=Math.min(...w),S=Math.max(...w);(o==null||E<o)&&(o=E),(s==null||S>s)&&(s=S)}var _=aM(v);_!=null&&(o=o==null?_[0]:Math.min(o,_[0]),s=s==null?_[1]:Math.max(s,_[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(a=>{var c=aM(qn(a,e.dataKey));c!=null&&(o=o==null?c[0]:Math.min(o,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),fn(o)&&fn(s))return[o,s]},yde=se([mT,vr,ude,vT,xn],aF,{memoizeOptions:{resultEqualityCheck:ly}});function xde(t){var{value:e}=t;if(zo(e)||e instanceof Date)return e}var bde=(t,e,n)=>{var r=t.map(xde).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&x5(r))?B6(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},lF=t=>t.referenceElements.dots,Xu=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),wde=se([lF,xn,ay],Xu),cF=t=>t.referenceElements.areas,_de=se([cF,xn,ay],Xu),uF=t=>t.referenceElements.lines,Ede=se([uF,xn,ay],Xu),dF=(t,e)=>{if(t!=null){var n=Ms(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Sde=se(wde,xn,dF),fF=(t,e)=>{if(t!=null){var n=Ms(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Tde=se([_de,xn],fF);function Ade(t){var e;if(t.x!=null)return Ms([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Ms(n)}function Cde(t){var e;if(t.y!=null)return Ms([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Ms(n)}var hF=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?Ade(r):Cde(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Ide=se([Ede,xn],hF),Pde=se(Sde,Ide,Tde,(t,e,n)=>Dg(t,n,e)),pF=(t,e,n,r,i,o,s,a)=>{if(n!=null)return n;var c=s==="vertical"&&a==="xAxis"||s==="horizontal"&&a==="yAxis",u=c?Dg(r,o,i):Dg(o,i);return Vue(e,u,t.allowDataOverflow)},Nde=se([vr,oF,sF,gde,yde,Pde,$t,xn],pF,{memoizeOptions:{resultEqualityCheck:ly}}),kde=[0,1],mF=(t,e,n,r,i,o,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:a,type:c}=t,u=qa(e,o);if(u&&a==null){var f;return B6(0,(f=n==null?void 0:n.length)!==null&&f!==void 0?f:0)}return c==="category"?bde(r,t,u):i==="expand"?kde:s}},yT=se([vr,$t,mT,uy,iy,xn,Nde],mF),gF=(t,e,n,r,i)=>{if(t!=null){var{scale:o,type:s}=t;if(o==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof o=="string"){var a="scale".concat(ih(o));return a in uf?a:"point"}}},yh=se([vr,$t,W3,aT,xn],gF);function Rde(t){if(t!=null){if(t in uf)return uf[t]();var e="scale".concat(ih(t));if(e in uf)return uf[e]()}}function xT(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=Rde(e);if(i!=null){var o=i.domain(n).range(r);return Eoe(o),o}}}var vF=(t,e,n)=>{var r=gT(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Fa(t))return Yue(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Fa(t))return Jue(t,e.tickCount,e.allowDecimals)}},bT=se([yT,mh,yh],vF),yF=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&Fa(e)&&Array.isArray(n)&&n.length>0){var i=e[0],o=n[0],s=e[1],a=n[n.length-1];return[Math.min(i,o),Math.max(s,a)]}return e},Mde=se([vr,yT,bT,xn],yF),Dde=se(uy,vr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Ms(t.map(p=>p.value))).sort((p,v)=>p-v),i=r[0],o=r[r.length-1];if(i==null||o==null)return 1/0;var s=o-i;if(s===0)return 1/0;for(var a=0;a<r.length-1;a++){var c=r[a],u=r[a+1];if(!(c==null||u==null)){var f=u-c;n=Math.min(n,f)}}return n/s}}),xF=se(Dde,$t,Que,Hn,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!fn(t))return 0;var o=e==="vertical"?r.height:r.width;if(i==="gap")return t*o/2;if(i==="no-gap"){var s=ja(n,t*o),a=t*o/2;return a-s-(a-s)/o*s}return 0}),Ode=(t,e,n)=>{var r=Vs(t,e);return r==null||typeof r.padding!="string"?0:xF(t,"xAxis",e,n,r.padding)},Lde=(t,e,n)=>{var r=$s(t,e);return r==null||typeof r.padding!="string"?0:xF(t,"yAxis",e,n,r.padding)},jde=se(Vs,Ode,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),Fde=se($s,Lde,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),Ude=se([Hn,jde,Gv,qv,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[t.left+e.left,t.left+t.width-e.right]}),Vde=se([Hn,$t,Fde,Gv,qv,(t,e,n)=>n],(t,e,n,r,i,o)=>{var{padding:s}=i;return o?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),xh=(t,e,n,r)=>{var i;switch(e){case"xAxis":return Ude(t,n,r);case"yAxis":return Vde(t,n,r);case"zAxis":return(i=pT(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return V3(t);case"radiusAxis":return $3(t,n);default:return}},bF=se([vr,xh],oy),dy=se([vr,yh,Mde,bF],xT);se([gh,vT,xn],vde);function wF(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var fy=(t,e)=>e,hy=(t,e,n)=>n,$de=se(Bv,fy,hy,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(wF)),Bde=se(zv,fy,hy,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(wF)),_F=(t,e)=>({width:t.width,height:e.height}),zde=(t,e)=>{var n=typeof e.width=="number"?e.width:lh;return{width:n,height:t.height}},qde=se(Hn,Vs,_F),Gde=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},Hde=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Wde=se(Fs,Hn,$de,fy,hy,(t,e,n,r,i)=>{var o={},s;return n.forEach(a=>{var c=_F(e,a);s==null&&(s=Gde(e,r,t));var u=r==="top"&&!i||r==="bottom"&&i;o[a.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),o}),Kde=se(js,Hn,Bde,fy,hy,(t,e,n,r,i)=>{var o={},s;return n.forEach(a=>{var c=zde(e,a);s==null&&(s=Hde(e,r,t));var u=r==="left"&&!i||r==="right"&&i;o[a.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),o}),Yde=(t,e)=>{var n=Vs(t,e);if(n!=null)return Wde(t,n.orientation,n.mirror)},Jde=se([Hn,Vs,Yde,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),Qde=(t,e)=>{var n=$s(t,e);if(n!=null)return Kde(t,n.orientation,n.mirror)},Xde=se([Hn,$s,Qde,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),Zde=se(Hn,$s,(t,e)=>{var n=typeof e.width=="number"?e.width:lh;return{width:n,height:t.height}}),EF=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:s}=n,a=qa(t,r),c=e.map(u=>u.value);if(s&&a&&o==="category"&&i&&x5(c))return c}},wT=se([$t,uy,vr,xn],EF),SF=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,s=qa(t,r);if(s&&(i==="number"||o!=="auto"))return e.map(a=>a.value)}},_T=se([$t,uy,mh,xn],SF),lM=se([$t,lde,yh,dy,wT,_T,xh,bT,xn],(t,e,n,r,i,o,s,a,c)=>{if(e!=null){var u=qa(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:o,duplicateDomain:i,isCategorical:u,niceTicks:a,range:s,realScaleType:n,scale:r}}}),efe=(t,e,n,r,i,o,s,a,c)=>{if(!(e==null||r==null)){var u=qa(t,c),{type:f,ticks:p,tickCount:v}=e,w=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,E=f==="category"&&r.bandwidth?r.bandwidth()/w:0;E=c==="angleAxis"&&o!=null&&o.length>=2?mi(o[0]-o[1])*2*E:E;var S=p||i;if(S){var _=S.map((N,j)=>{var F=s?s.indexOf(N):N;return{index:j,coordinate:r(F)+E,value:N,offset:E}});return _.filter(N=>fn(N.coordinate))}return u&&a?a.map((N,j)=>({coordinate:r(N)+E,value:N,index:j,offset:E})).filter(N=>fn(N.coordinate)):r.ticks?r.ticks(v).map(N=>({coordinate:r(N)+E,value:N,offset:E})):r.domain().map((N,j)=>({coordinate:r(N)+E,value:s?s[N]:N,index:j,offset:E}))}},TF=se([$t,mh,yh,dy,bT,xh,wT,_T,xn],efe),tfe=(t,e,n,r,i,o,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var a=qa(t,s),{tickCount:c}=e,u=0;return u=s==="angleAxis"&&(r==null?void 0:r.length)>=2?mi(r[0]-r[1])*2*u:u,a&&o?o.map((f,p)=>({coordinate:n(f)+u,value:f,index:p,offset:u})):n.ticks?n.ticks(c).map(f=>({coordinate:n(f)+u,value:f,offset:u})):n.domain().map((f,p)=>({coordinate:n(f)+u,value:i?i[f]:f,index:p,offset:u}))}},AF=se([$t,mh,dy,xh,wT,_T,xn],tfe),CF=se(vr,dy,(t,e)=>{if(!(t==null||e==null))return Mg(Mg({},t),{},{scale:e})}),nfe=se([vr,yh,yT,bF],xT);se((t,e,n)=>pT(t,n),nfe,(t,e)=>{if(!(t==null||e==null))return Mg(Mg({},t),{},{scale:e})});var rfe=se([$t,Bv,zv],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),IF=t=>t.options.defaultTooltipEventType,PF=t=>t.options.validateTooltipEventTypes;function NF(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function ET(t,e){var n=IF(t),r=PF(t);return NF(e,n,r)}function ife(t){return Qe(e=>ET(e,t))}var kF=(t,e)=>{var n,r=Number(e);if(!(Bo(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},ofe=t=>t.tooltip.settings,ba={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},sfe={itemInteraction:{click:ba,hover:ba},axisInteraction:{click:ba,hover:ba},keyboardInteraction:ba,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},RF=Rr({name:"tooltip",initialState:sfe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:qt()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Yi(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:qt()},removeTooltipEntrySettings:{reducer(t,e){var n=Yi(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:qt()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:afe,replaceTooltipEntrySettings:lfe,removeTooltipEntrySettings:cfe,setTooltipSettingsState:ufe,setActiveMouseOverItemIndex:dfe,mouseLeaveItem:Nxe,mouseLeaveChart:MF,setActiveClickItemIndex:kxe,setMouseOverAxisIndex:DF,setMouseClickAxisIndex:ffe,setSyncInteraction:P_,setKeyboardInteraction:N_}=RF.actions,hfe=RF.reducer;function cM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function em(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cM(Object(n),!0).forEach(function(r){pfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pfe(t,e,n){return(e=mfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mfe(t){var e=gfe(t,"string");return typeof e=="symbol"?e:e+""}function gfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vfe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function yfe(t){return t.index!=null}var OF=(t,e,n,r)=>{if(e==null)return ba;var i=vfe(t,e,n);if(i==null)return ba;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var o=t.settings.active===!0;if(yfe(i)){if(o)return em(em({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return em(em({},ba),{},{coordinate:i.coordinate})};function xfe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function bfe(t,e){var n=xfe(t),r=e[0],i=e[1];if(n===void 0)return!1;var o=Math.min(r,i),s=Math.max(r,i);return n>=o&&n<=s}function wfe(t,e,n){if(n==null||e==null)return!0;var r=qn(t,e);return r==null||!Fa(n)?!0:bfe(r,n)}var ST=(t,e,n,r)=>{var i=t==null?void 0:t.index;if(i==null)return null;var o=Number(i);if(!fn(o))return i;var s=0,a=1/0;e.length>0&&(a=e.length-1);var c=Math.max(s,Math.min(o,a)),u=e[c];return u==null||wfe(u,n,r)?String(c):null},LF=(t,e,n,r,i,o,s,a)=>{if(!(o==null||a==null)){var c=s[0],u=c==null?void 0:a(c.positions,o);if(u!=null)return u;var f=i==null?void 0:i[Number(o)];if(f)switch(n){case"horizontal":return{x:f.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:f.coordinate}}}},jF=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var o=t.tooltipItemPayloads[0];return o!=null?[o]:[]}return t.tooltipItemPayloads.filter(s=>{var a;return((a=s.settings)===null||a===void 0?void 0:a.graphicalItemId)===i})},bh=t=>t.options.tooltipPayloadSearcher,Zu=t=>t.tooltip;function uM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uM(Object(n),!0).forEach(function(r){_fe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _fe(t,e,n){return(e=Efe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Efe(t){var e=Sfe(t,"string");return typeof e=="symbol"?e:e+""}function Sfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tfe(t,e){return t??e}var FF=(t,e,n,r,i,o,s)=>{if(!(e==null||o==null)){var{chartData:a,computedData:c,dataStartIndex:u,dataEndIndex:f}=n,p=[];return t.reduce((v,w)=>{var E,{dataDefinedOnItem:S,settings:_}=w,N=Tfe(S,a),j=Array.isArray(N)?h6(N,u,f):N,F=(E=_==null?void 0:_.dataKey)!==null&&E!==void 0?E:r,q=_==null?void 0:_.nameKey,V;if(r&&Array.isArray(j)&&!Array.isArray(j[0])&&s==="axis"?V=b5(j,r,i):V=o(j,e,c,q),Array.isArray(V))V.forEach(k=>{var D=dM(dM({},_),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});v.push(m2({tooltipEntrySettings:D,dataKey:k.dataKey,payload:k.payload,value:qn(k.payload,k.dataKey),name:k.name}))});else{var $;v.push(m2({tooltipEntrySettings:_,dataKey:F,payload:V,value:qn(V,F),name:($=qn(V,q))!==null&&$!==void 0?$:_==null?void 0:_.name}))}return v},p)}},TT=se([wn,$t,W3,aT,bn],gF),Afe=se([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Cfe=se([bn,Qu],K3),ed=se([Afe,wn,Cfe],J3,{memoizeOptions:{resultEqualityCheck:cy}}),Ife=se([ed],t=>t.filter(hT)),Pfe=se([ed],Z3,{memoizeOptions:{resultEqualityCheck:cy}}),td=se([Pfe,Wa],eF),Nfe=se([Ife,Wa,wn],q3),AT=se([td,wn,ed],tF),UF=se([wn],gT),kfe=se([wn],t=>t.allowDataOverflow),VF=se([UF,kfe],_3),Rfe=se([ed],t=>t.filter(hT)),Mfe=se([Nfe,Rfe,iy,L3],rF),Dfe=se([Mfe,Wa,bn,VF],iF),Ofe=se([ed],X3),Lfe=se([td,wn,Ofe,vT,bn],aF,{memoizeOptions:{resultEqualityCheck:ly}}),jfe=se([lF,bn,Qu],Xu),Ffe=se([jfe,bn],dF),Ufe=se([cF,bn,Qu],Xu),Vfe=se([Ufe,bn],fF),$fe=se([uF,bn,Qu],Xu),Bfe=se([$fe,bn],hF),zfe=se([Ffe,Bfe,Vfe],Dg),qfe=se([wn,UF,VF,Dfe,Lfe,zfe,$t,bn],pF),wh=se([wn,$t,td,AT,iy,bn,qfe],mF),Gfe=se([wh,wn,TT],vF),Hfe=se([wn,wh,Gfe,bn],yF),$F=t=>{var e=bn(t),n=Qu(t),r=!1;return xh(t,e,n,r)},BF=se([wn,$F],oy),zF=se([wn,TT,Hfe,BF],xT),Wfe=se([$t,AT,wn,bn],EF),Kfe=se([$t,AT,wn,bn],SF),Yfe=(t,e,n,r,i,o,s,a)=>{if(e){var{type:c}=e,u=qa(t,a);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,p=c==="category"&&r.bandwidth?r.bandwidth()/f:0;return p=a==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?mi(i[0]-i[1])*2*p:p,u&&s?s.map((v,w)=>({coordinate:r(v)+p,value:v,index:w,offset:p})):r.domain().map((v,w)=>({coordinate:r(v)+p,value:o?o[v]:v,index:w,offset:p}))}}},Bs=se([$t,wn,TT,zF,$F,Wfe,Kfe,bn],Yfe),CT=se([IF,PF,ofe],(t,e,n)=>NF(n.shared,t,e)),qF=t=>t.tooltip.settings.trigger,IT=t=>t.tooltip.settings.defaultIndex,_h=se([Zu,CT,qF,IT],OF),zf=se([_h,td,vh,wh],ST),GF=se([Bs,zf],kF),Jfe=se([_h],t=>{if(t)return t.dataKey});se([_h],t=>{if(t)return t.graphicalItemId});var HF=se([Zu,CT,qF,IT],jF),Qfe=se([js,Fs,$t,Hn,Bs,IT,HF,bh],LF),Xfe=se([_h,Qfe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Zfe=se([_h],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),ehe=se([HF,zf,Wa,vh,GF,bh,CT],FF),the=se([ehe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function fM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fM(Object(n),!0).forEach(function(r){nhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nhe(t,e,n){return(e=rhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rhe(t){var e=ihe(t,"string");return typeof e=="symbol"?e:e+""}function ihe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ohe=()=>Qe(wn),she=()=>{var t=ohe(),e=Qe(Bs),n=Qe(zF);return fg(!t||!n?void 0:hM(hM({},t),{},{scale:n}),e)};function pM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pM(Object(n),!0).forEach(function(r){ahe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ahe(t,e,n){return(e=lhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lhe(t){var e=che(t,"string");return typeof e=="symbol"?e:e+""}function che(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uhe=(t,e,n,r)=>{var i=e.find(o=>o&&o.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},dhe=(t,e,n,r)=>{var i=e.find(u=>u&&u.index===n);if(i){if(t==="centric"){var o=i.coordinate,{radius:s}=r;return Yc(Yc(Yc({},r),zn(r.cx,r.cy,s,o)),{},{angle:o,radius:s})}var a=i.coordinate,{angle:c}=r;return Yc(Yc(Yc({},r),zn(r.cx,r.cy,a,c)),{},{angle:c,radius:a})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function fhe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var WF=(t,e,n,r,i)=>{var o,s=(o=e==null?void 0:e.length)!==null&&o!==void 0?o:0;if(s<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var a=0;a<s;a++){var c,u,f,p,v,w=a>0?(c=n[a-1])===null||c===void 0?void 0:c.coordinate:(u=n[s-1])===null||u===void 0?void 0:u.coordinate,E=(f=n[a])===null||f===void 0?void 0:f.coordinate,S=a>=s-1?(p=n[0])===null||p===void 0?void 0:p.coordinate:(v=n[a+1])===null||v===void 0?void 0:v.coordinate,_=void 0;if(!(w==null||E==null||S==null))if(mi(E-w)!==mi(S-E)){var N=[];if(mi(S-E)===mi(i[1]-i[0])){_=S;var j=E+i[1]-i[0];N[0]=Math.min(j,(j+w)/2),N[1]=Math.max(j,(j+w)/2)}else{_=w;var F=S+i[1]-i[0];N[0]=Math.min(E,(F+E)/2),N[1]=Math.max(E,(F+E)/2)}var q=[Math.min(E,(_+E)/2),Math.max(E,(_+E)/2)];if(t>q[0]&&t<=q[1]||t>=N[0]&&t<=N[1]){var V;return(V=n[a])===null||V===void 0?void 0:V.index}}else{var $=Math.min(w,S),k=Math.max(w,S);if(t>($+E)/2&&t<=(k+E)/2){var D;return(D=n[a])===null||D===void 0?void 0:D.index}}}else if(e)for(var O=0;O<s;O++){var z=e[O];if(z!=null){var U=e[O+1],M=e[O-1];if(O===0&&U!=null&&t<=(z.coordinate+U.coordinate)/2||O===s-1&&M!=null&&t>(z.coordinate+M.coordinate)/2||O>0&&O<s-1&&M!=null&&U!=null&&t>(z.coordinate+M.coordinate)/2&&t<=(z.coordinate+U.coordinate)/2)return z.index}}return-1},hhe=()=>Qe(aT),PT=(t,e)=>e,KF=(t,e,n)=>n,NT=(t,e,n,r)=>r,phe=se(Bs,t=>Rv(t,e=>e.coordinate)),kT=se([Zu,PT,KF,NT],OF),RT=se([kT,td,vh,wh],ST),mhe=(t,e,n)=>{if(e!=null){var r=Zu(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},YF=se([Zu,PT,KF,NT],jF),Og=se([js,Fs,$t,Hn,Bs,NT,YF,bh],LF),ghe=se([kT,Og],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),JF=se([Bs,RT],kF),vhe=se([YF,RT,Wa,vh,JF,bh,PT],FF),yhe=se([kT,RT],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),xhe=(t,e,n,r,i,o,s)=>{if(!(!t||!n||!r||!i)&&fhe(t,s)){var a=koe(t,e),c=WF(a,o,i,n,r),u=uhe(e,i,c,t);return{activeIndex:String(c),activeCoordinate:u}}},bhe=(t,e,n,r,i,o,s)=>{if(!(!t||!r||!i||!o||!n)){var a=tle(t,n);if(a){var c=Roe(a,e),u=WF(c,s,o,r,i),f=dhe(e,o,u,a);return{activeIndex:String(u),activeCoordinate:f}}}},whe=(t,e,n,r,i,o,s,a)=>{if(!(!t||!e||!r||!i||!o))return e==="horizontal"||e==="vertical"?xhe(t,e,r,i,o,s,a):bhe(t,e,n,r,i,o,s)},_he=se(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),Ehe=se(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(dr)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:rde}});function mM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mM(Object(n),!0).forEach(function(r){She(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function She(t,e,n){return(e=The(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function The(t){var e=Ahe(t,"string");return typeof e=="symbol"?e:e+""}function Ahe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Che={},Ihe={zIndexMap:Object.values(dr).reduce((t,e)=>gM(gM({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),Che)},Phe=new Set(Object.values(dr));function Nhe(t){return Phe.has(t)}var QF=Rr({name:"zIndex",initialState:Ihe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:qt()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!Nhe(n)&&delete t.zIndexMap[n])},prepare:qt()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:qt()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:qt()}}}),{registerZIndexPortal:khe,unregisterZIndexPortal:Rhe,registerZIndexPortalElement:Mhe,unregisterZIndexPortalElement:Dhe}=QF.actions,Ohe=QF.reducer;function zs(t){var{zIndex:e,children:n}=t,r=fse(),i=r&&e!==void 0&&e!==0,o=Mr(),s=hn();I.useLayoutEffect(()=>i?(s(khe({zIndex:e})),()=>{s(Rhe({zIndex:e}))}):oh,[s,e,i]);var a=Qe(c=>_he(c,e,o));return i?a?z_.createPortal(n,a):null:n}function k_(){return k_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k_.apply(null,arguments)}function vM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vM(Object(n),!0).forEach(function(r){Lhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lhe(t,e,n){return(e=jhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jhe(t){var e=Fhe(t,"string");return typeof e=="symbol"?e:e+""}function Fhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uhe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return I.isValidElement(e)?I.cloneElement(e,r):I.createElement(n,r)}function Vhe(t){var e,{coordinate:n,payload:r,index:i,offset:o,tooltipAxisBandSize:s,layout:a,cursor:c,tooltipEventType:u,chartName:f}=t,p=n,v=r,w=i;if(!c||!p||f!=="ScatterChart"&&u!=="axis")return null;var E,S,_;if(f==="ScatterChart")E=p,S=pae,_=dr.cursorLine;else if(f==="BarChart")E=mae(a,p,o,s),S=F6,_=dr.cursorRectangle;else if(a==="radial"&&_5(p)){var{cx:N,cy:j,radius:F,startAngle:q,endAngle:V}=U6(p);E={cx:N,cy:j,startAngle:q,endAngle:V,innerRadius:F,outerRadius:F},S=$6,_=dr.cursorLine}else E={points:ole(a,p,o)},S=M6,_=dr.cursorLine;var $=typeof c=="object"&&"className"in c?c.className:void 0,k=tm(tm(tm(tm({stroke:"#ccc",pointerEvents:"none"},o),E),Cv(c)),{},{payload:v,payloadIndex:w,className:Pt("recharts-tooltip-cursor",$)});return I.createElement(zs,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:_},I.createElement(Uhe,{cursor:c,cursorComp:S,cursorProps:k}))}function $he(t){var e=she(),n=E6(),r=ch(),i=hhe();return e==null||n==null||r==null||i==null?null:I.createElement(Vhe,k_({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var XF=I.createContext(null),Bhe=()=>I.useContext(XF),Rb={exports:{}},yM;function zhe(){return yM||(yM=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function o(c,u,f,p,v){if(typeof f!="function")throw new TypeError("The listener must be a function");var w=new i(f,p||c,v),E=n?n+u:u;return c._events[E]?c._events[E].fn?c._events[E]=[c._events[E],w]:c._events[E].push(w):(c._events[E]=w,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],f,p;if(this._eventsCount===0)return u;for(p in f=this._events)e.call(f,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},a.prototype.listeners=function(u){var f=n?n+u:u,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var v=0,w=p.length,E=new Array(w);v<w;v++)E[v]=p[v].fn;return E},a.prototype.listenerCount=function(u){var f=n?n+u:u,p=this._events[f];return p?p.fn?1:p.length:0},a.prototype.emit=function(u,f,p,v,w,E){var S=n?n+u:u;if(!this._events[S])return!1;var _=this._events[S],N=arguments.length,j,F;if(_.fn){switch(_.once&&this.removeListener(u,_.fn,void 0,!0),N){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,p),!0;case 4:return _.fn.call(_.context,f,p,v),!0;case 5:return _.fn.call(_.context,f,p,v,w),!0;case 6:return _.fn.call(_.context,f,p,v,w,E),!0}for(F=1,j=new Array(N-1);F<N;F++)j[F-1]=arguments[F];_.fn.apply(_.context,j)}else{var q=_.length,V;for(F=0;F<q;F++)switch(_[F].once&&this.removeListener(u,_[F].fn,void 0,!0),N){case 1:_[F].fn.call(_[F].context);break;case 2:_[F].fn.call(_[F].context,f);break;case 3:_[F].fn.call(_[F].context,f,p);break;case 4:_[F].fn.call(_[F].context,f,p,v);break;default:if(!j)for(V=1,j=new Array(N-1);V<N;V++)j[V-1]=arguments[V];_[F].fn.apply(_[F].context,j)}}return!0},a.prototype.on=function(u,f,p){return o(this,u,f,p,!1)},a.prototype.once=function(u,f,p){return o(this,u,f,p,!0)},a.prototype.removeListener=function(u,f,p,v){var w=n?n+u:u;if(!this._events[w])return this;if(!f)return s(this,w),this;var E=this._events[w];if(E.fn)E.fn===f&&(!v||E.once)&&(!p||E.context===p)&&s(this,w);else{for(var S=0,_=[],N=E.length;S<N;S++)(E[S].fn!==f||v&&!E[S].once||p&&E[S].context!==p)&&_.push(E[S]);_.length?this._events[w]=_.length===1?_[0]:_:s(this,w)}return this},a.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Rb)),Rb.exports}var qhe=zhe();const Ghe=Xr(qhe);var qf=new Ghe,R_="recharts.syncEvent.tooltip",xM="recharts.syncEvent.brush";function Hhe(t,e){if(e){var n=Number.parseInt(e,10);if(!Bo(n))return t==null?void 0:t[n]}}var Whe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},ZF=Rr({name:"options",initialState:Whe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Khe=ZF.reducer,{createEventEmitter:Yhe}=ZF.actions;function Jhe(t){return t.tooltip.syncInteraction}var Qhe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},eU=Rr({name:"chartData",initialState:Qhe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:bM,setDataStartEndIndexes:Xhe,setComputedData:Rxe}=eU.actions,Zhe=eU.reducer,epe=["x","y"];function wM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wM(Object(n),!0).forEach(function(r){tpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tpe(t,e,n){return(e=npe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function npe(t){var e=rpe(t,"string");return typeof e=="symbol"?e:e+""}function rpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ipe(t,e){if(t==null)return{};var n,r,i=ope(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ope(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function spe(){var t=Qe(lT),e=Qe(cT),n=hn(),r=Qe(j3),i=Qe(Bs),o=ch(),s=Hv(),a=Qe(c=>c.rootProps.className);I.useEffect(()=>{if(t==null)return oh;var c=(u,f,p)=>{if(e!==p&&t===u){if(r==="index"){var v;if(s&&f!==null&&f!==void 0&&(v=f.payload)!==null&&v!==void 0&&v.coordinate&&f.payload.sourceViewBox){var w=f.payload.coordinate,{x:E,y:S}=w,_=ipe(w,epe),{x:N,y:j,width:F,height:q}=f.payload.sourceViewBox,V=Jc(Jc({},_),{},{x:s.x+(F?(E-N)/F:0)*s.width,y:s.y+(q?(S-j)/q:0)*s.height});n(Jc(Jc({},f),{},{payload:Jc(Jc({},f.payload),{},{coordinate:V})}))}else n(f);return}if(i!=null){var $;if(typeof r=="function"){var k={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},D=r(i,k);$=i[D]}else r==="value"&&($=i.find(ge=>String(ge.value)===f.payload.label));var{coordinate:O}=f.payload;if($==null||f.payload.active===!1||O==null||s==null){n(P_({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:z,y:U}=O,M=Math.min(z,s.x+s.width),P=Math.min(U,s.y+s.height),me={x:o==="horizontal"?$.coordinate:M,y:o==="horizontal"?P:$.coordinate},ce=P_({active:f.payload.active,coordinate:me,dataKey:f.payload.dataKey,index:String($.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(ce)}}};return qf.on(R_,c),()=>{qf.off(R_,c)}},[a,n,e,t,r,i,o,s])}function ape(){var t=Qe(lT),e=Qe(cT),n=hn();I.useEffect(()=>{if(t==null)return oh;var r=(i,o,s)=>{e!==s&&t===i&&n(Xhe(o))};return qf.on(xM,r),()=>{qf.off(xM,r)}},[n,e,t])}function lpe(){var t=hn();I.useEffect(()=>{t(Yhe())},[t]),spe(),ape()}function cpe(t,e,n,r,i,o){var s=Qe(w=>mhe(w,t,e)),a=Qe(cT),c=Qe(lT),u=Qe(j3),f=Qe(Jhe),p=f==null?void 0:f.active,v=Hv();I.useEffect(()=>{if(!p&&c!=null&&a!=null){var w=P_({active:o,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:v,graphicalItemId:void 0});qf.emit(R_,c,w,a)}},[p,n,s,i,r,a,c,u,o,v])}function _M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_M(Object(n),!0).forEach(function(r){upe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_M(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function upe(t,e,n){return(e=dpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dpe(t){var e=fpe(t,"string");return typeof e=="symbol"?e:e+""}function fpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hpe(t){return t.dataKey}function ppe(t,e){return I.isValidElement(t)?I.cloneElement(t,e):typeof t=="function"?I.createElement(t,e):I.createElement(Wse,e)}var SM=[],mpe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function gpe(t){var e,n,r=sr(t,mpe),{active:i,allowEscapeViewBox:o,animationDuration:s,animationEasing:a,content:c,filterNull:u,isAnimationActive:f,offset:p,payloadUniqBy:v,position:w,reverseDirection:E,useTranslate3d:S,wrapperStyle:_,cursor:N,shared:j,trigger:F,defaultIndex:q,portal:V,axisId:$}=r,k=hn(),D=typeof q=="number"?String(q):q;I.useEffect(()=>{k(ufe({shared:j,trigger:F,axisId:$,active:i,defaultIndex:D}))},[k,j,F,$,i,D]);var O=Hv(),z=R6(),U=ife(j),{activeIndex:M,isActive:P}=(e=Qe(Ue=>yhe(Ue,U,F,D)))!==null&&e!==void 0?e:{},me=Qe(Ue=>vhe(Ue,U,F,D)),ce=Qe(Ue=>JF(Ue,U,F,D)),ge=Qe(Ue=>ghe(Ue,U,F,D)),xe=me,le=Bhe(),ne=(n=i??P)!==null&&n!==void 0?n:!1,[de,Y]=j5([xe,ne]),ie=U==="axis"?ce:void 0;cpe(U,F,ge,ie,M,ne);var fe=V??le;if(fe==null||O==null||U==null)return null;var _e=xe??SM;ne||(_e=SM),u&&_e.length&&(_e=R5(_e.filter(Ue=>Ue.value!=null&&(Ue.hide!==!0||r.includeHidden)),v,hpe));var $e=_e.length>0,Ge=I.createElement(eae,{allowEscapeViewBox:o,animationDuration:s,animationEasing:a,isAnimationActive:f,active:ne,coordinate:ge,hasPayload:$e,offset:p,position:w,reverseDirection:E,useTranslate3d:S,viewBox:O,wrapperStyle:_,lastBoundingBox:de,innerRef:Y,hasPortalFromProps:!!V},ppe(c,EM(EM({},r),{},{payload:_e,label:ie,active:ne,activeIndex:M,coordinate:ge,accessibilityLayer:z})));return I.createElement(I.Fragment,null,z_.createPortal(Ge,fe),ne&&I.createElement($he,{cursor:N,tooltipEventType:U,coordinate:ge,payload:_e,index:M}))}function vpe(t,e,n){return(e=ype(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ype(t){var e=xpe(t,"string");return typeof e=="symbol"?e:e+""}function xpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class bpe{constructor(e){vpe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function TM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wpe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TM(Object(n),!0).forEach(function(r){_pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _pe(t,e,n){return(e=Epe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Epe(t){var e=Spe(t,"string");return typeof e=="symbol"?e:e+""}function Spe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tpe={cacheSize:2e3,enableCache:!0},tU=wpe({},Tpe),AM=new bpe(tU.cacheSize),Ape={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},CM="recharts_measurement_span";function Cpe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",o=e.fontStyle||"",s=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(s,"|").concat(a)}var IM=(t,e)=>{try{var n=document.getElementById(CM);n||(n=document.createElement("span"),n.setAttribute("id",CM),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Ape,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},yf=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Qv.isSsr)return{width:0,height:0};if(!tU.enableCache)return IM(e,n);var r=Cpe(e,n),i=AM.get(r);if(i)return i;var o=IM(e,n);return AM.set(r,o),o},nU;function Ipe(t,e,n){return(e=Ppe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ppe(t){var e=Npe(t,"string");return typeof e=="symbol"?e:e+""}function Npe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,NM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kpe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Rpe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Mpe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Dpe=["cm","mm","pt","pc","in","Q","px"];function Ope(t){return Dpe.includes(t)}var au="NaN";function Lpe(t,e){return t*Mpe[e]}class Vn{static parse(e){var n,[,r,i]=(n=Rpe.exec(e))!==null&&n!==void 0?n:[];return r==null?Vn.NaN:new Vn(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Bo(e)&&(this.unit=""),n!==""&&!kpe.test(n)&&(this.num=NaN,this.unit=""),Ope(n)&&(this.num=Lpe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Vn(NaN,""):new Vn(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Vn(NaN,""):new Vn(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Vn(NaN,""):new Vn(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Vn(NaN,""):new Vn(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Bo(this.num)}}nU=Vn;Ipe(Vn,"NaN",new nU(NaN,""));function rU(t){if(t==null||t.includes(au))return au;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,o]=(n=PM.exec(e))!==null&&n!==void 0?n:[],s=Vn.parse(r??""),a=Vn.parse(o??""),c=i==="*"?s.multiply(a):s.divide(a);if(c.isNaN())return au;e=e.replace(PM,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,f,p,v]=(u=NM.exec(e))!==null&&u!==void 0?u:[],w=Vn.parse(f??""),E=Vn.parse(v??""),S=p==="+"?w.add(E):w.subtract(E);if(S.isNaN())return au;e=e.replace(NM,S.toString())}return e}var kM=/\(([^()]*)\)/;function jpe(t){for(var e=t,n;(n=kM.exec(e))!=null;){var[,r]=n;e=e.replace(kM,rU(r))}return e}function Fpe(t){var e=t.replace(/\s+/g,"");return e=jpe(e),e=rU(e),e}function Upe(t){try{return Fpe(t)}catch{return au}}function Mb(t){var e=Upe(t.slice(5,-1));return e===au?"":e}var Vpe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],$pe=["dx","dy","angle","className","breakAll"];function M_(){return M_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},M_.apply(null,arguments)}function RM(t,e){if(t==null)return{};var n,r,i=Bpe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Bpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var iU=/[ \f\n\r\t\v\u2028\u2029]+/,oU=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Nn(e)||(n?i=e.toString().split(""):i=e.toString().split(iU));var o=i.map(a=>({word:a,width:yf(a,r).width})),s=n?0:yf("",r).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}};function zpe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var sU=(t,e,n,r)=>t.reduce((i,o)=>{var{word:s,width:a}=o,c=i[i.length-1];if(c&&a!=null&&(e==null||r||c.width+a+n<Number(e)))c.words.push(s),c.width+=a+n;else{var u={words:[s],width:a};i.push(u)}return i},[]),aU=t=>t.reduce((e,n)=>e.width>n.width?e:n),qpe="",MM=(t,e,n,r,i,o,s,a)=>{var c=t.slice(0,e),u=oU({breakAll:n,style:r,children:c+qpe});if(!u)return[!1,[]];var f=sU(u.wordsWithComputedWidth,o,s,a),p=f.length>i||aU(f).width>Number(o);return[p,f]},Gpe=(t,e,n,r,i)=>{var{maxLines:o,children:s,style:a,breakAll:c}=t,u=We(o),f=String(s),p=sU(e,r,n,i);if(!u||i)return p;var v=p.length>o||aU(p).width>Number(r);if(!v)return p;for(var w=0,E=f.length-1,S=0,_;w<=E&&S<=f.length-1;){var N=Math.floor((w+E)/2),j=N-1,[F,q]=MM(f,j,c,a,o,r,n,i),[V]=MM(f,N,c,a,o,r,n,i);if(!F&&!V&&(w=N+1),F&&V&&(E=N-1),!F&&V){_=q;break}S++}return _||p},DM=t=>{var e=Nn(t)?[]:t.toString().split(iU);return[{words:e,width:void 0}]},Hpe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:s}=t;if((e||n)&&!Qv.isSsr){var a,c,u=oU({breakAll:o,children:r,style:i});if(u){var{wordsWithComputedWidth:f,spaceWidth:p}=u;a=f,c=p}else return DM(r);return Gpe({breakAll:o,children:r,maxLines:s,style:i},a,c,e,!!n)}return DM(r)},lU="#808080",Wpe={angle:0,breakAll:!1,capHeight:"0.71em",fill:lU,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},MT=I.forwardRef((t,e)=>{var n=sr(t,Wpe),{x:r,y:i,lineHeight:o,capHeight:s,fill:a,scaleToFit:c,textAnchor:u,verticalAnchor:f}=n,p=RM(n,Vpe),v=I.useMemo(()=>Hpe({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:c,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,c,p.style,p.width]),{dx:w,dy:E,angle:S,className:_,breakAll:N}=p,j=RM(p,$pe);if(!zo(r)||!zo(i)||v.length===0)return null;var F=Number(r)+(We(w)?w:0),q=Number(i)+(We(E)?E:0);if(!fn(F)||!fn(q))return null;var V;switch(f){case"start":V=Mb("calc(".concat(s,")"));break;case"middle":V=Mb("calc(".concat((v.length-1)/2," * -").concat(o," + (").concat(s," / 2))"));break;default:V=Mb("calc(".concat(v.length-1," * -").concat(o,")"));break}var $=[];if(c){var k=v[0].width,{width:D}=p;$.push("scale(".concat(We(D)&&We(k)?D/k:1,")"))}return S&&$.push("rotate(".concat(S,", ").concat(F,", ").concat(q,")")),$.length&&(j.transform=$.join(" ")),I.createElement("text",M_({},mr(j),{ref:e,x:F,y:q,className:Pt("recharts-text",_),textAnchor:u,fill:a.includes("url")?lU:a}),v.map((O,z)=>{var U=O.words.join(N?"":" ");return I.createElement("tspan",{x:F,dy:z===0?V:o,key:"".concat(U,"-").concat(z)},U)}))});MT.displayName="Text";var Kpe=["labelRef"],Ype=["content"];function OM(t,e){if(t==null)return{};var n,r,i=Jpe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Jpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function LM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function en(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LM(Object(n),!0).forEach(function(r){Qpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qpe(t,e,n){return(e=Xpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xpe(t){var e=Zpe(t,"string");return typeof e=="symbol"?e:e+""}function Zpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ms(){return ms=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ms.apply(null,arguments)}var cU=I.createContext(null),eme=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:o,height:s,children:a}=t,c=I.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:o,height:s}),[e,n,r,i,o,s]);return I.createElement(cU.Provider,{value:c},a)},uU=()=>{var t=I.useContext(cU),e=Hv();return t||_6(e)},tme=I.createContext(null),nme=()=>{var t=I.useContext(tme),e=Qe(B3);return t||e},rme=t=>{var{value:e,formatter:n}=t,r=Nn(t.children)?e:t.children;return typeof n=="function"?n(r):r},DT=t=>t!=null&&typeof t=="function",ime=(t,e)=>{var n=mi(e-t),r=Math.min(Math.abs(e-t),360);return n*r},ome=(t,e,n,r,i)=>{var{offset:o,className:s}=t,{cx:a,cy:c,innerRadius:u,outerRadius:f,startAngle:p,endAngle:v,clockWise:w}=i,E=(u+f)/2,S=ime(p,v),_=S>=0?1:-1,N,j;switch(e){case"insideStart":N=p+_*o,j=w;break;case"insideEnd":N=v-_*o,j=!w;break;case"end":N=v+_*o,j=w;break;default:throw new Error("Unsupported position ".concat(e))}j=S<=0?j:!j;var F=zn(a,c,E,N),q=zn(a,c,E,N+(j?1:-1)*359),V="M".concat(F.x,",").concat(F.y,`
    A`).concat(E,",").concat(E,",0,1,").concat(j?0:1,`,
    `).concat(q.x,",").concat(q.y),$=Nn(t.id)?Nf("recharts-radial-line-"):t.id;return I.createElement("text",ms({},r,{dominantBaseline:"central",className:Pt("recharts-radial-bar-label",s)}),I.createElement("defs",null,I.createElement("path",{id:$,d:V})),I.createElement("textPath",{xlinkHref:"#".concat($)},n))},sme=(t,e,n)=>{var{cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:a,endAngle:c}=t,u=(a+c)/2;if(n==="outside"){var{x:f,y:p}=zn(r,i,s+e,u);return{x:f,y:p,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var v=(o+s)/2,{x:w,y:E}=zn(r,i,v,u);return{x:w,y:E,textAnchor:"middle",verticalAnchor:"middle"}},D_=t=>"cx"in t&&We(t.cx),ame=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,o;n!=null&&!D_(n)&&(o=n);var{x:s,y:a,upperWidth:c,lowerWidth:u,height:f}=e,p=s,v=s+(c-u)/2,w=(p+v)/2,E=(c+u)/2,S=p+c/2,_=f>=0?1:-1,N=_*r,j=_>0?"end":"start",F=_>0?"start":"end",q=c>=0?1:-1,V=q*r,$=q>0?"end":"start",k=q>0?"start":"end";if(i==="top"){var D={x:p+c/2,y:a-N,textAnchor:"middle",verticalAnchor:j};return en(en({},D),o?{height:Math.max(a-o.y,0),width:c}:{})}if(i==="bottom"){var O={x:v+u/2,y:a+f+N,textAnchor:"middle",verticalAnchor:F};return en(en({},O),o?{height:Math.max(o.y+o.height-(a+f),0),width:u}:{})}if(i==="left"){var z={x:w-V,y:a+f/2,textAnchor:$,verticalAnchor:"middle"};return en(en({},z),o?{width:Math.max(z.x-o.x,0),height:f}:{})}if(i==="right"){var U={x:w+E+V,y:a+f/2,textAnchor:k,verticalAnchor:"middle"};return en(en({},U),o?{width:Math.max(o.x+o.width-U.x,0),height:f}:{})}var M=o?{width:E,height:f}:{};return i==="insideLeft"?en({x:w+V,y:a+f/2,textAnchor:k,verticalAnchor:"middle"},M):i==="insideRight"?en({x:w+E-V,y:a+f/2,textAnchor:$,verticalAnchor:"middle"},M):i==="insideTop"?en({x:p+c/2,y:a+N,textAnchor:"middle",verticalAnchor:F},M):i==="insideBottom"?en({x:v+u/2,y:a+f-N,textAnchor:"middle",verticalAnchor:j},M):i==="insideTopLeft"?en({x:p+V,y:a+N,textAnchor:k,verticalAnchor:F},M):i==="insideTopRight"?en({x:p+c-V,y:a+N,textAnchor:$,verticalAnchor:F},M):i==="insideBottomLeft"?en({x:v+V,y:a+f-N,textAnchor:k,verticalAnchor:j},M):i==="insideBottomRight"?en({x:v+u-V,y:a+f-N,textAnchor:$,verticalAnchor:j},M):i&&typeof i=="object"&&(We(i.x)||Is(i.x))&&(We(i.y)||Is(i.y))?en({x:s+ja(i.x,E),y:a+ja(i.y,f),textAnchor:"end",verticalAnchor:"end"},M):en({x:S,y:a+f/2,textAnchor:"middle",verticalAnchor:"middle"},M)},lme={angle:0,offset:5,zIndex:dr.label,position:"middle",textBreakAll:!1};function ga(t){var e=sr(t,lme),{viewBox:n,position:r,value:i,children:o,content:s,className:a="",textBreakAll:c,labelRef:u}=e,f=nme(),p=uU(),v=r==="center"?p:f??p,w,E,S;if(n==null?w=v:D_(n)?w=n:w=_6(n),!w||Nn(i)&&Nn(o)&&!I.isValidElement(s)&&typeof s!="function")return null;var _=en(en({},e),{},{viewBox:w});if(I.isValidElement(s)){var{labelRef:N}=_,j=OM(_,Kpe);return I.cloneElement(s,j)}if(typeof s=="function"){var{content:F}=_,q=OM(_,Ype);if(E=I.createElement(s,q),I.isValidElement(E))return E}else E=rme(e);var V=mr(e);if(D_(w)){if(r==="insideStart"||r==="insideEnd"||r==="end")return ome(e,r,E,V,w);S=sme(w,e.offset,e.position)}else S=ame(e,w);return I.createElement(zs,{zIndex:e.zIndex},I.createElement(MT,ms({ref:u,className:Pt("recharts-label",a)},V,S,{textAnchor:zpe(V.textAnchor)?V.textAnchor:S.textAnchor,breakAll:c}),E))}ga.displayName="Label";var cme=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?I.createElement(ga,ms({key:"label-implicit"},r)):zo(t)?I.createElement(ga,ms({key:"label-implicit",value:t},r)):I.isValidElement(t)?t.type===ga?I.cloneElement(t,en({key:"label-implicit"},r)):I.createElement(ga,ms({key:"label-implicit",content:t},r)):DT(t)?I.createElement(ga,ms({key:"label-implicit",content:t},r)):t&&typeof t=="object"?I.createElement(ga,ms({},t,{key:"label-implicit"},r)):null};function ume(t){var{label:e,labelRef:n}=t,r=uU();return cme(e,r,n)||null}var Db={},Ob={},jM;function dme(){return jM||(jM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(Ob)),Ob}var Lb={},FM;function fme(){return FM||(FM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(Lb)),Lb}var UM;function hme(){return UM||(UM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dme(),n=fme(),r=xS();function i(o){if(r.isArrayLike(o))return e.last(n.toArray(o))}t.last=i})(Db)),Db}var jb,VM;function pme(){return VM||(VM=1,jb=hme().last),jb}var mme=pme();const gme=Xr(mme);var vme=["valueAccessor"],yme=["dataKey","clockWise","id","textBreakAll","zIndex"];function Lg(){return Lg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lg.apply(null,arguments)}function $M(t,e){if(t==null)return{};var n,r,i=xme(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var bme=t=>Array.isArray(t.value)?gme(t.value):t.value,dU=I.createContext(void 0),wme=dU.Provider,fU=I.createContext(void 0);fU.Provider;function _me(){return I.useContext(dU)}function Eme(){return I.useContext(fU)}function _m(t){var{valueAccessor:e=bme}=t,n=$M(t,vme),{dataKey:r,clockWise:i,id:o,textBreakAll:s,zIndex:a}=n,c=$M(n,yme),u=_me(),f=Eme(),p=u||f;return!p||!p.length?null:I.createElement(zs,{zIndex:a??dr.label},I.createElement(La,{className:"recharts-label-list"},p.map((v,w)=>{var E,S=Nn(r)?e(v,w):qn(v&&v.payload,r),_=Nn(o)?{}:{id:"".concat(o,"-").concat(w)};return I.createElement(ga,Lg({key:"label-".concat(w)},mr(v),c,_,{fill:(E=n.fill)!==null&&E!==void 0?E:v.fill,parentViewBox:v.parentViewBox,value:S,textBreakAll:s,viewBox:v.viewBox,index:w,zIndex:0}))})))}_m.displayName="LabelList";function Sme(t){var{label:e}=t;return e?e===!0?I.createElement(_m,{key:"labelList-implicit"}):I.isValidElement(e)||DT(e)?I.createElement(_m,{key:"labelList-implicit",content:e}):typeof e=="object"?I.createElement(_m,Lg({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function O_(){return O_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O_.apply(null,arguments)}var hU=t=>{var{cx:e,cy:n,r,className:i}=t,o=Pt("recharts-dot",i);return We(e)&&We(n)&&We(r)?I.createElement("circle",O_({},$o(t),yS(t),{className:o,cx:e,cy:n,r})):null},Tme={radiusAxis:{},angleAxis:{}},pU=Rr({name:"polarAxis",initialState:Tme,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Mxe,removeRadiusAxis:Dxe,addAngleAxis:Oxe,removeAngleAxis:Lxe}=pU.actions,Ame=pU.reducer,Fb={exports:{}},St={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BM;function Cme(){if(BM)return St;BM=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),E;E=Symbol.for("react.module.reference");function S(_){if(typeof _=="object"&&_!==null){var N=_.$$typeof;switch(N){case t:switch(_=_.type,_){case n:case i:case r:case u:case f:return _;default:switch(_=_&&_.$$typeof,_){case a:case s:case c:case v:case p:case o:return _;default:return N}}case e:return N}}}return St.ContextConsumer=s,St.ContextProvider=o,St.Element=t,St.ForwardRef=c,St.Fragment=n,St.Lazy=v,St.Memo=p,St.Portal=e,St.Profiler=i,St.StrictMode=r,St.Suspense=u,St.SuspenseList=f,St.isAsyncMode=function(){return!1},St.isConcurrentMode=function(){return!1},St.isContextConsumer=function(_){return S(_)===s},St.isContextProvider=function(_){return S(_)===o},St.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===t},St.isForwardRef=function(_){return S(_)===c},St.isFragment=function(_){return S(_)===n},St.isLazy=function(_){return S(_)===v},St.isMemo=function(_){return S(_)===p},St.isPortal=function(_){return S(_)===e},St.isProfiler=function(_){return S(_)===i},St.isStrictMode=function(_){return S(_)===r},St.isSuspense=function(_){return S(_)===u},St.isSuspenseList=function(_){return S(_)===f},St.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===n||_===i||_===r||_===u||_===f||_===w||typeof _=="object"&&_!==null&&(_.$$typeof===v||_.$$typeof===p||_.$$typeof===o||_.$$typeof===s||_.$$typeof===c||_.$$typeof===E||_.getModuleId!==void 0)},St.typeOf=S,St}var zM;function Ime(){return zM||(zM=1,Fb.exports=Cme()),Fb.exports}Ime();var mU=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,Ub={},qM;function Pme(){return qM||(qM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const o=n[Symbol.toStringTag];return o==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${o}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(Ub)),Ub}var Vb,GM;function Nme(){return GM||(GM=1,Vb=Pme().isPlainObject),Vb}var kme=Nme();const Rme=Xr(kme);var HM,WM,KM,YM,JM;function QM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QM(Object(n),!0).forEach(function(r){Mme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mme(t,e,n){return(e=Dme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dme(t){var e=Ome(t,"string");return typeof e=="symbol"?e:e+""}function Ome(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jg(){return jg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jg.apply(null,arguments)}function ef(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var ZM=(t,e,n,r,i)=>{var o=n-r,s;return s=Jt(HM||(HM=ef(["M ",",",""])),t,e),s+=Jt(WM||(WM=ef(["L ",",",""])),t+n,e),s+=Jt(KM||(KM=ef(["L ",",",""])),t+n-o/2,e+i),s+=Jt(YM||(YM=ef(["L ",",",""])),t+n-o/2-r,e+i),s+=Jt(JM||(JM=ef(["L ",","," Z"])),t,e),s},Lme={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jme=t=>{var e=sr(t,Lme),{x:n,y:r,upperWidth:i,lowerWidth:o,height:s,className:a}=e,{animationEasing:c,animationDuration:u,animationBegin:f,isUpdateAnimationActive:p}=e,v=I.useRef(null),[w,E]=I.useState(-1),S=I.useRef(i),_=I.useRef(o),N=I.useRef(s),j=I.useRef(n),F=I.useRef(r),q=DS(t,"trapezoid-");if(I.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var me=v.current.getTotalLength();me&&E(me)}catch{}},[]),n!==+n||r!==+r||i!==+i||o!==+o||s!==+s||i===0&&o===0||s===0)return null;var V=Pt("recharts-trapezoid",a);if(!p)return I.createElement("g",null,I.createElement("path",jg({},mr(e),{className:V,d:ZM(n,r,i,o,s)})));var $=S.current,k=_.current,D=N.current,O=j.current,z=F.current,U="0px ".concat(w===-1?1:w,"px"),M="".concat(w,"px 0px"),P=D6(["strokeDasharray"],u,c);return I.createElement(MS,{animationId:q,key:q,canBegin:w>0,duration:u,easing:c,isActive:p,begin:f},me=>{var ce=Nr($,i,me),ge=Nr(k,o,me),xe=Nr(D,s,me),le=Nr(O,n,me),ne=Nr(z,r,me);v.current&&(S.current=ce,_.current=ge,N.current=xe,j.current=le,F.current=ne);var de=me>0?{transition:P,strokeDasharray:M}:{strokeDasharray:U};return I.createElement("path",jg({},mr(e),{className:V,d:ZM(le,ne,ce,ge,xe),ref:v,style:XM(XM({},de),e.style)}))})},Fme=["option","shapeType","activeClassName"];function Ume(t,e){if(t==null)return{};var n,r,i=Vme(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Vme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function eD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eD(Object(n),!0).forEach(function(r){$me(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $me(t,e,n){return(e=Bme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bme(t){var e=zme(t,"string");return typeof e=="symbol"?e:e+""}function zme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qme(t,e){return Fg(Fg({},e),t)}function Gme(t,e){return t==="symbols"}function tD(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return I.createElement(F6,n);case"trapezoid":return I.createElement(jme,n);case"sector":return I.createElement($6,n);case"symbols":if(Gme(e))return I.createElement(vS,n);break;case"curve":return I.createElement(M6,n);default:return null}}function Hme(t){return I.isValidElement(t)?t.props:t}function Wme(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=Ume(t,Fme),o;if(I.isValidElement(e))o=I.cloneElement(e,Fg(Fg({},i),Hme(e)));else if(typeof e=="function")o=e(i,i.index);else if(Rme(e)&&typeof e!="boolean"){var s=qme(e,i);o=I.createElement(tD,{shapeType:n,elementProps:s})}else{var a=i;o=I.createElement(tD,{shapeType:n,elementProps:a})}return i.isActive?I.createElement(La,{className:r},o):o}function Kme(t){var{tooltipEntrySettings:e}=t,n=hn(),r=Mr(),i=I.useRef(null);return I.useLayoutEffect(()=>{r||(i.current===null?n(afe(e)):i.current!==e&&n(lfe({prev:i.current,next:e})),i.current=e)},[e,n,r]),I.useLayoutEffect(()=>()=>{i.current&&(n(cfe(i.current)),i.current=null)},[n]),null}function Yme(t){var{legendPayload:e}=t,n=hn(),r=Mr(),i=I.useRef(null);return I.useLayoutEffect(()=>{r||(i.current===null?n(Ase(e)):i.current!==e&&n(Cse({prev:i.current,next:e})),i.current=e)},[n,r,e]),I.useLayoutEffect(()=>()=>{i.current&&(n(Ise(i.current)),i.current=null)},[n]),null}var $b,Jme=()=>{var[t]=I.useState(()=>Nf("uid-"));return t},Qme=($b=ID.useId)!==null&&$b!==void 0?$b:Jme;function Xme(t,e){var n=Qme();return e||(t?"".concat(t,"-").concat(n):n)}var Zme=I.createContext(void 0),ege=t=>{var{id:e,type:n,children:r}=t,i=Xme("recharts-".concat(n),e);return I.createElement(Zme.Provider,{value:i},r(i))},tge={cartesianItems:[],polarItems:[]},gU=Rr({name:"graphicalItems",initialState:tge,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:qt()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Yi(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:qt()},removeCartesianGraphicalItem:{reducer(t,e){var n=Yi(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:qt()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:qt()},removePolarGraphicalItem:{reducer(t,e){var n=Yi(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:qt()}}}),{addCartesianGraphicalItem:nge,replaceCartesianGraphicalItem:rge,removeCartesianGraphicalItem:ige,addPolarGraphicalItem:jxe,removePolarGraphicalItem:Fxe}=gU.actions,oge=gU.reducer,sge=t=>{var e=hn(),n=I.useRef(null);return I.useLayoutEffect(()=>{n.current===null?e(nge(t)):n.current!==t&&e(rge({prev:n.current,next:t})),n.current=t},[e,t]),I.useLayoutEffect(()=>()=>{n.current&&(e(ige(n.current)),n.current=null)},[e]),null},age=I.memo(sge),lge=["points"];function nD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nD(Object(n),!0).forEach(function(r){cge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cge(t,e,n){return(e=uge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uge(t){var e=dge(t,"string");return typeof e=="symbol"?e:e+""}function dge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ug(){return Ug=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ug.apply(null,arguments)}function fge(t,e){if(t==null)return{};var n,r,i=hge(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function pge(t){var{option:e,dotProps:n,className:r}=t;if(I.isValidElement(e))return I.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Pt(r,typeof e!="boolean"?e.className:""),o=n??{},{points:s}=o,a=fge(o,lge);return I.createElement(hU,Ug({},a,{className:i}))}function mge(t,e){return t==null?!1:e?!0:t.length===1}function gge(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:o,baseProps:s,needClip:a,clipPathId:c,zIndex:u=dr.scatter}=t;if(!mge(e,n))return null;var f=mU(n),p=ane(n),v=e.map((E,S)=>{var _,N,j=Bb(Bb(Bb({r:3},s),p),{},{index:S,cx:(_=E.x)!==null&&_!==void 0?_:void 0,cy:(N=E.y)!==null&&N!==void 0?N:void 0,dataKey:o,value:E.value,payload:E.payload,points:e});return I.createElement(pge,{key:"dot-".concat(S),option:n,dotProps:j,className:i})}),w={};return a&&c!=null&&(w.clipPath="url(#clipPath-".concat(f?"":"dots-").concat(c,")")),I.createElement(zs,{zIndex:u},I.createElement(La,Ug({className:r},w),v))}function rD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rD(Object(n),!0).forEach(function(r){vge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vge(t,e,n){return(e=yge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yge(t){var e=xge(t,"string");return typeof e=="symbol"?e:e+""}function xge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bge={xAxis:{},yAxis:{},zAxis:{}},vU=Rr({name:"cartesianAxis",initialState:bge,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:qt()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:qt()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:qt()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:qt()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:qt()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:qt()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:qt()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:qt()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:qt()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var o=i.widthHistory||[];if(o.length===3&&o[0]===o[2]&&r===o[1]&&r!==i.width&&Math.abs(r-o[0])<=1)return;var s=[...o,r].slice(-3);t.yAxis[n]=iD(iD({},t.yAxis[n]),{},{width:r,widthHistory:s})}}}}),{addXAxis:wge,replaceXAxis:_ge,removeXAxis:Ege,addYAxis:Sge,replaceYAxis:Tge,removeYAxis:Age,addZAxis:Uxe,replaceZAxis:Vxe,removeZAxis:$xe,updateYAxisWidth:Cge}=vU.actions,Ige=vU.reducer,Pge=se([Hn],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Nge=se([Pge,js,Fs],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),OT=()=>Qe(Nge),kge=()=>Qe(the);function oD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(n),!0).forEach(function(r){Rge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rge(t,e,n){return(e=Mge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mge(t){var e=Dge(t,"string");return typeof e=="symbol"?e:e+""}function Dge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Oge=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:o,clipPath:s}=t;if(i===!1||e.x==null||e.y==null)return null;var a={index:n,dataKey:o,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=zb(zb(zb({},a),Cv(i)),yS(i)),u;return I.isValidElement(i)?u=I.cloneElement(i,c):typeof i=="function"?u=i(c):u=I.createElement(hU,c),I.createElement(La,{className:"recharts-active-dot",clipPath:s},u)};function Lge(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:o,zIndex:s=dr.activeDot}=t,a=Qe(zf),c=kge();if(e==null||c==null)return null;var u=e.find(f=>c.includes(f.payload));return Nn(u)?null:I.createElement(zs,{zIndex:s},I.createElement(Oge,{point:u,childIndex:Number(a),mainColor:n,dataKey:i,activeDot:r,clipPath:o}))}var jge=t=>{var{chartData:e}=t,n=hn(),r=Mr();return I.useEffect(()=>r?()=>{}:(n(bM(e)),()=>{n(bM(void 0))}),[e,n,r]),null},sD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},yU=Rr({name:"brush",initialState:sD,reducers:{setBrushSettings(t,e){return e.payload==null?sD:e.payload}}}),{setBrushSettings:Bxe}=yU.actions,Fge=yU.reducer;function Uge(t,e,n){return(e=Vge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vge(t){var e=$ge(t,"string");return typeof e=="symbol"?e:e+""}function $ge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class LT{static create(e){return new LT(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}Uge(LT,"EPS",1e-4);function Bge(t){return(t%180+180)%180}var zge=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Bge(i),s=o*Math.PI/180,a=Math.atan(r/n),c=s>a&&s<Math.PI-a?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},qge={dots:[],areas:[],lines:[]},xU=Rr({name:"referenceElements",initialState:qge,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Yi(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Yi(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Yi(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:zxe,removeDot:qxe,addArea:Gxe,removeArea:Hxe,addLine:Wxe,removeLine:Kxe}=xU.actions,Gge=xU.reducer,Hge=I.createContext(void 0),Wge=t=>{var{children:e}=t,[n]=I.useState("".concat(Nf("recharts"),"-clip")),r=OT();if(r==null)return null;var{x:i,y:o,width:s,height:a}=r;return I.createElement(Hge.Provider,{value:n},I.createElement("defs",null,I.createElement("clipPath",{id:n},I.createElement("rect",{x:i,y:o,height:a,width:s}))),e)};function bU(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function Kge(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return zge(r,n)}function Yge(t,e,n){var r=n==="width",{x:i,y:o,width:s,height:a}=t;return e===1?{start:r?i:o,end:r?i+s:o+a}:{start:r?i+s:o+a,end:r?i:o}}function Gf(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function Jge(t,e){return bU(t,e+1)}function Qge(t,e,n,r,i){for(var o=(r||[]).slice(),{start:s,end:a}=e,c=0,u=1,f=s,p=function(){var E=r==null?void 0:r[c];if(E===void 0)return{v:bU(r,u)};var S=c,_,N=()=>(_===void 0&&(_=n(E,S)),_),j=E.coordinate,F=c===0||Gf(t,j,N,f,a);F||(c=0,f=s,u+=1),F&&(f=j+t*(N()/2+i),c+=u)},v;u<=o.length;)if(v=p(),v)return v.v;return[]}function Xge(t,e,n,r,i){var o=(r||[]).slice(),s=o.length;if(s===0)return[];for(var{start:a,end:c}=e,u=1;u<=s;u++){for(var f=(s-1)%u,p=a,v=!0,w=function(){var j=r[E],F=E,q,V=()=>(q===void 0&&(q=n(j,F)),q),$=j.coordinate,k=E===f||Gf(t,$,V,p,c);if(!k)return v=!1,1;k&&(p=$+t*(V()/2+i))},E=f;E<s&&!w();E+=u);if(v){for(var S=[],_=f;_<s;_+=u)S.push(r[_]);return S}}return[]}function aD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aD(Object(n),!0).forEach(function(r){Zge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zge(t,e,n){return(e=eve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eve(t){var e=tve(t,"string");return typeof e=="symbol"?e:e+""}function tve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nve(t,e,n,r,i){for(var o=(r||[]).slice(),s=o.length,{start:a}=e,{end:c}=e,u=function(v){var w=o[v],E,S=()=>(E===void 0&&(E=n(w,v)),E);if(v===s-1){var _=t*(w.coordinate+t*S()/2-c);o[v]=w=er(er({},w),{},{tickCoord:_>0?w.coordinate-_*t:w.coordinate})}else o[v]=w=er(er({},w),{},{tickCoord:w.coordinate});if(w.tickCoord!=null){var N=Gf(t,w.tickCoord,S,a,c);N&&(c=w.tickCoord-t*(S()/2+i),o[v]=er(er({},w),{},{isShow:!0}))}},f=s-1;f>=0;f--)u(f);return o}function rve(t,e,n,r,i,o){var s=(r||[]).slice(),a=s.length,{start:c,end:u}=e;if(o){var f=r[a-1],p=n(f,a-1),v=t*(f.coordinate+t*p/2-u);if(s[a-1]=f=er(er({},f),{},{tickCoord:v>0?f.coordinate-v*t:f.coordinate}),f.tickCoord!=null){var w=Gf(t,f.tickCoord,()=>p,c,u);w&&(u=f.tickCoord-t*(p/2+i),s[a-1]=er(er({},f),{},{isShow:!0}))}}for(var E=o?a-1:a,S=function(j){var F=s[j],q,V=()=>(q===void 0&&(q=n(F,j)),q);if(j===0){var $=t*(F.coordinate-t*V()/2-c);s[j]=F=er(er({},F),{},{tickCoord:$<0?F.coordinate-$*t:F.coordinate})}else s[j]=F=er(er({},F),{},{tickCoord:F.coordinate});if(F.tickCoord!=null){var k=Gf(t,F.tickCoord,V,c,u);k&&(c=F.tickCoord+t*(V()/2+i),s[j]=er(er({},F),{},{isShow:!0}))}},_=0;_<E;_++)S(_);return s}function jT(t,e,n){var{tick:r,ticks:i,viewBox:o,minTickGap:s,orientation:a,interval:c,tickFormatter:u,unit:f,angle:p}=t;if(!i||!i.length||!r)return[];if(We(c)||Qv.isSsr){var v;return(v=Jge(i,We(c)?c:0))!==null&&v!==void 0?v:[]}var w=[],E=a==="top"||a==="bottom"?"width":"height",S=f&&E==="width"?yf(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},_=(F,q)=>{var V=typeof u=="function"?u(F.value,q):F.value;return E==="width"?Kge(yf(V,{fontSize:e,letterSpacing:n}),S,p):yf(V,{fontSize:e,letterSpacing:n})[E]},N=i.length>=2?mi(i[1].coordinate-i[0].coordinate):1,j=Yge(o,N,E);return c==="equidistantPreserveStart"?Qge(N,j,_,i,s):c==="equidistantPreserveEnd"?Xge(N,j,_,i,s):(c==="preserveStart"||c==="preserveStartEnd"?w=rve(N,j,_,i,s,c==="preserveStartEnd"):w=nve(N,j,_,i,s),w.filter(F=>F.isShow))}var ive=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=t,s=0;if(e){Array.from(e).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>s&&(s=p.width)}});var a=n?n.getBoundingClientRect().width:0,c=i+o,u=s+c+a+(n?r:0);return Math.round(u)}return 0},ove=["axisLine","width","height","className","hide","ticks","axisType"];function sve(t,e){if(t==null)return{};var n,r,i=ave(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ave(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Jl(){return Jl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jl.apply(null,arguments)}function lD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ln(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lD(Object(n),!0).forEach(function(r){lve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lve(t,e,n){return(e=cve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cve(t){var e=uve(t,"string");return typeof e=="symbol"?e:e+""}function uve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _s={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:dr.axis};function dve(t){var{x:e,y:n,width:r,height:i,orientation:o,mirror:s,axisLine:a,otherSvgProps:c}=t;if(!a)return null;var u=ln(ln(ln({},c),$o(a)),{},{fill:"none"});if(o==="top"||o==="bottom"){var f=+(o==="top"&&!s||o==="bottom"&&s);u=ln(ln({},u),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var p=+(o==="left"&&!s||o==="right"&&s);u=ln(ln({},u),{},{x1:e+p*r,y1:n,x2:e+p*r,y2:n+i})}return I.createElement("line",Jl({},u,{className:Pt("recharts-cartesian-axis-line",kv(a,"className"))}))}function fve(t,e,n,r,i,o,s,a,c){var u,f,p,v,w,E,S=a?-1:1,_=t.tickSize||s,N=We(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":u=f=t.coordinate,v=n+ +!a*i,p=v-S*_,E=p-S*c,w=N;break;case"left":p=v=t.coordinate,f=e+ +!a*r,u=f-S*_,w=u-S*c,E=N;break;case"right":p=v=t.coordinate,f=e+ +a*r,u=f+S*_,w=u+S*c,E=N;break;default:u=f=t.coordinate,v=n+ +a*i,p=v+S*_,E=p+S*c,w=N;break}return{line:{x1:u,y1:p,x2:f,y2:v},tick:{x:w,y:E}}}function hve(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function pve(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function mve(t){var{option:e,tickProps:n,value:r}=t,i,o=Pt(n.className,"recharts-cartesian-axis-tick-value");if(I.isValidElement(e))i=I.cloneElement(e,ln(ln({},n),{},{className:o}));else if(typeof e=="function")i=e(ln(ln({},n),{},{className:o}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Pt(s,e==null?void 0:e.className)),i=I.createElement(MT,Jl({},n,{className:s}),r)}return i}var gve=I.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:o,tickFormatter:s,unit:a,padding:c,tickTextProps:u,orientation:f,mirror:p,x:v,y:w,width:E,height:S,tickSize:_,tickMargin:N,fontSize:j,letterSpacing:F,getTicksConfig:q,events:V,axisType:$}=t,k=jT(ln(ln({},q),{},{ticks:n}),j,F),D=hve(f,p),O=pve(f,p),z=$o(q),U=Cv(r),M={};typeof i=="object"&&(M=i);var P=ln(ln({},z),{},{fill:"none"},M),me=k.map(xe=>ln({entry:xe},fve(xe,v,w,E,S,f,_,p,N))),ce=me.map(xe=>{var{entry:le,line:ne}=xe;return I.createElement(La,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(le.value,"-").concat(le.coordinate,"-").concat(le.tickCoord)},i&&I.createElement("line",Jl({},P,ne,{className:Pt("recharts-cartesian-axis-tick-line",kv(i,"className"))})))}),ge=me.map((xe,le)=>{var{entry:ne,tick:de}=xe,Y=ln(ln(ln(ln({textAnchor:D,verticalAnchor:O},z),{},{stroke:"none",fill:o},U),de),{},{index:le,payload:ne,visibleTicksCount:k.length,tickFormatter:s,padding:c},u);return I.createElement(La,Jl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ne.value,"-").concat(ne.coordinate,"-").concat(ne.tickCoord)},E5(V,ne,le)),r&&I.createElement(mve,{option:r,tickProps:Y,value:"".concat(typeof s=="function"?s(ne.value,le):ne.value).concat(a||"")}))});return I.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat($,"-ticks")},ge.length>0&&I.createElement(zs,{zIndex:dr.label},I.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat($,"-tick-labels"),ref:e},ge)),ce.length>0&&I.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat($,"-tick-lines")},ce))}),vve=I.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:o,hide:s,ticks:a,axisType:c}=t,u=sve(t,ove),[f,p]=I.useState(""),[v,w]=I.useState(""),E=I.useRef(null);I.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var _;return ive({ticks:E.current,label:(_=t.labelRef)===null||_===void 0?void 0:_.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var S=I.useCallback(_=>{if(_){var N=_.getElementsByClassName("recharts-cartesian-axis-tick-value");E.current=N;var j=N[0];if(j){var F=window.getComputedStyle(j),q=F.fontSize,V=F.letterSpacing;(q!==f||V!==v)&&(p(q),w(V))}}},[f,v]);return s||r!=null&&r<=0||i!=null&&i<=0?null:I.createElement(zs,{zIndex:t.zIndex},I.createElement(La,{className:Pt("recharts-cartesian-axis",o)},I.createElement(dve,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:$o(t)}),I.createElement(gve,{ref:S,axisType:c,events:u,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:v,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:a,unit:t.unit,width:t.width,x:t.x,y:t.y}),I.createElement(eme,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},I.createElement(ume,{label:t.label,labelRef:t.labelRef}),t.children)))}),FT=I.forwardRef((t,e)=>{var n=sr(t,_s);return I.createElement(vve,Jl({},n,{ref:e}))});FT.displayName="CartesianAxis";var yve=["x1","y1","x2","y2","key"],xve=["offset"],bve=["xAxisId","yAxisId"],wve=["xAxisId","yAxisId"];function cD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cD(Object(n),!0).forEach(function(r){_ve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _ve(t,e,n){return(e=Eve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eve(t){var e=Sve(t,"string");return typeof e=="symbol"?e:e+""}function Sve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kl(){return kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kl.apply(null,arguments)}function Vg(t,e){if(t==null)return{};var n,r,i=Tve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Tve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ave=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:o,height:s,ry:a}=t;return I.createElement("rect",{x:r,y:i,ry:a,width:o,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function wU(t){var{option:e,lineItemProps:n}=t,r;if(I.isValidElement(e))r=I.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:o,y1:s,x2:a,y2:c,key:u}=n,f=Vg(n,yve),p=(i=$o(f))!==null&&i!==void 0?i:{},{offset:v}=p,w=Vg(p,xve);r=I.createElement("line",kl({},w,{x1:o,y1:s,x2:a,y2:c,fill:"none",key:u}))}return r}function Cve(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:s}=t,a=Vg(t,bve),c=i.map((u,f)=>{var p=rr(rr({},a),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(f),index:f});return I.createElement(wU,{key:"line-".concat(f),option:r,lineItemProps:p})});return I.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Ive(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:s}=t,a=Vg(t,wve),c=i.map((u,f)=>{var p=rr(rr({},a),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(f),index:f});return I.createElement(wU,{option:r,lineItemProps:p,key:"line-".concat(f)})});return I.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Pve(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:o,height:s,horizontalPoints:a,horizontal:c=!0}=t;if(!c||!e||!e.length||a==null)return null;var u=a.map(p=>Math.round(p+i-i)).sort((p,v)=>p-v);i!==u[0]&&u.unshift(0);var f=u.map((p,v)=>{var w=!u[v+1],E=w?i+s-p:u[v+1]-p;if(E<=0)return null;var S=v%e.length;return I.createElement("rect",{key:"react-".concat(v),y:p,x:r,height:E,width:o,stroke:"none",fill:e[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return I.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Nve(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:o,width:s,height:a,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var u=c.map(p=>Math.round(p+i-i)).sort((p,v)=>p-v);i!==u[0]&&u.unshift(0);var f=u.map((p,v)=>{var w=!u[v+1],E=w?i+s-p:u[v+1]-p;if(E<=0)return null;var S=v%n.length;return I.createElement("rect",{key:"react-".concat(v),x:p,y:o,width:E,height:a,stroke:"none",fill:n[S],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return I.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var kve=(t,e)=>{var{xAxis:n,width:r,height:i,offset:o}=t;return p6(jT(rr(rr(rr({},_s),n),{},{ticks:m6(n),viewBox:{x:0,y:0,width:r,height:i}})),o.left,o.left+o.width,e)},Rve=(t,e)=>{var{yAxis:n,width:r,height:i,offset:o}=t;return p6(jT(rr(rr(rr({},_s),n),{},{ticks:m6(n),viewBox:{x:0,y:0,width:r,height:i}})),o.top,o.top+o.height,e)},Mve={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:dr.grid};function _U(t){var e=PS(),n=NS(),r=E6(),i=rr(rr({},sr(t,Mve)),{},{x:We(t.x)?t.x:r.left,y:We(t.y)?t.y:r.top,width:We(t.width)?t.width:r.width,height:We(t.height)?t.height:r.height}),{xAxisId:o,yAxisId:s,x:a,y:c,width:u,height:f,syncWithTicks:p,horizontalValues:v,verticalValues:w}=i,E=Mr(),S=Qe(O=>lM(O,"xAxis",o,E)),_=Qe(O=>lM(O,"yAxis",s,E));if(!qo(u)||!qo(f)||!We(a)||!We(c))return null;var N=i.verticalCoordinatesGenerator||kve,j=i.horizontalCoordinatesGenerator||Rve,{horizontalPoints:F,verticalPoints:q}=i;if((!F||!F.length)&&typeof j=="function"){var V=v&&v.length,$=j({yAxis:_?rr(rr({},_),{},{ticks:V?v:_.ticks}):void 0,width:e??u,height:n??f,offset:r},V?!0:p);hg(Array.isArray($),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof $,"]")),Array.isArray($)&&(F=$)}if((!q||!q.length)&&typeof N=="function"){var k=w&&w.length,D=N({xAxis:S?rr(rr({},S),{},{ticks:k?w:S.ticks}):void 0,width:e??u,height:n??f,offset:r},k?!0:p);hg(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(q=D)}return I.createElement(zs,{zIndex:i.zIndex},I.createElement("g",{className:"recharts-cartesian-grid"},I.createElement(Ave,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),I.createElement(Pve,kl({},i,{horizontalPoints:F})),I.createElement(Nve,kl({},i,{verticalPoints:q})),I.createElement(Cve,kl({},i,{offset:r,horizontalPoints:F,xAxis:S,yAxis:_})),I.createElement(Ive,kl({},i,{offset:r,verticalPoints:q,xAxis:S,yAxis:_}))))}_U.displayName="CartesianGrid";var Dve={},EU=Rr({name:"errorBars",initialState:Dve,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(o=>o.dataKey===r.dataKey&&o.direction===r.direction?i:o))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Yxe,replaceErrorBar:Jxe,removeErrorBar:Qxe}=EU.actions,Ove=EU.reducer,Lve=["children"];function jve(t,e){if(t==null)return{};var n,r,i=Fve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Fve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Uve={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Vve=I.createContext(Uve);function $ve(t){var{children:e}=t,n=jve(t,Lve);return I.createElement(Vve.Provider,{value:n},e)}function SU(t,e){var n,r,i=Qe(u=>Vs(u,t)),o=Qe(u=>$s(u,e)),s=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Tn.allowDataOverflow,a=(r=o==null?void 0:o.allowDataOverflow)!==null&&r!==void 0?r:An.allowDataOverflow,c=s||a;return{needClip:c,needClipX:s,needClipY:a}}function Bve(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=OT(),{needClipX:o,needClipY:s,needClip:a}=SU(e,n);if(!a||!i)return null;var{x:c,y:u,width:f,height:p}=i;return I.createElement("clipPath",{id:"clipPath-".concat(r)},I.createElement("rect",{x:o?c:c-f/2,y:s?u:u-p/2,width:o?f:f*2,height:s?p:p*2}))}var TU=(t,e,n,r)=>CF(t,"xAxis",e,r),AU=(t,e,n,r)=>AF(t,"xAxis",e,r),CU=(t,e,n,r)=>CF(t,"yAxis",n,r),IU=(t,e,n,r)=>AF(t,"yAxis",n,r),zve=se([$t,TU,CU,AU,IU],(t,e,n,r,i)=>qa(t,"xAxis")?fg(e,r,!1):fg(n,i,!1)),qve=(t,e,n,r,i)=>i;function Gve(t){return t.type==="line"}var Hve=se([Y3,qve],(t,e)=>t.filter(Gve).find(n=>n.id===e)),Wve=se([$t,TU,CU,AU,IU,Hve,zve,iT],(t,e,n,r,i,o,s,a)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:f}=a;if(!(o==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||s==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:p,data:v}=o,w;if(v!=null&&v.length>0?w=v:w=c==null?void 0:c.slice(u,f+1),w!=null)return Rye({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:p,bandSize:s,displayedData:w})}});function Kve(t){var e=Cv(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:o}=e,s=Number(i),a=Number(o);return(Number.isNaN(s)||s<0)&&(s=n),(Number.isNaN(a)||a<0)&&(a=r),{r:s,strokeWidth:a}}return{r:n,strokeWidth:r}}var qb={exports:{}},Gb={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uD;function Yve(){if(uD)return Gb;uD=1;var t=Lu();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,o=t.useEffect,s=t.useMemo,a=t.useDebugValue;return Gb.useSyncExternalStoreWithSelector=function(c,u,f,p,v){var w=i(null);if(w.current===null){var E={hasValue:!1,value:null};w.current=E}else E=w.current;w=s(function(){function _(V){if(!N){if(N=!0,j=V,V=p(V),v!==void 0&&E.hasValue){var $=E.value;if(v($,V))return F=$}return F=V}if($=F,n(j,V))return $;var k=p(V);return v!==void 0&&v($,k)?(j=V,$):(j=V,F=k)}var N=!1,j,F,q=f===void 0?null:f;return[function(){return _(u())},q===null?void 0:function(){return _(q())}]},[u,f,p,v]);var S=r(c,w[0],w[1]);return o(function(){E.hasValue=!0,E.value=S},[S]),a(S),S},Gb}var dD;function Jve(){return dD||(dD=1,qb.exports=Yve()),qb.exports}Jve();function Qve(t){t()}function Xve(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Qve(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var fD={notify(){},get:()=>[]};function Zve(t,e){let n,r=fD,i=0,o=!1;function s(S){f();const _=r.subscribe(S);let N=!1;return()=>{N||(N=!0,_(),p())}}function a(){r.notify()}function c(){E.onStateChange&&E.onStateChange()}function u(){return o}function f(){i++,n||(n=t.subscribe(c),r=Xve())}function p(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=fD)}function v(){o||(o=!0,f())}function w(){o&&(o=!1,p())}const E={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:c,isSubscribed:u,trySubscribe:v,tryUnsubscribe:w,getListeners:()=>r};return E}var eye=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tye=eye(),nye=()=>typeof navigator<"u"&&navigator.product==="ReactNative",rye=nye(),iye=()=>tye||rye?I.useLayoutEffect:I.useEffect,oye=iye();function hD(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function sye(t,e){if(hD(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!hD(t[n[i]],e[n[i]]))return!1;return!0}var Hb=Symbol.for("react-redux-context"),Wb=typeof globalThis<"u"?globalThis:{};function aye(){if(!I.createContext)return{};const t=Wb[Hb]??(Wb[Hb]=new Map);let e=t.get(I.createContext);return e||(e=I.createContext(null),t.set(I.createContext,e)),e}var lye=aye();function cye(t){const{children:e,context:n,serverState:r,store:i}=t,o=I.useMemo(()=>{const c=Zve(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=I.useMemo(()=>i.getState(),[i]);oye(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,s]);const a=n||lye;return I.createElement(a.Provider,{value:o},e)}var uye=cye,dye=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function fye(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function UT(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(dye.has(r)){if(t[r]==null&&e[r]==null)continue;if(!sye(t[r],e[r]))return!1}else if(!fye(t[r],e[r]))return!1;return!0}var hye=["id"],pye=["type","layout","connectNulls","needClip","shape"],mye=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Hf(){return Hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hf.apply(null,arguments)}function pD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Po(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pD(Object(n),!0).forEach(function(r){gye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gye(t,e,n){return(e=vye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vye(t){var e=yye(t,"string");return typeof e=="symbol"?e:e+""}function yye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VT(t,e){if(t==null)return{};var n,r,i=xye(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var bye=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:o}=t;return[{inactive:o,dataKey:e,type:i,color:r,value:g6(n,e),payload:t}]},wye=I.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:o,name:s,hide:a,unit:c,tooltipType:u,id:f}=t,p={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:o,dataKey:e,nameKey:void 0,name:g6(s,e),hide:a,type:u,color:r,unit:c,graphicalItemId:f}};return I.createElement(Kme,{tooltipEntrySettings:p})}),PU=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function _ye(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var Eye=(t,e,n)=>{var r=n.reduce((p,v)=>p+v);if(!r)return PU(e,t);for(var i=Math.floor(t/r),o=t%r,s=e-t,a=[],c=0,u=0;c<n.length;u+=n[c],++c)if(u+n[c]>o){a=[...n.slice(0,c),o-u];break}var f=a.length%2===0?[0,s]:[s];return[..._ye(n,i),...a,...f].map(p=>"".concat(p,"px")).join(", ")};function Sye(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:o,needClip:s}=r,{id:a}=r,c=VT(r,hye),u=$o(c);return I.createElement(gge,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:u,needClip:s,clipPathId:e})}function Tye(t){var{showLabels:e,children:n,points:r}=t,i=I.useMemo(()=>r==null?void 0:r.map(o=>{var s,a,c={x:(s=o.x)!==null&&s!==void 0?s:0,y:(a=o.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Po(Po({},c),{},{value:o.value,payload:o.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[r]);return I.createElement(wme,{value:e?i:void 0},n)}function mD(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:o}=t,{type:s,layout:a,connectNulls:c,needClip:u,shape:f}=o,p=VT(o,pye),v=Po(Po({},mr(p)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(e,")"):void 0,points:r,type:s,layout:a,connectNulls:c,strokeDasharray:i??o.strokeDasharray});return I.createElement(I.Fragment,null,(r==null?void 0:r.length)>1&&I.createElement(Wme,Hf({shapeType:"curve",option:f},v,{pathRef:n})),I.createElement(Sye,{points:r,clipPathId:e,props:o}))}function Aye(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function Cye(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:o}=t,{points:s,strokeDasharray:a,isAnimationActive:c,animationBegin:u,animationDuration:f,animationEasing:p,animateNewValues:v,width:w,height:E,onAnimationEnd:S,onAnimationStart:_}=n,N=i.current,j=DS(s,"recharts-line-"),F=I.useRef(j),[q,V]=I.useState(!1),$=!q,k=I.useCallback(()=>{typeof S=="function"&&S(),V(!1)},[S]),D=I.useCallback(()=>{typeof _=="function"&&_(),V(!0)},[_]),O=Aye(r.current),z=I.useRef(0);F.current!==j&&(z.current=o.current,F.current=j);var U=z.current;return I.createElement(Tye,{points:s,showLabels:$},n.children,I.createElement(MS,{animationId:j,begin:u,duration:f,isActive:c,easing:p,onAnimationEnd:k,onAnimationStart:D,key:j},M=>{var P=Nr(U,O+U,M),me=Math.min(P,O),ce;if(c)if(a){var ge="".concat(a).split(/[,\s]+/gim).map(ne=>parseFloat(ne));ce=Eye(me,O,ge)}else ce=PU(O,me);else ce=a==null?void 0:String(a);if(M>0&&O>0&&(i.current=s,o.current=Math.max(o.current,me)),N){var xe=N.length/s.length,le=M===1?s:s.map((ne,de)=>{var Y=Math.floor(de*xe);if(N[Y]){var ie=N[Y];return Po(Po({},ne),{},{x:Nr(ie.x,ne.x,M),y:Nr(ie.y,ne.y,M)})}return v?Po(Po({},ne),{},{x:Nr(w*2,ne.x,M),y:Nr(E/2,ne.y,M)}):Po(Po({},ne),{},{x:ne.x,y:ne.y})});return i.current=le,I.createElement(mD,{props:n,points:le,clipPathId:e,pathRef:r,strokeDasharray:ce})}return I.createElement(mD,{props:n,points:s,clipPathId:e,pathRef:r,strokeDasharray:ce})}),I.createElement(Sme,{label:n.label}))}function Iye(t){var{clipPathId:e,props:n}=t,r=I.useRef(null),i=I.useRef(0),o=I.useRef(null);return I.createElement(Cye,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:o})}var Pye=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:qn(t.payload,e)}};class Nye extends I.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:o,yAxisId:s,top:a,left:c,width:u,height:f,id:p,needClip:v,zIndex:w}=this.props;if(e)return null;var E=Pt("recharts-line",i),S=p,{r:_,strokeWidth:N}=Kve(n),j=mU(n),F=_*2+N,q=v?"url(#clipPath-".concat(j?"":"dots-").concat(S,")"):void 0;return I.createElement(zs,{zIndex:w},I.createElement(La,{className:E},v&&I.createElement("defs",null,I.createElement(Bve,{clipPathId:S,xAxisId:o,yAxisId:s}),!j&&I.createElement("clipPath",{id:"clipPath-dots-".concat(S)},I.createElement("rect",{x:c-F/2,y:a-F/2,width:u+F,height:f+F}))),I.createElement($ve,{xAxisId:o,yAxisId:s,data:r,dataPointFormatter:Pye,errorBarOffset:0},I.createElement(Iye,{props:this.props,clipPathId:S}))),I.createElement(Lge,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:q}))}}var NU={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:dr.line,type:"linear"};function kye(t){var e=sr(t,NU),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:o,animationEasing:s,connectNulls:a,dot:c,hide:u,isAnimationActive:f,label:p,legendType:v,xAxisId:w,yAxisId:E,id:S}=e,_=VT(e,mye),{needClip:N}=SU(w,E),j=OT(),F=ch(),q=Mr(),V=Qe(z=>Wve(z,w,E,q,S));if(F!=="horizontal"&&F!=="vertical"||V==null||j==null)return null;var{height:$,width:k,x:D,y:O}=j;return I.createElement(Nye,Hf({},_,{id:S,connectNulls:a,dot:c,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:o,animationEasing:s,isAnimationActive:f,hide:u,label:p,legendType:v,xAxisId:w,yAxisId:E,points:V,layout:F,height:$,width:k,left:D,top:O,needClip:N}))}function Rye(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,dataKey:s,bandSize:a,displayedData:c}=t;return c.map((u,f)=>{var p=qn(u,s);if(e==="horizontal"){var v=f2({axis:n,ticks:i,bandSize:a,entry:u,index:f}),w=Nn(p)?null:r.scale(p);return{x:v,y:w,value:p,payload:u}}var E=Nn(p)?null:n.scale(p),S=f2({axis:r,ticks:o,bandSize:a,entry:u,index:f});return E==null||S==null?null:{x:E,y:S,value:p,payload:u}}).filter(Boolean)}function Mye(t){var e=sr(t,NU),n=Mr();return I.createElement(ege,{id:e.id,type:"line"},r=>I.createElement(I.Fragment,null,I.createElement(Yme,{legendPayload:bye(e)}),I.createElement(wye,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),I.createElement(age,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),I.createElement(kye,Hf({},e,{id:r}))))}var L_=I.memo(Mye,UT);L_.displayName="Line";var Dye=["domain","range"],Oye=["domain","range"];function gD(t,e){if(t==null)return{};var n,r,i=Lye(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Lye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function vD(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function kU(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=gD(t,Dye),{domain:o,range:s}=e,a=gD(e,Oye);return!vD(n,o)||!vD(r,s)?!1:UT(i,a)}var jye=["dangerouslySetInnerHTML","ticks","scale"],Fye=["id","scale"];function j_(){return j_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j_.apply(null,arguments)}function yD(t,e){if(t==null)return{};var n,r,i=Uye(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Uye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Vye(t){var e=hn(),n=I.useRef(null);return I.useLayoutEffect(()=>{n.current===null?e(wge(t)):n.current!==t&&e(_ge({prev:n.current,next:t})),n.current=t},[t,e]),I.useLayoutEffect(()=>()=>{n.current&&(e(Ege(n.current)),n.current=null)},[e]),null}var $ye=t=>{var{xAxisId:e,className:n}=t,r=Qe(y6),i=Mr(),o="xAxis",s=Qe(N=>TF(N,o,e,i)),a=Qe(N=>qde(N,e)),c=Qe(N=>Jde(N,e)),u=Qe(N=>G3(N,e));if(a==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:f,ticks:p,scale:v}=t,w=yD(t,jye),{id:E,scale:S}=u,_=yD(u,Fye);return I.createElement(FT,j_({},w,_,{x:c.x,y:c.y,width:a.width,height:a.height,className:Pt("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:s,axisType:o}))},Bye={allowDataOverflow:Tn.allowDataOverflow,allowDecimals:Tn.allowDecimals,allowDuplicatedCategory:Tn.allowDuplicatedCategory,angle:Tn.angle,axisLine:_s.axisLine,height:Tn.height,hide:!1,includeHidden:Tn.includeHidden,interval:Tn.interval,minTickGap:Tn.minTickGap,mirror:Tn.mirror,orientation:Tn.orientation,padding:Tn.padding,reversed:Tn.reversed,scale:Tn.scale,tick:Tn.tick,tickCount:Tn.tickCount,tickLine:_s.tickLine,tickSize:_s.tickSize,type:Tn.type,xAxisId:0},zye=t=>{var e=sr(t,Bye);return I.createElement(I.Fragment,null,I.createElement(Vye,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),I.createElement($ye,e))},RU=I.memo(zye,kU);RU.displayName="XAxis";var qye=["dangerouslySetInnerHTML","ticks","scale"],Gye=["id","scale"];function F_(){return F_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F_.apply(null,arguments)}function xD(t,e){if(t==null)return{};var n,r,i=Hye(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Hye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Wye(t){var e=hn(),n=I.useRef(null);return I.useLayoutEffect(()=>{n.current===null?e(Sge(t)):n.current!==t&&e(Tge({prev:n.current,next:t})),n.current=t},[t,e]),I.useLayoutEffect(()=>()=>{n.current&&(e(Age(n.current)),n.current=null)},[e]),null}var Kye=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,o=I.useRef(null),s=I.useRef(null),a=Qe(y6),c=Mr(),u=hn(),f="yAxis",p=Qe($=>Zde($,e)),v=Qe($=>Xde($,e)),w=Qe($=>TF($,f,e,c)),E=Qe($=>H3($,e));if(I.useLayoutEffect(()=>{if(!(r!=="auto"||!p||DT(i)||I.isValidElement(i)||E==null)){var $=o.current;if($){var k=$.getCalculatedWidth();Math.round(p.width)!==Math.round(k)&&u(Cge({id:e,width:k}))}}},[w,p,u,i,e,r,E]),p==null||v==null||E==null)return null;var{dangerouslySetInnerHTML:S,ticks:_,scale:N}=t,j=xD(t,qye),{id:F,scale:q}=E,V=xD(E,Gye);return I.createElement(FT,F_({},j,V,{ref:o,labelRef:s,x:v.x,y:v.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:p.width,height:p.height,className:Pt("recharts-".concat(f," ").concat(f),n),viewBox:a,ticks:w,axisType:f}))},Yye={allowDataOverflow:An.allowDataOverflow,allowDecimals:An.allowDecimals,allowDuplicatedCategory:An.allowDuplicatedCategory,angle:An.angle,axisLine:_s.axisLine,hide:!1,includeHidden:An.includeHidden,interval:An.interval,minTickGap:An.minTickGap,mirror:An.mirror,orientation:An.orientation,padding:An.padding,reversed:An.reversed,scale:An.scale,tick:An.tick,tickCount:An.tickCount,tickLine:_s.tickLine,tickSize:_s.tickSize,type:An.type,width:An.width,yAxisId:0},Jye=t=>{var e=sr(t,Yye);return I.createElement(I.Fragment,null,I.createElement(Wye,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),I.createElement(Kye,e))},U_=I.memo(Jye,kU);U_.displayName="YAxis";var Qye=(t,e)=>e,$T=se([Qye,$t,B3,bn,BF,Bs,phe,Hn],whe),BT=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},MU=_i("mouseClick"),DU=ah();DU.startListening({actionCreator:MU,effect:(t,e)=>{var n=t.payload,r=$T(e.getState(),BT(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(ffe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var V_=_i("mouseMove"),OU=ah(),nm=null;OU.startListening({actionCreator:V_,effect:(t,e)=>{var n=t.payload;nm!==null&&cancelAnimationFrame(nm);var r=BT(n);nm=requestAnimationFrame(()=>{var i=e.getState(),o=ET(i,i.tooltip.settings.shared);if(o==="axis"){var s=$T(i,r);(s==null?void 0:s.activeIndex)!=null?e.dispatch(DF({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(MF())}nm=null})}});function Xye(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var bD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},LU=Rr({name:"rootProps",initialState:bD,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:bD.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Zye=LU.reducer,{updateOptions:e0e}=LU.actions,jU=Rr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Xxe}=jU.actions,t0e=jU.reducer,FU=_i("keyDown"),UU=_i("focus"),zT=ah();zT.startListening({actionCreator:FU,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=t.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var s=ST(i,td(n),vh(n),wh(n)),a=s==null?-1:Number(s);if(!(!Number.isFinite(a)||a<0)){var c=Bs(n);if(o==="Enter"){var u=Og(n,"axis","hover",String(i.index));e.dispatch(N_({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var f=rfe(n),p=f==="left-to-right"?1:-1,v=o==="ArrowRight"?1:-1,w=a+v*p;if(!(c==null||w>=c.length||w<0)){var E=Og(n,"axis","hover",String(w));e.dispatch(N_({active:!0,activeIndex:w.toString(),activeCoordinate:E}))}}}}}});zT.startListening({actionCreator:UU,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",s=Og(n,"axis","hover",String(o));e.dispatch(N_({active:!0,activeIndex:o,activeCoordinate:s}))}}}});var di=_i("externalEvent"),VU=ah(),Kb=new Map;VU.startListening({actionCreator:di,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,o=Kb.get(i);o!==void 0&&cancelAnimationFrame(o);var s=requestAnimationFrame(()=>{try{var a=e.getState(),c={activeCoordinate:Xfe(a),activeDataKey:Jfe(a),activeIndex:zf(a),activeLabel:GF(a),activeTooltipIndex:zf(a),isTooltipActive:Zfe(a)};n(c,r)}finally{Kb.delete(i)}});Kb.set(i,s)}}});var n0e=se([Zu],t=>t.tooltipItemPayloads),r0e=se([n0e,bh,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(a=>a.settings.graphicalItemId===r);if(i!=null){var{positions:o}=i;if(o!=null){var s=e(o,n);return s}}}),$U=_i("touchMove"),BU=ah();BU.startListening({actionCreator:$U,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=ET(r,r.tooltip.settings.shared);if(i==="axis"){var o=n.touches[0];if(o==null)return;var s=$T(r,BT({clientX:o.clientX,clientY:o.clientY,currentTarget:n.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(DF({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var a,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var f=u.getAttribute(Doe),p=(a=u.getAttribute(Ooe))!==null&&a!==void 0?a:void 0,v=ed(r).find(S=>S.id===p);if(f==null||v==null||p==null)return;var{dataKey:w}=v,E=r0e(r,f,p);e.dispatch(dfe({activeDataKey:w,activeIndex:f,activeCoordinate:E,activeGraphicalItemId:p}))}}}});var i0e=U5({brush:Fge,cartesianAxis:Ige,chartData:Zhe,errorBars:Ove,graphicalItems:oge,layout:yoe,legend:Pse,options:Khe,polarAxis:Ame,polarOptions:t0e,referenceElements:Gge,rootProps:Zye,tooltip:hfe,zIndex:Ohe}),o0e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return zie({reducer:i0e,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([DU.middleware,OU.middleware,zT.middleware,VU.middleware,BU.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(e6({type:"raf"}))},devTools:{serialize:{replacer:Xye},name:"recharts-".concat(n)}})};function s0e(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Mr(),o=I.useRef(null);if(i)return n;o.current==null&&(o.current=o0e(e,r));var s=wS;return I.createElement(uye,{context:s,store:o.current},n)}function a0e(t){var{layout:e,margin:n}=t,r=hn(),i=Mr();return I.useEffect(()=>{i||(r(moe(e)),r(poe(n)))},[r,i,e,n]),null}var l0e=I.memo(a0e,UT);function c0e(t){var e=hn();return I.useEffect(()=>{e(e0e(t))},[e,t]),null}function wD(t){var{zIndex:e,isPanorama:n}=t,r=I.useRef(null),i=hn();return I.useLayoutEffect(()=>(r.current&&i(Mhe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(Dhe({zIndex:e,isPanorama:n}))}),[i,e,n]),I.createElement("g",{tabIndex:-1,ref:r})}function _D(t){var{children:e,isPanorama:n}=t,r=Qe(Ehe);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),o=r.filter(s=>s>0);return I.createElement(I.Fragment,null,i.map(s=>I.createElement(wD,{key:s,zIndex:s,isPanorama:n})),e,o.map(s=>I.createElement(wD,{key:s,zIndex:s,isPanorama:n})))}var u0e=["children"];function d0e(t,e){if(t==null)return{};var n,r,i=f0e(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function f0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function $g(){return $g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$g.apply(null,arguments)}var h0e={width:"100%",height:"100%",display:"block"},p0e=I.forwardRef((t,e)=>{var n=PS(),r=NS(),i=R6();if(!qo(n)||!qo(r))return null;var{children:o,otherAttributes:s,title:a,desc:c}=t,u,f;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0),I.createElement(uS,$g({},s,{title:a,desc:c,role:f,tabIndex:u,width:n,height:r,style:h0e,ref:e}),o)}),m0e=t=>{var{children:e}=t,n=Qe(Gv);if(!n)return null;var{width:r,height:i,y:o,x:s}=n;return I.createElement(uS,{width:r,height:i,x:s,y:o},e)},ED=I.forwardRef((t,e)=>{var{children:n}=t,r=d0e(t,u0e),i=Mr();return i?I.createElement(m0e,null,I.createElement(_D,{isPanorama:!0},n)):I.createElement(p0e,$g({ref:e},r),I.createElement(_D,{isPanorama:!1},n))});function g0e(){var t=hn(),[e,n]=I.useState(null),r=Qe(Moe);return I.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),o=i.width/e.offsetWidth;fn(o)&&o!==r&&t(voe(o))}},[e,t,r]),n}function SD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SD(Object(n),!0).forEach(function(r){y0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y0e(t,e,n){return(e=x0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x0e(t){var e=b0e(t,"string");return typeof e=="symbol"?e:e+""}function b0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ql(){return Ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ql.apply(null,arguments)}var w0e=()=>(lpe(),null);function Bg(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var _0e=I.forwardRef((t,e)=>{var n,r,i=I.useRef(null),[o,s]=I.useState({containerWidth:Bg((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:Bg((r=t.style)===null||r===void 0?void 0:r.height)}),a=I.useCallback((u,f)=>{s(p=>{var v=Math.round(u),w=Math.round(f);return p.containerWidth===v&&p.containerHeight===w?p:{containerWidth:v,containerHeight:w}})},[]),c=I.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=u.getBoundingClientRect();a(f,p);var v=E=>{var{width:S,height:_}=E[0].contentRect;a(S,_)},w=new ResizeObserver(v);w.observe(u),i.current=w}},[e,a]);return I.useEffect(()=>()=>{var u=i.current;u!=null&&u.disconnect()},[a]),I.createElement(I.Fragment,null,I.createElement(Wv,{width:o.containerWidth,height:o.containerHeight}),I.createElement("div",Ql({ref:c},t)))}),E0e=I.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,o]=I.useState({containerWidth:Bg(n),containerHeight:Bg(r)}),s=I.useCallback((c,u)=>{o(f=>{var p=Math.round(c),v=Math.round(u);return f.containerWidth===p&&f.containerHeight===v?f:{containerWidth:p,containerHeight:v}})},[]),a=I.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:f}=c.getBoundingClientRect();s(u,f)}},[e,s]);return I.createElement(I.Fragment,null,I.createElement(Wv,{width:i.containerWidth,height:i.containerHeight}),I.createElement("div",Ql({ref:a},t)))}),S0e=I.forwardRef((t,e)=>{var{width:n,height:r}=t;return I.createElement(I.Fragment,null,I.createElement(Wv,{width:n,height:r}),I.createElement("div",Ql({ref:e},t)))}),T0e=I.forwardRef((t,e)=>{var{width:n,height:r}=t;return Is(n)||Is(r)?I.createElement(E0e,Ql({},t,{ref:e})):I.createElement(S0e,Ql({},t,{ref:e}))});function A0e(t){return t===!0?_0e:T0e}var C0e=I.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:s,onDoubleClick:a,onMouseDown:c,onMouseEnter:u,onMouseLeave:f,onMouseMove:p,onMouseUp:v,onTouchEnd:w,onTouchMove:E,onTouchStart:S,style:_,width:N,responsive:j,dispatchTouchEvents:F=!0}=t,q=I.useRef(null),V=hn(),[$,k]=I.useState(null),[D,O]=I.useState(null),z=g0e(),U=IS(),M=(U==null?void 0:U.width)>0?U.width:N,P=(U==null?void 0:U.height)>0?U.height:i,me=I.useCallback(H=>{z(H),typeof e=="function"&&e(H),k(H),O(H),H!=null&&(q.current=H)},[z,e,k,O]),ce=I.useCallback(H=>{V(MU(H)),V(di({handler:o,reactEvent:H}))},[V,o]),ge=I.useCallback(H=>{V(V_(H)),V(di({handler:u,reactEvent:H}))},[V,u]),xe=I.useCallback(H=>{V(MF()),V(di({handler:f,reactEvent:H}))},[V,f]),le=I.useCallback(H=>{V(V_(H)),V(di({handler:p,reactEvent:H}))},[V,p]),ne=I.useCallback(()=>{V(UU())},[V]),de=I.useCallback(H=>{V(FU(H.key))},[V]),Y=I.useCallback(H=>{V(di({handler:s,reactEvent:H}))},[V,s]),ie=I.useCallback(H=>{V(di({handler:a,reactEvent:H}))},[V,a]),fe=I.useCallback(H=>{V(di({handler:c,reactEvent:H}))},[V,c]),_e=I.useCallback(H=>{V(di({handler:v,reactEvent:H}))},[V,v]),$e=I.useCallback(H=>{V(di({handler:S,reactEvent:H}))},[V,S]),Ge=I.useCallback(H=>{F&&V($U(H)),V(di({handler:E,reactEvent:H}))},[V,F,E]),Ue=I.useCallback(H=>{V(di({handler:w,reactEvent:H}))},[V,w]),ze=A0e(j);return I.createElement(XF.Provider,{value:$},I.createElement(t5.Provider,{value:D},I.createElement(ze,{width:M??(_==null?void 0:_.width),height:P??(_==null?void 0:_.height),className:Pt("recharts-wrapper",r),style:v0e({position:"relative",cursor:"default",width:M,height:P},_),onClick:ce,onContextMenu:Y,onDoubleClick:ie,onFocus:ne,onKeyDown:de,onMouseDown:fe,onMouseEnter:ge,onMouseLeave:xe,onMouseMove:le,onMouseUp:_e,onTouchEnd:Ue,onTouchMove:Ge,onTouchStart:$e,ref:me},I.createElement(w0e,null),n)))}),I0e=["width","height","responsive","children","className","style","compact","title","desc"];function P0e(t,e){if(t==null)return{};var n,r,i=N0e(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function N0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var k0e=I.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:o,className:s,style:a,compact:c,title:u,desc:f}=t,p=P0e(t,I0e),v=$o(p);return c?I.createElement(I.Fragment,null,I.createElement(Wv,{width:n,height:r}),I.createElement(ED,{otherAttributes:v,title:u,desc:f},o)):I.createElement(C0e,{className:s,style:a,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},I.createElement(ED,{otherAttributes:v,title:u,desc:f,ref:e},I.createElement(Wge,null,o)))});function $_(){return $_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$_.apply(null,arguments)}var R0e={top:5,right:5,bottom:5,left:5},M0e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:R0e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},D0e=I.forwardRef(function(e,n){var r,i=sr(e.categoricalChartProps,M0e),{chartName:o,defaultTooltipEventType:s,validateTooltipEventTypes:a,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,f={chartName:o,defaultTooltipEventType:s,validateTooltipEventTypes:a,tooltipPayloadSearcher:c,eventEmitter:void 0};return I.createElement(s0e,{preloadedState:{options:f},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:o},I.createElement(jge,{chartData:u.data}),I.createElement(l0e,{layout:i.layout,margin:i.margin}),I.createElement(c0e,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),I.createElement(k0e,$_({},i,{ref:n})))}),O0e=["axis"],L0e=I.forwardRef((t,e)=>I.createElement(D0e,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:O0e,tooltipPayloadSearcher:Hhe,categoricalChartProps:t,ref:e}));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0e=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),F0e=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),TD=t=>{const e=F0e(t);return e.charAt(0).toUpperCase()+e.slice(1)},zU=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),U0e=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var V0e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0e=I.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},c)=>I.createElement("svg",{ref:c,...V0e,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:zU("lucide",i),...!o&&!U0e(a)&&{"aria-hidden":"true"},...a},[...s.map(([u,f])=>I.createElement(u,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=(t,e)=>{const n=I.forwardRef(({className:r,...i},o)=>I.createElement($0e,{ref:o,iconNode:e,className:zU(`lucide-${j0e(TD(t))}`,`lucide-${t}`,r),...i}));return n.displayName=TD(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0e=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]],z0e=Wn("bookmark-plus",B0e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],G0e=Wn("chart-column",q0e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ru=Wn("circle-alert",H0e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],us=Wn("circle-check-big",W0e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0e=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Y0e=Wn("clock",K0e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rm=Wn("eye",J0e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],X0e=Wn("file-down",Q0e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0e=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],B_=Wn("lightbulb",Z0e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const exe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],AD=Wn("map-pin",exe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const txe=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],nxe=Wn("printer",txe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rxe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ixe=Wn("search",rxe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oxe=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],sxe=Wn("share-2",oxe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const axe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ds=Wn("target",axe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lxe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Co=Wn("trending-up",lxe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cxe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],CD=Wn("upload",cxe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uxe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],df=Wn("users",uxe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dxe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],pa=Wn("zap",dxe),qT=({data:t,lang:e,apiKey:n,userId:r,queryStr:i,region:o="SA"})=>{var ze;const[s,a]=I.useState("overview"),[c,u]=I.useState(!1),[f,p]=I.useState(!1),[v,w]=I.useState(!1),[E,S]=I.useState(""),[_,N]=I.useState([]),[j,F]=I.useState(!1),[q,V]=I.useState(t.summary),[$,k]=I.useState(null),[D,O]=I.useState(!1),[z,U]=I.useState(null),M=qu[e],P=e==="ar";I.useEffect(()=>{f&&me()},[f]);const me=async()=>{F(!0);try{const{getCategories:H}=await Ute(async()=>{const{getCategories:ve}=await Promise.resolve().then(()=>$te);return{getCategories:ve}},void 0),oe=await H();N(oe),oe.length>0&&S(oe[0].id)}catch(H){console.error("Error loading categories:",H)}finally{F(!1)}};I.useEffect(()=>{(async()=>{if(P&&n&&t.summary){const oe=await Ete(t.summary,n);V(oe)}else V(t.summary)})()},[t.summary,P,n]);const ce=()=>{nne(t,e)},ge=()=>{rne(t,e)},xe=async()=>{if(!r){alert(P?"    ":"Please login to save results");return}if(!i){alert(P?"   ":"No search to save");return}try{const H=await $4(r,i);if(H)if(H.isPublished){alert(P?"         ":" This analysis is already saved and published in your library");return}else{k(H.id),u(!0),p(!0),setTimeout(()=>u(!1),3e3);return}O(!0);let oe,ve;if(n)try{const Be=await Ste(t,P?"en":"ar",n);U(Be),P?(oe=t,ve=Be):(ve=t,oe=Be)}catch(Xe){console.error("Translation failed, saving original only:",Xe)}O(!1);const ae=await BN(r,i,t,o,P?"ar":"en",oe,ve);k(ae),u(!0),p(!0),setTimeout(()=>u(!1),3e3)}catch(H){console.error("Save failed:",H),alert(P?" .    ":"Save failed. Please try again")}},le=async()=>{if(!(!r||!Pn.currentUser)){if(!E){alert(P?"    ":"Please select a category to publish");return}w(!0);try{const H=$||await BN(r,i||"",t,o);$||k(H),await J4(H,r,Pn.currentUser.email||"",i||"",t,o,E),alert(P?"      ! ":"Analysis published successfully! "),p(!1),S("")}catch(H){console.error("Error publishing:",H),H.message==="ALREADY_PUBLISHED"||H.message==="SAVED_ANALYSIS_NOT_FOUND"?(alert(P?"      ":"This analysis is already published in the public library"),p(!1)):alert(P?"   ":"Error publishing analysis")}finally{w(!1)}}};t.finalVerdict.recommendation==="GO"||t.finalVerdict.recommendation;const ne=()=>h.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 print-page-break",children:[h.jsx("div",{className:"bg-gradient-to-r from-teal-600 via-emerald-600 to-teal-700 rounded-[1.5rem] p-6 md:p-8 text-white shadow-2xl hover:shadow-3xl transition-all border-2 border-teal-500 print-no-break",children:h.jsxs("div",{className:"flex items-center justify-between gap-4 md:gap-6",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[h.jsx("span",{className:"inline-block bg-slate-100 text-slate-700 px-3 py-1 rounded-full text-xs font-bold",children:P?" ":" English"}),h.jsx("span",{className:"inline-block bg-white bg-opacity-20 px-3 py-1 rounded-full text-xs font-black backdrop-blur-md text-white uppercase tracking-widest",children:M.verdictTitle})]}),h.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-black mb-3 leading-tight",children:t.itemName}),h.jsx("p",{className:"text-sm md:text-base opacity-95 leading-relaxed max-w-3xl font-medium",children:q})]}),h.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 bg-white bg-opacity-15 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg backdrop-blur-md border border-white border-opacity-30",children:h.jsx(us,{className:"w-10 h-10 md:w-12 md:h-12 text-white"})})]})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-[1.5rem] p-6 border-2 border-emerald-500 hover:border-emerald-400 hover:shadow-2xl shadow-lg transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.avgPrice}),h.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center text-white font-black text-lg backdrop-blur-sm",children:"."})]}),h.jsxs("p",{className:"text-3xl font-black text-white mb-2",children:[t.marketStats.averagePrice.toFixed(0)," ",h.jsx("span",{className:"text-lg",children:"."})]}),h.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-white opacity-90",children:[h.jsxs("span",{children:[P?"":"Low",": ",t.marketStats.lowestPrice.toFixed(0)," ."]}),h.jsx("span",{children:""}),h.jsxs("span",{children:[P?"":"High",": ",t.marketStats.highestPrice.toFixed(0)," ."]})]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-[1.5rem] p-6 border-2 border-blue-500 hover:border-blue-400 hover:shadow-2xl shadow-lg transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.demand}),h.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center text-white backdrop-blur-sm",children:h.jsx(Co,{className:"w-5 h-5"})})]}),h.jsx("p",{className:"text-3xl font-black text-white mb-2",children:t.marketStats.demandLevel}),t.demandAnalysis&&h.jsxs("p",{className:"text-xs font-bold text-white opacity-90",children:[t.demandAnalysis.monthlyDemandEstimate," ",P?"/":"units/month"]})]}),h.jsxs("div",{className:`bg-gradient-to-br rounded-[1.5rem] p-6 border-2 hover:shadow-2xl shadow-lg transition-all ${t.marketStats.marketSaturation>70?"from-rose-600 to-rose-700 border-rose-500 hover:border-rose-400":t.marketStats.marketSaturation>40?"from-orange-600 to-orange-700 border-orange-500 hover:border-orange-400":"from-emerald-600 to-emerald-700 border-emerald-500 hover:border-emerald-400"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.saturation}),h.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center text-white backdrop-blur-sm",children:h.jsx(df,{className:"w-5 h-5"})})]}),h.jsxs("p",{className:"text-3xl font-black text-white mb-2",children:[t.marketStats.marketSaturation,"%"]}),h.jsx("div",{className:"w-full bg-white bg-opacity-20 rounded-full h-2 overflow-hidden",children:h.jsx("div",{className:"h-2 rounded-full transition-all bg-white",style:{width:`${t.marketStats.marketSaturation}%`}})})]})]}),h.jsxs("div",{className:`bg-gradient-to-br rounded-[2rem] p-8 md:p-10 shadow-2xl relative overflow-hidden border-2 w-full ${t.finalVerdict.recommendation==="GO"?"from-amber-500 via-yellow-500 to-orange-500 border-amber-300":t.finalVerdict.recommendation==="PROCEED WITH CAUTION"?"from-emerald-600 via-teal-600 to-cyan-600 border-emerald-300":"from-rose-600 via-red-600 to-red-700 border-rose-300"}`,children:[h.jsxs("div",{className:"absolute inset-0 opacity-10 overflow-hidden",children:[h.jsx("div",{className:"absolute -top-32 -right-32 w-96 h-96 bg-white rounded-full blur-3xl"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-white rounded-full blur-3xl"})]}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"flex items-center justify-between gap-6 md:gap-8 mb-6",children:h.jsx("div",{className:"flex items-center gap-4 md:gap-6 flex-1",children:h.jsxs("div",{children:[h.jsx("p",{className:"text-xs md:text-sm font-bold text-white opacity-90 uppercase tracking-widest mb-3",children:M.verdictTitle}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-4 h-4 rounded-full flex-shrink-0 ${t.finalVerdict.recommendation==="GO"?"bg-emerald-400":t.finalVerdict.recommendation==="PROCEED WITH CAUTION"?"bg-amber-400":"bg-rose-400"}`}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg md:text-xl font-bold leading-tight text-white",children:t.finalVerdict.recommendation==="GO"?P?"":"GO":t.finalVerdict.recommendation==="PROCEED WITH CAUTION"?P?" ":"PROCEED":P?"      ":"NO-GO"}),h.jsx("p",{className:"text-sm md:text-base font-medium text-white opacity-90 mt-1",children:P?t.finalVerdict.recommendation==="GO"?"  ":t.finalVerdict.recommendation==="PROCEED WITH CAUTION"?"     ":" ":t.finalVerdict.recommendation==="GO"?"Promising opportunity":t.finalVerdict.recommendation==="PROCEED WITH CAUTION"?"Entry possible if the following conditions are met":"High Risk"})]})]})]})})}),t.finalVerdict.recommendation==="PROCEED WITH CAUTION"&&t.finalVerdict.conditions&&t.finalVerdict.conditions.length>0?h.jsxs("div",{className:"mt-4",children:[h.jsx("ul",{className:"list-disc pl-6 text-white text-base md:text-lg opacity-95",children:t.finalVerdict.conditions.map((H,oe)=>h.jsx("li",{children:H},oe))}),h.jsx("p",{className:"mt-4 text-white text-base md:text-lg opacity-95",children:t.finalVerdict.reasoning})]}):t.finalVerdict.recommendation==="NO-GO"&&t.finalVerdict.notes&&t.finalVerdict.notes.length>0?h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"text-base md:text-lg leading-relaxed font-medium text-white opacity-95 mb-4",children:t.finalVerdict.reasoning}),h.jsxs("div",{className:"bg-white bg-opacity-10 rounded-xl p-4 mt-2",children:[h.jsx("h3",{className:"text-white text-base md:text-lg font-bold mb-2",children:P?" :":"Additional Notes:"}),h.jsx("ul",{className:"list-disc pl-6 text-white text-base md:text-lg opacity-95",children:t.finalVerdict.notes.map((H,oe)=>h.jsx("li",{children:H},oe))}),h.jsx("p",{className:"mt-2 text-white text-sm md:text-base opacity-80",children:P?"        .":"Despite opportunities, risks remain high."})]})]}):h.jsx("p",{className:"text-base md:text-lg leading-relaxed font-medium text-white opacity-95",children:t.finalVerdict.reasoning})]})]})]}),de=()=>h.jsx("div",{className:"space-y-8 animate-in fade-in duration-500 print-page-break",children:t.demandAnalysis&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"border-l-4 border-l-slate-600 pl-6 mb-8 print-no-break",children:[h.jsxs("h2",{className:"text-4xl font-black text-slate-700 flex items-center gap-3 mb-2",children:[h.jsx(Co,{className:"w-8 h-8"}),M.demandAnalysis]}),h.jsx("p",{className:"text-slate-600 font-medium",children:M.marketDemandEvaluation})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-[1.5rem] p-6 border-2 border-blue-500 shadow-lg hover:shadow-2xl transition-all",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(Co,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.monthlyDemand})]}),h.jsx("p",{className:"text-4xl font-black text-white mb-2",children:t.demandAnalysis.monthlyDemandEstimate}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90",children:M.unitsEstimated})]}),h.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-purple-700 rounded-[1.5rem] p-6 border-2 border-purple-500 shadow-lg hover:shadow-2xl transition-all",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(rm,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.demandScore})]}),h.jsxs("p",{className:"text-4xl font-black text-white mb-2",children:[t.demandAnalysis.demandScore,"%"]}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90",children:M.overallStrength})]}),h.jsxs("div",{className:`bg-gradient-to-br rounded-[1.5rem] p-6 border-2 shadow-lg hover:shadow-2xl transition-all ${t.demandAnalysis.demandStability==="High"?"from-emerald-600 to-emerald-700 border-emerald-500":t.demandAnalysis.demandStability==="Medium"?"from-orange-600 to-orange-700 border-orange-500":"from-rose-600 to-rose-700 border-rose-500"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(ru,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.stability})]}),h.jsx("p",{className:"text-2xl font-black text-white mb-2",children:M.levels[t.demandAnalysis.demandStability]||t.demandAnalysis.demandStability}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90",children:M.volatilityLevel})]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-[2rem] border-2 border-gray-200 p-8 shadow-lg",children:[h.jsxs("h3",{className:"text-xl font-black text-slate-700 mb-4 flex items-center gap-3",children:[h.jsx(pa,{className:"w-6 h-6"}),M.seasonalityAnalysis]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-bold text-emerald-700 mb-3",children:M.peakMonths}),h.jsx("div",{className:"flex flex-wrap gap-2",children:t.demandAnalysis.seasonality.peakMonths.map((H,oe)=>h.jsx("span",{className:"text-emerald-700 px-2 py-1 text-sm font-bold",children:H},oe))})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3",children:M.lowMonths}),h.jsx("div",{className:"flex flex-wrap gap-2",children:t.demandAnalysis.seasonality.lowMonths.map((H,oe)=>h.jsx("span",{className:"text-slate-600 px-2 py-1 text-sm font-bold",children:H},oe))})]})]}),h.jsx("p",{className:"text-slate-700 leading-relaxed font-medium",children:P&&t.demandAnalysis.seasonality.analysis.includes("Seasonal patterns")?"          ":t.demandAnalysis.seasonality.analysis})]}),h.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-indigo-600 rounded-[2rem] border-2 border-purple-500 p-8 shadow-lg",children:[h.jsxs("h3",{className:"text-xl font-black text-white mb-4 flex items-center gap-3",children:[h.jsx(AD,{className:"w-6 h-6"}),M.geographicDistribution]}),h.jsx("p",{className:"text-white leading-relaxed font-medium opacity-95",children:P&&t.demandAnalysis.geographicDistribution.includes("Distributed across major")?"     :   ":t.demandAnalysis.geographicDistribution})]}),t.trends&&t.trends.length>0&&h.jsxs("div",{className:"bg-white rounded-[2rem] border-2 border-slate-200 p-8 shadow-xl",children:[h.jsxs("h3",{className:"text-xl font-black text-teal-700 mb-8 flex items-center gap-3",children:[h.jsx(Co,{className:"w-7 h-7"}),P?" ":"Demand Trend"]}),h.jsx(cse,{width:"100%",height:350,children:h.jsxs(L0e,{data:t.trends,margin:{top:5,right:30,left:20,bottom:5},children:[h.jsx(_U,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeOpacity:.5}),h.jsx(RU,{dataKey:"date",stroke:"#475569",style:{fontSize:"13px",fontWeight:"600"},tick:{fill:"#475569"}}),h.jsx(U_,{yAxisId:"left",stroke:"#10b981",style:{fontSize:"13px",fontWeight:"600"},tick:{fill:"#10b981"},label:{value:P?"":"Price",angle:-90,position:"insideLeft",style:{fill:"#10b981",fontWeight:"bold"}}}),h.jsx(U_,{yAxisId:"right",orientation:"right",stroke:"#ef4444",style:{fontSize:"13px",fontWeight:"600"},tick:{fill:"#ef4444"},label:{value:P?"":"Demand",angle:90,position:"insideRight",style:{fill:"#ef4444",fontWeight:"bold"}}}),h.jsx(gpe,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.98)",border:"2px solid #e2e8f0",borderRadius:"1rem",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",fontWeight:"600"},labelStyle:{color:"#1e293b",fontWeight:"bold",marginBottom:"8px"}}),h.jsx(k6,{wrapperStyle:{paddingTop:"20px",fontSize:"14px",fontWeight:"bold"}}),h.jsx(L_,{yAxisId:"left",type:"monotone",dataKey:"price",stroke:"#10b981",strokeWidth:3,name:P?"":"Price",dot:{fill:"#10b981",strokeWidth:2,r:5},activeDot:{r:7,strokeWidth:0,fill:"#059669"}}),h.jsx(L_,{yAxisId:"right",type:"monotone",dataKey:"demand",stroke:"#ef4444",strokeWidth:3,name:P?"":"Demand",dot:{fill:"#ef4444",strokeWidth:2,r:5},activeDot:{r:7,strokeWidth:0,fill:"#dc2626"}})]})})]})]})}),Y=()=>h.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 print-page-break",children:[h.jsxs("div",{className:"border-l-4 border-l-orange-500 pl-6 mb-8 print-no-break",children:[h.jsxs("h2",{className:"text-4xl font-black text-orange-600 flex items-center gap-3 mb-2",children:[h.jsx(df,{className:"w-8 h-8"}),M.competitorAnalysis]}),h.jsx("p",{className:"text-slate-600 font-medium",children:M.competitorIntelligence})]}),t.competitorIntelligence&&h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[h.jsxs("div",{className:"bg-gradient-to-br from-orange-600 to-orange-700 rounded-[1.5rem] p-6 border-2 border-orange-500 shadow-lg hover:shadow-2xl transition-all",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(df,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.activeCompetitors})]}),h.jsx("p",{className:"text-4xl font-black text-white",children:t.competitorIntelligence.activeCompetitors})]}),h.jsxs("div",{className:"bg-gradient-to-br from-amber-600 to-amber-700 rounded-[1.5rem] p-6 border-2 border-amber-500 shadow-lg hover:shadow-2xl transition-all",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(ds,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.strengthIndex})]}),h.jsx("p",{className:"text-4xl font-black text-white",children:t.competitorIntelligence.competitorStrengthIndex.toFixed(0)}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90 mt-2",children:P?" ":"strength level"})]}),h.jsxs("div",{className:`bg-gradient-to-br rounded-[1.5rem] p-6 border-2 shadow-lg hover:shadow-2xl transition-all ${t.competitorIntelligence.entryDifficulty==="Low"?"from-emerald-600 to-emerald-700 border-emerald-500":t.competitorIntelligence.entryDifficulty==="Medium"?"from-orange-600 to-orange-700 border-orange-500":"from-rose-600 to-rose-700 border-rose-500"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(ru,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.entryDifficulty})]}),h.jsx("p",{className:"text-2xl font-black text-white mb-2",children:M.levels[t.competitorIntelligence.entryDifficulty]||t.competitorIntelligence.entryDifficulty})]}),h.jsxs("div",{className:"bg-gradient-to-br from-pink-600 to-pink-700 rounded-[1.5rem] p-6 border-2 border-pink-500 shadow-lg hover:shadow-2xl transition-all",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(rm,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.marketGaps})]}),h.jsx("p",{className:"text-4xl font-black text-white",children:t.competitorIntelligence.marketGaps.length}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90 mt-2",children:M.opportunitiesIdentified})]})]}),t.competitors&&t.competitors.length>0&&h.jsxs("div",{className:"bg-slate-50 rounded-[2rem] border-2 border-gray-200 overflow-hidden shadow-lg",children:[h.jsx("div",{className:"p-8 bg-gradient-to-r from-gray-50 to-slate-50 border-b-2 border-gray-200",children:h.jsxs("h3",{className:"text-lg font-black text-slate-700 flex items-center gap-3",children:[h.jsx(df,{className:"w-6 h-6"}),M.competitorTable]})}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-gradient-to-r from-slate-100 to-gray-100 border-b-2 border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:`p-4 text-left font-black text-slate-700 text-sm uppercase tracking-widest ${P?"text-right":""}`,children:M.store}),h.jsx("th",{className:`p-4 text-left font-black text-slate-700 text-sm uppercase tracking-widest ${P?"text-right":""}`,children:M.price}),h.jsx("th",{className:`p-4 text-left font-black text-slate-700 text-sm uppercase tracking-widest ${P?"text-right":""}`,children:M.rating}),h.jsx("th",{className:`p-4 text-left font-black text-slate-700 text-sm uppercase tracking-widest ${P?"text-right":""}`,children:M.shipping}),h.jsx("th",{className:`p-4 text-left font-black text-slate-700 text-sm uppercase tracking-widest ${P?"text-right":""}`,children:M.status})]})}),h.jsx("tbody",{children:t.competitors.map((H,oe)=>h.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[h.jsx("td",{className:"p-4 font-bold text-slate-900",children:h.jsx("a",{href:H.url,target:"_blank",rel:"noopener noreferrer",className:"text-slate-600 hover:text-slate-700 hover:underline font-bold",children:H.storeName})}),h.jsxs("td",{className:"p-4 font-black text-orange-700",children:[H.price.toFixed(0)," ",P?".":"SAR"]}),h.jsx("td",{className:"p-4",children:h.jsxs("span",{className:"text-slate-700 px-3 py-1 text-sm font-black",children:[" ",H.rating.toFixed(1)]})}),h.jsxs("td",{className:"p-4 font-bold text-slate-600",children:[H.shippingDays," ",M.days]}),h.jsx("td",{className:"p-4",children:h.jsx("span",{className:"px-3 py-1 text-xs font-black text-slate-700",children:H.stockStatus})})]},oe))})]})})]}),t.competitorIntelligence&&t.competitorIntelligence.marketGaps.length>0&&h.jsxs("div",{className:"bg-gradient-to-br from-orange-600 to-rose-600 rounded-[2rem] border-2 border-orange-500 p-8 shadow-lg",children:[h.jsxs("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-3",children:[h.jsx(ds,{className:"w-6 h-6"}),M.marketGapsOpportunities]}),h.jsx("div",{className:"space-y-3",children:t.competitorIntelligence.marketGaps.map((H,oe)=>h.jsxs("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm border-2 border-white border-opacity-30 rounded-xl p-4 flex items-start gap-3 hover:bg-opacity-30 transition-all",children:[h.jsx(us,{className:"w-5 h-5 text-white flex-shrink-0 mt-0.5"}),h.jsx("p",{className:"text-white font-medium",children:H})]},oe))})]})]}),ie=()=>h.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 print-page-break",children:[t.profitabilityAnalysis&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"border-l-4 border-l-green-600 pl-6 mb-8 print-no-break",children:[h.jsxs("h2",{className:"text-4xl font-black text-green-700 flex items-center gap-3 mb-2",children:[h.jsx(pa,{className:"w-8 h-8"}),M.profitabilityAnalysis]}),h.jsx("p",{className:"text-slate-600 font-medium",children:M.revenueAndProfit})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-[1.5rem] p-6 border-2 border-emerald-500 shadow-lg hover:shadow-2xl transition-all",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(Co,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.averageSalePrice})]}),h.jsx("p",{className:"text-4xl font-black text-white mb-2",children:t.profitabilityAnalysis.averageSalePrice.toFixed(0)}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90",children:"SAR per unit"})]}),h.jsxs("div",{className:`bg-gradient-to-br rounded-[1.5rem] p-6 border-2 shadow-lg hover:shadow-2xl transition-all ${t.profitabilityAnalysis.estimatedProfitMargin>30?"from-green-600 to-green-700 border-green-500":"from-orange-600 to-orange-700 border-orange-500"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(Co,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.profitMargin})]}),h.jsxs("p",{className:"text-4xl font-black text-white mb-2",children:[t.profitabilityAnalysis.estimatedProfitMargin.toFixed(1),"%"]}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90",children:"estimated"})]}),h.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-[1.5rem] p-6 border-2 border-blue-500 shadow-lg hover:shadow-2xl transition-all",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(ds,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.breakEvenPoint})]}),h.jsx("p",{className:"text-4xl font-black text-white mb-2",children:t.profitabilityAnalysis.breakEvenPoint}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90",children:P?"":"units"})]}),h.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-purple-700 rounded-[1.5rem] p-6 border-2 border-purple-500 shadow-lg hover:shadow-2xl transition-all",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(rm,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.profitabilityScore})]}),h.jsxs("p",{className:"text-4xl font-black text-white mb-2",children:[t.profitabilityAnalysis.profitabilityScore,"%"]}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90",children:M.strengthRating})]}),h.jsxs("div",{className:"bg-gradient-to-br from-teal-600 to-teal-700 rounded-[1.5rem] p-6 border-2 border-teal-500 shadow-lg hover:shadow-2xl transition-all md:col-span-1 lg:col-span-2",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(pa,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.monthlyRevenue})]}),h.jsx("p",{className:"text-3xl font-black text-white",children:t.profitabilityAnalysis.estimatedMonthlyRevenue}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90 mt-2",children:M.estimatedAtExpectedSales})]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-[2rem] border-2 border-gray-200 p-8 shadow-lg",children:[h.jsxs("h3",{className:"text-lg font-black text-slate-700 mb-6 flex items-center gap-3",children:[h.jsx("span",{className:"w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center text-emerald-600 font-black text-sm",children:"."}),M.priceSensitivity]}),h.jsx("p",{className:"text-slate-600 leading-relaxed font-medium",children:t.profitabilityAnalysis.priceSensitivity})]})]}),t.operationsFinancials&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-[2rem] border-2 border-gray-200 p-8 shadow-lg",children:[h.jsxs("h3",{className:"text-lg font-black text-slate-700 mb-4 flex items-center gap-3",children:[h.jsx(pa,{className:"w-6 h-6 text-amber-600"}),M.pricingViability]}),h.jsx("p",{className:"text-slate-600 leading-relaxed font-medium",children:t.operationsFinancials.pricingViability})]}),h.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-[2rem] border-2 border-gray-200 p-8 shadow-lg",children:[h.jsxs("h3",{className:"text-lg font-black text-slate-700 mb-4 flex items-center gap-3",children:[h.jsx(Co,{className:"w-6 h-6 text-blue-600"}),M.expectedProfitMargins]}),h.jsx("p",{className:"text-slate-600 leading-relaxed font-medium",children:t.operationsFinancials.expectedProfitMargins})]}),h.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-[2rem] border-2 border-gray-200 p-8 shadow-lg",children:[h.jsxs("h3",{className:"text-lg font-black text-slate-700 mb-4 flex items-center gap-3",children:[h.jsx(sxe,{className:"w-6 h-6 text-purple-600"}),M.supplyChainEase]}),h.jsx("p",{className:"text-slate-600 leading-relaxed font-medium",children:t.operationsFinancials.supplyChainEase})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-[2rem] border-2 border-gray-200 p-8 shadow-lg",children:[h.jsxs("h3",{className:"text-lg font-black text-slate-700 mb-4 flex items-center gap-3",children:[h.jsx(us,{className:"w-6 h-6 text-emerald-600"}),M.paymentMethods]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:t.operationsFinancials.recommendedPaymentMethods.map((H,oe)=>h.jsx("span",{className:"text-slate-700 px-2 py-1 text-sm font-bold",children:H},oe))})]}),h.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-[2rem] border-2 border-gray-200 p-8 shadow-lg",children:[h.jsxs("h3",{className:"text-lg font-black text-slate-700 mb-4 flex items-center gap-3",children:[h.jsx(pa,{className:"w-6 h-6 text-blue-600"}),M.deliveryMethods]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:t.operationsFinancials.recommendedDelivery.map((H,oe)=>h.jsx("span",{className:"text-slate-700 px-2 py-1 text-sm font-bold",children:H},oe))})]})]})]})]}),fe=()=>h.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 print-page-break",children:[h.jsxs("div",{className:"border-l-4 border-l-purple-600 pl-6 mb-8 print-no-break",children:[h.jsxs("h2",{className:"text-4xl font-black text-purple-700 flex items-center gap-3 mb-2",children:[h.jsx(ds,{className:"w-8 h-8"}),M.decisionMetrics]}),h.jsx("p",{className:"text-slate-600 font-medium",children:M.strategicDecisionFramework})]}),t.decisionMetrics&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsxs("div",{className:`bg-gradient-to-br rounded-[1.5rem] p-6 border-2 shadow-lg hover:shadow-2xl transition-all ${t.decisionMetrics.successScore>70?"from-green-600 to-green-700 border-green-500":t.decisionMetrics.successScore>40?"from-orange-600 to-orange-700 border-orange-500":"from-rose-600 to-rose-700 border-rose-500"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(us,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.successScore})]}),h.jsxs("p",{className:"text-4xl font-black text-white mb-2",children:[t.decisionMetrics.successScore,"%"]}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90",children:M.probabilityOfSuccess})]}),h.jsxs("div",{className:`bg-gradient-to-br rounded-[1.5rem] p-6 border-2 shadow-lg hover:shadow-2xl transition-all ${t.decisionMetrics.riskScore>70?"from-rose-600 to-rose-700 border-rose-500":t.decisionMetrics.riskScore>40?"from-orange-600 to-orange-700 border-orange-500":"from-green-600 to-green-700 border-green-500"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(ru,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.riskScore})]}),h.jsxs("p",{className:"text-4xl font-black text-white mb-2",children:[t.decisionMetrics.riskScore,"%"]}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90",children:P?" ":"market risk level"})]}),h.jsxs("div",{className:`bg-gradient-to-br rounded-[1.5rem] p-6 border-2 shadow-lg hover:shadow-2xl transition-all ${t.decisionMetrics.beginnerFriendly?"from-emerald-600 to-emerald-700 border-emerald-500":"from-orange-600 to-orange-700 border-orange-500"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(B_,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.beginnerFriendly})]}),h.jsx("p",{className:"text-3xl font-black text-white mb-2",children:t.decisionMetrics.beginnerFriendly?" Yes":" No"}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90",children:M.easeOfEntry})]}),h.jsxs("div",{className:"bg-gradient-to-br from-amber-600 to-amber-700 rounded-[1.5rem] p-6 border-2 border-amber-500 shadow-lg hover:shadow-2xl transition-all",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(pa,{className:"w-5 h-5 text-white"}),h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.capitalRequired})]}),h.jsx("p",{className:"text-2xl font-black text-white mb-2",children:t.decisionMetrics.capitalRequired}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90",children:M.startupInvestment})]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-[2rem] border-2 border-blue-500 p-8 shadow-lg",children:[h.jsxs("h3",{className:"text-lg font-black text-white mb-4 flex items-center gap-3",children:[h.jsx(Y0e,{className:"w-6 h-6 text-white"}),M.timeToProfit]}),h.jsx("p",{className:"text-2xl font-black text-white mb-2",children:t.decisionMetrics.timeToProfit}),h.jsx("p",{className:"text-white opacity-90 font-medium",children:M.estimatedBreakEven})]}),h.jsxs("div",{className:`rounded-[2rem] border-2 p-8 shadow-lg ${t.decisionMetrics.recommendation==="GO"?"bg-green-50 border-green-400":t.decisionMetrics.recommendation==="CAUTION"?"bg-orange-50 border-orange-400":"bg-rose-50 border-rose-400"}`,children:[h.jsx("h3",{className:`text-2xl font-black mb-4 flex items-center gap-3 ${t.decisionMetrics.recommendation==="GO"?"text-green-700":t.decisionMetrics.recommendation==="CAUTION"?"text-orange-700":"text-rose-700"}`,children:t.decisionMetrics.recommendation==="GO"?h.jsxs(h.Fragment,{children:[h.jsx(us,{className:"w-7 h-7"}),P?" -  ":"GO - Proceed with Confidence"]}):t.decisionMetrics.recommendation==="CAUTION"?h.jsxs(h.Fragment,{children:[h.jsx(ru,{className:"w-7 h-7"}),P?" -    ":"CAUTION - Consider Risks"]}):h.jsxs(h.Fragment,{children:[h.jsx(ru,{className:"w-7 h-7"}),P?"      ":"NO-GO - Not Recommended"]})}),h.jsx("p",{className:"text-slate-700 leading-relaxed font-medium",children:M.basedOnAnalysis})]})]})]}),_e=()=>h.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 print-page-break",children:[t.opportunityFinder&&t.opportunityFinder.opportunities.length>0?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"border-l-4 border-l-pink-600 pl-6 mb-8 print-no-break",children:[h.jsxs("h2",{className:"text-4xl font-black text-pink-700 flex items-center gap-3 mb-2",children:[h.jsx(ds,{className:"w-8 h-8"}),M.growthOpportunities]}),h.jsx("p",{className:"text-slate-600 font-medium",children:M.identifiedGaps})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.opportunityFinder.opportunities.map((H,oe)=>h.jsx("div",{className:"group",children:h.jsxs("div",{className:`bg-gradient-to-br rounded-[1.5rem] p-6 border-2 hover:shadow-2xl shadow-lg transition-all h-full ${H.potentialScore>75?"from-green-600 to-green-700 border-green-500":H.potentialScore>50?"from-orange-600 to-orange-700 border-orange-500":"from-slate-600 to-slate-700 border-slate-500"}`,children:[h.jsxs("div",{className:"flex items-start justify-between mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center text-white group-hover:bg-opacity-30 transition-colors backdrop-blur-sm",children:h.jsx(ds,{className:"w-5 h-5"})}),h.jsxs("span",{className:"text-xs font-black px-2.5 py-1 rounded-lg bg-white bg-opacity-20 text-white backdrop-blur-sm",children:[H.potentialScore,"%"]})]}),h.jsx("h3",{className:"text-lg font-black text-white mb-2",children:P&&H.titleAr?H.titleAr:H.title}),h.jsx("p",{className:"text-white opacity-90 font-medium mb-4 leading-relaxed",children:P&&H.descriptionAr?H.descriptionAr:H.description}),h.jsxs("div",{className:"text-xs font-bold text-white opacity-80 uppercase tracking-widest",children:[P?"":"Type",": ",P?H.type==="green"?" ":H.type==="blue"?" ":H.type==="niche"?" ":H.type==="price"?" ":H.type==="premium"?" ":H.type:H.type]})]})},oe))})]}):h.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-[2rem] border-2 border-dashed border-gray-200 p-12 text-center shadow-lg",children:h.jsx("p",{className:"text-slate-400 font-bold",children:P?"   ":"No specific opportunities identified"})}),t.strategicAnalysis&&h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[h.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-[2rem] border-2 border-gray-200 p-8 shadow-lg",children:[h.jsx("h3",{className:"text-lg font-black text-slate-700 mb-4",children:M.uniqueSellingProposition}),h.jsx("p",{className:"text-slate-600 leading-relaxed font-medium",children:t.strategicAnalysis.usp})]}),h.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-[2rem] border-2 border-gray-200 p-8 shadow-lg",children:[h.jsx("h3",{className:"text-lg font-black text-slate-700 mb-4",children:M.saturationRisk}),h.jsx("p",{className:"text-slate-600 leading-relaxed font-medium",children:t.strategicAnalysis.saturationRisk})]}),h.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-[2rem] border-2 border-gray-200 p-8 shadow-lg md:col-span-2",children:[h.jsx("h3",{className:"text-lg font-black text-slate-700 mb-4",children:M.imitationRisk}),h.jsx("p",{className:"text-slate-600 leading-relaxed font-medium",children:t.strategicAnalysis.imitationRisk})]})]}),t.swot&&h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-8",children:[h.jsxs("div",{className:"bg-gradient-to-br from-emerald-600 to-green-600 rounded-[1.5rem] border-2 border-emerald-500 p-6 shadow-lg",children:[h.jsx("h3",{className:"text-lg font-black text-white mb-4",children:M.swotStrengths}),h.jsx("ul",{className:"space-y-2",children:t.swot.strengths.map((H,oe)=>h.jsxs("li",{className:"flex items-start gap-2 text-sm font-medium text-white",children:[h.jsx("span",{className:"text-lg",children:""}),h.jsx("span",{children:H})]},oe))})]}),h.jsxs("div",{className:"bg-gradient-to-br from-rose-600 to-red-600 rounded-[1.5rem] border-2 border-rose-500 p-6 shadow-lg",children:[h.jsx("h3",{className:"text-lg font-black text-white mb-4",children:M.swotWeaknesses}),h.jsx("ul",{className:"space-y-2",children:t.swot.weaknesses.map((H,oe)=>h.jsxs("li",{className:"flex items-start gap-2 text-sm font-medium text-white",children:[h.jsx("span",{className:"text-lg",children:""}),h.jsx("span",{children:H})]},oe))})]}),h.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-cyan-600 rounded-[1.5rem] border-2 border-blue-500 p-6 shadow-lg",children:[h.jsx("h3",{className:"text-lg font-black text-white mb-4",children:M.swotOpportunities}),h.jsx("ul",{className:"space-y-2",children:t.swot.opportunities.map((H,oe)=>h.jsxs("li",{className:"flex items-start gap-2 text-sm font-medium text-white",children:[h.jsx("span",{className:"text-lg",children:""}),h.jsx("span",{children:H})]},oe))})]}),h.jsxs("div",{className:"bg-gradient-to-br from-amber-600 to-orange-600 rounded-[1.5rem] border-2 border-amber-500 p-6 shadow-lg",children:[h.jsx("h3",{className:"text-lg font-black text-white mb-4",children:M.swotThreats}),h.jsx("ul",{className:"space-y-2",children:t.swot.threats.map((H,oe)=>h.jsxs("li",{className:"flex items-start gap-2 text-sm font-medium text-white",children:[h.jsx("span",{className:"text-lg",children:""}),h.jsx("span",{children:H})]},oe))})]})]})]}),$e=()=>h.jsx("div",{className:"space-y-8 animate-in fade-in duration-500 print-page-break",children:t.buyerIntentAnalysis&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"border-l-4 border-l-purple-600 pl-6 mb-8 print-no-break",children:[h.jsxs("h2",{className:"text-4xl font-black text-purple-700 flex items-center gap-3 mb-2",children:[h.jsx(ds,{className:"w-8 h-8"}),M.buyerIntentAnalysis]}),h.jsx("p",{className:"text-slate-600 font-medium",children:M.buyerIntentDescription})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-purple-700 rounded-[1.5rem] p-6 border-2 border-purple-500 shadow-lg hover:shadow-2xl transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.intentScore}),h.jsx(pa,{className:"w-5 h-5 text-white opacity-80"})]}),h.jsxs("p",{className:"text-4xl font-black text-white mb-2",children:[t.buyerIntentAnalysis.intentScore,"%"]}),h.jsx("p",{className:"text-xs font-bold text-white opacity-90 mt-2",children:t.buyerIntentAnalysis.intentLevel==="High"?M.high:t.buyerIntentAnalysis.intentLevel==="Medium"?M.medium:M.low})]}),h.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-indigo-700 rounded-[1.5rem] p-6 border-2 border-indigo-500 shadow-lg hover:shadow-2xl transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.searchIntentType}),h.jsx(rm,{className:"w-5 h-5 text-white opacity-80"})]}),h.jsx("p",{className:"text-2xl font-black text-white mb-2",children:t.buyerIntentAnalysis.searchIntentType==="Transactional"?M.transactional:t.buyerIntentAnalysis.searchIntentType==="Informational"?M.informational:M.mixed})]}),h.jsxs("div",{className:"bg-gradient-to-br from-pink-600 to-pink-700 rounded-[1.5rem] p-6 border-2 border-pink-500 shadow-lg hover:shadow-2xl transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.conversionProbability}),h.jsx(Co,{className:"w-5 h-5 text-white opacity-80"})]}),h.jsxs("p",{className:"text-4xl font-black text-white mb-2",children:[Math.round(t.buyerIntentAnalysis.conversionProbability*100),"%"]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-violet-600 to-violet-700 rounded-[1.5rem] p-6 border-2 border-violet-500 shadow-lg hover:shadow-2xl transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:M.buyerJourneyStage}),h.jsx(AD,{className:"w-5 h-5 text-white opacity-80"})]}),h.jsx("p",{className:"text-sm font-bold text-white",children:t.buyerIntentAnalysis.buyerJourneyStage})]})]}),t.buyerIntentAnalysis.keywordAnalysis&&h.jsxs("div",{className:"bg-slate-50 rounded-[2rem] border-2 border-gray-200 p-8 shadow-lg",children:[h.jsx("h3",{className:"text-2xl font-black text-slate-700 mb-6",children:M.keywordAnalysis}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.buyerIntentAnalysis.keywordAnalysis.transactionalKeywords.length>0&&h.jsxs("div",{className:"bg-green-50 rounded-xl p-4 border border-green-200",children:[h.jsx("h4",{className:"font-bold text-green-700 mb-3",children:M.transactionalKeywords}),h.jsx("div",{className:"flex flex-wrap gap-2",children:t.buyerIntentAnalysis.keywordAnalysis.transactionalKeywords.map((H,oe)=>h.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-lg text-sm font-semibold",children:H},oe))})]}),t.buyerIntentAnalysis.keywordAnalysis.informationalKeywords.length>0&&h.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[h.jsx("h4",{className:"font-bold text-blue-700 mb-3",children:M.informationalKeywords}),h.jsx("div",{className:"flex flex-wrap gap-2",children:t.buyerIntentAnalysis.keywordAnalysis.informationalKeywords.map((H,oe)=>h.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-lg text-sm font-semibold",children:H},oe))})]}),t.buyerIntentAnalysis.keywordAnalysis.brandKeywords.length>0&&h.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 border border-purple-200",children:[h.jsx("h4",{className:"font-bold text-purple-700 mb-3",children:M.brandKeywords}),h.jsx("div",{className:"flex flex-wrap gap-2",children:t.buyerIntentAnalysis.keywordAnalysis.brandKeywords.map((H,oe)=>h.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-lg text-sm font-semibold",children:H},oe))})]})]})]}),t.buyerIntentAnalysis.insights&&t.buyerIntentAnalysis.insights.length>0&&h.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 rounded-[2rem] border-2 border-purple-200 p-8 shadow-lg",children:[h.jsxs("h3",{className:"text-2xl font-black text-purple-700 mb-6 flex items-center gap-3",children:[h.jsx(B_,{className:"w-6 h-6"}),M.insights]}),h.jsx("div",{className:"space-y-3",children:t.buyerIntentAnalysis.insights.map((H,oe)=>h.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white rounded-xl border border-purple-200",children:[h.jsx(us,{className:"w-5 h-5 text-purple-600 flex-shrink-0 mt-0.5"}),h.jsx("p",{className:"text-slate-700 font-medium",children:H})]},oe))})]})]})}),Ge=()=>{const H=ve=>P&&{"6-12 months":"6-12 ","3-6 months":"3-6 ","1-3 months":"1-3 "}[ve]||ve,oe=(ve,ae,Xe,Be)=>{var He,rt;return h.jsxs("div",{className:`rounded-[2rem] border-2 overflow-hidden shadow-lg transition-all hover:shadow-xl ${Xe?`${Be.border} ring-4 ring-opacity-30`:"border-gray-200 bg-white"}`,children:[h.jsx("div",{className:`${Xe?Be.header:"bg-slate-100"} p-5`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:`text-xl font-black ${Xe?"text-white":"text-slate-700"}`,children:ae}),Xe&&h.jsx("span",{className:"bg-white bg-opacity-20 text-white text-xs font-bold px-3 py-1 rounded-full",children:P?"  ":" Recommended"})]})}),h.jsxs("div",{className:"p-6 bg-white",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[h.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 text-center",children:[h.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:P?" ":"Monthly Sales"}),h.jsx("p",{className:"text-2xl font-black text-slate-700",children:((He=ve.costBreakdown)==null?void 0:He.unitsSold)||0}),h.jsx("p",{className:"text-xs text-slate-500",children:P?"":"units"})]}),h.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 text-center",children:[h.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:M.growthRate}),h.jsxs("p",{className:"text-2xl font-black text-teal-600",children:[ve.growthRate,"%"]}),h.jsx("p",{className:"text-xs text-slate-500",children:P?"":"monthly"})]})]}),h.jsxs("div",{className:"space-y-3 mb-6",children:[h.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-xl",children:[h.jsx("span",{className:"text-sm font-bold text-green-700",children:M.monthlyRevenue}),h.jsxs("span",{className:"text-lg font-black text-green-600",children:[ve.monthlyRevenue.toLocaleString()," ",M.sar]})]}),ve.costBreakdown&&h.jsx(h.Fragment,{children:h.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[h.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:P?" ":"Cost Breakdown"}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between items-center text-sm",children:[h.jsx("span",{className:"text-slate-600",children:P?" ":"Product Costs"}),h.jsxs("span",{className:"font-bold text-red-500",children:["-",ve.costBreakdown.productCosts.toLocaleString()," ",M.sar]})]}),ve.costBreakdown.shippingCosts>0&&h.jsxs("div",{className:"flex justify-between items-center text-sm",children:[h.jsx("span",{className:"text-slate-600",children:P?" ":"Shipping Costs"}),h.jsxs("span",{className:"font-bold text-red-400",children:["-",ve.costBreakdown.shippingCosts.toLocaleString()," ",M.sar]})]}),ve.costBreakdown.platformFees>0&&h.jsxs("div",{className:"flex justify-between items-center text-sm",children:[h.jsx("span",{className:"text-slate-600",children:P?" ":"Platform Fees"}),h.jsxs("span",{className:"font-bold text-red-400",children:["-",ve.costBreakdown.platformFees.toLocaleString()," ",M.sar]})]}),h.jsxs("div",{className:"flex justify-between items-center text-sm",children:[h.jsx("span",{className:"text-slate-600",children:P?" ":"Marketing Budget"}),h.jsxs("span",{className:"font-bold text-orange-500",children:["-",ve.costBreakdown.marketingBudget.toLocaleString()," ",M.sar]})]}),h.jsxs("div",{className:"flex justify-between items-center text-sm",children:[h.jsx("span",{className:"text-slate-600",children:P?" ":"Operational Expenses"}),h.jsxs("span",{className:"font-bold text-amber-500",children:["-",ve.costBreakdown.operationalExpenses.toLocaleString()," ",M.sar]})]}),h.jsxs("div",{className:"flex justify-between items-center p-2 bg-red-50 rounded-lg",children:[h.jsx("span",{className:"text-sm font-bold text-red-700",children:P?" ":"Total Costs"}),h.jsxs("span",{className:"font-black text-red-600",children:["-",ve.costBreakdown.totalCosts.toLocaleString()," ",M.sar]})]})]})]})}),h.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-xl border-2 border-blue-200",children:[h.jsx("span",{className:"text-sm font-bold text-blue-700",children:P?" ":"Net Profit"}),h.jsxs("span",{className:"text-xl font-black text-blue-600",children:[ve.monthlyProfit.toLocaleString()," ",M.sar]})]}),h.jsxs("div",{className:"text-center p-2 bg-slate-50 rounded-lg",children:[h.jsxs("span",{className:"text-xs text-slate-500",children:[P?"  ":"Net Profit Margin",": "]}),h.jsxs("span",{className:"text-sm font-black text-slate-700",children:[ve.monthlyRevenue>0?Math.round(ve.monthlyProfit/ve.monthlyRevenue*100):0,"%"]})]}),((rt=ve.costBreakdown)==null?void 0:rt.pricePerUnit)&&h.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center mt-3",children:[h.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[h.jsx("p",{className:"text-[10px] text-green-600 font-bold",children:P?" ":"Price/Unit"}),h.jsxs("p",{className:"text-sm font-black text-green-700",children:[ve.costBreakdown.pricePerUnit," ",M.sar]})]}),h.jsxs("div",{className:"bg-red-50 rounded-lg p-2",children:[h.jsx("p",{className:"text-[10px] text-red-600 font-bold",children:P?" ":"Cost/Unit"}),h.jsxs("p",{className:"text-sm font-black text-red-700",children:[ve.costBreakdown.costPerUnit," ",M.sar]})]}),h.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[h.jsx("p",{className:"text-[10px] text-blue-600 font-bold",children:P?" ":"Profit/Unit"}),h.jsxs("p",{className:"text-sm font-black text-blue-700",children:[ve.costBreakdown.profitPerUnit," ",M.sar]})]})]})]}),h.jsx("div",{className:"bg-gradient-to-r from-slate-100 to-slate-50 rounded-xl p-4 mb-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm font-bold text-slate-600",children:M.timeframe}),h.jsx("span",{className:"text-lg font-black text-slate-700",children:H(ve.timeframe)})]})}),h.jsxs("div",{className:"border-t-2 border-gray-100 pt-4",children:[h.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:M.assumptions}),h.jsx("ul",{className:"space-y-1",children:ve.assumptions.filter((Ye,Ne)=>P?Ne%2===0:Ne%2===1).slice(0,3).map((Ye,Ne)=>h.jsxs("li",{className:"text-xs text-slate-600 flex items-start gap-2",children:[h.jsx("span",{className:"text-teal-500",children:""}),Ye]},Ne))})]})]})]})};return h.jsx("div",{className:"space-y-8 animate-in fade-in duration-500 print-page-break",children:t.growthScenarios&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"border-l-4 border-l-teal-600 pl-6 mb-8 print-no-break",children:[h.jsxs("h2",{className:"text-4xl font-black text-teal-700 flex items-center gap-3 mb-2",children:[h.jsx(Co,{className:"w-8 h-8"}),M.growthScenarios]}),h.jsx("p",{className:"text-slate-600 font-medium",children:M.growthScenariosDescription})]}),h.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-cyan-600 rounded-[2rem] p-6 text-white shadow-lg",children:[h.jsx("p",{className:"text-sm font-bold uppercase tracking-widest mb-2",children:M.recommendedScenario}),h.jsx("p",{className:"text-3xl font-black",children:t.growthScenarios.recommendedScenario==="conservative"?M.conservativeScenario:t.growthScenarios.recommendedScenario==="moderate"?M.moderateScenario:M.optimisticScenario})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[oe(t.growthScenarios.conservative,M.conservativeScenario,t.growthScenarios.recommendedScenario==="conservative",{border:"border-amber-400 ring-amber-200",header:"bg-gradient-to-r from-amber-500 to-orange-500"}),oe(t.growthScenarios.moderate,M.moderateScenario,t.growthScenarios.recommendedScenario==="moderate",{border:"border-teal-400 ring-teal-200",header:"bg-gradient-to-r from-teal-500 to-cyan-500"}),oe(t.growthScenarios.optimistic,M.optimisticScenario,t.growthScenarios.recommendedScenario==="optimistic",{border:"border-green-400 ring-green-200",header:"bg-gradient-to-r from-green-500 to-emerald-500"})]}),t.growthScenarios.scalabilityFactors&&t.growthScenarios.scalabilityFactors.length>0&&h.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 rounded-[2rem] border-2 border-teal-200 p-8 shadow-lg",children:[h.jsx("h3",{className:"text-2xl font-black text-teal-700 mb-6",children:M.scalabilityFactors}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.growthScenarios.scalabilityFactors.filter((ve,ae)=>P?ae%2===0:ae%2===1).map((ve,ae)=>h.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white rounded-xl border border-teal-200",children:[h.jsx(us,{className:"w-5 h-5 text-teal-600 flex-shrink-0 mt-0.5"}),h.jsx("p",{className:"text-slate-700 font-medium",children:ve})]},ae))})]})]})})},Ue=()=>{var H,oe,ve,ae,Xe,Be,He,rt,Ye,Ne,be,De,Je,dt,G,je,ct;return h.jsx("div",{className:"space-y-8 animate-in fade-in duration-500 print-page-break",children:t.executiveSummary&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"border-l-4 border-l-amber-600 pl-6 mb-8 print-no-break",children:h.jsxs("h2",{className:"text-4xl font-black text-amber-700 flex items-center gap-3 mb-2",children:[h.jsx(ds,{className:"w-8 h-8"}),M.executiveSummary]})}),h.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 rounded-[2rem] border-2 border-slate-200 p-8 shadow-lg",children:[h.jsxs("h3",{className:"text-2xl font-black text-slate-700 mb-6 flex items-center gap-2",children:[h.jsx("span",{children:""}),P?"    ":"Quick Summary from All Sections"]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl p-4 text-white",children:[h.jsx("p",{className:"text-xs font-bold opacity-80 mb-1",children:P?"":"Demand"}),h.jsxs("p",{className:"text-3xl font-black",children:[((H=t.demandAnalysis)==null?void 0:H.demandScore)||0,"%"]}),h.jsxs("p",{className:"text-xs opacity-80",children:[((oe=t.demandAnalysis)==null?void 0:oe.monthlyDemandEstimate)||0," ",P?"/":"units/mo"]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl p-4 text-white",children:[h.jsx("p",{className:"text-xs font-bold opacity-80 mb-1",children:P?"":"Competitors"}),h.jsx("p",{className:"text-3xl font-black",children:((ve=t.competitorIntelligence)==null?void 0:ve.activeCompetitors)||0}),h.jsxs("p",{className:"text-xs opacity-80",children:[P?"":"Strength",": ",((ae=t.competitorIntelligence)==null?void 0:ae.competitorStrengthIndex)||0,"%"]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-teal-600 rounded-2xl p-4 text-white",children:[h.jsx("p",{className:"text-xs font-bold opacity-80 mb-1",children:P?"":"Profit"}),h.jsxs("p",{className:"text-3xl font-black",children:[((Xe=t.profitabilityAnalysis)==null?void 0:Xe.estimatedProfitMargin)||0,"%"]}),h.jsx("p",{className:"text-xs opacity-80",children:((Be=t.profitabilityAnalysis)==null?void 0:Be.estimatedMonthlyRevenue)||""})]}),h.jsxs("div",{className:"bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl p-4 text-white",children:[h.jsx("p",{className:"text-xs font-bold opacity-80 mb-1",children:P?" ":"Intent"}),h.jsxs("p",{className:"text-3xl font-black",children:[((He=t.buyerIntentAnalysis)==null?void 0:He.intentScore)||0,"%"]}),h.jsx("p",{className:"text-xs opacity-80",children:((rt=t.buyerIntentAnalysis)==null?void 0:rt.intentLevel)==="High"?P?"":"High":((Ye=t.buyerIntentAnalysis)==null?void 0:Ye.intentLevel)==="Medium"?P?"":"Medium":P?"":"Low"})]}),h.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl p-4 text-white",children:[h.jsx("p",{className:"text-xs font-bold opacity-80 mb-1",children:P?" ":"Success"}),h.jsxs("p",{className:"text-3xl font-black",children:[((Ne=t.decisionMetrics)==null?void 0:Ne.successScore)||0,"%"]}),h.jsx("p",{className:"text-xs opacity-80",children:P?"":"Probability"})]}),h.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-rose-600 rounded-2xl p-4 text-white",children:[h.jsx("p",{className:"text-xs font-bold opacity-80 mb-1",children:P?"":"Risk"}),h.jsxs("p",{className:"text-3xl font-black",children:[((be=t.decisionMetrics)==null?void 0:be.riskScore)||0,"%"]}),h.jsx("p",{className:"text-xs opacity-80",children:P?"":"Level"})]}),h.jsxs("div",{className:"bg-gradient-to-br from-pink-500 to-rose-500 rounded-2xl p-4 text-white",children:[h.jsx("p",{className:"text-xs font-bold opacity-80 mb-1",children:P?"":"Opportunities"}),h.jsx("p",{className:"text-3xl font-black",children:((Je=(De=t.opportunityFinder)==null?void 0:De.opportunities)==null?void 0:Je.length)||0}),h.jsx("p",{className:"text-xs opacity-80",children:P?" ":"Available"})]}),h.jsxs("div",{className:"bg-gradient-to-br from-teal-500 to-cyan-600 rounded-2xl p-4 text-white",children:[h.jsx("p",{className:"text-xs font-bold opacity-80 mb-1",children:P?"":"Scenario"}),h.jsx("p",{className:"text-lg font-black",children:((dt=t.growthScenarios)==null?void 0:dt.recommendedScenario)==="optimistic"?P?"":"Optimistic":((G=t.growthScenarios)==null?void 0:G.recommendedScenario)==="moderate"?P?"":"Moderate":P?"":"Conservative"}),h.jsx("p",{className:"text-xs opacity-80",children:P?" ":"Recommended"})]})]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 rounded-[2rem] border-2 border-amber-300 p-8 shadow-lg",children:[h.jsx("h3",{className:"text-2xl font-black text-amber-700 mb-6",children:M.onePageSummary}),h.jsx("div",{className:"space-y-3",children:t.executiveSummary.onePageSummary.split(`
`).map((ft,At)=>h.jsx("p",{className:"text-slate-700 leading-relaxed font-medium",children:ft},At))})]}),t.executiveSummary.keyFindings&&t.executiveSummary.keyFindings.length>0&&h.jsxs("div",{className:"bg-slate-50 rounded-[2rem] border-2 border-gray-200 p-8 shadow-lg",children:[h.jsx("h3",{className:"text-2xl font-black text-slate-700 mb-6",children:M.keyFindings}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.executiveSummary.keyFindings.map((ft,At)=>h.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white rounded-xl border border-gray-200",children:[h.jsx(us,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),h.jsx("p",{className:"text-slate-700 font-medium",children:ft})]},At))})]}),h.jsxs("div",{className:"bg-slate-50 rounded-[2rem] border-2 border-gray-200 p-8 shadow-lg",children:[h.jsx("h3",{className:"text-2xl font-black text-slate-700 mb-6",children:M.criticalMetrics}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200",children:[h.jsx("p",{className:"text-sm font-bold text-slate-500 mb-2",children:M.marketSize}),h.jsx("p",{className:"text-2xl font-black text-slate-700",children:t.executiveSummary.criticalMetrics.marketSize})]}),h.jsxs("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200",children:[h.jsx("p",{className:"text-sm font-bold text-slate-500 mb-2",children:M.demand}),h.jsx("p",{className:"text-2xl font-black text-slate-700",children:t.executiveSummary.criticalMetrics.demandLevel})]}),h.jsxs("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200",children:[h.jsx("p",{className:"text-sm font-bold text-slate-500 mb-2",children:M.competitorAnalysis}),h.jsx("p",{className:"text-2xl font-black text-slate-700",children:t.executiveSummary.criticalMetrics.competitionLevel})]}),h.jsxs("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200",children:[h.jsx("p",{className:"text-sm font-bold text-slate-500 mb-2",children:M.profitabilityAnalysis}),h.jsx("p",{className:"text-2xl font-black text-slate-700",children:t.executiveSummary.criticalMetrics.profitPotential})]}),h.jsxs("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200",children:[h.jsx("p",{className:"text-sm font-bold text-slate-500 mb-2",children:M.riskScore}),h.jsx("p",{className:"text-2xl font-black text-slate-700",children:t.executiveSummary.criticalMetrics.riskLevel})]})]})]}),h.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 rounded-[2rem] p-8 text-white shadow-lg",children:[h.jsx("h3",{className:"text-2xl font-black mb-6",children:M.investmentRequired}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-bold opacity-90 mb-2",children:M.initialInvestment}),h.jsxs("p",{className:"text-3xl font-black",children:[t.executiveSummary.investmentRequired.initial.toLocaleString()," ",M.sar]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-bold opacity-90 mb-2",children:M.monthlyInvestment}),h.jsxs("p",{className:"text-3xl font-black",children:[t.executiveSummary.investmentRequired.monthly.toLocaleString()," ",M.sar]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-bold opacity-90 mb-2",children:M.breakEven}),h.jsx("p",{className:"text-3xl font-black",children:t.executiveSummary.investmentRequired.breakEven})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[((je=t.opportunityFinder)==null?void 0:je.opportunities)&&t.opportunityFinder.opportunities.length>0&&h.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-[2rem] border-2 border-green-200 p-6 shadow-lg",children:[h.jsxs("h3",{className:"text-xl font-black text-green-700 mb-4 flex items-center gap-2",children:[h.jsx("span",{children:""}),P?" ":"Top Opportunities"]}),h.jsx("div",{className:"space-y-2",children:t.opportunityFinder.opportunities.slice(0,3).map((ft,At)=>h.jsxs("div",{className:"flex items-start gap-2 p-3 bg-white rounded-xl border border-green-100",children:[h.jsxs("span",{className:"text-green-600 font-bold",children:[At+1,"."]}),h.jsx("p",{className:"text-sm text-slate-700 font-medium",children:ft.opportunity})]},At))})]}),((ct=t.competitorIntelligence)==null?void 0:ct.marketGaps)&&t.competitorIntelligence.marketGaps.length>0&&h.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-[2rem] border-2 border-blue-200 p-6 shadow-lg",children:[h.jsxs("h3",{className:"text-xl font-black text-blue-700 mb-4 flex items-center gap-2",children:[h.jsx("span",{children:""}),P?" ":"Market Gaps"]}),h.jsx("div",{className:"space-y-2",children:t.competitorIntelligence.marketGaps.slice(0,3).map((ft,At)=>h.jsxs("div",{className:"flex items-start gap-2 p-3 bg-white rounded-xl border border-blue-100",children:[h.jsx("span",{className:"text-blue-600",children:""}),h.jsx("p",{className:"text-sm text-slate-700 font-medium",children:ft})]},At))})]})]}),t.growthScenarios&&h.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 rounded-[2rem] border-2 border-teal-200 p-6 shadow-lg",children:[h.jsxs("h3",{className:"text-xl font-black text-teal-700 mb-4 flex items-center gap-2",children:[h.jsx("span",{children:""}),P?"  (  )":"Growth Projections (Recommended Scenario)"]}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{var At,yr,io;const ft=t.growthScenarios[t.growthScenarios.recommendedScenario];return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-white rounded-xl p-4 text-center border border-teal-100",children:[h.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:P?" ":"Monthly Revenue"}),h.jsxs("p",{className:"text-xl font-black text-teal-700",children:[((At=ft==null?void 0:ft.monthlyRevenue)==null?void 0:At.toLocaleString())||0," ",M.sar]})]}),h.jsxs("div",{className:"bg-white rounded-xl p-4 text-center border border-teal-100",children:[h.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:P?" ":"Monthly Profit"}),h.jsxs("p",{className:"text-xl font-black text-green-600",children:[((yr=ft==null?void 0:ft.monthlyProfit)==null?void 0:yr.toLocaleString())||0," ",M.sar]})]}),h.jsxs("div",{className:"bg-white rounded-xl p-4 text-center border border-teal-100",children:[h.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:P?" ":"Expected Units"}),h.jsx("p",{className:"text-xl font-black text-slate-700",children:((io=ft==null?void 0:ft.costBreakdown)==null?void 0:io.unitsSold)||0})]}),h.jsxs("div",{className:"bg-white rounded-xl p-4 text-center border border-teal-100",children:[h.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:P?" ":"Growth Rate"}),h.jsxs("p",{className:"text-xl font-black text-teal-700",children:[(ft==null?void 0:ft.growthRate)||0,"% ",P?"/":"/mo"]})]})]})})()})]}),h.jsxs("div",{className:"bg-gradient-to-br from-slate-700 to-slate-800 rounded-[2rem] p-8 text-white shadow-lg",children:[h.jsx("h3",{className:"text-2xl font-black mb-4",children:M.strategicRecommendation}),h.jsx("p",{className:"text-lg font-medium leading-relaxed",children:t.executiveSummary.strategicRecommendation})]}),t.executiveSummary.nextSteps&&t.executiveSummary.nextSteps.length>0&&h.jsxs("div",{className:"bg-slate-50 rounded-[2rem] border-2 border-gray-200 p-8 shadow-lg",children:[h.jsx("h3",{className:"text-2xl font-black text-slate-700 mb-6",children:M.nextSteps}),h.jsx("div",{className:"space-y-3",children:t.executiveSummary.nextSteps.map((ft,At)=>h.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white rounded-xl border border-gray-200",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-600 text-white flex items-center justify-center font-black flex-shrink-0",children:At+1}),h.jsx("p",{className:"text-slate-700 font-medium mt-1",children:ft})]},At))})]})]})})};return h.jsxs("div",{className:"w-full space-y-8",children:[h.jsx("div",{className:"hidden print:block",style:{pageBreakAfter:"avoid"},children:h.jsxs("div",{style:{textAlign:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"3px solid #000"},children:[h.jsx("h1",{style:{fontSize:"24pt",fontWeight:"900",marginBottom:"10px",color:"#000"},children:P?"   -   ":"Tahleel Plus Report - Saudi Market Analysis"}),h.jsx("p",{style:{fontSize:"12pt",color:"#333",marginBottom:"5px"},children:P?`: ${t.itemName}`:`Product: ${t.itemName}`}),h.jsx("p",{style:{fontSize:"10pt",color:"#666"},children:P?` : ${new Date().toLocaleDateString("ar-SA")}`:`Report Date: ${new Date().toLocaleDateString("en-US")}`})]})}),h.jsxs("div",{className:"relative z-20 flex flex-wrap items-center justify-between gap-3 p-4 rounded-2xl border border-slate-200 shadow-lg bg-white/95 backdrop-blur no-print mb-6",children:[h.jsxs("div",{className:`flex items-center gap-3 ${P?"flex-row-reverse order-2":""}`,children:[h.jsxs("button",{onClick:ge,className:`px-6 py-3 bg-rose-600 hover:bg-rose-700 text-white font-black rounded-2xl transition-all shadow-lg hover:shadow-xl transform hover:scale-105 duration-200 flex items-center gap-2 uppercase tracking-widest ${P?"flex-row-reverse":""}`,title:P?" PDF":"Download PDF",children:[h.jsx(X0e,{className:"w-5 h-5"}),P?" PDF":"PDF"]}),h.jsxs("button",{onClick:ce,className:`px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-black rounded-2xl transition-all shadow-lg hover:shadow-xl transform hover:scale-105 duration-200 flex items-center gap-2 uppercase tracking-widest ${P?"flex-row-reverse":""}`,title:P?"  ":"Print Full Report",children:[h.jsx(nxe,{className:"w-5 h-5"}),P?"":"Print"]}),h.jsx("button",{onClick:xe,disabled:D,className:`px-6 py-3 font-black rounded-2xl transition-all shadow-lg hover:shadow-xl transform hover:scale-105 duration-200 flex items-center gap-2 uppercase tracking-widest ${D?"bg-yellow-500 hover:bg-yellow-600":c?"bg-green-600 hover:bg-green-700":"bg-emerald-600 hover:bg-emerald-700"} text-white ${P?"flex-row-reverse":""} ${D?"cursor-wait":""}`,title:P?"  ":"Save to Library",children:D?h.jsxs(h.Fragment,{children:[h.jsxs("svg",{className:"animate-spin w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),P?" ...":"Translating..."]}):c?h.jsxs(h.Fragment,{children:[h.jsx(us,{className:"w-5 h-5"}),P?" ":"Saved"]}):h.jsxs(h.Fragment,{children:[h.jsx(z0e,{className:"w-5 h-5"}),P?"  ":"Save to Library"]})})]}),h.jsxs("div",{className:`flex-1 min-w-[200px] ${P?"text-right order-1":""}`,children:[h.jsx("p",{className:"text-sm font-black text-slate-700",children:P?" ":"Print Reports"}),h.jsx("p",{className:"text-xs font-semibold text-slate-400",children:P?"      ":"Print full report or individual sections"})]})]}),h.jsx("div",{className:"mb-4 no-print",children:h.jsx("div",{className:"flex justify-center gap-1 md:gap-2 flex-wrap",children:[{id:"overview",label:P?" ":"Overview",bg:"bg-blue-600 hover:bg-blue-700"},{id:"demand",label:P?"":"Demand",bg:"bg-emerald-600 hover:bg-emerald-700"},{id:"competitors",label:P?"":"Competitors",bg:"bg-orange-600 hover:bg-orange-700"},{id:"profitability",label:P?"":"Profitability",bg:"bg-green-600 hover:bg-green-700"},{id:"decisions",label:P?"":"Decisions",bg:"bg-purple-600 hover:bg-purple-700"},{id:"opportunities",label:P?"":"Opportunities",bg:"bg-pink-600 hover:bg-pink-700"},{id:"buyerIntent",label:P?" ":"Buyer Intent",bg:"bg-violet-600 hover:bg-violet-700"},{id:"growth",label:P?"":"Growth",bg:"bg-teal-600 hover:bg-teal-700"},{id:"executive",label:P?"":"Summary",bg:"bg-amber-600 hover:bg-amber-700"}].map(H=>{const oe=s===H.id;return h.jsx("button",{onClick:()=>{a(H.id),window.scrollTo({top:0,behavior:"smooth"})},className:`whitespace-nowrap px-4 md:px-6 py-2.5 md:py-3 font-bold text-xs md:text-sm rounded-lg transition-all text-white ${H.bg} ${oe?"ring-1 ring-gray-300/50":"opacity-75"}`,children:H.label},H.id)})})}),h.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-[2rem] border-2 border-gray-200 p-4 md:p-8 shadow-lg print:border-0 print:p-0",children:(()=>{const H=["overview","demand","competitors","profitability","decisions","opportunities","buyerIntent","growth","executive"],oe=P?[" ","","","","",""," ","",""]:["Overview","Demand","Competitors","Profitability","Decisions","Opportunities","Buyer Intent","Growth","Summary"],ve=H.indexOf(s),ae=ve>0?ve-1:null,Xe=ve<H.length-1?ve+1:null,Be=rt=>{a(rt),window.scrollTo({top:0,behavior:"smooth"})},He=()=>h.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t-2 border-slate-200 no-print",children:[ae!==null?h.jsxs("button",{onClick:()=>Be(H[ae]),className:"flex items-center gap-2 px-5 py-3 bg-slate-600 hover:bg-slate-700 text-white rounded-xl transition-all text-sm font-bold",children:[h.jsx("span",{children:""}),h.jsxs("span",{children:[P?":":"Previous:"," ",oe[ae]]})]}):h.jsx("div",{}),h.jsxs("span",{className:"text-sm text-slate-500 font-bold bg-slate-100 px-4 py-2 rounded-lg",children:[ve+1," / ",H.length]}),Xe!==null?h.jsxs("button",{onClick:()=>Be(H[Xe]),className:"flex items-center gap-2 px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all text-sm font-bold",children:[h.jsxs("span",{children:[P?":":"Next:"," ",oe[Xe]]}),h.jsx("span",{children:""})]}):h.jsxs("div",{className:"flex items-center gap-2 px-5 py-3 bg-green-600 text-white rounded-xl text-sm font-bold",children:[" ",P?" !":"Analysis Complete!"]})]});return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:`tab-content-section ${s!=="overview"?"hidden print:block":""}`,"data-section":"overview",children:[ne(),s==="overview"&&h.jsx(He,{}),h.jsx("div",{className:"print:hidden"}),h.jsx("div",{className:"hidden print:block",style:{pageBreakAfter:"always"}})]}),h.jsxs("div",{className:`tab-content-section ${s!=="demand"?"hidden print:block":""}`,"data-section":"demand",children:[h.jsx("div",{className:"hidden print:block",style:{marginTop:"0"},children:h.jsx("h1",{style:{fontSize:"22pt",fontWeight:"900",marginBottom:"20px",paddingBottom:"10px",borderBottom:"3px solid #000",color:"#000"},children:P?"  ":" Demand Analysis"})}),de(),s==="demand"&&h.jsx(He,{}),h.jsx("div",{className:"hidden print:block",style:{pageBreakAfter:"always"}})]}),h.jsxs("div",{className:`tab-content-section ${s!=="competitors"?"hidden print:block":""}`,"data-section":"competitors",children:[h.jsx("div",{className:"hidden print:block",style:{marginTop:"0"},children:h.jsx("h1",{style:{fontSize:"22pt",fontWeight:"900",marginBottom:"20px",paddingBottom:"10px",borderBottom:"3px solid #000",color:"#000"},children:P?"  ":" Competitor Analysis"})}),Y(),s==="competitors"&&h.jsx(He,{}),h.jsx("div",{className:"hidden print:block",style:{pageBreakAfter:"always"}})]}),h.jsxs("div",{className:`tab-content-section ${s!=="profitability"?"hidden print:block":""}`,"data-section":"profitability",children:[h.jsx("div",{className:"hidden print:block",style:{marginTop:"0"},children:h.jsx("h1",{style:{fontSize:"22pt",fontWeight:"900",marginBottom:"20px",paddingBottom:"10px",borderBottom:"3px solid #000",color:"#000"},children:P?"  ":" Profitability Analysis"})}),ie(),s==="profitability"&&h.jsx(He,{}),h.jsx("div",{className:"hidden print:block",style:{pageBreakAfter:"always"}})]}),h.jsxs("div",{className:`tab-content-section ${s!=="decisions"?"hidden print:block":""}`,"data-section":"decisions",children:[h.jsx("div",{className:"hidden print:block",style:{marginTop:"0"},children:h.jsx("h1",{style:{fontSize:"22pt",fontWeight:"900",marginBottom:"20px",paddingBottom:"10px",borderBottom:"3px solid #000",color:"#000"},children:P?"  ":" Decision Metrics"})}),fe(),s==="decisions"&&h.jsx(He,{}),h.jsx("div",{className:"hidden print:block",style:{pageBreakAfter:"always"}})]}),h.jsxs("div",{className:`tab-content-section ${s!=="opportunities"?"hidden print:block":""}`,"data-section":"opportunities",children:[h.jsx("div",{className:"hidden print:block",style:{marginTop:"0"},children:h.jsx("h1",{style:{fontSize:"22pt",fontWeight:"900",marginBottom:"20px",paddingBottom:"10px",borderBottom:"3px solid #000",color:"#000"},children:P?"  ":" Growth Opportunities"})}),_e(),s==="opportunities"&&h.jsx(He,{})]}),h.jsxs("div",{className:`tab-content-section ${s!=="buyerIntent"?"hidden print:block":""}`,"data-section":"buyerIntent",children:[h.jsx("div",{className:"hidden print:block",style:{marginTop:"0"},children:h.jsx("h1",{style:{fontSize:"22pt",fontWeight:"900",marginBottom:"20px",paddingBottom:"10px",borderBottom:"3px solid #000",color:"#000"},children:P?"   ":" Buyer Intent Analysis"})}),$e(),s==="buyerIntent"&&h.jsx(He,{}),h.jsx("div",{className:"hidden print:block",style:{pageBreakAfter:"always"}})]}),h.jsxs("div",{className:`tab-content-section ${s!=="growth"?"hidden print:block":""}`,"data-section":"growth",children:[h.jsx("div",{className:"hidden print:block",style:{marginTop:"0"},children:h.jsx("h1",{style:{fontSize:"22pt",fontWeight:"900",marginBottom:"20px",paddingBottom:"10px",borderBottom:"3px solid #000",color:"#000"},children:P?"  ":" Growth Scenarios"})}),Ge(),s==="growth"&&h.jsx(He,{}),h.jsx("div",{className:"hidden print:block",style:{pageBreakAfter:"always"}})]}),h.jsxs("div",{className:`tab-content-section ${s!=="executive"?"hidden print:block":""}`,"data-section":"executive",children:[h.jsx("div",{className:"hidden print:block",style:{marginTop:"0"},children:h.jsx("h1",{style:{fontSize:"22pt",fontWeight:"900",marginBottom:"20px",paddingBottom:"10px",borderBottom:"3px solid #000",color:"#000"},children:P?"  ":" Executive Summary"})}),Ue(),s==="executive"&&h.jsx(He,{})]})]})})()}),f&&h.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:`bg-white rounded-[2rem] shadow-2xl max-w-md w-full border-2 border-blue-200 animate-in fade-in slide-in-from-bottom-4 duration-300 ${P?"text-right":""}`,children:[h.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 rounded-t-[2rem] p-6 text-white",children:[h.jsxs("h3",{className:`text-2xl font-black flex items-center gap-3 ${P?"flex-row-reverse":""}`,children:[h.jsx(CD,{className:"w-6 h-6 flex-shrink-0"}),P?" ":"Publish Analysis"]}),h.jsx("p",{className:"text-sm opacity-90 mt-2",children:P?"       ":"Share this analysis with everyone in the library"})]}),h.jsxs("div",{className:"p-6 space-y-4",children:[h.jsxs("div",{className:`bg-blue-50 border-2 border-blue-200 rounded-xl p-4 ${P?"text-right":""}`,children:[h.jsx("p",{className:"text-sm font-bold text-blue-700 mb-2",children:P?"":"Region"}),h.jsxs("p",{className:"text-lg font-black text-slate-900",children:[" ",((ze=Pu.find(H=>H.code===o))==null?void 0:ze[P?"nameAr":"nameEn"])||o]})]}),h.jsxs("div",{className:`bg-slate-50 border-2 border-slate-200 rounded-xl p-4 ${P?"text-right":""}`,children:[h.jsx("p",{className:"text-sm font-bold text-slate-700 mb-2",children:P?"":"Product"}),h.jsx("p",{className:"text-lg font-black text-slate-900 truncate",children:i})]}),h.jsxs("div",{className:`border-2 border-red-300 bg-red-50 rounded-xl p-4 ${P?"text-right":""}`,children:[h.jsx("label",{className:"text-sm font-bold text-red-700 mb-2 flex items-center gap-2",children:P?h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"*"}),h.jsx("span",{children:"  "})]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"Select Category *"}),h.jsx("span",{children:"*"})]})}),j?h.jsx("div",{className:"text-slate-600 font-bold text-sm",children:P?" ...":"Loading..."}):_.length>0?h.jsxs("select",{value:E,onChange:H=>S(H.target.value),className:`w-full px-4 py-2.5 border-2 border-red-300 rounded-lg font-bold bg-white text-slate-900 focus:outline-none focus:border-red-500 focus:ring-2 focus:ring-red-200 ${P?"text-right":""}`,children:[h.jsx("option",{value:"",children:P?"--   --":"-- Select Category --"}),_.map(H=>h.jsx("option",{value:H.id,children:P?H.nameAr:H.nameEn},H.id))]}):h.jsx("div",{className:"text-slate-600 font-bold text-sm",children:P?"   ":"No categories available"})]}),h.jsx("div",{className:`bg-amber-50 border-2 border-amber-200 rounded-xl p-4 ${P?"text-right":""}`,children:h.jsx("p",{className:"text-sm text-amber-700 font-medium",children:P?"          ":" This analysis will be visible to all users in the public library"})})]}),h.jsxs("div",{className:`border-t-2 border-slate-200 p-6 flex gap-3 ${P?"flex-row-reverse":""}`,children:[h.jsx("button",{onClick:()=>{p(!1),S("")},disabled:v,className:"flex-1 px-4 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-bold rounded-xl transition-all disabled:opacity-50",children:P?"   ":"Save Only to My Library"}),h.jsxs("button",{onClick:le,disabled:v||!E,className:`flex-1 px-4 py-3 text-white font-bold rounded-xl transition-all flex items-center justify-center gap-2 ${P?"flex-row-reverse":""} ${!E||v?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,title:E?"":P?"  ":"Select category first",children:[h.jsx(CD,{className:`w-4 h-4 ${v?"animate-spin":""}`}),v?P?" ...":"Publishing...":P?" ":"Publish Now"]})]})]})})]})},fxe={SA:"SA",AE:"UAE",KW:"KW",QA:"QA",BH:"BH",OM:"OM",YE:"YE",EG:"EG",JO:"JO",LB:"LB",SY:"SY",IQ:"IQ",PS:"PS",IL:"IL",TR:"TR",IR:"IR",MA:"MA",TN:"TN",DZ:"DZ",LY:"LY",SD:"SD",GB:"GB",US:"US",CA:"CA",AU:"AU",DE:"DE",FR:"FR"},hxe=async()=>{var t;try{const e=await fetch("https://ipapi.co/json/",{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)return console.warn("Geolocation API error:",e.statusText),null;const n=await e.json(),r=(t=n.country_code)==null?void 0:t.toUpperCase();if(!r)return console.warn("Country code not found in geolocation response"),null;const i=fxe[r]||r;return console.log("Detected location:",{country:n.country_name,countryCode:r,mappedRegion:i}),i}catch(e){return console.warn("Failed to detect geolocation:",e),null}},pxe=({lang:t})=>{const[e,n]=I.useState(!0),[r,i]=I.useState(""),[o,s]=I.useState(""),[a,c]=I.useState("SA"),[u,f]=I.useState(null),[p,v]=I.useState(null),[w,E]=I.useState(!1),[S,_]=I.useState(!0),N=qu[t],j=t==="ar";I.useEffect(()=>{(async()=>{try{const k=await hxe();k&&c(k)}catch{console.warn("Location detection failed, using default region")}finally{_(!1)}})()},[]);const F=$=>{switch($){case"auth/email-already-in-use":return N.emailInUse;case"auth/wrong-password":case"auth/user-not-found":case"auth/invalid-credential":return N.wrongPassword;default:return $.replace("auth/","").replace(/-/g," ")}},q=async $=>{$.preventDefault(),E(!0),f(null),v(null);try{if(e)await Gz(Pn,r,o);else{const k=await qz(Pn,r,o);await $N(k.user.uid,r,"SA")}}catch(k){console.error("Auth Error:",k.code),f(F(k.code))}finally{E(!1)}},V=async()=>{var $,k;E(!0),f(null),v(null);try{const D=new hs,O=await v7(Pn,D);(($=O.user.metadata)==null?void 0:$.creationTime)===((k=O.user.metadata)==null?void 0:k.lastSignInTime)&&await $N(O.user.uid,O.user.email||"","SA")}catch(D){console.error("Google Sign-In Error:",D.code),f(F(D.code))}finally{E(!1)}};return h.jsxs("div",{className:"max-w-md mx-auto bg-white p-8 rounded-3xl border border-slate-200 shadow-2xl animate-in zoom-in duration-500",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-xl shadow-blue-200 transition-transform hover:rotate-3",children:h.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),h.jsx("h2",{className:"text-2xl font-black text-slate-900",children:e?N.login:N.signup}),h.jsx("p",{className:"text-slate-500 mt-2 text-sm font-medium",children:N.welcome})]}),h.jsxs("form",{onSubmit:q,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase mb-2 tracking-widest",children:N.email}),h.jsx("input",{type:"email",required:!0,value:r,onChange:$=>i($.target.value),className:`w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-50 transition-all ${j?"text-right":"text-left"} font-bold`,placeholder:"example@mail.com"})]}),"        ",!e&&h.jsx("div",{children:h.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase mb-2 tracking-widest",children:N.password})}),h.jsx("input",{type:"password",required:!0,value:o,onChange:$=>s($.target.value),className:`w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-50 transition-all ${j?"text-right":"text-left"} font-bold`,placeholder:""}),u&&h.jsx("div",{className:"p-4 bg-rose-50 border border-rose-100 rounded-xl text-rose-600 text-xs font-black animate-in slide-in-from-top-2",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),u]})}),p&&h.jsx("div",{className:"p-4 bg-emerald-50 border border-emerald-100 rounded-xl text-emerald-600 text-xs font-black animate-in slide-in-from-top-2",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),p]})}),h.jsx("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-4 rounded-xl font-black text-lg hover:bg-blue-700 active:scale-[0.98] transition-all shadow-xl shadow-blue-200 disabled:opacity-50 mt-4",children:w?h.jsx("div",{className:"w-6 h-6 border-4 border-white/30 border-t-white rounded-full animate-spin mx-auto"}):e?N.login:N.signup}),h.jsxs("div",{className:"relative mt-6 mb-6",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("div",{className:"w-full border-t border-slate-200"})}),h.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:h.jsx("span",{className:"px-2 bg-white text-slate-400 font-black",children:j?"":"OR"})})]}),h.jsxs("button",{type:"button",onClick:V,disabled:w,className:"w-full bg-white text-slate-700 py-4 rounded-xl font-black text-lg hover:bg-slate-50 active:scale-[0.98] transition-all shadow-lg border border-slate-200 disabled:opacity-50 flex items-center justify-center gap-3",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"#EA4335",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"#4285F4",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),j?"   ":"Sign in with Google"]})]}),h.jsx("div",{className:"mt-8 text-center border-t border-slate-100 pt-6",children:h.jsx("button",{onClick:()=>{n(!e),f(null),v(null)},className:"text-sm font-black text-slate-500 hover:text-blue-600 transition-colors",children:e?N.dontHaveAccount:N.alreadyHaveAccount})})]})},mxe=({lang:t,onSelect:e})=>{const[n,r]=I.useState([]),[i,o]=I.useState(!0),s=qu[t],a=t==="ar";I.useEffect(()=>{(async()=>{const f=await Av();r(f),o(!1)})()},[]);const c=u=>{u.id==="FREE"?e("FREE"):u.stripeUrl?window.location.href=u.stripeUrl:alert(a?"        ":"Payment link unavailable, please contact support")};return i?h.jsx("div",{className:"flex flex-col items-center justify-center py-20",children:h.jsx("div",{className:"w-10 h-10 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin"})}):h.jsxs("div",{className:"py-12",children:[h.jsxs("div",{className:"text-center mb-16 animate-in fade-in duration-700",children:[h.jsx("h2",{className:"text-4xl font-black text-slate-900 mb-4",children:s.pricingTitle}),h.jsx("p",{className:"text-slate-500 max-w-xl mx-auto",children:s.pricingSubtitle})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:n.map(u=>h.jsxs("div",{className:`relative p-8 bg-white rounded-[2.5rem] border ${u.isPopular?"border-blue-500 shadow-2xl shadow-blue-200 ring-4 ring-blue-50 scale-105 z-10":"border-slate-200"} transition-all hover:border-blue-400`,children:[u.isPopular&&h.jsx("span",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-xs font-black uppercase tracking-widest",children:a?" ":"Popular"}),h.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:a?u.nameAr:u.nameEn}),h.jsx("div",{className:"flex items-baseline gap-2 mb-2",children:u.discountedPrice?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-4xl font-black text-emerald-600",children:u.discountedPrice}),h.jsx("span",{className:"text-slate-400 font-bold text-sm",children:a?".":"SAR"}),h.jsx("span",{className:"text-lg font-black text-slate-400 line-through",children:u.price})]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-4xl font-black text-slate-900",children:u.price}),h.jsx("span",{className:"text-slate-400 font-bold text-sm",children:a?".":"SAR"})]})}),h.jsx("p",{className:"text-sm text-slate-500 font-bold mb-8",children:a?`${u.durationMonths||1} `:`${u.durationMonths||1} month${(u.durationMonths||1)>1?"s":""}`}),h.jsx("ul",{className:"space-y-4 mb-10",children:(a?u.featuresAr:u.featuresEn).map((f,p)=>h.jsxs("li",{className:"flex items-center gap-3 text-slate-600 font-medium text-sm",children:[h.jsx("svg",{className:"w-5 h-5 text-emerald-500 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),f]},p))}),h.jsx("button",{onClick:()=>c(u),className:`w-full py-4 rounded-2xl text-white font-black transition-all active:scale-95 shadow-lg ${u.id==="ELITE"?"bg-slate-900 hover:bg-slate-800":"bg-blue-600 hover:bg-blue-700"}`,children:u.id==="FREE"?a?" ":"Start Free":s.subscribeNow})]},u.id))})]})},gxe=({lang:t})=>{var Ci,Ka,ei,Or;const[e,n]=I.useState("USERS"),[r,i]=I.useState("AR"),[o,s]=I.useState([]),[a,c]=I.useState([]),[u,f]=I.useState([]),[p,v]=I.useState([]),[w,E]=I.useState(""),[S,_]=I.useState(""),[N,j]=I.useState("newest"),[F,q]=I.useState(null),[V,$]=I.useState(""),[k,D]=I.useState([]),[O,z]=I.useState({totalCategories:0,totalAnalyses:0,totalViews:0}),[U,M]=I.useState(!1),[P,me]=I.useState(null),[ce,ge]=I.useState({nameAr:"",nameEn:"",descriptionAr:"",descriptionEn:""}),[xe,le]=I.useState(!1),[ne,de]=I.useState(null),[Y,ie]=I.useState({categoryId:"",notes:""}),[fe,_e]=I.useState({geminiApiKey:"",googleSearchApiKey:"",googleSearchId:"",siteNameAr:" ",siteNameEn:"Tahleel Plus",siteLogo:"",siteFavicon:"",siteDescriptionAr:"",siteDescriptionEn:"",siteKeywordsAr:"",siteKeywordsEn:""}),[$e,Ge]=I.useState(null),[Ue,ze]=I.useState(!1),[H,oe]=I.useState(!0),[ve,ae]=I.useState(null),[Xe,Be]=I.useState(""),[He,rt]=I.useState(!1),[Ye,Ne]=I.useState(!1),[be,De]=I.useState(null),[Je,dt]=I.useState({isOpen:!1,type:"ALERT",title:"",message:"",color:"blue"}),G=t==="ar",je=(K,pe,Ae="blue",ke)=>{dt({isOpen:!0,type:ke?"CONFIRM":"ALERT",title:K,message:pe,onConfirm:ke,color:Ae})},ct=()=>dt(K=>({...K,isOpen:!1})),ft=async K=>{try{const pe=K||fe,Ae=!!pe.geminiApiKey&&pe.geminiApiKey.length>10;let ke=!1;window.aistudio&&(ke=await window.aistudio.hasSelectedApiKey()),Ge(Ae||ke)}catch(pe){console.error("Key Status Check Error:",pe)}},At=async(K=!1)=>{K||oe(!0),ae(null);try{const[pe,Ae,ke,Qt,Dn,ti]=await Promise.all([Nte(),Av(),V4(),Ca(),xu(),vm()]);s(pe),c(Ae),f(Qt),v(Dn),z(ti),ke?(_e(fc=>({...fc,...ke})),await ft(ke)):await ft()}catch(pe){ae(pe.message)}finally{K||oe(!1)}};I.useEffect(()=>{At()},[]);const yr=async(K,pe,Ae)=>{De(K);try{await kte(K,pe,Ae,!1),await At(!0)}catch(ke){je(G?"":"Error",ke.message,"rose")}finally{De(null)}},io=K=>new Promise((pe,Ae)=>{const ke=new FileReader;ke.onload=()=>pe(ke.result),ke.onerror=Ae,ke.readAsDataURL(K)}),Ho=async K=>{var Ae;const pe=(Ae=K.target.files)==null?void 0:Ae[0];if(pe){if(!pe.type.startsWith("image/")){je(G?"":"Error",G?"    ":"Please select an image file only","rose");return}if(pe.size>500*1024){je(G?"":"Error",G?"   .   500 ":"File size too large. Maximum 500KB","rose");return}try{const ke=await io(pe);_e({...fe,siteLogo:ke}),je(G?"":"Success",G?"   ":"Logo uploaded successfully","emerald")}catch{je(G?"":"Error",G?"  ":"Failed to upload file","rose")}}},oo=async K=>{var Ae;const pe=(Ae=K.target.files)==null?void 0:Ae[0];if(pe){if(!pe.type.startsWith("image/")){je(G?"":"Error",G?"    ":"Please select an image file only","rose");return}if(pe.size>200*1024){je(G?"":"Error",G?"   .   200 ":"File size too large. Maximum 200KB","rose");return}try{const ke=await io(pe);_e({...fe,siteFavicon:ke}),je(G?"":"Success",G?"   ":"Favicon uploaded successfully","emerald")}catch{je(G?"":"Error",G?"  ":"Failed to upload file","rose")}}},lc=async K=>{je(G?" ":"Reset Searches",G?"      ":"Reset search count for this user?","blue",async()=>{De(K);try{await Rte(K),await At(!0),ct()}finally{De(null)}})},so=async K=>{je(G?" ":"Delete User",G?" :    .      .":" Warning: Delete user permanently. This cannot be undone.","rose",async()=>{De(K);try{await B4(K),await At(!0),ct()}finally{De(null)}})},Mn=(K,pe,Ae)=>{const ke=[...a];ke[K]={...ke[K],[pe]:Ae},c(ke)},qs=(K,pe,Ae,ke)=>{const Qt=[...a],Dn=pe==="AR"?"featuresAr":"featuresEn",ti=[...Qt[K][Dn]];ti[Ae]=ke,Qt[K]={...Qt[K],[Dn]:ti},c(Qt)},xr=(K,pe)=>{const Ae=[...a],ke=pe==="AR"?"featuresAr":"featuresEn";Ae[K][ke]=[...Ae[K][ke],""],c(Ae)},Wo=(K,pe,Ae)=>{const ke=[...a],Qt=pe==="AR"?"featuresAr":"featuresEn";ke[K][Qt]=ke[K][Qt].filter((Dn,ti)=>ti!==Ae),c(ke)},ao=()=>{const K={id:`PLAN_${Date.now()}`,nameAr:" ",nameEn:"New Plan",price:99,durationMonths:1,stripeUrl:"",searchLimit:10,featuresAr:[G?" ":"New feature"],featuresEn:["New feature"],isPopular:!1};c([...a,K])},Gs=K=>{je(G?" ":"Delete Plan",G?"           .":"Are you sure you want to delete this plan? This will affect current subscribers.","rose",()=>{const pe=a.filter((Ae,ke)=>ke!==K);c(pe),ct()})},Ti=async()=>{je(G?" ":"Save Plans",G?"       ":"Do you want to save the new changes to all plans?","emerald",async()=>{rt(!0);try{await Dte(a),ct(),je(G?" ":"Saved",G?"   ":"Plans saved successfully","emerald")}catch{je(G?"":"Error",G?"  ":"Permission Error","rose")}finally{rt(!1)}})},Dr=async()=>{Ne(!0);try{await Ate(fe),await ft(fe),je(G?" ":"Updated",G?"      ":"Key saved and Search Engine activated successfully","emerald")}catch{je(G?"":"Error","Error saving settings","rose")}finally{Ne(!1)}},Bt=async()=>{window.aistudio&&(await window.aistudio.openSelectKey(),await ft())},Hs=K=>`${window.location.origin}/?stripe_success=true&plan_id=${K}`,Ai=K=>{K?(me(K),ge({nameAr:K.nameAr,nameEn:K.nameEn,descriptionAr:K.descriptionAr||"",descriptionEn:K.descriptionEn||""})):(me(null),ge({nameAr:"",nameEn:"",descriptionAr:"",descriptionEn:""})),M(!0)},Zr=()=>{M(!1),me(null),ge({nameAr:"",nameEn:"",descriptionAr:"",descriptionEn:""})},cc=async()=>{if(!ce.nameAr.trim()||!ce.nameEn.trim()){je(G?"":"Error",G?"     ":"Category name is required in both languages","rose");return}try{const K=Pn.currentUser;if(!K){je(G?"":"Error",G?"  ":"Must be logged in","rose");return}P&&P.id?await z4(P.id,ce.nameAr,ce.nameEn,ce.descriptionAr,ce.descriptionEn):await lS(ce.nameAr,ce.nameEn,ce.descriptionAr,ce.descriptionEn,K.uid);const pe=await Ca();f(pe),Zr(),je(G?"":"Success",P?G?"   ":"Category updated successfully":G?"   ":"Category created successfully","emerald")}catch(K){je(G?"":"Error",K.message,"rose")}},uc=K=>{if(u.length===0){je(G?"":"Warning",G?"   ":"Create a category first","rose");return}de(K),ie({categoryId:"",notes:""}),le(!0)},br=()=>{le(!1),de(null),ie({categoryId:"",notes:""})},dc=async()=>{var K;if(!Y.categoryId){je(G?"":"Error",G?"  ":"Please select a category","rose");return}if(ne)try{const pe=Pn.currentUser;if(!pe){je(G?"":"Error",G?"  ":"Must be logged in","rose");return}await G4(Y.categoryId,ne.data.itemName,ne.query,ne.data,pe.uid,pe.email||"",pe.displayName||((K=pe.email)==null?void 0:K.split("@")[0])||"Admin",Y.notes);const Ae=await xu();v(Ae);const ke=await vm();z(ke),br(),je(G?"":"Success",G?"    ":"Published to analysis library","emerald")}catch(pe){je(G?"":"Error",pe.message,"rose")}},Ko=K=>{navigator.clipboard.writeText(K),je(G?" ":"Copied",G?"  !    Success URL  Stripe":"URL copied! Paste it in the Success URL field in Stripe","blue")};if(H)return h.jsxs("div",{className:"flex flex-col items-center justify-center py-40",children:[h.jsx("div",{className:"w-12 h-12 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin mb-4"}),h.jsx("p",{className:"font-bold text-slate-400",children:"Loading Management Engine..."})]});const lo=o.filter(K=>K.email.toLowerCase().includes(Xe.toLowerCase()));return h.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700 space-y-8 pb-20",children:[Je.isOpen&&h.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-6 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:h.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] overflow-hidden shadow-2xl border border-slate-100 animate-in zoom-in duration-300",children:[h.jsxs("div",{className:"p-10 text-center",children:[h.jsx("div",{className:`w-20 h-20 mx-auto mb-6 rounded-3xl flex items-center justify-center shadow-lg
                  ${Je.color==="blue"?"bg-blue-50 text-blue-600":""}
                  ${Je.color==="rose"?"bg-rose-50 text-rose-600":""}
                  ${Je.color==="emerald"?"bg-emerald-50 text-emerald-600":""}
                `,children:fe.siteLogo?h.jsx("img",{src:fe.siteLogo,alt:t==="ar"?" ":"Site Logo",className:"w-10 h-10 object-contain",loading:"lazy"}):h.jsx("svg",{className:"w-10 h-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-label":t==="ar"?" ":"Info Icon",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),h.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-3",children:Je.title}),h.jsx("p",{className:"text-slate-500 font-medium leading-relaxed",children:Je.message})]}),h.jsx("div",{className:"flex border-t border-slate-50",children:Je.type==="CONFIRM"?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:ct,className:"flex-1 px-8 py-6 text-sm font-black text-slate-400 hover:bg-slate-50 transition-colors",children:G?"":"Cancel"}),h.jsx("button",{onClick:Je.onConfirm,className:`flex-1 px-8 py-6 text-sm font-black text-white transition-all ${Je.color==="blue"?"bg-blue-600 hover:bg-blue-700":""} ${Je.color==="rose"?"bg-rose-600 hover:bg-rose-700":""} ${Je.color==="emerald"?"bg-emerald-600 hover:bg-emerald-700":""}`,children:G?"":"Confirm"})]}):h.jsx("button",{onClick:ct,className:"w-full px-8 py-6 text-sm font-black text-blue-600 hover:bg-blue-50 transition-colors",children:G?"":"Okay"})})]})}),h.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:h.jsxs("div",{className:"flex bg-slate-100 p-1.5 rounded-2xl border border-slate-200 overflow-x-auto max-w-full",children:[h.jsx("button",{onClick:()=>n("USERS"),className:`px-6 py-3 rounded-xl text-sm font-black transition-all shrink-0 ${e==="USERS"?"bg-white text-blue-600 shadow-lg":"text-slate-500 hover:text-slate-700"}`,children:G?"":"Users"}),h.jsx("button",{onClick:()=>n("PLANS"),className:`px-6 py-3 rounded-xl text-sm font-black transition-all shrink-0 ${e==="PLANS"?"bg-white text-blue-600 shadow-lg":"text-slate-500 hover:text-slate-700"}`,children:G?"":"Plans"}),h.jsx("button",{onClick:()=>n("LIBRARY_CATEGORIES"),className:`px-6 py-3 rounded-xl text-sm font-black transition-all shrink-0 ${e==="LIBRARY_CATEGORIES"?"bg-white text-blue-600 shadow-lg":"text-slate-500 hover:text-slate-700"}`,children:G?"  ":"Library Categories"}),h.jsx("button",{onClick:()=>n("PUBLIC_LIBRARY"),className:`px-6 py-3 rounded-xl text-sm font-black transition-all shrink-0 ${e==="PUBLIC_LIBRARY"?"bg-white text-blue-600 shadow-lg":"text-slate-500 hover:text-slate-700"}`,children:G?" ":"Analysis Library"}),h.jsx("button",{onClick:()=>n("SITE_SETTINGS"),className:`px-6 py-3 rounded-xl text-sm font-black transition-all shrink-0 ${e==="SITE_SETTINGS"?"bg-white text-blue-600 shadow-lg":"text-slate-500 hover:text-slate-700"}`,children:G?" ":"Site Info"}),h.jsx("button",{onClick:()=>n("SYSTEM"),className:`px-6 py-3 rounded-xl text-sm font-black transition-all shrink-0 ${e==="SYSTEM"?"bg-white text-blue-600 shadow-lg":"text-slate-500 hover:text-slate-700"}`,children:G?" ":"System & API"})]})}),e==="USERS"&&h.jsx("div",{className:"bg-white rounded-[2.5rem] border border-slate-200 shadow-xl overflow-hidden",children:h.jsxs("table",{className:"w-full text-right",dir:G?"rtl":"ltr",children:[h.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:G?"":"USER"}),h.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:G?" ":"GRANT PLAN"}),h.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:G?" ":"ACCOUNT STATUS"}),h.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:G?"":"ACTIONS"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-50",children:lo.map(K=>{var pe,Ae;return h.jsxs("tr",{className:`hover:bg-blue-50/20 transition-colors ${be===K.uid?"opacity-50 pointer-events-none":""}`,children:[h.jsx("td",{className:"px-8 py-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-10 h-10 bg-slate-900 rounded-xl flex items-center justify-center text-white font-black text-sm group-hover:bg-blue-600 transition-colors",children:K.email[0].toUpperCase()}),h.jsxs("div",{className:"flex flex-col text-right",children:[h.jsx("span",{className:"font-bold text-slate-900",children:K.email}),h.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[h.jsx("span",{className:"bg-blue-50 text-blue-600 text-[10px] font-black px-2 py-0.5 rounded border border-blue-100 uppercase",children:a.find(ke=>ke.id===K.plan)?G?(pe=a.find(ke=>ke.id===K.plan))==null?void 0:pe.nameAr:(Ae=a.find(ke=>ke.id===K.plan))==null?void 0:Ae.nameEn:K.plan}),h.jsxs("span",{className:"text-[10px] text-slate-400 font-bold",children:[K.searchCount," ",G?"":"Searches"]})]})]})]})}),h.jsx("td",{className:"px-8 py-6 text-center",children:h.jsxs("select",{value:K.plan,onChange:ke=>yr(K.uid,ke.target.value,K.status),className:"bg-white border border-slate-200 rounded-xl text-xs font-bold px-3 py-2 outline-none focus:border-blue-500 shadow-sm",children:[h.jsx("option",{value:"FREE",children:"FREE"}),a.map(ke=>h.jsx("option",{value:ke.id,children:G?ke.nameAr:ke.nameEn},ke.id)),h.jsx("option",{value:"ELITE",children:"ELITE"})]})}),h.jsx("td",{className:"px-8 py-6 text-center",children:h.jsx("button",{onClick:()=>yr(K.uid,K.plan,K.status==="ACTIVE"?"BANNED":"ACTIVE"),className:`text-[10px] font-black px-4 py-2 rounded-xl border transition-all ${K.status==="ACTIVE"?"bg-emerald-50 text-emerald-600 border-emerald-100 hover:bg-rose-50 hover:text-rose-600":"bg-rose-50 text-rose-600 border-rose-100 hover:bg-emerald-50 hover:text-emerald-600"}`,children:K.status==="ACTIVE"?G?" ":"Suspend":G?" ":"Activate"})}),h.jsx("td",{className:"px-8 py-6",children:h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("button",{onClick:()=>lc(K.uid),className:"p-2 bg-slate-100 text-slate-500 rounded-xl hover:bg-blue-600 hover:text-white transition-all",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357-2H15"})})}),h.jsx("button",{onClick:()=>so(K.uid),className:"p-2 bg-rose-50 text-rose-500 rounded-xl hover:bg-rose-600 hover:text-white transition-all",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},K.uid)})})]})}),e==="PLANS"&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm",children:[h.jsx("h2",{className:"text-xl font-black",children:G?"  ":"Payment Plans Management"}),h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("button",{onClick:ao,className:"bg-emerald-50 text-emerald-600 px-6 py-3 rounded-2xl font-black border border-emerald-100 hover:bg-emerald-600 hover:text-white transition-all",children:["+ ",G?" ":"Add Plan"]}),h.jsx("button",{onClick:Ti,className:"bg-blue-600 text-white px-8 py-3 rounded-2xl font-black hover:bg-blue-700 transition-all shadow-xl",children:G?" ":"Save Changes"})]})]}),h.jsx("div",{className:"bg-white rounded-[2rem] border border-slate-200 shadow-sm overflow-hidden",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-widest",children:G?"ID ":"Plan ID"}),h.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-widest",children:G?"":"Name"}),h.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-widest",children:G?"":"Price"}),h.jsx("th",{className:"px-6 py-4 text-center text-xs font-black text-slate-600 uppercase tracking-widest",children:G?"":"Duration"}),h.jsx("th",{className:"px-6 py-4 text-center text-xs font-black text-slate-600 uppercase tracking-widest",children:G?"":"Searches"}),h.jsx("th",{className:"px-6 py-4 text-center text-xs font-black text-slate-600 uppercase tracking-widest",children:G?"":"Actions"})]})}),h.jsx("tbody",{children:a.map((K,pe)=>h.jsxs(Vi.Fragment,{children:[h.jsxs("tr",{className:`${pe%2===0?"bg-white":"bg-slate-50"} ${F===pe?"border-b-0":"border-b border-slate-100"}`,children:[h.jsx("td",{className:"px-6 py-4",children:h.jsx("input",{type:"text",value:K.id,onChange:Ae=>Mn(pe,"id",Ae.target.value),className:"text-xs font-black text-blue-600 bg-blue-50 border border-blue-100 rounded-lg px-3 py-1.5 w-full outline-none focus:border-blue-400"})}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"space-y-1",children:[h.jsx("input",{type:"text",value:K.nameAr,onChange:Ae=>Mn(pe,"nameAr",Ae.target.value),className:"w-full px-3 py-1.5 bg-slate-50 border border-slate-100 rounded-lg text-xs font-bold outline-none focus:border-blue-400",placeholder:G?" ":"Arabic Name"}),h.jsx("input",{type:"text",value:K.nameEn,onChange:Ae=>Mn(pe,"nameEn",Ae.target.value),className:"w-full px-3 py-1.5 bg-slate-50 border border-slate-100 rounded-lg text-xs font-bold outline-none focus:border-blue-400",placeholder:"English Name"})]})}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"space-y-1",children:[h.jsx("input",{type:"number",value:K.price,onChange:Ae=>Mn(pe,"price",Number(Ae.target.value)),className:"w-24 px-3 py-1.5 bg-slate-50 border border-slate-100 rounded-lg text-xs font-black outline-none focus:border-blue-400"}),K.discountedPrice&&h.jsx("input",{type:"number",value:K.discountedPrice,onChange:Ae=>Mn(pe,"discountedPrice",Ae.target.value?Number(Ae.target.value):void 0),className:"w-24 px-3 py-1.5 bg-emerald-50 border border-emerald-100 rounded-lg text-xs font-black outline-none focus:border-emerald-400"})]})}),h.jsx("td",{className:"px-6 py-4 text-center",children:h.jsx("input",{type:"number",value:K.durationMonths||1,onChange:Ae=>Mn(pe,"durationMonths",Number(Ae.target.value)),className:"w-16 px-3 py-1.5 bg-slate-50 border border-slate-100 rounded-lg text-xs font-black outline-none focus:border-blue-400 text-center",min:"1"})}),h.jsx("td",{className:"px-6 py-4 text-center",children:h.jsx("input",{type:"number",value:K.searchLimit,onChange:Ae=>Mn(pe,"searchLimit",Number(Ae.target.value)),className:"w-20 px-3 py-1.5 bg-slate-50 border border-slate-100 rounded-lg text-xs font-black outline-none focus:border-blue-400 text-center"})}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("button",{onClick:()=>q(F===pe?null:pe),className:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",title:G?"":"Details",children:h.jsx("svg",{className:`w-5 h-5 transition-transform ${F===pe?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),h.jsx("button",{onClick:()=>Gs(pe),className:"p-2 text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:G?"":"Delete",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]}),F===pe&&h.jsx("tr",{className:pe%2===0?"bg-white border-b border-slate-200":"bg-slate-50 border-b border-slate-200",children:h.jsx("td",{colSpan:6,className:"px-6 py-6",children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] font-black text-slate-400 mb-2 uppercase tracking-widest",children:G?" ":"Original Price"}),h.jsx("input",{type:"number",value:K.price,onChange:Ae=>Mn(pe,"price",Number(Ae.target.value)),className:"w-full px-4 py-2 bg-slate-50 border border-slate-100 rounded-xl text-sm font-black outline-none focus:border-blue-400"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] font-black text-emerald-600 mb-2 uppercase tracking-widest",children:G?" ":"Discounted Price"}),h.jsx("input",{type:"number",value:K.discountedPrice||"",onChange:Ae=>Mn(pe,"discountedPrice",Ae.target.value?Number(Ae.target.value):void 0),className:"w-full px-4 py-2 bg-emerald-50 border border-emerald-100 rounded-xl text-sm font-black outline-none focus:border-emerald-400",placeholder:G?"":"Optional"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] font-black text-blue-600 mb-2 uppercase tracking-widest",children:"Stripe URL"}),h.jsx("input",{type:"url",value:K.stripeUrl,onChange:Ae=>Mn(pe,"stripeUrl",Ae.target.value),className:"w-full px-4 py-2 bg-blue-50/30 border border-blue-100 rounded-xl text-xs font-mono text-blue-700 outline-none focus:border-blue-500",placeholder:"https://buy.stripe.com/..."})]})]}),h.jsxs("div",{className:"p-4 bg-slate-900 text-white rounded-2xl",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400",children:G?"  ":"Required Success URL"}),h.jsx("button",{onClick:()=>Ko(Hs(K.id)),className:"text-[8px] font-black bg-blue-600 px-3 py-1 rounded-full hover:bg-blue-700 transition-all",children:G?"":"Copy"})]}),h.jsx("p",{className:"text-[9px] font-mono text-slate-300 break-all",children:Hs(K.id)})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-black text-slate-700 mb-3 uppercase tracking-widest",children:G?" ()":"Features (Arabic)"}),h.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto pr-2",children:K.featuresAr.map((Ae,ke)=>h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:Ae,onChange:Qt=>qs(pe,"AR",ke,Qt.target.value),className:"flex-1 px-3 py-2 bg-slate-50 border border-slate-100 rounded-lg text-xs font-bold outline-none focus:border-blue-400"}),h.jsx("button",{onClick:()=>Wo(pe,"AR",ke),className:"p-2 text-rose-400 hover:bg-rose-50 rounded-lg",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},ke))}),h.jsxs("button",{onClick:()=>xr(pe,"AR"),className:"mt-3 text-xs font-black text-emerald-600 hover:text-emerald-700 flex items-center gap-1",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),G?" ":"Add Feature"]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-black text-slate-700 mb-3 uppercase tracking-widest",children:"Features (English)"}),h.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto pr-2",children:K.featuresEn.map((Ae,ke)=>h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:Ae,onChange:Qt=>qs(pe,"EN",ke,Qt.target.value),className:"flex-1 px-3 py-2 bg-slate-50 border border-slate-100 rounded-lg text-xs font-bold outline-none focus:border-blue-400"}),h.jsx("button",{onClick:()=>Wo(pe,"EN",ke),className:"p-2 text-rose-400 hover:bg-rose-50 rounded-lg",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},ke))}),h.jsxs("button",{onClick:()=>xr(pe,"EN"),className:"mt-3 text-xs font-black text-emerald-600 hover:text-emerald-700 flex items-center gap-1",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Feature"]})]})]})]})})})]},pe))})]})})})]}),e==="LIBRARY_CATEGORIES"&&h.jsx("div",{className:"space-y-8 animate-in fade-in",children:h.jsxs("div",{className:"bg-white rounded-[2.5rem] border border-slate-200 shadow-xl p-10",children:[h.jsxs("div",{className:"flex items-center justify-between mb-8",children:[h.jsx("h2",{className:"text-2xl font-black text-slate-900",children:G?"  ":"Analysis Library Categories"}),h.jsx("button",{onClick:()=>Ai(),className:"px-6 py-3 bg-blue-600 text-white rounded-2xl font-black hover:bg-blue-700 transition-all shadow-lg",children:G?"+  ":"+ New Category"})]}),h.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-widest",children:G?"  ()":"Category Name (AR)"}),h.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-widest",children:G?"  ()":"Category Name (EN)"}),h.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-widest",children:G?"":"Description"}),h.jsx("th",{className:"px-6 py-4 text-center text-xs font-black text-slate-600 uppercase tracking-widest",children:G?"":"Actions"})]})}),h.jsx("tbody",{children:u.map((K,pe)=>h.jsxs("tr",{className:pe%2===0?"bg-white":"bg-slate-50",children:[h.jsx("td",{className:"px-6 py-4",children:h.jsx("p",{className:"font-bold text-slate-900",children:K.nameAr})}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("p",{className:"font-bold text-slate-900",children:K.nameEn})}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("p",{className:"text-sm text-slate-600",children:G?K.descriptionAr:K.descriptionEn})}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("button",{onClick:()=>Ai(K),className:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",title:G?"":"Edit",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),h.jsx("button",{onClick:()=>{je(G?" ":"Delete Category",G?"    ":"Delete this category?","rose",async()=>{try{if(K.id){await q4(K.id);const Ae=await Ca();f(Ae),ct()}}catch(Ae){ct(),je(G?"":"Error",Ae.message,"rose")}})},className:"p-2 text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:G?"":"Delete",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},K.id))})]})}),u.length===0&&h.jsxs("div",{className:"text-center py-12 text-slate-400",children:[h.jsx("p",{className:"font-bold",children:G?"   ":"No categories yet"}),h.jsx("p",{className:"text-sm mt-2",children:G?"     ":"Create your first category to start publishing"})]})]})}),e==="PUBLIC_LIBRARY"&&h.jsx("div",{className:"space-y-8 animate-in fade-in",children:h.jsxs("div",{className:"bg-white rounded-[2.5rem] border border-slate-200 shadow-xl p-10",children:[h.jsxs("div",{className:"flex items-center justify-between mb-8",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-black text-slate-900",children:G?" ":"Analysis Library"}),h.jsx("p",{className:"text-sm text-slate-500 mt-2",children:G?`${O.totalAnalyses}    ${O.totalViews} `:`${O.totalAnalyses} Published  ${O.totalViews} Views`})]}),h.jsx("button",{onClick:()=>n("LIBRARY_CATEGORIES"),className:"px-6 py-3 bg-slate-100 text-slate-700 rounded-2xl font-black hover:bg-slate-200 transition-all",children:G?" ":"Manage Categories"})]}),h.jsxs("div",{className:"mb-8 space-y-4",children:[h.jsx("h3",{className:"font-black text-lg",children:G?"  ":"Publish New Analysis"}),h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("select",{value:V,onChange:K=>$(K.target.value),className:"flex-1 px-6 py-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold outline-none focus:border-blue-500",children:[h.jsx("option",{value:"",children:G?"   ":"Select user to see their analyses"}),o.map(K=>h.jsxs("option",{value:K.uid,children:[K.displayName||K.email," (",K.searchCount," ",G?"":"searches",")"]},K.uid))]}),h.jsx("button",{onClick:async()=>{if(V)try{const K=await Ite(V),pe=await Y4(V);D(K),v(pe),K.length===0&&je(G?"":"Info",G?"    ":"This user has no analyses","blue")}catch(K){je(G?"":"Error",K.message,"rose")}},disabled:!V,className:"px-6 py-3 bg-blue-600 text-white rounded-2xl font-black hover:bg-blue-700 disabled:opacity-50 transition-all",children:G?" ":"Load Analyses"})]}),k.length>0?h.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto p-4 bg-slate-50 rounded-2xl",children:[h.jsxs("p",{className:"text-xs font-black text-slate-500 mb-3",children:[k.length," ",G?" ":"analyses available"]}),k.map(K=>{const pe=K.isPublished===!0||p.some(Ae=>Ae.savedAnalysisId&&Ae.savedAnalysisId===K.id||Ae.normalizedQuery&&K.normalizedQuery&&Ae.normalizedQuery===K.normalizedQuery||Ae.query===K.query&&Ae.itemName===K.data.itemName);return h.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border-2 transition-all ${pe?"bg-emerald-50 border-emerald-200":"bg-blue-50 border-blue-200"}`,children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold",children:K.data.itemName}),h.jsx("p",{className:"text-xs text-slate-500",children:K.query})]}),pe?h.jsx("span",{className:"px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold text-sm",children:G?"":"Published"}):h.jsx("button",{onClick:()=>uc(K),className:"px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-all",children:G?"":"Publish"})]},K.id)})]}):V&&k.length===0?h.jsx("div",{className:"text-center py-8 px-4 bg-amber-50 rounded-2xl border border-amber-200",children:h.jsx("p",{className:"text-amber-700 font-bold",children:G?' " "  ':'Click "Load Analyses" to load saved analyses'})}):null]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex gap-4 flex-wrap items-center",children:[h.jsxs("div",{className:"flex-1 min-w-[250px]",children:[h.jsx("label",{className:"block text-xs font-black text-slate-400 mb-2 uppercase tracking-widest",children:G?" ":"Sort By"}),h.jsxs("select",{value:N,onChange:K=>j(K.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-bold outline-none focus:border-blue-500",children:[h.jsx("option",{value:"newest",children:G?" ":"Newest First"}),h.jsx("option",{value:"oldest",children:G?" ":"Oldest First"}),h.jsx("option",{value:"views",children:G?" ":"Most Viewed"})]})]}),h.jsxs("div",{className:"flex-1 min-w-[250px]",children:[h.jsx("label",{className:"block text-xs font-black text-slate-400 mb-2 uppercase tracking-widest",children:G?"":"Category"}),h.jsxs("select",{value:w,onChange:K=>E(K.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-bold outline-none focus:border-blue-500",children:[h.jsx("option",{value:"",children:G?" ":"All Categories"}),u.map(K=>h.jsx("option",{value:K.id||"",children:G?K.nameAr:K.nameEn},K.id))]})]}),h.jsxs("div",{className:"flex-1 min-w-[250px]",children:[h.jsx("label",{className:"block text-xs font-black text-slate-400 mb-2 uppercase tracking-widest",children:G?"":"Publisher"}),h.jsxs("select",{value:S,onChange:K=>_(K.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-bold outline-none focus:border-blue-500",children:[h.jsx("option",{value:"",children:G?" ":"All Publishers"}),[...new Set(p.map(K=>K.publisherEmail).filter(Boolean))].map(K=>{const pe=p.find(ke=>ke.publisherEmail===K),Ae=pe!=null&&pe.publisherName&&pe.publisherName.trim()?pe.publisherName:((pe==null?void 0:pe.publisherEmail)||K||"").split("@")[0];return h.jsx("option",{value:K,children:Ae},K)})]})]})]}),h.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-widest",children:G?" ":"Product Name"}),h.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-widest",children:G?"":"Category"}),h.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-widest",children:G?"":"Publisher"}),h.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-600 uppercase tracking-widest",children:G?" ":"Published Date"}),h.jsx("th",{className:"px-6 py-4 text-center text-xs font-black text-slate-600 uppercase tracking-widest",children:G?"":"Views"}),h.jsx("th",{className:"px-6 py-4 text-center text-xs font-black text-slate-600 uppercase tracking-widest",children:G?"":"Actions"})]})}),h.jsx("tbody",{children:p.filter(K=>!w||K.categoryId===w).filter(K=>!S||K.publisherEmail===S).sort((K,pe)=>N==="newest"?(pe.publishedDate||0)-(K.publishedDate||0):N==="oldest"?(K.publishedDate||0)-(pe.publishedDate||0):N==="views"?(pe.views||0)-(K.views||0):0).map((K,pe)=>{var Ae;return h.jsxs("tr",{className:pe%2===0?"bg-white":"bg-slate-50",children:[h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{children:[h.jsx("p",{className:"font-bold text-slate-900",children:K.itemName}),h.jsx("p",{className:"text-xs text-slate-500 mt-1",children:K.query})]})}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-black",children:G?K.categoryNameAr:K.categoryNameEn})}),h.jsxs("td",{className:"px-6 py-4",children:[h.jsx("p",{className:"text-sm font-bold text-slate-700",children:K.publisherName||((Ae=K.publisherEmail)==null?void 0:Ae.split("@")[0])}),h.jsx("p",{className:"text-xs text-slate-400",children:K.publisherEmail})]}),h.jsxs("td",{className:"px-6 py-4",children:[h.jsx("p",{className:"text-sm font-bold text-slate-700",children:new Date(K.publishedDate||0).toLocaleDateString(G?"ar-SA":"en-US")}),h.jsx("p",{className:"text-xs text-slate-400",children:new Date(K.publishedDate||0).toLocaleTimeString(G?"ar-SA":"en-US",{hour:"2-digit",minute:"2-digit"})})]}),h.jsx("td",{className:"px-6 py-4 text-center",children:h.jsxs("div",{className:"flex items-center justify-center gap-1",children:[h.jsxs("svg",{className:"w-4 h-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),h.jsx("span",{className:"font-bold text-slate-700",children:K.views||0})]})}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("button",{onClick:()=>{je(G?" ":"Delete Analysis",G?"      ":"Delete this analysis from library?","rose",async()=>{try{if(K.id){await H4(K.id);const ke=await xu();v(ke);const Qt=await vm();z(Qt),ct()}}catch(ke){je(G?"":"Error",ke.message,"rose")}})},className:"p-2 text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:G?"":"Delete",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),h.jsx("button",{onClick:()=>je(G?"":"Details",G?`: ${K.itemName}
: ${K.categoryNameAr}
: ${K.publisherEmail}
: ${K.notes||" "}`:`Product: ${K.itemName}
Category: ${K.categoryNameEn}
Publisher: ${K.publisherEmail}
Notes: ${K.notes||"None"}`,"blue"),className:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",title:G?" ":"View Details",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]},K.id)})})]})}),p.length===0&&h.jsxs("div",{className:"text-center py-12 text-slate-400",children:[h.jsx("p",{className:"font-bold",children:G?"   ":"No published analyses"}),h.jsx("p",{className:"text-sm mt-2",children:G?"    ":"Select a user and publish the first analysis"})]})]})]})}),e==="SYSTEM"&&h.jsx("div",{className:"max-w-2xl mx-auto animate-in fade-in zoom-in duration-500",children:h.jsxs("div",{className:"bg-white p-10 rounded-[2.5rem] border border-slate-200 shadow-xl space-y-8",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-20 h-20 bg-blue-50 text-blue-600 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-blue-50",children:h.jsx("svg",{className:"w-10 h-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),h.jsx("h2",{className:"text-2xl font-black text-slate-900",children:G?"    API":"Search Engine & API Integration"}),h.jsx("p",{className:"text-slate-400 font-bold text-sm mt-3",children:G?"      Gemini 3 Pro ":"Manage your connection keys for the Gemini 3 Pro model"})]}),h.jsxs("div",{className:"p-6 bg-slate-900 rounded-[2rem] border border-slate-800 space-y-4",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:G?" Gemini API (  )":"Gemini API Key (Database Storage)"}),fe.geminiApiKey&&h.jsx("span",{className:"text-[9px] font-black text-emerald-400 bg-emerald-400/10 px-2 py-0.5 rounded border border-emerald-400/20",children:G?"":"STORED"})]}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:Ue?"text":"password",value:fe.geminiApiKey||"",onChange:K=>_e({...fe,geminiApiKey:K.target.value}),className:"w-full px-5 py-4 bg-slate-800 border border-slate-700 rounded-xl font-mono text-xs text-blue-400 outline-none focus:border-blue-500 transition-all",placeholder:"AIzaSy..."}),h.jsx("button",{onClick:()=>ze(!Ue),className:"absolute inset-y-0 end-0 px-4 text-slate-500 hover:text-white transition-colors",children:Ue?h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l18 18"})}):h.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268-2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),h.jsx("button",{onClick:Dr,disabled:Ye,className:"w-full bg-blue-600 text-white py-4 rounded-xl font-black text-sm hover:bg-blue-700 shadow-xl shadow-blue-900 transition-all active:scale-95 flex items-center justify-center gap-2",children:Ye?h.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):G?"    ":"Save Key to Database"})]}),h.jsxs("div",{className:"p-6 bg-slate-900 rounded-[2rem] border border-slate-800 space-y-4",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:G?" Google Custom Search API ()":"Google Custom Search API Key (Optional)"}),fe.googleSearchApiKey&&h.jsx("span",{className:"text-[9px] font-black text-emerald-400 bg-emerald-400/10 px-2 py-0.5 rounded border border-emerald-400/20",children:G?"":"STORED"})]}),h.jsx("input",{type:Ue?"text":"password",value:fe.googleSearchApiKey||"",onChange:K=>_e({...fe,googleSearchApiKey:K.target.value}),className:"w-full px-5 py-4 bg-slate-800 border border-slate-700 rounded-xl font-mono text-xs text-emerald-400 outline-none focus:border-emerald-500 transition-all",placeholder:"AIzaSy..."}),h.jsx("p",{className:"text-[10px] text-slate-500 font-medium leading-relaxed",children:G?"        .      .":"Used to enhance search accuracy for stores and competitors in Saudi Arabia. Adding it significantly improves report quality."})]}),h.jsxs("div",{className:"p-6 bg-slate-900 rounded-[2rem] border border-slate-800 space-y-4",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:G?"   (Search Engine ID)":"Search Engine ID"}),fe.googleSearchId&&h.jsx("span",{className:"text-[9px] font-black text-emerald-400 bg-emerald-400/10 px-2 py-0.5 rounded border border-emerald-400/20",children:G?"":"STORED"})]}),h.jsx("input",{type:Ue?"text":"password",value:fe.googleSearchId||"",onChange:K=>_e({...fe,googleSearchId:K.target.value}),className:"w-full px-5 py-4 bg-slate-800 border border-slate-700 rounded-xl font-mono text-xs text-blue-400 outline-none focus:border-blue-500 transition-all",placeholder:"0123456789abcdef..."}),h.jsx("p",{className:"text-[10px] text-slate-500 font-medium leading-relaxed",children:G?"     Google.    API      .":"Custom Search Engine ID from Google. Works with API key above to fetch accurate data from the web."}),h.jsxs("a",{href:"https://programmablesearchengine.google.com/controlpanel/all",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-[9px] font-black text-blue-400 hover:text-blue-300 transition-colors",children:[h.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),G?"    ()":"Create Custom Search Engine (Free)"]})]}),h.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-[2rem] border border-blue-200",children:[h.jsx("p",{className:"text-sm font-bold text-blue-900 mb-4",children:G?"         ":"Click the button below to save all API keys to the database"}),h.jsx("button",{onClick:Dr,disabled:Ye,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-4 rounded-xl font-black text-sm hover:from-blue-700 hover:to-blue-800 shadow-xl shadow-blue-900 transition-all active:scale-95 flex items-center justify-center gap-2 disabled:opacity-60",children:Ye?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),G?" ...":"Saving..."]}):h.jsxs(h.Fragment,{children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3v-6"})}),G?"     ":"Save All API Keys to Database"]})})]}),h.jsxs("div",{className:"p-6 bg-slate-50 rounded-3xl border border-slate-100",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:G?"  ":"TOTAL SYSTEM STATUS"}),$e?h.jsxs("span",{className:"flex items-center gap-2 text-[10px] font-black text-emerald-600 bg-emerald-50 px-3 py-1 rounded-full border border-emerald-100",children:[h.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-600 rounded-full animate-pulse"}),G?"  ":"CONNECTED & READY"]}):h.jsxs("span",{className:"flex items-center gap-2 text-[10px] font-black text-rose-600 bg-rose-50 px-3 py-1 rounded-full border border-rose-100",children:[h.jsx("span",{className:"w-1.5 h-1.5 bg-rose-600 rounded-full"}),G?"  ( )":"NOT CONNECTED"]})]}),h.jsxs("div",{className:"mt-4 p-4 bg-white border border-slate-200 rounded-2xl",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-[9px] font-bold text-slate-400",children:G?" AI Studio ":"External AI Studio Link"}),window.aistudio&&$e?h.jsx("span",{className:"text-[8px] font-black text-emerald-500",children:"ACTIVE"}):h.jsx("span",{className:"text-[8px] font-black text-slate-300",children:"INACTIVE"})]}),h.jsx("button",{onClick:Bt,className:"w-full bg-slate-900 text-white py-3 rounded-xl font-black text-xs hover:bg-slate-800 transition-all",children:G?" /   AI Studio ":"Link / Update External AI Studio Key"})]})]}),h.jsx("div",{className:"text-center pt-4 border-t border-slate-50",children:h.jsx("a",{href:"https://ai.google.dev/gemini-api/docs/billing",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] font-black text-slate-400 hover:text-blue-600 transition-colors uppercase tracking-[0.2em]",children:G?"   (Google Cloud)":"Billing Documentation (Google Cloud)"})})]})}),e==="SITE_SETTINGS"&&h.jsx("div",{className:"max-w-6xl mx-auto",children:h.jsxs("div",{className:"bg-gradient-to-br from-white to-slate-50 rounded-[2.5rem] border border-slate-200 shadow-2xl overflow-hidden animate-in zoom-in",children:[h.jsx("div",{className:"bg-gradient-to-br from-emerald-600 to-emerald-700 px-10 py-8",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:h.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-black text-white",children:G?"  ":"Site Settings & Branding"}),h.jsx("p",{className:"text-emerald-100 text-sm font-bold mt-1",children:G?"      ":"Manage content, media, and SEO optimization"})]})]})}),h.jsx("div",{className:"px-10 pt-8",children:h.jsx("div",{className:"flex justify-center",children:h.jsxs("div",{className:"inline-flex bg-white p-1.5 rounded-2xl border-2 border-slate-200 shadow-lg",children:[h.jsxs("button",{onClick:()=>i("AR"),className:`px-8 py-3 rounded-xl text-sm font-black transition-all flex items-center gap-2 ${r==="AR"?"bg-gradient-to-br from-emerald-600 to-emerald-700 text-white shadow-lg shadow-emerald-200":"text-slate-400 hover:text-slate-600"}`,children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),G?" ":"Arabic Content"]}),h.jsxs("button",{onClick:()=>i("EN"),className:`px-8 py-3 rounded-xl text-sm font-black transition-all flex items-center gap-2 ${r==="EN"?"bg-gradient-to-br from-emerald-600 to-emerald-700 text-white shadow-lg shadow-emerald-200":"text-slate-400 hover:text-slate-600"}`,children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),G?" ":"English Content"]}),h.jsxs("button",{onClick:()=>i("CORE"),className:`px-8 py-3 rounded-xl text-sm font-black transition-all flex items-center gap-2 ${r==="CORE"?"bg-gradient-to-br from-emerald-600 to-emerald-700 text-white shadow-lg shadow-emerald-200":"text-slate-400 hover:text-slate-600"}`,children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),G?" ":"Logo & Media"]})]})})}),h.jsxs("div",{className:"p-10",children:[r==="AR"&&h.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[h.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-slate-100 hover:border-emerald-200 transition-all",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-black text-slate-700 uppercase tracking-wider",children:G?"  ()":"Site Name (AR)"}),h.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:G?"    ":"Appears in browser title and results"})]})]}),h.jsx("input",{type:"text",value:fe.siteNameAr||"",onChange:K=>_e({...fe,siteNameAr:K.target.value}),className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-200 rounded-xl font-bold text-base outline-none focus:border-blue-500 focus:bg-white transition-all",placeholder:G?":   -   ":"Example: Tahleel Plus - Advanced Analysis Platform"})]}),h.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-slate-100 hover:border-emerald-200 transition-all",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-purple-100 text-purple-600 rounded-xl flex items-center justify-center",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-black text-slate-700 uppercase tracking-wider",children:G?"  ()":"Site Description (AR)"}),h.jsxs("p",{className:"text-[10px] text-slate-400 font-medium flex items-center gap-1",children:[h.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full"}),G?"    (SEO)":"Important for SEO optimization"]})]})]}),h.jsx("textarea",{value:fe.siteDescriptionAr||"",onChange:K=>_e({...fe,siteDescriptionAr:K.target.value}),rows:4,className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-200 rounded-xl font-medium text-sm outline-none focus:border-purple-500 focus:bg-white transition-all resize-none",placeholder:G?"          ...":"Enter comprehensive description of your site services..."}),h.jsxs("div",{className:"mt-2 flex items-center justify-between text-[10px]",children:[h.jsx("span",{className:"text-slate-400 font-medium",children:G?" : 150-160 ":"Ideal length: 150-160 characters"}),h.jsxs("span",{className:`font-black ${(((Ci=fe.siteDescriptionAr)==null?void 0:Ci.length)||0)>160?"text-rose-500":"text-slate-400"}`,children:[((Ka=fe.siteDescriptionAr)==null?void 0:Ka.length)||0," / 160"]})]})]}),h.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-slate-100 hover:border-emerald-200 transition-all",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-rose-100 text-rose-600 rounded-xl flex items-center justify-center",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-black text-slate-700 uppercase tracking-wider",children:G?"  ()":"Keywords (AR)"}),h.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:G?"   ()":"Separate keywords with commas"})]})]}),h.jsx("input",{type:"text",value:fe.siteKeywordsAr||"",onChange:K=>_e({...fe,siteKeywordsAr:K.target.value}),className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-200 rounded-xl font-medium text-sm outline-none focus:border-rose-500 focus:bg-white transition-all",placeholder:G?"      ":"Market analysis, e-commerce, feasibility study, KSA"})]})]}),r==="EN"&&h.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[h.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-slate-100 hover:border-emerald-200 transition-all",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-black text-slate-700 uppercase tracking-wider",children:"Site Name (English)"}),h.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Appears in browser title and results"})]})]}),h.jsx("input",{type:"text",value:fe.siteNameEn||"",onChange:K=>_e({...fe,siteNameEn:K.target.value}),className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-200 rounded-xl font-bold text-base outline-none focus:border-blue-500 focus:bg-white transition-all",placeholder:"Example: Tahleel Plus - Advanced Market Analysis"})]}),h.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-slate-100 hover:border-emerald-200 transition-all",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-purple-100 text-purple-600 rounded-xl flex items-center justify-center",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-black text-slate-700 uppercase tracking-wider",children:"Site Description (English)"}),h.jsxs("p",{className:"text-[10px] text-slate-400 font-medium flex items-center gap-1",children:[h.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full"}),"Important for SEO optimization"]})]})]}),h.jsx("textarea",{value:fe.siteDescriptionEn||"",onChange:K=>_e({...fe,siteDescriptionEn:K.target.value}),rows:4,className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-200 rounded-xl font-medium text-sm outline-none focus:border-purple-500 focus:bg-white transition-all resize-none",placeholder:"Enter comprehensive description explaining your site services and value proposition..."}),h.jsxs("div",{className:"mt-2 flex items-center justify-between text-[10px]",children:[h.jsx("span",{className:"text-slate-400 font-medium",children:"Ideal length: 150-160 characters"}),h.jsxs("span",{className:`font-black ${(((ei=fe.siteDescriptionEn)==null?void 0:ei.length)||0)>160?"text-rose-500":"text-slate-400"}`,children:[((Or=fe.siteDescriptionEn)==null?void 0:Or.length)||0," / 160"]})]})]}),h.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-slate-100 hover:border-emerald-200 transition-all",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-rose-100 text-rose-600 rounded-xl flex items-center justify-center",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-black text-slate-700 uppercase tracking-wider",children:"Keywords (English)"}),h.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Separate keywords with commas"})]})]}),h.jsx("input",{type:"text",value:fe.siteKeywordsEn||"",onChange:K=>_e({...fe,siteKeywordsEn:K.target.value}),className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-200 rounded-xl font-medium text-sm outline-none focus:border-rose-500 focus:bg-white transition-all",placeholder:"Market Analysis, E-commerce, Business Intelligence, KSA, Saudi Arabia"})]})]}),r==="CORE"&&h.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[h.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-slate-100",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx("div",{className:"w-10 h-10 bg-amber-100 text-amber-600 rounded-xl flex items-center justify-center",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"block text-xs font-black text-slate-700 uppercase tracking-wider",children:G?" ":"Main Logo"}),h.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:G?"     URL":"Upload file or enter URL"})]}),h.jsxs("label",{className:"cursor-pointer",children:[h.jsx("input",{type:"file",accept:"image/*",onChange:Ho,className:"hidden"}),h.jsxs("div",{className:"px-6 py-2.5 bg-gradient-to-br from-amber-600 to-amber-700 text-white rounded-xl font-black text-xs hover:from-amber-700 hover:to-amber-800 transition-all shadow-lg shadow-amber-200 flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),G?" ":"Upload"]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 mb-2 uppercase tracking-wider",children:G?"   URL":"Or enter URL"}),h.jsx("input",{type:"text",value:fe.siteLogo||"",onChange:K=>_e({...fe,siteLogo:K.target.value}),className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-200 rounded-xl font-mono text-xs outline-none focus:border-amber-500 focus:bg-white transition-all",placeholder:"https://example.com/logo.png"}),h.jsx("p",{className:"mt-2 text-[9px] text-slate-400 font-medium",children:G?"  : 500 ":"Max file size: 500KB"})]}),h.jsx("div",{className:"p-6 border-2 border-dashed border-amber-200 rounded-xl flex flex-col items-center justify-center bg-gradient-to-br from-amber-50 to-white min-h-[140px]",children:fe.siteLogo?h.jsxs("div",{className:"text-center",children:[h.jsx("img",{src:fe.siteLogo,alt:t==="ar"?" ":"Site Logo",className:"h-16 w-auto max-w-full object-contain mx-auto mb-2",loading:"lazy"}),h.jsx("span",{className:"text-[9px] font-black text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full",children:G?"  ":" ACTIVE"}),h.jsx("button",{onClick:()=>_e({...fe,siteLogo:""}),className:"mt-2 text-[9px] font-bold text-rose-600 hover:text-rose-700 underline",children:G?"":"Remove"})]}):h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"h-16 w-16 bg-slate-200 rounded-xl animate-pulse mx-auto mb-2",role:"img","aria-label":t==="ar"?"  ":"Loading logo"}),h.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase",children:G?"  ":"No Logo"})]})})]})]}),h.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-slate-100",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx("div",{className:"w-10 h-10 bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"block text-xs font-black text-slate-700 uppercase tracking-wider",children:G?"  (Favicon)":"Browser Icon (Favicon)"}),h.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:G?"    (16x16  32x32 )":"Appears in browser tab (16x16 or 32x32 pixels)"})]}),h.jsxs("label",{className:"cursor-pointer",children:[h.jsx("input",{type:"file",accept:"image/*",onChange:oo,className:"hidden"}),h.jsxs("div",{className:"px-6 py-2.5 bg-gradient-to-br from-indigo-600 to-indigo-700 text-white rounded-xl font-black text-xs hover:from-indigo-700 hover:to-indigo-800 transition-all shadow-lg shadow-indigo-200 flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),G?" ":"Upload"]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 mb-2 uppercase tracking-wider",children:G?"   URL":"Or enter URL"}),h.jsx("input",{type:"text",value:fe.siteFavicon||"",onChange:K=>_e({...fe,siteFavicon:K.target.value}),className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-200 rounded-xl font-mono text-xs outline-none focus:border-indigo-500 focus:bg-white transition-all",placeholder:"https://example.com/favicon.ico"}),h.jsx("p",{className:"mt-2 text-[9px] text-slate-400 font-medium",children:G?"  : 200 ":"Max file size: 200KB"})]}),h.jsx("div",{className:"p-6 border-2 border-dashed border-indigo-200 rounded-xl flex flex-col items-center justify-center bg-gradient-to-br from-indigo-50 to-white min-h-[140px]",children:fe.siteFavicon?h.jsxs("div",{className:"text-center",children:[h.jsx("img",{src:fe.siteFavicon,alt:t==="ar"?" ":"Site Favicon",className:"h-12 w-12 object-contain mx-auto mb-2 ring-2 ring-slate-200 rounded-lg p-2 bg-white",loading:"lazy"}),h.jsx("span",{className:"text-[9px] font-black text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full",children:G?"  ":" ACTIVE"}),h.jsx("button",{onClick:()=>_e({...fe,siteFavicon:""}),className:"mt-2 text-[9px] font-bold text-rose-600 hover:text-rose-700 underline",children:G?"":"Remove"})]}):h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"h-12 w-12 bg-slate-200 rounded-lg animate-pulse mx-auto mb-2",role:"img","aria-label":t==="ar"?"  ":"Loading icon"}),h.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase",children:G?"  ":"No Icon"})]})})]})]}),h.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 p-6 rounded-2xl",children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-500 text-white rounded-xl flex items-center justify-center flex-shrink-0",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-black text-blue-900 mb-2",children:G?" ":"Media Tips"}),h.jsxs("ul",{className:"space-y-1 text-xs text-blue-700 font-medium",children:[h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-blue-500 mt-0.5",children:""}),h.jsx("span",{children:G?":  PNG     200x50 ":"Logo: Prefer transparent PNG, recommended size 200x50 pixels"})]}),h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-blue-500 mt-0.5",children:""}),h.jsx("span",{children:G?":     32x32  16x16   ICO  PNG":"Favicon: Must be square 32x32 or 16x16 pixels in ICO or PNG format"})]}),h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-blue-500 mt-0.5",children:""}),h.jsx("span",{children:G?"  HTTPS  ":"Use HTTPS links for security and speed"})]})]})]})]})})]}),h.jsx("div",{className:"pt-6",children:h.jsx("button",{onClick:Dr,disabled:Ye,className:"w-full bg-gradient-to-br from-emerald-600 to-emerald-700 text-white py-6 rounded-2xl font-black text-lg hover:from-emerald-700 hover:to-emerald-800 hover:scale-[1.02] active:scale-95 transition-all shadow-2xl shadow-emerald-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:Ye?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-6 h-6 border-4 border-white/30 border-t-white rounded-full animate-spin"}),h.jsx("span",{children:G?" ...":"Saving..."})]}):h.jsxs(h.Fragment,{children:[h.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),h.jsx("span",{children:G?"  ":"Save All Settings"})]})})})]})]})}),U&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",dir:G?"rtl":"ltr",children:h.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl max-w-5xl w-full animate-in zoom-in slide-in-from-bottom-4",children:[h.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 px-10 py-6 rounded-t-[2.5rem]",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:P?G?" ":"Edit Category":G?" ":"New Category"}),h.jsx("p",{className:"text-blue-100 text-xs font-bold",children:G?"   ":"Fill data in both Arabic and English"})]}),h.jsx("button",{onClick:Zr,className:"w-10 h-10 rounded-2xl bg-white/10 hover:bg-white/20 flex items-center justify-center text-white transition-all",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),h.jsxs("div",{className:"p-10",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx("div",{className:"w-7 h-7 rounded-xl bg-blue-100 flex items-center justify-center",children:h.jsx("span",{className:"text-blue-600 font-black text-sm",children:""})}),h.jsx("h3",{className:"text-base font-black text-slate-900",children:G?" ":"Arabic Data"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-xs font-black text-slate-500 uppercase mb-2",children:[G?" ":"Category Name"," ",h.jsx("span",{className:"text-rose-500",children:"*"})]}),h.jsx("input",{type:"text",value:ce.nameAr,onChange:K=>ge({...ce,nameAr:K.target.value}),placeholder:G?": ":"Example: Electronics",className:"w-full px-5 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl font-bold outline-none focus:border-blue-500 focus:bg-white transition-all"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase mb-2",children:G?" ()":"Description (Optional)"}),h.jsx("textarea",{value:ce.descriptionAr,onChange:K=>ge({...ce,descriptionAr:K.target.value}),placeholder:G?" ...":"Brief description...",rows:3,className:"w-full px-5 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl font-bold outline-none focus:border-blue-500 focus:bg-white transition-all resize-none"})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx("div",{className:"w-7 h-7 rounded-xl bg-emerald-100 flex items-center justify-center",children:h.jsx("span",{className:"text-emerald-600 font-black text-sm",children:"EN"})}),h.jsx("h3",{className:"text-base font-black text-slate-900",children:G?" ":"English Data"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-xs font-black text-slate-500 uppercase mb-2",children:[G?" ":"Category Name"," ",h.jsx("span",{className:"text-rose-500",children:"*"})]}),h.jsx("input",{type:"text",value:ce.nameEn,onChange:K=>ge({...ce,nameEn:K.target.value}),placeholder:"Example: Electronics",className:"w-full px-5 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl font-bold outline-none focus:border-blue-500 focus:bg-white transition-all"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase mb-2",children:G?" ()":"Description (Optional)"}),h.jsx("textarea",{value:ce.descriptionEn,onChange:K=>ge({...ce,descriptionEn:K.target.value}),placeholder:"Brief description...",rows:3,className:"w-full px-5 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl font-bold outline-none focus:border-blue-500 focus:bg-white transition-all resize-none"})]})]})]}),h.jsxs("div",{className:"flex gap-4 pt-8",children:[h.jsx("button",{onClick:Zr,className:"flex-1 px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-black hover:bg-slate-200 transition-all",children:G?"":"Cancel"}),h.jsx("button",{onClick:cc,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl font-black hover:shadow-xl hover:scale-[1.02] active:scale-95 transition-all shadow-lg",children:P?G?" ":"Save Changes":G?" ":"Create Category"})]})]})]})}),xe&&ne&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in overflow-y-auto",dir:G?"rtl":"ltr",children:h.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl max-w-3xl w-full animate-in zoom-in slide-in-from-bottom-4 flex flex-col max-h-[90vh] my-auto",children:[h.jsx("div",{className:"bg-gradient-to-br from-emerald-600 to-emerald-700 px-10 py-6 rounded-t-[2.5rem] flex-shrink-0",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:G?"   ":"Publish to Public Library"}),h.jsx("p",{className:"text-emerald-100 text-xs font-bold",children:ne.data.itemName})]}),h.jsx("button",{onClick:br,className:"w-10 h-10 rounded-2xl bg-white/10 hover:bg-white/20 flex items-center justify-center text-white transition-all flex-shrink-0",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),h.jsxs("div",{className:"p-10 space-y-6 overflow-y-auto flex-grow",children:[h.jsxs("div",{className:"p-5 bg-slate-50 rounded-2xl border border-slate-200",children:[h.jsx("h3",{className:"font-black text-sm text-slate-500 mb-2",children:G?" ":"Search Query"}),h.jsx("p",{className:"text-slate-700 font-bold",children:ne.query})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-black text-slate-700 mb-3",children:[G?" ":"Select Category"," ",h.jsx("span",{className:"text-rose-500",children:"*"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:u.map(K=>h.jsx("button",{onClick:()=>ie({...Y,categoryId:K.id}),className:`p-4 rounded-2xl border-2 transition-all text-start ${Y.categoryId===K.id?"border-emerald-500 bg-emerald-50 shadow-lg":"border-slate-200 bg-white hover:border-emerald-300 hover:bg-emerald-50/50"}`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-black text-slate-900",children:G?K.nameAr:K.nameEn}),(K.descriptionAr||K.descriptionEn)&&h.jsx("p",{className:"text-xs text-slate-500 mt-1",children:G?K.descriptionAr:K.descriptionEn})]}),Y.categoryId===K.id&&h.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-500 flex items-center justify-center flex-shrink-0 ml-2",children:h.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})},K.id))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-black text-slate-700 mb-3",children:G?" ()":"Notes (Optional)"}),h.jsx("textarea",{value:Y.notes,onChange:K=>ie({...Y,notes:K.target.value}),placeholder:G?"  ...":"Add additional notes...",rows:3,className:"w-full px-5 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl font-bold outline-none focus:border-emerald-500 focus:bg-white transition-all resize-none"})]})]}),h.jsxs("div",{className:"flex gap-4 p-10 bg-white border-t border-slate-100 rounded-b-[2.5rem] flex-shrink-0",children:[h.jsx("button",{onClick:br,className:"flex-1 px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-black hover:bg-slate-200 transition-all",children:G?"":"Cancel"}),h.jsx("button",{onClick:dc,disabled:!Y.categoryId,className:"flex-1 px-6 py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-xl font-black hover:shadow-xl hover:scale-[1.02] active:scale-95 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:G?" ":"Publish Now"})]})]})})]})},vxe=({profile:t,lang:e,plans:n,onNavigate:r,onLogout:i})=>{const[o,s]=I.useState(!1),a=I.useRef(null),c=qu[e],u=e==="ar";I.useEffect(()=>{const v=w=>{a.current&&!a.current.contains(w.target)&&s(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const f=n.find(v=>v.id===t.plan),p=f?u?f.nameAr:f.nameEn:t.plan;return h.jsxs("div",{className:"relative",ref:a,children:[h.jsxs("button",{onClick:()=>s(!o),className:"flex items-center gap-3 p-1.5 pe-4 bg-white border border-slate-200 rounded-full hover:border-blue-400 hover:shadow-lg transition-all group",children:[h.jsx("div",{className:"w-10 h-10 bg-slate-900 rounded-full flex items-center justify-center text-white font-black text-sm group-hover:bg-blue-600 transition-colors",children:t.displayName?t.displayName[0].toUpperCase():t.email[0].toUpperCase()}),h.jsxs("div",{className:"text-start hidden sm:block",children:[h.jsx("p",{className:"text-xs font-bold text-slate-800 max-w-[140px] truncate leading-tight",children:t.displayName||t.email.split("@")[0]}),h.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wide leading-none mt-0.5",children:p})]})]}),o&&h.jsxs("div",{className:`absolute top-full mt-3 w-64 bg-white rounded-[2rem] border border-slate-100 shadow-2xl z-[100] p-2 animate-in fade-in slide-in-from-top-2 ${u?"left-0":"right-0"}`,children:[h.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-100 rounded-t-[1.5rem] mb-2",children:[h.jsx("p",{className:"text-xs font-bold text-slate-800 truncate mb-1.5",children:t.displayName||t.email.split("@")[0]}),h.jsx("span",{className:"text-[10px] font-black bg-blue-100 text-blue-700 px-2.5 py-1 rounded-lg uppercase tracking-wide",children:p}),h.jsx("p",{className:"text-[10px] font-medium text-slate-400 mt-2 truncate",children:t.email})]}),h.jsxs("button",{onClick:()=>{r("PROFILE"),s(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-sm font-bold text-slate-700 hover:bg-blue-50 hover:text-blue-600 rounded-2xl transition-colors group",children:[h.jsx("div",{className:"w-8 h-8 rounded-xl bg-blue-50 text-blue-600 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),c.profile]}),t.isAdmin&&h.jsxs("button",{onClick:()=>{r("ADMIN"),s(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-sm font-bold text-slate-700 hover:bg-slate-900 hover:text-white rounded-2xl transition-colors group",children:[h.jsx("div",{className:"w-8 h-8 rounded-xl bg-slate-100 text-slate-600 flex items-center justify-center group-hover:bg-slate-800 group-hover:text-white transition-colors",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.544.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"})})}),u?" ":"Admin Dashboard"]}),h.jsx("div",{className:"my-2 border-t border-slate-50"}),h.jsxs("button",{onClick:i,className:"w-full flex items-center gap-3 px-4 py-3 text-sm font-bold text-rose-600 hover:bg-rose-50 rounded-2xl transition-colors",children:[h.jsx("div",{className:"w-8 h-8 rounded-xl bg-rose-50 text-rose-600 flex items-center justify-center",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),c.logout]})]})]})},yxe=({lang:t})=>{var E;const[e,n]=I.useState([]),[r,i]=I.useState(null),[o,s]=I.useState(!0),[a,c]=I.useState(null),[u,f]=I.useState(!1),p=t==="ar",v=async()=>{if(!Pn.currentUser)return;s(!0);const S=await Cte(Pn.currentUser.uid);n(S),s(!1)};I.useEffect(()=>{v()},[]);const w=async(S,_)=>{_.stopPropagation(),confirm(p?"  ":"Delete from library?")&&(await Pte(S),v())};if(r){const S=p?r.dataAr||r.data:r.dataEn||r.data;return h.jsxs("div",{className:"space-y-6",children:[h.jsx("button",{onClick:()=>i(null),className:"flex items-center gap-2 text-blue-600 font-black hover:underline",children:p?"  ":" Back to Library"}),h.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-blue-100 mb-8",children:[h.jsx("h2",{className:"text-xl font-black text-slate-900",children:r.query}),h.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:new Date(r.timestamp).toLocaleDateString()}),h.jsxs("div",{className:"flex gap-2 mt-2",children:[r.dataAr&&h.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-bold",children:[" ",p?" ":"Arabic Available"]}),r.dataEn&&h.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-bold",children:[" ",p?" ":"English Available"]})]})]}),h.jsx(qT,{data:S,lang:t})]})}return o?h.jsx("div",{className:"py-20 text-center text-slate-400 font-black",children:"Loading Library..."}):h.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-3xl font-black text-slate-900",children:p?" ":"Strategic Library"}),h.jsxs("span",{className:"bg-blue-50 text-blue-600 px-4 py-2 rounded-xl text-xs font-black",children:[e.length," ",p?"":"Reports"]})]}),e.length===0?h.jsx("div",{className:"bg-white rounded-[2.5rem] border border-dashed border-slate-200 p-20 text-center",children:h.jsx("p",{className:"text-slate-400 font-bold",children:p?"     .":"No saved reports yet."})}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(S=>{var _;return h.jsxs("div",{onClick:()=>i(S),className:"bg-white p-8 rounded-[2rem] border border-slate-200 shadow-sm hover:shadow-xl hover:border-blue-400 transition-all cursor-pointer group relative flex flex-col",style:{minHeight:"220px"},children:[h.jsx("h3",{className:`text-xl font-black text-slate-900 leading-relaxed mb-3 ${p?"text-right":"text-left"}`,children:S.query}),h.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[h.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-xs font-bold",children:S.query.match(/[\u0600-\u06FF]/)?" ":" English"}),S.region&&h.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-xs font-bold",children:((_=Pu.find(N=>N.code===S.region))==null?void 0:_[p?"nameAr":"nameEn"])||S.region})]}),S.isPublished&&h.jsx("div",{className:"mb-3",children:h.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-600 rounded-lg text-xs font-bold",children:[" ",p?"  ":"Published"]})}),h.jsxs("div",{className:"absolute top-6 left-6 flex gap-2",children:[!S.isPublished&&h.jsx("button",{onClick:N=>handlePublish(N,S),className:"p-2 text-slate-300 hover:text-green-500 opacity-0 group-hover:opacity-100 transition-opacity",title:p?"   ":"Publish to Public Library",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),h.jsx("button",{onClick:N=>w(S.id,N),className:"p-2 text-slate-300 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity",title:p?"":"Delete",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),h.jsx("div",{className:"flex-grow"}),h.jsxs("div",{className:"flex items-center justify-between text-xs border-t border-slate-100 pt-4 mt-auto",children:[h.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),h.jsx("span",{className:"font-bold",children:new Date(S.timestamp).toLocaleDateString()})]}),h.jsx("div",{className:"text-blue-600 font-bold group-hover:underline",children:p?"  ":"View Analysis "})]})]},S.id)})}),a&&h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full animate-in fade-in zoom-in-95 duration-300",children:[h.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-4",children:p?"    ":" Publish to Public Library"}),h.jsxs("div",{className:"mb-6 space-y-3",children:[h.jsx("p",{className:"text-slate-600 font-bold",children:p?"          ":"Do you want to publish this analysis to the public library for everyone to benefit from?"}),h.jsxs("div",{className:"bg-blue-50 rounded-2xl p-4 space-y-2",children:[h.jsx("p",{className:"text-sm font-bold text-slate-700",children:p?" :":" Analysis:"}),h.jsx("p",{className:"text-lg font-black text-slate-900",children:a.query}),a.region&&h.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h.jsx("span",{className:"text-sm font-bold text-slate-600",children:p?":":"Market:"}),h.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white rounded-lg text-sm font-bold text-blue-600",children:[" ",(E=Pu.find(S=>S.code===a.region))==null?void 0:E[p?"nameAr":"nameEn"]]})]})]}),h.jsx("div",{className:"bg-green-50 rounded-2xl p-4",children:h.jsx("p",{className:"text-xs font-bold text-green-700",children:p?"         ":" This analysis will appear in the Analysis Library with country badge"})})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:confirmPublish,disabled:u,className:"flex-1 bg-green-500 hover:bg-green-600 text-white font-black py-3 px-6 rounded-2xl transition-all disabled:opacity-50",children:u?p?" ...":"Publishing...":p?"  ":" Publish Now"}),h.jsx("button",{onClick:()=>c(null),disabled:u,className:"flex-1 bg-slate-100 hover:bg-slate-200 text-slate-700 font-black py-3 px-6 rounded-2xl transition-all disabled:opacity-50",children:p?"":"Cancel"})]})]})})]})},xxe=({profile:t,plans:e,lang:n,onRefresh:r})=>{const[i,o]=I.useState(t.displayName||""),[s,a]=I.useState(t.email),[c,u]=I.useState(""),[f,p]=I.useState(""),[v,w]=I.useState(!1),[E,S]=I.useState(null),[_,N]=I.useState(null),[j,F]=I.useState(!1),[q,V]=I.useState(null),$=qu[n],k=n==="ar",D=e.find(ce=>ce.id===t.plan),O=D?D.searchLimit:t.plan==="ELITE"?99999:5,z=Math.min(100,t.searchCount/O*100),U=new Date(t.expiryDate).toLocaleDateString(k?"ar-SA":"en-US"),M=async()=>{w(!0),S(null),N(null);try{await Bw(t.uid,{displayName:i}),N(k?"   ":"Name updated successfully"),r()}catch(ce){S(ce.message)}finally{w(!1)}},P=ce=>{V(ce),F(!0),S(null),N(null)},me=async ce=>{if(ce.preventDefault(),!(!Pn.currentUser||!f)){w(!0),S(null);try{const ge=ec.credential(Pn.currentUser.email,f);if(await zz(Pn.currentUser,ge),q==="EMAIL")await Hz(Pn.currentUser,s),await Bw(t.uid,{email:s}),N(k?"   ":"Email updated successfully");else if(q==="PASSWORD")await Wz(Pn.currentUser,c),N(k?"   ":"Password changed successfully");else if(q==="DELETE"){await B4(t.uid),await Qz(Pn.currentUser),window.location.reload();return}F(!1),p(""),u(""),r()}catch{S(k?"    ":"Incorrect current password")}finally{w(!1)}}};return h.jsxs("div",{className:"max-w-6xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-700",children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-3xl font-black text-slate-900 mb-2",children:$.profile}),h.jsx("p",{className:"text-slate-500 font-bold",children:k?"    ":"Manage your personal data and account settings"})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[h.jsx("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-lg",children:h.jsxs("div",{className:"flex flex-col items-center text-center",children:[h.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center text-white text-3xl font-black shadow-lg shadow-blue-100 mb-4",children:t.displayName?t.displayName[0].toUpperCase():t.email[0].toUpperCase()}),h.jsx("h2",{className:"text-lg font-black text-slate-900",children:t.displayName||t.email.split("@")[0]}),h.jsx("p",{className:"text-slate-400 font-bold text-xs mb-3",children:t.email}),h.jsx("span",{className:"inline-block bg-blue-50 text-blue-600 text-[10px] font-black px-3 py-1.5 rounded-full border border-blue-100 uppercase tracking-widest",children:t.plan})]})}),h.jsxs("div",{className:"bg-slate-900 p-6 rounded-[2rem] text-white shadow-2xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:h.jsx("svg",{className:"w-20 h-20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),h.jsxs("div",{className:"relative z-10 space-y-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] font-black text-blue-400 uppercase tracking-[0.2em] mb-1",children:k?" ":"Current Plan"}),h.jsx("h3",{className:"text-2xl font-black",children:D?k?D.nameAr:D.nameEn:t.plan})]}),h.jsxs("div",{className:"pt-4 border-t border-slate-800",children:[h.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-1",children:k?" ":"Expires"}),h.jsx("p",{className:"font-bold text-sm",children:U})]}),h.jsxs("div",{className:"pt-4 border-t border-slate-800 space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-xs font-black",children:[h.jsx("span",{className:"text-slate-400 uppercase",children:k?"":"Usage"}),h.jsxs("span",{children:[t.searchCount," / ",t.plan==="ELITE"?"":O]})]}),h.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:h.jsx("div",{className:`h-full transition-all duration-1000 ${z>80?"bg-rose-500":"bg-blue-500"}`,style:{width:`${z}%`}})})]})]})]}),h.jsxs("div",{className:"bg-rose-50 p-6 rounded-[2rem] border border-rose-200",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx("svg",{className:"w-5 h-5 text-rose-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),h.jsx("h3",{className:"text-lg font-black text-rose-600",children:$.deleteAccount})]}),h.jsx("p",{className:"text-xs text-rose-600 font-bold mb-4",children:$.deleteAccountWarning}),h.jsx("button",{onClick:()=>P("DELETE"),className:"w-full bg-rose-600 text-white px-6 py-3 rounded-xl font-black text-sm hover:bg-rose-700 transition-all",children:$.deleteAccount})]})]}),h.jsx("div",{className:"lg:col-span-2",children:h.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border border-slate-200 shadow-lg space-y-8",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-black text-slate-900 mb-1",children:k?" ":"Account Settings"}),h.jsx("p",{className:"text-xs text-slate-400 font-bold",children:k?"   ":"Update your personal information"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-black text-slate-900 mb-1",children:k?" ":"Account Settings"}),h.jsx("p",{className:"text-xs text-slate-400 font-bold",children:k?"   ":"Update your personal information"})]}),E&&h.jsx("div",{className:"p-4 bg-rose-50 border border-rose-100 rounded-2xl text-rose-600 text-xs font-black",children:E}),_&&h.jsx("div",{className:"p-4 bg-emerald-50 border border-emerald-100 rounded-2xl text-emerald-600 text-xs font-black",children:_}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:$.displayName}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("input",{type:"text",value:i,onChange:ce=>o(ce.target.value),className:"flex-1 px-5 py-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:border-blue-500 font-bold"}),h.jsx("button",{onClick:M,disabled:v,className:"bg-blue-600 text-white px-6 py-3 rounded-xl font-black text-sm hover:bg-blue-700 transition-all disabled:opacity-50 whitespace-nowrap",children:$.saveChanges})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:$.email}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("input",{type:"email",value:s,onChange:ce=>a(ce.target.value),className:"flex-1 px-5 py-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:border-blue-500 font-bold"}),h.jsx("button",{onClick:()=>P("EMAIL"),disabled:v,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-black text-sm hover:bg-slate-800 transition-all whitespace-nowrap",children:k?"":"Update"})]})]}),h.jsxs("div",{className:"pt-6 border-t border-slate-100 space-y-4",children:[h.jsx("h3",{className:"text-lg font-black text-slate-900",children:$.changePassword}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:k?"  ":"Current Password"}),h.jsx("input",{type:"password",value:f,onChange:ce=>p(ce.target.value),className:"w-full px-5 py-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:border-blue-500 font-bold",placeholder:""})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:$.newPassword}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("input",{type:"password",value:c,onChange:ce=>u(ce.target.value),className:"flex-1 px-5 py-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:border-blue-500 font-bold",placeholder:""}),h.jsx("button",{onClick:()=>P("PASSWORD"),disabled:v||!c||!f,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-black text-sm hover:bg-slate-800 transition-all disabled:opacity-50 whitespace-nowrap",children:k?"":"Change"})]})]})]})]})]})]})})]}),j&&h.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-6 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:h.jsx("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] overflow-hidden shadow-2xl border border-slate-100 animate-in zoom-in duration-300",children:h.jsxs("form",{onSubmit:me,className:"p-10 space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:h.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),h.jsx("h3",{className:"text-xl font-black text-slate-900",children:$.reauthRequired}),h.jsx("p",{className:"text-xs text-slate-400 font-bold mt-2",children:k?"     ":"Please enter current password to confirm"})]}),h.jsx("input",{type:"password",required:!0,autoFocus:!0,value:f,onChange:ce=>p(ce.target.value),className:"w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:border-blue-500 font-bold text-center",placeholder:""}),h.jsxs("div",{className:"flex gap-3 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>F(!1),className:"flex-1 py-4 text-sm font-black text-slate-400 hover:bg-slate-50 rounded-xl transition-colors",children:k?"":"Cancel"}),h.jsx("button",{type:"submit",disabled:v||!f,className:"flex-1 bg-blue-600 text-white py-4 rounded-xl font-black text-sm hover:bg-blue-700 shadow-lg shadow-blue-100 disabled:opacity-50",children:v?"...":k?" ":"Confirm Action"})]})]})})})]})},bxe=({lang:t,user:e,onNavigateToAuth:n})=>{const[r,i]=I.useState([]),[o,s]=I.useState([]),[a,c]=I.useState([]),[u,f]=I.useState("all"),[p,v]=I.useState(null),[w,E]=I.useState(""),[S,_]=I.useState(!0),[N,j]=I.useState(!1),F=t==="ar";I.useEffect(()=>{q()},[]),I.useEffect(()=>{V()},[u,w,o]);const q=async()=>{_(!0);try{const[k,D]=await Promise.all([Ca(),xu()]);i(k),s(D),c(D)}catch(k){console.error("Error loading public library:",k)}finally{_(!1)}},V=async()=>{let k=o;if(u!=="all"&&(k=k.filter(D=>D.categoryId===u)),w.trim()){const D=w.toLowerCase();k=k.filter(O=>O.itemName.toLowerCase().includes(D)||O.query.toLowerCase().includes(D)||(F?O.categoryNameAr:O.categoryNameEn).toLowerCase().includes(D))}c(k)},$=async k=>{if(!e){j(!0);return}if(v(k),k.id)try{await K4(k.id)}catch(D){console.error("Error incrementing view count:",D)}};if(p){const k=F?p.dataAr||p.data:p.dataEn||p.data;return h.jsx("div",{className:"min-h-screen bg-slate-50 py-8 px-4",children:h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsxs("button",{onClick:()=>v(null),className:"mb-6 flex items-center gap-2 px-6 py-3 bg-white text-slate-700 rounded-2xl font-bold hover:bg-slate-100 transition-all shadow-lg",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),F?" ":"Back to Library"]}),h.jsxs("div",{className:"flex gap-2 mb-4",children:[p.dataAr&&h.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-3 py-1 rounded-full font-bold",children:[" ",F?" ":"Arabic Available"]}),p.dataEn&&h.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded-full font-bold",children:[" ",F?" ":"English Available"]})]}),h.jsx(qT,{data:k,lang:t})]})})}return S?h.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),h.jsx("p",{className:"text-slate-600 font-bold",children:F?" ...":"Loading..."})]})}):h.jsxs("div",{className:"min-h-screen bg-slate-50 py-12 px-4",dir:F?"rtl":"ltr",children:[h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h1",{className:"text-4xl font-black text-slate-900 mb-3",children:F?" ":"Analysis Library"}),h.jsx("p",{className:"text-sm text-slate-500 font-bold",children:F?`       ${o.length}  `:`Curated analyses from Tahleel Plus team  ${o.length} analyses available`})]}),h.jsx("div",{className:"rounded-3xl p-8 mb-8",children:h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",value:w,onChange:k=>E(k.target.value),placeholder:F?"  ...":"Search library...",className:"w-full px-6 py-4 bg-white border border-slate-200 rounded-2xl font-bold text-sm outline-none focus:border-blue-500 transition-all pr-12 shadow-sm"}),h.jsx("svg",{className:"w-5 h-5 text-slate-400 absolute top-1/2 -translate-y-1/2 end-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),r.length>0&&h.jsxs("div",{className:"flex flex-wrap gap-3 mb-8 justify-center",children:[h.jsx("button",{onClick:()=>f("all"),className:`px-6 py-3 rounded-2xl font-black text-sm transition-all ${u==="all"?"bg-blue-600 text-white shadow-lg":"bg-white text-slate-600 border border-slate-200 hover:border-blue-300"}`,children:F?"":"All"}),r.map(k=>h.jsx("button",{onClick:()=>f(k.id),className:`px-6 py-3 rounded-2xl font-black text-sm transition-all ${u===k.id?"bg-blue-600 text-white shadow-lg":"bg-white text-slate-600 border border-slate-200 hover:border-blue-300"}`,children:F?k.nameAr:k.nameEn},k.id))]}),a.length===0?h.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-xl p-12 text-center",children:[h.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("svg",{className:"w-10 h-10 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),h.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:F?"  ":"No Results"}),h.jsx("p",{className:"text-slate-500",children:F?"    ":"Try changing your search or filter"})]}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(k=>{var D;return h.jsxs("div",{onClick:()=>$(k),className:"bg-white rounded-[2rem] border border-slate-200 hover:border-blue-400 hover:shadow-xl transition-all cursor-pointer overflow-hidden group flex flex-col",style:{minHeight:"280px"},children:[h.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 px-6 py-4",children:h.jsx("span",{className:"text-white font-black text-xs uppercase tracking-wide",children:F?k.categoryNameAr:k.categoryNameEn})}),h.jsxs("div",{className:"p-8 flex flex-col flex-grow",children:[h.jsx("h3",{className:`text-xl font-black text-slate-900 group-hover:text-blue-600 transition-colors leading-relaxed mb-3 ${F?"text-right":"text-left"}`,children:k.itemName}),h.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[h.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-xs font-bold",children:k.query.match(/[\u0600-\u06FF]/)?" ":" English"}),k.region&&h.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-xs font-bold",children:((D=Pu.find(O=>O.code===k.region))==null?void 0:D[F?"nameAr":"nameEn"])||k.region})]}),h.jsx("p",{className:`text-sm text-slate-600 mb-4 line-clamp-2 leading-relaxed ${F?"text-right":"text-left"}`,children:k.query}),h.jsx("div",{className:"flex-grow"}),h.jsxs("div",{className:"flex items-center justify-between text-xs border-t border-slate-100 pt-4 mt-auto",children:[h.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[h.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),h.jsx("span",{className:"font-bold",children:k.views||0})]}),h.jsx("div",{className:"text-blue-600 font-bold group-hover:underline",children:F?"  ":"View Analysis "})]})]})]},k.id)})})]}),N&&h.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 relative",dir:F?"rtl":"ltr",children:[h.jsx("button",{onClick:()=>j(!1),className:"absolute top-4 end-4 w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-all",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),h.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),h.jsx("h3",{className:"text-2xl font-black text-slate-900 text-center mb-3",children:F?" ":"Registration Required"}),h.jsx("p",{className:"text-slate-600 text-center mb-6",children:F?"        ":"To access full analyses, please register on the site first"}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("button",{onClick:()=>{j(!1),n()},className:"w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-2xl font-bold hover:shadow-xl transition-all",children:F?" ":"Register Now"}),h.jsx("button",{onClick:()=>j(!1),className:"w-full px-6 py-4 bg-slate-100 text-slate-700 rounded-2xl font-bold hover:bg-slate-200 transition-all",children:F?"":"Cancel"})]})]})})]})},wxe=({isOpen:t,lang:e,guestSearchCount:n,onClose:r,onProceedWithSearch:i,onLoginRedirect:o})=>{if(!t)return null;const s=e==="ar",a=3-n,c={ar:"  ",en:"Unlock Search Engine"},u={ar:` ${a}       3`,en:`You have ${a} free searches remaining out of 3`},f={ar:"  ",en:"Use Free Trial"},p={ar:"  ",en:"Login for More"},v={ar:"",en:"Close"},w={ar:" :",en:"Subscription Benefits:"},E={ar:["   ","  ","  ","  "],en:["Unlimited searches","Save and organize analyses","Detailed & deep reports","Advanced technical support"]};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:`bg-white rounded-3xl shadow-2xl max-w-md w-full animate-in zoom-in duration-300 ${s?"text-right":"text-left"}`,children:[h.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-8 rounded-t-3xl",children:h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),h.jsx("h2",{className:"text-2xl font-black text-white",children:c[e]})]})}),h.jsxs("div",{className:"px-8 py-8 space-y-6",children:[h.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-6 space-y-3",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-black text-lg",children:a}),h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-bold text-blue-900",children:u[e]}),h.jsx("p",{className:"text-xs text-blue-700 mt-1",children:e==="ar"?"   ":"Free trials will soon expire"})]})]})}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("p",{className:"text-sm font-bold text-slate-900",children:w[e]}),h.jsx("ul",{className:"space-y-2",children:E[e].map((S,_)=>h.jsxs("li",{className:"flex items-start gap-3",children:[h.jsx("svg",{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),h.jsx("span",{className:"text-sm text-slate-700",children:S})]},_))})]})]}),h.jsxs("div",{className:"bg-slate-50 px-8 py-6 rounded-b-3xl space-y-3 border-t border-slate-100",children:[h.jsxs("button",{onClick:i,disabled:a<=0,className:`w-full px-6 py-3 rounded-2xl font-bold text-base transition-all flex items-center justify-center gap-2 ${a>0?"bg-blue-600 text-white hover:bg-blue-700 active:scale-95":"bg-slate-300 text-slate-600 cursor-not-allowed"}`,children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),f[e]]}),h.jsxs("button",{onClick:o,className:"w-full px-6 py-3 rounded-2xl font-bold text-base transition-all bg-slate-200 text-slate-900 hover:bg-slate-300 active:scale-95 flex items-center justify-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),p[e]]}),h.jsx("button",{onClick:r,className:"w-full px-6 py-2 rounded-2xl font-bold text-base transition-all text-slate-600 hover:text-slate-900 text-center",children:v[e]})]})]})})},_xe=({lang:t,user:e,profile:n,guestRegion:r="SA",onRegionChange:i})=>{const[o,s]=I.useState(!1),[a,c]=I.useState(!1),[u,f]=I.useState(null),p=t==="ar",v=u||(e?(n==null?void 0:n.region)||"SA":r),w=Pu.find(_=>_.code===v),E=p?(w==null?void 0:w.nameAr)||"  ":(w==null?void 0:w.nameEn)||"Saudi Arabia";I.useEffect(()=>{!o&&u||u||f(e?(n==null?void 0:n.region)||"SA":r)},[o,e,n==null?void 0:n.region,r]);const S=async _=>{if(f(_),e){c(!0);try{await Bw(e.uid,{region:_}),i==null||i(_),s(!1)}catch(N){console.error("Error updating region:",N),f(null)}finally{c(!1)}}else i==null||i(_),s(!1)};return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"sticky bottom-0 z-40 w-full flex justify-center py-4 bg-white/95 backdrop-blur border-t border-slate-200",children:h.jsxs("button",{onClick:()=>s(!o),className:"flex items-center gap-2 px-4 py-3 bg-blue-600 rounded-2xl border border-blue-700 transition-all font-bold text-sm relative text-white hover:bg-blue-700 ",dir:p?"rtl":"ltr",children:[!1,h.jsxs("div",{className:"relative z-10 flex items-center gap-2",children:[h.jsxs("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),h.jsx("span",{className:"text-white",children:E})]})]})}),o&&h.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 z-50 w-80 animate-in fade-in slide-in-from-bottom-2",children:h.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-lg",children:[h.jsx("div",{className:"px-4 py-3 border-b border-slate-100 bg-slate-50",children:h.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-wider",children:p?"  / ":"Select Region / Country"})}),h.jsx("div",{className:"max-h-96 overflow-y-auto pt-2",children:Pu.map(_=>h.jsxs("button",{onClick:()=>S(_.code),disabled:a,className:`w-full px-3 py-3 text-sm font-bold transition-all border-b border-slate-100 last:border-b-0 hover:bg-blue-50 flex items-center justify-between ${v===_.code?"bg-blue-50 text-blue-600 border-l-4 border-l-blue-600 pl-2":"text-slate-700 hover:text-blue-600"} disabled:opacity-50 cursor-pointer`,dir:p?"rtl":"ltr",type:"button",children:[h.jsx("span",{className:`flex-1 ${p?"text-right":"text-left"}`,children:p?_.nameAr:_.nameEn}),v===_.code&&h.jsx("svg",{className:`w-5 h-5 text-blue-600 flex-shrink-0 ${p?"mr-2":"ml-2"}`,fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},_.code))}),e&&h.jsx("div",{className:"px-4 py-3 bg-slate-50 border-t border-slate-100",children:h.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:p?"      ":"Search results will be optimized for your region"})})]})}),o&&h.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)})]})},Exe=({lang:t})=>{const e=t==="ar",n=[{icon:ixe,titleAr:"  ",titleEn:"Smart Search",descAr:"    ",descEn:"Advanced product & market search",color:"from-blue-600 to-blue-700"},{icon:Co,titleAr:" ",titleEn:"Trend Analysis",descAr:"   ",descEn:"Track market trends real-time",color:"from-emerald-600 to-emerald-700"},{icon:df,titleAr:" ",titleEn:"Competitor Analysis",descAr:"   ",descEn:"Complete competitive research",color:"from-orange-600 to-orange-700"},{icon:G0e,titleAr:" ",titleEn:"Detailed Reports",descAr:"   ",descEn:"Professional printable reports",color:"from-purple-600 to-purple-700"},{icon:ds,titleAr:" ",titleEn:"Price Analysis",descAr:"   ",descEn:"Comprehensive price comparison",color:"from-pink-600 to-pink-700"},{icon:pa,titleAr:" ",titleEn:"Lightning Fast",descAr:"    ",descEn:"Instant results in seconds",color:"from-amber-600 to-amber-700"},{icon:ru,titleAr:" ",titleEn:"Market Alerts",descAr:"   ",descEn:"Real-time market notifications",color:"from-red-600 to-red-700"},{icon:B_,titleAr:" ",titleEn:"AI Insights",descAr:"    ",descEn:"Smart AI-powered recommendations",color:"from-cyan-600 to-cyan-700"}];return h.jsx("div",{className:"w-full py-12 px-4",children:h.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-6 max-w-7xl mx-auto",children:n.map((r,i)=>{const o=r.icon;return h.jsx("div",{className:"group animate-in fade-in slide-in-from-bottom-4 hover:scale-105 transition-transform duration-300",style:{animationDelay:`${i*50}ms`},children:h.jsxs("div",{className:"flex flex-col items-center space-y-3 h-full",children:[h.jsxs("div",{className:`relative w-20 h-20 rounded-full bg-gradient-to-br ${r.color} shadow-lg hover:shadow-2xl transition-shadow duration-300 flex items-center justify-center group-hover:scale-110`,children:[h.jsx(o,{className:"w-10 h-10 text-white",strokeWidth:1.5}),h.jsx("div",{className:`absolute inset-0 rounded-full bg-gradient-to-br ${r.color} opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-300`})]}),h.jsx("div",{className:"text-center space-y-1",children:h.jsx("h3",{className:"font-black text-slate-900 text-sm md:text-base leading-tight",children:e?r.titleAr:r.titleEn})})]})},i)})})})},Li=3,Sxe=()=>{const[t,e]=I.useState("ar"),[n,r]=I.useState(null),[i,o]=I.useState(null),[s,a]=I.useState([]),[c,u]=I.useState(null),[f,p]=I.useState("HOME"),[v,w]=I.useState(!1),E=MD(),S=S$(),_=Ne=>Ne.startsWith("/pricing")?"PRICING":Ne.startsWith("/library")?"LIBRARY":Ne.startsWith("/analysis-library")?"PUBLIC_LIBRARY":Ne.startsWith("/auth")?"AUTH":Ne.startsWith("/profile")?"PROFILE":Ne.startsWith("/admin")?"ADMIN":"HOME",N=Ne=>{switch(Ne){case"PRICING":return"/pricing";case"LIBRARY":return"/library";case"PUBLIC_LIBRARY":return"/analysis-library";case"AUTH":return"/auth";case"PROFILE":return"/profile";case"ADMIN":return"/admin";default:return"/"}};I.useEffect(()=>{p(_(E.pathname))},[E.pathname]);const[j,F]=I.useState(()=>{const Ne=localStorage.getItem("guest_search_count");return Ne?parseInt(Ne):0}),[q,V]=I.useState(()=>localStorage.getItem("guest_region")||"SA"),[$,k]=I.useState(!1),[D,O]=I.useState(!1),[z,U]=I.useState(!1),[M,P]=I.useState(""),[me,ce]=I.useState(""),[ge,xe]=I.useState(!1),[le,ne]=I.useState(0),[de,Y]=I.useState(!0),[ie,fe]=I.useState(null),[_e,$e]=I.useState(null),[Ge,Ue]=I.useState(!1),ze=qu[t],H=t==="ar";I.useEffect(()=>{let Ne;return ge&&(ne(0),Ne=setInterval(()=>{ne(be=>be<ux[t].length-1?be+1:be)},4e3)),()=>clearInterval(Ne)},[ge,t]),I.useEffect(()=>{localStorage.setItem("guest_search_count",j.toString())},[j]);const oe=async(Ne,be)=>{try{const De=await Tte(Ne,be);return o(De),De}catch(De){return console.error("Profile Refresh Error:",De),null}},ve=async()=>{const[Ne,be]=await Promise.all([Av(),V4()]);if(a(Ne),u(be),be){const De=t==="ar"?be.siteNameAr:be.siteNameEn;De&&(document.title=De);const Je=t==="ar"?be.siteDescriptionAr:be.siteDescriptionEn;if(Je){let G=document.querySelector('meta[name="description"]');G||(G=document.createElement("meta"),G.name="description",document.head.appendChild(G)),G.setAttribute("content",Je)}const dt=t==="ar"?be.siteKeywordsAr:be.siteKeywordsEn;if(dt){let G=document.querySelector('meta[name="keywords"]');G||(G=document.createElement("meta"),G.name="keywords",document.head.appendChild(G)),G.setAttribute("content",dt)}if(be.siteFavicon){let G=document.querySelector("link[rel~='icon']");G||(G=document.createElement("link"),G.rel="icon",document.getElementsByTagName("head")[0].appendChild(G)),G.href=be.siteFavicon}}};I.useEffect(()=>{document.documentElement.lang=H?"ar":"en",document.documentElement.dir=H?"rtl":"ltr",ve()},[t,f]),I.useEffect(()=>{let Ne=document.querySelector("link[rel='canonical']");Ne||(Ne=document.createElement("link"),Ne.rel="canonical",document.head.appendChild(Ne)),Ne.href=`${window.location.origin}${window.location.pathname}`},[E.pathname]),I.useEffect(()=>{const Ne=Jz(Pn,async be=>{be?(r(be),await Ote(be.uid)&&(w(!0),setTimeout(()=>w(!1),8e3)),await oe(be.uid,be.email),f==="AUTH"&&p("HOME"),$e(null),k(!1)):(r(null),o(null)),Y(!1)});return()=>Ne()},[f]);const ae=()=>{P(""),fe(null),$e(null),xe(!1),p("HOME"),S("/")},Xe=()=>{S("/auth")},Be=async Ne=>{if(Ne&&Ne.preventDefault(),!!M.trim()){if(!n){k(!0);return}if((i==null?void 0:i.plan)==="FREE"&&((i==null?void 0:i.searchCount)||0)>=Li){k(!0);return}xe(!0),$e(null),fe(null),ce(M);try{const be=c==null?void 0:c.geminiApiKey,De=c==null?void 0:c.googleSearchApiKey,Je=c==null?void 0:c.googleSearchId,dt=(i==null?void 0:i.region)||"SA",G=await _te(M,t,be,De,Je,dt);fe(G),n&&(await Mte(n.uid),await oe(n.uid,n.email))}catch(be){$e(be.message||"   .")}finally{xe(!1)}}};if(de)return h.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50",children:[h.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mb-4"}),h.jsx("p",{className:"text-slate-400 font-bold animate-pulse",children:"  ..."})]});const He=(t==="ar"?c==null?void 0:c.siteNameAr:c==null?void 0:c.siteNameEn)||ze.title,Ye=(()=>{switch(f){case"PRICING":return{title:t==="ar"?"  -  ":"Pricing Plans - Tahleel Plus",description:t==="ar"?"            ":"Choose your perfect plan from Tahleel Plus packages for global market analysis with advanced AI"};case"LIBRARY":return{title:t==="ar"?" -  ":"My Library - Tahleel Plus",description:t==="ar"?"       ":"Access all your saved analyses in one place"};case"PUBLIC_LIBRARY":return{title:t==="ar"?"  -  ":"Analysis Library - Tahleel Plus",description:t==="ar"?"           ":"Explore curated market analyses from Tahleel Plus team for various products and services"};case"AUTH":return{title:t==="ar"?"  -  ":"Login - Tahleel Plus",description:t==="ar"?"       ":"Login to start your global market analysis journey"};case"PROFILE":return{title:t==="ar"?"  -  ":"My Profile - Tahleel Plus",description:t==="ar"?"    ":"Manage your account, plan and personal information"};case"ADMIN":return{title:t==="ar"?"  -  ":"Admin Panel - Tahleel Plus",description:t==="ar"?"    ":"Complete control panel for system management"};default:return{title:t==="ar"?"  -     ":"Tahleel Plus - AI-Powered Market Analysis Engine",description:t==="ar"?"             ":"Discover e-commerce opportunities across global markets with comprehensive AI-powered analysis"}}})();return h.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-50 font-['Cairo']",dir:H?"rtl":"ltr",children:[h.jsxs(aB,{children:[h.jsx("html",{lang:t==="ar"?"ar":"en",dir:H?"rtl":"ltr"}),h.jsx("title",{children:Ye.title}),h.jsx("meta",{name:"description",content:Ye.description}),h.jsx("meta",{property:"og:title",content:Ye.title}),h.jsx("meta",{property:"og:description",content:Ye.description}),h.jsx("meta",{name:"twitter:title",content:Ye.title}),h.jsx("meta",{name:"twitter:description",content:Ye.description})]}),h.jsxs("nav",{className:"sticky top-0 z-50 bg-white/90 backdrop-blur-xl border-b border-slate-200 px-6 py-4 shadow-sm",children:[h.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("button",{onClick:ae,className:"flex items-center gap-3 group",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-200 group-hover:rotate-6 transition-all overflow-hidden text-white",children:c!=null&&c.siteLogo?h.jsx("img",{src:c.siteLogo,alt:t==="ar"?" ":"Site Logo",className:"w-full h-full object-cover",loading:"lazy"}):h.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-label":t==="ar"?" ":"Search Icon",children:h.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),h.jsxs("div",{className:"text-right",children:[h.jsx("h1",{className:"text-xl font-black text-slate-900 leading-none",children:He}),h.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5",children:H?"   ":"Data-Driven Decisions"})]})]}),h.jsxs("button",{onClick:()=>{p("PRICING"),S("/pricing")},className:`hidden md:flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-black transition-all ${f==="PRICING"?"text-blue-600 bg-blue-50":"text-slate-500 hover:text-blue-600 hover:bg-blue-50/50"}`,children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-label":t==="ar"?" ":"Pricing Icon",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.1,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),ze.pricingTitle]}),h.jsxs("button",{onClick:()=>{p("PUBLIC_LIBRARY"),S("/analysis-library")},className:`hidden md:flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-black transition-all ${f==="PUBLIC_LIBRARY"?"text-blue-600 bg-blue-50":"text-slate-500 hover:text-blue-600 hover:bg-blue-50/50"}`,children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-label":t==="ar"?"  ":"Analysis Library Icon",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.1,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})}),H?" ":"Analysis Library"]}),n&&i&&h.jsxs("button",{onClick:()=>{p("LIBRARY"),S("/library")},className:`hidden md:flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-black transition-all ${f==="LIBRARY"?"text-blue-600 bg-blue-50":"text-slate-500 hover:text-blue-600 hover:bg-blue-50/50"}`,children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-label":t==="ar"?" ":"Library Icon",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.1,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),H?"":"My Library"]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[!n&&h.jsx("div",{className:"flex items-center gap-2 px-3 py-1 bg-rose-50 border border-rose-100 rounded-lg",children:h.jsx("span",{className:"text-[10px] font-black text-rose-600 uppercase tracking-tight",children:H?"  ":"Login to Search"})}),n&&i&&i.plan==="FREE"&&h.jsx("div",{className:"flex items-center gap-2 px-3 py-1 bg-amber-50 border border-amber-100 rounded-lg",children:h.jsx("span",{className:"text-[10px] font-black text-amber-600 uppercase tracking-tight",children:H?` : ${Math.max(0,Li-(i.searchCount||0))}`:`Trials Left: ${Math.max(0,Li-(i.searchCount||0))}`})}),n&&i?h.jsx(vxe,{profile:i,lang:t,plans:s,onNavigate:Ne=>{p(Ne),S(N(Ne))},onLogout:()=>GC(Pn)}):h.jsx("button",{onClick:()=>{p("AUTH"),S("/auth")},className:"bg-slate-900 text-white px-6 py-2.5 rounded-xl text-sm font-black hover:bg-blue-600 transition-all shadow-lg shadow-slate-200",children:ze.login}),h.jsx(Lte,{current:t,onToggle:e})]}),h.jsx("button",{onClick:()=>U(!z),className:"md:hidden w-10 h-10 flex items-center justify-center text-slate-600 hover:text-blue-600 transition-colors","aria-label":"Menu",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),z&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed top-[73px] inset-x-0 bottom-0 bg-black/20 backdrop-blur-sm z-40 md:hidden",onClick:()=>U(!1)}),h.jsx("div",{className:"fixed top-[73px] end-0 w-72 bg-white border-s border-slate-200 shadow-2xl z-50 md:hidden max-h-[calc(100vh-73px)] overflow-y-auto rounded-es-3xl",children:h.jsxs("div",{className:"px-4 py-2 space-y-1",children:[h.jsx("button",{onClick:()=>{p("PRICING"),S("/pricing"),U(!1)},className:`w-full text-right px-4 py-2.5 rounded-xl text-sm font-black transition-all ${f==="PRICING"?"text-blue-600 bg-blue-50":"text-slate-600 hover:bg-slate-50"}`,children:ze.pricingTitle}),h.jsx("button",{onClick:()=>{p("PUBLIC_LIBRARY"),S("/analysis-library"),U(!1)},className:`w-full text-right px-4 py-2.5 rounded-xl text-sm font-black transition-all ${f==="PUBLIC_LIBRARY"?"text-blue-600 bg-blue-50":"text-slate-600 hover:bg-slate-50"}`,children:H?" ":"Analysis Library"}),n&&i&&h.jsx("button",{onClick:()=>{p("LIBRARY"),S("/library"),U(!1)},className:`w-full text-right px-4 py-2.5 rounded-xl text-sm font-black transition-all ${f==="LIBRARY"?"text-blue-600 bg-blue-50":"text-slate-600 hover:bg-slate-50"}`,children:H?"":"My Library"}),n&&i?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>{p("PROFILE"),S("/profile"),U(!1)},className:`w-full text-right px-4 py-2.5 rounded-xl text-sm font-black transition-all ${f==="PROFILE"?"text-blue-600 bg-blue-50":"text-slate-600 hover:bg-slate-50"}`,children:H?" ":"Profile"}),i.isAdmin&&h.jsx("button",{onClick:()=>{p("ADMIN"),S("/admin"),U(!1)},className:`w-full text-right px-4 py-2.5 rounded-xl text-sm font-black transition-all ${f==="ADMIN"?"text-blue-600 bg-blue-50":"text-slate-600 hover:bg-slate-50"}`,children:H?" ":"Admin Panel"}),h.jsx("button",{onClick:()=>{GC(Pn),U(!1)},className:"w-full text-right px-4 py-2.5 rounded-xl text-sm font-black text-rose-600 hover:bg-rose-50 transition-all",children:H?" ":"Logout"})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"px-4 py-2 bg-rose-50 border border-rose-100 rounded-lg",children:h.jsx("span",{className:"text-xs font-black text-rose-600",children:H?"  ":"Login to Search"})}),h.jsx("button",{onClick:()=>{p("AUTH"),S("/auth"),U(!1)},className:"w-full bg-slate-900 text-white px-6 py-2.5 rounded-xl text-sm font-black hover:bg-blue-600 transition-all",children:ze.login})]}),h.jsxs("button",{onClick:()=>{e(t==="ar"?"en":"ar")},className:"w-full text-right px-4 py-2.5 rounded-xl text-sm font-black text-slate-600 hover:bg-slate-50 transition-all flex items-center gap-2",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),t==="ar"?"English":""]})]})})]})]}),h.jsxs("main",{className:"flex-grow max-w-7xl mx-auto w-full px-6 py-12",children:[v&&h.jsx("div",{className:"max-w-4xl mx-auto mb-8 p-6 bg-emerald-50 border border-emerald-200 rounded-xl text-emerald-800 shadow-sm",children:H?"   !":"Package Activated Successfully!"}),f==="ADMIN"&&n&&h.jsx(gxe,{lang:t}),f==="PRICING"&&h.jsx(mxe,{lang:t,onSelect:Ne=>{!n&&Ne!=="FREE"?(p("AUTH"),S("/auth")):(p("HOME"),S("/"))}}),f==="LIBRARY"&&n&&h.jsx(yxe,{lang:t}),f==="PUBLIC_LIBRARY"&&h.jsx(bxe,{lang:t,user:n,onNavigateToAuth:()=>{p("AUTH"),S("/auth")}}),f==="PROFILE"&&n&&i&&h.jsx(xxe,{profile:i,plans:s,lang:t,onRefresh:()=>oe(n.uid,n.email)}),f==="AUTH"&&!n&&h.jsx("div",{className:"py-12",children:h.jsx(pxe,{lang:t})}),f==="HOME"&&h.jsxs(h.Fragment,{children:[!ie&&!ge&&h.jsxs("div",{className:"text-center mb-3 animate-in fade-in slide-in-from-top-4 duration-1000",children:[h.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-600 rounded-full text-xs font-black mb-1.5 border border-blue-100 shadow-sm",children:[h.jsxs("span",{className:"relative flex h-2 w-2",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-blue-600"})]}),ze.liveBadge]}),h.jsx("p",{className:"text-sm md:text-base text-slate-500 max-w-2xl mx-auto font-medium",children:ze.subtitle})]}),h.jsxs("div",{className:`transition-all duration-700 ${ie||ge?"mb-8":"mb-6"}`,children:[_e&&h.jsx("div",{className:"max-w-4xl mx-auto mb-8 p-8 bg-rose-50 border border-rose-200 rounded-[2.5rem] text-rose-700 shadow-xl animate-in zoom-in duration-300",children:h.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[h.jsx("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center text-rose-600",children:h.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-label":t==="ar"?" ":"Warning Icon",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),h.jsx("div",{children:h.jsx("p",{className:"text-lg font-black mb-4",children:_e})})]})}),h.jsx("form",{onSubmit:Be,className:`max-w-6xl mx-auto ${n?(i==null?void 0:i.plan)==="FREE"&&((i==null?void 0:i.searchCount)||0)>=Li?"opacity-50 grayscale select-none cursor-not-allowed":"":"opacity-50 grayscale select-none cursor-not-allowed"}`,children:h.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[h.jsxs("div",{className:"flex-1 relative",children:[h.jsx("div",{className:`absolute top-1/2 -translate-y-1/2 ${H?"right-5":"left-5"} text-blue-600 pointer-events-none`,children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-label":t==="ar"?" ":"Search Icon",children:h.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),h.jsx("input",{type:"text",disabled:!n||(i==null?void 0:i.plan)==="FREE"&&((i==null?void 0:i.searchCount)||0)>=Li,value:M,onChange:Ne=>P(Ne.target.value),placeholder:n?(i==null?void 0:i.plan)==="FREE"&&((i==null?void 0:i.searchCount)||0)>=Li?H?" ..  ":"Trials ended.. subscribe to continue":ze.searchPlaceholder:H?"  ...":"Login to search...",className:`w-full ${H?"pr-14 pl-5":"pl-14 pr-5"} py-4 bg-white border border-slate-200 rounded-2xl outline-none text-base text-slate-900 placeholder:text-slate-400 font-bold disabled:cursor-not-allowed shadow-sm transition-all hover:border-blue-300 hover:shadow-md focus:border-blue-500 focus:shadow-lg`})]}),h.jsx("button",{type:!n||(i==null?void 0:i.plan)==="FREE"&&((i==null?void 0:i.searchCount)||0)>=Li?"button":"submit",onClick:n?(i==null?void 0:i.plan)==="FREE"&&((i==null?void 0:i.searchCount)||0)>=Li?()=>{p("PRICING"),S("/pricing")}:void 0:Xe,className:`px-8 md:px-10 py-4 rounded-2xl font-black text-base transition-all shadow-sm flex items-center justify-center gap-2 md:min-w-[200px]
                      ${n?(i==null?void 0:i.plan)==="FREE"&&((i==null?void 0:i.searchCount)||0)>=Li?"bg-amber-500 text-white cursor-pointer hover:bg-amber-600":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-md active:scale-95":"bg-emerald-600 text-white cursor-pointer hover:bg-emerald-700"}
                      ${ge?"opacity-50":""}
                    `,children:ge?h.jsx("div",{className:"w-5 h-5 border-3 border-white/30 border-t-white rounded-full animate-spin"}):h.jsxs(h.Fragment,{children:[!n&&h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-label":t==="ar"?" ":"Login Icon",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),(i==null?void 0:i.plan)==="FREE"&&((i==null?void 0:i.searchCount)||0)>=Li&&h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-label":t==="ar"?" ":"Upgrade Icon",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),n?(i==null?void 0:i.plan)==="FREE"&&((i==null?void 0:i.searchCount)||0)>=Li?H?" ":"Subscribe":ze.searchBtn:H?" ":"Login"]})})]})}),h.jsx("div",{className:"max-w-6xl mx-auto mt-3 px-4",children:h.jsx("div",{className:"p-3 bg-blue-50/50 border border-blue-100 rounded-xl text-center",children:h.jsx("p",{className:"text-xs text-blue-700 leading-relaxed",children:H?h.jsxs(h.Fragment,{children:["  ",h.jsx("span",{className:"font-bold",children:"  "})," ",h.jsx("span",{className:"font-bold",children:"  "})," ",h.jsx("span",{className:"font-bold",children:"  "}),"   "]}):h.jsxs(h.Fragment,{children:["Search by ",h.jsx("span",{className:"font-bold",children:"product name"}),", ",h.jsx("span",{className:"font-bold",children:"product link"}),", or ",h.jsx("span",{className:"font-bold",children:"store link"})," for accurate results"]})})})}),!ge&&!ie&&h.jsx("div",{className:"max-w-6xl mx-auto mt-12",children:h.jsx(Exe,{lang:t})})]}),ge&&h.jsxs("div",{className:"text-center py-20 animate-in fade-in duration-500",children:[h.jsxs("div",{className:"relative w-48 h-48 mx-auto mb-10 flex items-center justify-center",children:[h.jsx("div",{className:"absolute w-40 h-40 rounded-full border-2 border-dashed border-blue-200 animate-[spin_8s_linear_infinite]"}),h.jsx("div",{className:"absolute w-32 h-32 rounded-full border-2 border-dashed border-blue-300 animate-[spin_6s_linear_infinite_reverse]"}),h.jsx("div",{className:"absolute w-24 h-24 rounded-full border-2 border-blue-400 animate-[spin_4s_linear_infinite]"}),h.jsx("div",{className:"absolute w-40 h-40 animate-[spin_3s_linear_infinite]",children:h.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-3 h-3 bg-blue-500 rounded-full shadow-lg shadow-blue-500/50"})}),h.jsx("div",{className:"absolute w-32 h-32 animate-[spin_2.5s_linear_infinite_reverse]",children:h.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-2.5 h-2.5 bg-cyan-400 rounded-full shadow-lg shadow-cyan-400/50"})}),h.jsx("div",{className:"absolute w-24 h-24 animate-[spin_2s_linear_infinite]",children:h.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-2 h-2 bg-indigo-500 rounded-full shadow-lg shadow-indigo-500/50"})}),h.jsx("div",{className:"relative z-10",children:h.jsx("svg",{className:"w-10 h-10 text-blue-600 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.989-2.386l-.548-.547z"})})})]}),h.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[h.jsx("p",{className:"text-2xl font-black text-slate-900 transition-all duration-500 h-16 flex items-center justify-center",children:ux[t][le]}),h.jsx("div",{className:"w-full h-2 bg-slate-100 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-1000 ease-out shadow-[0_0_10px_rgba(37,99,235,0.4)]",style:{width:`${(le+1)/ux[t].length*100}%`}})}),h.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest animate-pulse",children:H?"    10-15 ":"Deep search may take 10-15 seconds"})]})]}),ie&&h.jsx(qT,{data:ie,lang:t,queryStr:me,apiKey:c==null?void 0:c.geminiApiKey,userId:n==null?void 0:n.uid,region:n?(i==null?void 0:i.region)||"SA":q})]})]}),h.jsx(wxe,{isOpen:D,lang:t,guestSearchCount:j,onClose:()=>O(!1),onProceedWithSearch:()=>{O(!1),Be()},onLoginRedirect:()=>{O(!1),p("AUTH"),S("/auth")}}),h.jsx(_xe,{lang:t,user:n,profile:i,guestRegion:q,onRegionChange:Ne=>{n?oe(n.uid,n.email):(V(Ne),localStorage.setItem("guest_region",Ne))}}),h.jsx("footer",{className:"w-full py-6 bg-white border-t border-slate-100 text-center text-slate-400 text-xs font-bold",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[h.jsx("p",{className:"text-[10px] mb-2 leading-relaxed",children:H?"                            ":"Market Analysis  Artificial Intelligence  Product Analysis  Customer Intelligence  Competitor Research  Opportunity Discovery  Growth Forecasting  Profit Analysis  Marketing Strategy  Sales Analytics"}),h.jsxs("p",{children:[He,"  ",H?"  ":"All rights reserved","  2026 | info@tahlilplus.net"]})]})})]})},qU=document.getElementById("root");if(!qU)throw new Error("Could not find root element to mount to");const Txe=l$.createRoot(qU);Txe.render(h.jsx(Vi.StrictMode,{children:h.jsx(zD,{children:h.jsx(D$,{basename:"/",children:h.jsx(Sxe,{})})})}));
